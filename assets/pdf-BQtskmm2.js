var Kr=Object.defineProperty;var pr=t=>{throw TypeError(t)};var Yr=(t,e,n)=>e in t?Kr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ye=(t,e,n)=>Yr(t,typeof e!="symbol"?e+"":e,n),Ft=(t,e,n)=>e.has(t)||pr("Cannot "+n);var w=(t,e,n)=>(Ft(t,e,"read from private field"),n?n.call(t):e.get(t)),Ee=(t,e,n)=>e.has(t)?pr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Re=(t,e,n,r)=>(Ft(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ve=(t,e,n)=>(Ft(t,e,"access private method"),n);var ut=(t,e,n,r)=>({set _(h){Re(t,e,h,n)},get _(){return w(t,e,r)}});import{g as getAugmentedNamespace,c as commonjsGlobal,a as getDefaultExportFromCjs,p as process$1,r as requireDist,B as Buffer,b as commonjsRequire}from"./index-Cn4m4XXr.js";function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const h in r)if(h!=="default"&&!(h in t)){const y=Object.getOwnPropertyDescriptor(r,h);y&&Object.defineProperty(t,h,y.get?y:{enumerable:!0,get:()=>r[h]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var pdf$1={exports:{}},empty=null;const empty$1=Object.freeze(Object.defineProperty({__proto__:null,default:empty},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(empty$1),__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(__viteBrowserExternal$1);var punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */punycode$1.exports;(function(t,e){(function(n){var r=e&&!e.nodeType&&e,h=t&&!t.nodeType&&t,y=typeof commonjsGlobal=="object"&&commonjsGlobal;(y.global===y||y.window===y||y.self===y)&&(n=y);var _,k=2147483647,g=36,m=1,a=26,S=38,A=700,M=72,F=128,q="-",T=/^xn--/,o=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=g-m,l=Math.floor,v=String.fromCharCode,c;function P(W){throw new RangeError(x[W])}function R(W,ne){for(var j=W.length,s=[];j--;)s[j]=ne(W[j]);return s}function X(W,ne){var j=W.split("@"),s="";j.length>1&&(s=j[0]+"@",W=j[1]),W=W.replace(u,".");var i=W.split("."),p=R(i,ne).join(".");return s+p}function D(W){for(var ne=[],j=0,s=W.length,i,p;j<s;)i=W.charCodeAt(j++),i>=55296&&i<=56319&&j<s?(p=W.charCodeAt(j++),(p&64512)==56320?ne.push(((i&1023)<<10)+(p&1023)+65536):(ne.push(i),j--)):ne.push(i);return ne}function E(W){return R(W,function(ne){var j="";return ne>65535&&(ne-=65536,j+=v(ne>>>10&1023|55296),ne=56320|ne&1023),j+=v(ne),j}).join("")}function B(W){return W-48<10?W-22:W-65<26?W-65:W-97<26?W-97:g}function oe(W,ne){return W+22+75*(W<26)-((ne!=0)<<5)}function ae(W,ne,j){var s=0;for(W=j?l(W/A):W>>1,W+=l(W/ne);W>b*a>>1;s+=g)W=l(W/b);return l(s+(b+1)*W/(W+S))}function ue(W){var ne=[],j=W.length,s,i=0,p=F,f=M,C,I,z,Q,L,N,se,ge,Ae;for(C=W.lastIndexOf(q),C<0&&(C=0),I=0;I<C;++I)W.charCodeAt(I)>=128&&P("not-basic"),ne.push(W.charCodeAt(I));for(z=C>0?C+1:0;z<j;){for(Q=i,L=1,N=g;z>=j&&P("invalid-input"),se=B(W.charCodeAt(z++)),(se>=g||se>l((k-i)/L))&&P("overflow"),i+=se*L,ge=N<=f?m:N>=f+a?a:N-f,!(se<ge);N+=g)Ae=g-ge,L>l(k/Ae)&&P("overflow"),L*=Ae;s=ne.length+1,f=ae(i-Q,s,Q==0),l(i/s)>k-p&&P("overflow"),p+=l(i/s),i%=s,ne.splice(i++,0,p)}return E(ne)}function re(W){var ne,j,s,i,p,f,C,I,z,Q,L,N=[],se,ge,Ae,he;for(W=D(W),se=W.length,ne=F,j=0,p=M,f=0;f<se;++f)L=W[f],L<128&&N.push(v(L));for(s=i=N.length,i&&N.push(q);s<se;){for(C=k,f=0;f<se;++f)L=W[f],L>=ne&&L<C&&(C=L);for(ge=s+1,C-ne>l((k-j)/ge)&&P("overflow"),j+=(C-ne)*ge,ne=C,f=0;f<se;++f)if(L=W[f],L<ne&&++j>k&&P("overflow"),L==ne){for(I=j,z=g;Q=z<=p?m:z>=p+a?a:z-p,!(I<Q);z+=g)he=I-Q,Ae=g-Q,N.push(v(oe(Q+he%Ae,0))),I=l(he/Ae);N.push(v(oe(I,0))),p=ae(j,ge,s==i),j=0,++s}++j,++ne}return N.join("")}function pe(W){return X(W,function(ne){return T.test(ne)?ue(ne.slice(4).toLowerCase()):ne})}function H(W){return X(W,function(ne){return o.test(ne)?"xn--"+re(ne):ne})}if(_={version:"1.4.1",ucs2:{decode:D,encode:E},decode:ue,encode:re,toASCII:H,toUnicode:pe},r&&h)if(t.exports==r)h.exports=_;else for(c in _)_.hasOwnProperty(c)&&(r[c]=_[c]);else n.punycode=_})(commonjsGlobal)})(punycode$1,punycode$1.exports);var punycodeExports=punycode$1.exports;const require$$0=getDefaultExportFromCjs(punycodeExports);var type=TypeError,hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||!0)?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function addNumericSeparator(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||$test.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-$floor(-t):$floor(t);if(r!==t){var h=String(r),y=$slice.call(e,h.length+1);return $replace.call(h,n,"$&_")+"."+$replace.call($replace.call(y,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(e,n,"$&_")}var utilInspect=require$$1$1,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,quotes={__proto__:null,double:'"',single:"'"},quoteREs={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},objectInspect=function t(e,n,r,h){var y=n||{};if(has$3(y,"quoteStyle")&&!has$3(quotes,y.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(y,"maxStringLength")&&(typeof y.maxStringLength=="number"?y.maxStringLength<0&&y.maxStringLength!==1/0:y.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var _=has$3(y,"customInspect")?y.customInspect:!0;if(typeof _!="boolean"&&_!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(y,"indent")&&y.indent!==null&&y.indent!=="	"&&!(parseInt(y.indent,10)===y.indent&&y.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(y,"numericSeparator")&&typeof y.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var k=y.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return inspectString(e,y);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var g=String(e);return k?addNumericSeparator(e,g):g}if(typeof e=="bigint"){var m=String(e)+"n";return k?addNumericSeparator(e,m):m}var a=typeof y.depth>"u"?5:y.depth;if(typeof r>"u"&&(r=0),r>=a&&a>0&&typeof e=="object")return isArray$3(e)?"[Array]":"[Object]";var S=getIndent(y,r);if(typeof h>"u")h=[];else if(indexOf(h,e)>=0)return"[Circular]";function A(B,oe,ae){if(oe&&(h=$arrSlice.call(h),h.push(oe)),ae){var ue={depth:y.depth};return has$3(y,"quoteStyle")&&(ue.quoteStyle=y.quoteStyle),t(B,ue,r+1,h)}return t(B,y,r+1,h)}if(typeof e=="function"&&!isRegExp$1(e)){var M=nameOf(e),F=arrObjKeys(e,A);return"[Function"+(M?": "+M:" (anonymous)")+"]"+(F.length>0?" { "+$join.call(F,", ")+" }":"")}if(isSymbol(e)){var q=hasShammedSymbols?$replace.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(e);return typeof e=="object"&&!hasShammedSymbols?markBoxed(q):q}if(isElement(e)){for(var T="<"+$toLowerCase.call(String(e.nodeName)),o=e.attributes||[],u=0;u<o.length;u++)T+=" "+o[u].name+"="+wrapQuotes(quote(o[u].value),"double",y);return T+=">",e.childNodes&&e.childNodes.length&&(T+="..."),T+="</"+$toLowerCase.call(String(e.nodeName))+">",T}if(isArray$3(e)){if(e.length===0)return"[]";var x=arrObjKeys(e,A);return S&&!singleLineValues(x)?"["+indentedJoin(x,S)+"]":"[ "+$join.call(x,", ")+" ]"}if(isError(e)){var b=arrObjKeys(e,A);return!("cause"in Error.prototype)&&"cause"in e&&!isEnumerable.call(e,"cause")?"{ ["+String(e)+"] "+$join.call($concat.call("[cause]: "+A(e.cause),b),", ")+" }":b.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+$join.call(b,", ")+" }"}if(typeof e=="object"&&_){if(inspectSymbol&&typeof e[inspectSymbol]=="function"&&utilInspect)return utilInspect(e,{depth:a-r});if(_!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(isMap(e)){var l=[];return mapForEach&&mapForEach.call(e,function(B,oe){l.push(A(oe,e,!0)+" => "+A(B,e))}),collectionOf("Map",mapSize.call(e),l,S)}if(isSet(e)){var v=[];return setForEach&&setForEach.call(e,function(B){v.push(A(B,e))}),collectionOf("Set",setSize.call(e),v,S)}if(isWeakMap(e))return weakCollectionOf("WeakMap");if(isWeakSet(e))return weakCollectionOf("WeakSet");if(isWeakRef(e))return weakCollectionOf("WeakRef");if(isNumber(e))return markBoxed(A(Number(e)));if(isBigInt(e))return markBoxed(A(bigIntValueOf.call(e)));if(isBoolean(e))return markBoxed(booleanValueOf.call(e));if(isString(e))return markBoxed(A(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof commonjsGlobal<"u"&&e===commonjsGlobal)return"{ [object globalThis] }";if(!isDate(e)&&!isRegExp$1(e)){var c=arrObjKeys(e,A),P=gPO?gPO(e)===Object.prototype:e instanceof Object||e.constructor===Object,R=e instanceof Object?"":"null prototype",X=!P&&toStringTag&&Object(e)===e&&toStringTag in e?$slice.call(toStr(e),8,-1):R?"Object":"",D=P||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",E=D+(X||R?"["+$join.call($concat.call([],X||[],R||[]),": ")+"] ":"");return c.length===0?E+"{}":S?E+"{"+indentedJoin(c,S)+"}":E+"{ "+$join.call(c,", ")+" }"}return String(e)};function wrapQuotes(t,e,n){var r=n.quoteStyle||e,h=quotes[r];return h+t+h}function quote(t){return $replace.call(String(t),/"/g,"&quot;")}function canTrustToString(t){return!toStringTag||!(typeof t=="object"&&(toStringTag in t||typeof t[toStringTag]<"u"))}function isArray$3(t){return toStr(t)==="[object Array]"&&canTrustToString(t)}function isDate(t){return toStr(t)==="[object Date]"&&canTrustToString(t)}function isRegExp$1(t){return toStr(t)==="[object RegExp]"&&canTrustToString(t)}function isError(t){return toStr(t)==="[object Error]"&&canTrustToString(t)}function isString(t){return toStr(t)==="[object String]"&&canTrustToString(t)}function isNumber(t){return toStr(t)==="[object Number]"&&canTrustToString(t)}function isBoolean(t){return toStr(t)==="[object Boolean]"&&canTrustToString(t)}function isSymbol(t){if(hasShammedSymbols)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!symToString)return!1;try{return symToString.call(t),!0}catch{}return!1}function isBigInt(t){if(!t||typeof t!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(t),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(t){return t in this};function has$3(t,e){return hasOwn.call(t,e)}function toStr(t){return objectToString.call(t)}function nameOf(t){if(t.name)return t.name;var e=$match.call(functionToString.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function indexOf(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function isMap(t){if(!mapSize||!t||typeof t!="object")return!1;try{mapSize.call(t);try{setSize.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function isWeakMap(t){if(!weakMapHas||!t||typeof t!="object")return!1;try{weakMapHas.call(t,weakMapHas);try{weakSetHas.call(t,weakSetHas)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function isWeakRef(t){if(!weakRefDeref||!t||typeof t!="object")return!1;try{return weakRefDeref.call(t),!0}catch{}return!1}function isSet(t){if(!setSize||!t||typeof t!="object")return!1;try{setSize.call(t);try{mapSize.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function isWeakSet(t){if(!weakSetHas||!t||typeof t!="object")return!1;try{weakSetHas.call(t,weakSetHas);try{weakMapHas.call(t,weakMapHas)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function isElement(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function inspectString(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return inspectString($slice.call(t,0,e.maxStringLength),e)+r}var h=quoteREs[e.quoteStyle||"single"];h.lastIndex=0;var y=$replace.call($replace.call(t,h,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(y,"single",e)}function lowbyte(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+$toUpperCase.call(e.toString(16))}function markBoxed(t){return"Object("+t+")"}function weakCollectionOf(t){return t+" { ? }"}function collectionOf(t,e,n,r){var h=r?indentedJoin(n,r):$join.call(n,", ");return t+" ("+e+") {"+h+"}"}function singleLineValues(t){for(var e=0;e<t.length;e++)if(indexOf(t[e],`
`)>=0)return!1;return!0}function getIndent(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=$join.call(Array(t.indent+1)," ");else return null;return{base:n,prev:$join.call(Array(e+1),n)}}function indentedJoin(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+$join.call(t,","+n)+`
`+e.prev}function arrObjKeys(t,e){var n=isArray$3(t),r=[];if(n){r.length=t.length;for(var h=0;h<t.length;h++)r[h]=has$3(t,h)?e(t[h],t):""}var y=typeof gOPS=="function"?gOPS(t):[],_;if(hasShammedSymbols){_={};for(var k=0;k<y.length;k++)_["$"+y[k]]=y[k]}for(var g in t)has$3(t,g)&&(n&&String(Number(g))===g&&g<t.length||hasShammedSymbols&&_["$"+g]instanceof Symbol||($test.call(/[^\w$]/,g)?r.push(e(g,t)+": "+e(t[g],t)):r.push(g+": "+e(t[g],t))));if(typeof gOPS=="function")for(var m=0;m<y.length;m++)isEnumerable.call(t,y[m])&&r.push("["+e(y[m])+"]: "+e(t[y[m]],t));return r}var inspect$3=objectInspect,$TypeError$3=type,listGetNode=function(t,e,n){for(var r=t,h;(h=r.next)!=null;r=h)if(h.key===e)return r.next=h.next,n||(h.next=t.next,t.next=h),h},listGet=function(t,e){if(t){var n=listGetNode(t,e);return n&&n.value}},listSet=function(t,e,n){var r=listGetNode(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},listHas=function(t,e){return t?!!listGetNode(t,e):!1},listDelete=function(t,e){if(t)return listGetNode(t,e,!0)},sideChannelList=function(){var e,n={assert:function(r){if(!n.has(r))throw new $TypeError$3("Side channel does not contain "+inspect$3(r))},delete:function(r){var h=e&&e.next,y=listDelete(e,r);return y&&h&&h===y&&(e=void 0),!!y},get:function(r){return listGet(e,r)},has:function(r){return listHas(e,r)},set:function(r,h){e||(e={next:void 0}),listSet(e,r,h)}};return n},esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs=Math.abs),abs}var floor,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor=Math.floor),floor}var max,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max=Math.max),max}var min,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min=Math.min),min}var pow,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow=Math.pow),pow}var round,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round=Math.round),round}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(e){return e!==e}),_isNaN}var sign,hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign;hasRequiredSign=1;var t=require_isNaN();return sign=function(n){return t(n)||n===0?n:n<0?-1:1},sign}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var t=requireGOPD();if(t)try{t([],"length")}catch{t=null}return gopd=t,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return esDefineProperty=t,esDefineProperty}var shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var h=42;e[n]=h;for(var y in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var _=Object.getOwnPropertySymbols(e);if(_.length!==1||_[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var k=Object.getOwnPropertyDescriptor(e,n);if(k.value!==h||k.enumerable!==!0)return!1}return!0}),shams$1}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var t=typeof Symbol<"u"&&Symbol,e=requireShams$1();return hasSymbols=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var t=requireEsObjectAtoms();return Object_getPrototypeOf=t.getPrototypeOf||null,Object_getPrototypeOf}var implementation$4,hasRequiredImplementation$4;function requireImplementation$4(){if(hasRequiredImplementation$4)return implementation$4;hasRequiredImplementation$4=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",h=function(g,m){for(var a=[],S=0;S<g.length;S+=1)a[S]=g[S];for(var A=0;A<m.length;A+=1)a[A+g.length]=m[A];return a},y=function(g,m){for(var a=[],S=m,A=0;S<g.length;S+=1,A+=1)a[A]=g[S];return a},_=function(k,g){for(var m="",a=0;a<k.length;a+=1)m+=k[a],a+1<k.length&&(m+=g);return m};return implementation$4=function(g){var m=this;if(typeof m!="function"||e.apply(m)!==r)throw new TypeError(t+m);for(var a=y(arguments,1),S,A=function(){if(this instanceof S){var o=m.apply(this,h(a,arguments));return Object(o)===o?o:this}return m.apply(g,h(a,arguments))},M=n(0,m.length-a.length),F=[],q=0;q<M;q++)F[q]="$"+q;if(S=Function("binder","return function ("+_(F,",")+"){ return binder.apply(this,arguments); }")(A),m.prototype){var T=function(){};T.prototype=m.prototype,S.prototype=new T,T.prototype=null}return S},implementation$4}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var t=requireImplementation$4();return functionBind=Function.prototype.bind||t,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply,hasRequiredReflectApply;function requireReflectApply(){return hasRequiredReflectApply||(hasRequiredReflectApply=1,reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply),reflectApply}var actualApply,hasRequiredActualApply;function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var t=requireFunctionBind(),e=requireFunctionApply(),n=requireFunctionCall(),r=requireReflectApply();return actualApply=r||t.call(n,e),actualApply}var callBindApplyHelpers,hasRequiredCallBindApplyHelpers;function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var t=requireFunctionBind(),e=type,n=requireFunctionCall(),r=requireActualApply();return callBindApplyHelpers=function(y){if(y.length<1||typeof y[0]!="function")throw new e("a function is required");return r(t,n,y)},callBindApplyHelpers}var get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var t=requireCallBindApplyHelpers(),e=requireGopd(),n;try{n=[].__proto__===Array.prototype}catch(_){if(!_||typeof _!="object"||!("code"in _)||_.code!=="ERR_PROTO_ACCESS")throw _}var r=!!n&&e&&e(Object.prototype,"__proto__"),h=Object,y=h.getPrototypeOf;return get=r&&typeof r.get=="function"?t([r.get]):typeof y=="function"?function(k){return y(k==null?k:h(k))}:!1,get}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var t=requireReflect_getPrototypeOf(),e=requireObject_getPrototypeOf(),n=requireGet();return getProto=t?function(h){return t(h)}:e?function(h){if(!h||typeof h!="object"&&typeof h!="function")throw new TypeError("getProto: not an object");return e(h)}:n?function(h){return n(h)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=requireFunctionBind();return hasown=n.call(t,e),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var t,e=requireEsObjectAtoms(),n=requireEsErrors(),r=require_eval(),h=requireRange(),y=requireRef(),_=requireSyntax(),k=type,g=requireUri(),m=requireAbs(),a=requireFloor(),S=requireMax(),A=requireMin(),M=requirePow(),F=requireRound(),q=requireSign(),T=Function,o=function(z){try{return T('"use strict"; return ('+z+").constructor;")()}catch{}},u=requireGopd(),x=requireEsDefineProperty(),b=function(){throw new k},l=u?function(){try{return arguments.callee,b}catch{try{return u(arguments,"callee").get}catch{return b}}}():b,v=requireHasSymbols()(),c=requireGetProto(),P=requireObject_getPrototypeOf(),R=requireReflect_getPrototypeOf(),X=requireFunctionApply(),D=requireFunctionCall(),E={},B=typeof Uint8Array>"u"||!c?t:c(Uint8Array),oe={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":v&&c?c([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":E,"%AsyncGenerator%":E,"%AsyncGeneratorFunction%":E,"%AsyncIteratorPrototype%":E,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":T,"%GeneratorFunction%":E,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":v&&c?c(c([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!v||!c?t:c(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":u,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":h,"%ReferenceError%":y,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!v||!c?t:c(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":v&&c?c(""[Symbol.iterator]()):t,"%Symbol%":v?Symbol:t,"%SyntaxError%":_,"%ThrowTypeError%":l,"%TypedArray%":B,"%TypeError%":k,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":g,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":D,"%Function.prototype.apply%":X,"%Object.defineProperty%":x,"%Object.getPrototypeOf%":P,"%Math.abs%":m,"%Math.floor%":a,"%Math.max%":S,"%Math.min%":A,"%Math.pow%":M,"%Math.round%":F,"%Math.sign%":q,"%Reflect.getPrototypeOf%":R};if(c)try{null.error}catch(z){var ae=c(c(z));oe["%Error.prototype%"]=ae}var ue=function z(Q){var L;if(Q==="%AsyncFunction%")L=o("async function () {}");else if(Q==="%GeneratorFunction%")L=o("function* () {}");else if(Q==="%AsyncGeneratorFunction%")L=o("async function* () {}");else if(Q==="%AsyncGenerator%"){var N=z("%AsyncGeneratorFunction%");N&&(L=N.prototype)}else if(Q==="%AsyncIteratorPrototype%"){var se=z("%AsyncGenerator%");se&&c&&(L=c(se.prototype))}return oe[Q]=L,L},re={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pe=requireFunctionBind(),H=requireHasown(),W=pe.call(D,Array.prototype.concat),ne=pe.call(X,Array.prototype.splice),j=pe.call(D,String.prototype.replace),s=pe.call(D,String.prototype.slice),i=pe.call(D,RegExp.prototype.exec),p=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,f=/\\(\\)?/g,C=function(Q){var L=s(Q,0,1),N=s(Q,-1);if(L==="%"&&N!=="%")throw new _("invalid intrinsic syntax, expected closing `%`");if(N==="%"&&L!=="%")throw new _("invalid intrinsic syntax, expected opening `%`");var se=[];return j(Q,p,function(ge,Ae,he,de){se[se.length]=he?j(de,f,"$1"):Ae||ge}),se},I=function(Q,L){var N=Q,se;if(H(re,N)&&(se=re[N],N="%"+se[0]+"%"),H(oe,N)){var ge=oe[N];if(ge===E&&(ge=ue(N)),typeof ge>"u"&&!L)throw new k("intrinsic "+Q+" exists, but is not available. Please file an issue!");return{alias:se,name:N,value:ge}}throw new _("intrinsic "+Q+" does not exist!")};return getIntrinsic=function(Q,L){if(typeof Q!="string"||Q.length===0)throw new k("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof L!="boolean")throw new k('"allowMissing" argument must be a boolean');if(i(/^%?[^%]*%?$/,Q)===null)throw new _("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var N=C(Q),se=N.length>0?N[0]:"",ge=I("%"+se+"%",L),Ae=ge.name,he=ge.value,de=!1,K=ge.alias;K&&(se=K[0],ne(N,W([0,1],K)));for(var $=1,me=!0;$<N.length;$+=1){var _e=N[$],Ce=s(_e,0,1),ke=s(_e,-1);if((Ce==='"'||Ce==="'"||Ce==="`"||ke==='"'||ke==="'"||ke==="`")&&Ce!==ke)throw new _("property names with quotes must have matching quotes");if((_e==="constructor"||!me)&&(de=!0),se+="."+_e,Ae="%"+se+"%",H(oe,Ae))he=oe[Ae];else if(he!=null){if(!(_e in he)){if(!L)throw new k("base intrinsic for "+Q+" exists, but the property is not available.");return}if(u&&$+1>=N.length){var te=u(he,_e);me=!!te,me&&"get"in te&&!("originalValue"in te.get)?he=te.get:he=he[_e]}else me=H(he,_e),he=he[_e];me&&!de&&(oe[Ae]=he)}}return he},getIntrinsic}var callBound$3,hasRequiredCallBound$1;function requireCallBound$1(){if(hasRequiredCallBound$1)return callBound$3;hasRequiredCallBound$1=1;var t=requireGetIntrinsic(),e=requireCallBindApplyHelpers(),n=e([t("%String.prototype.indexOf%")]);return callBound$3=function(h,y){var _=t(h,!!y);return typeof _=="function"&&n(h,".prototype.")>-1?e([_]):_},callBound$3}var GetIntrinsic$1=requireGetIntrinsic(),callBound$2=requireCallBound$1(),inspect$2=objectInspect,$TypeError$2=type,$Map=GetIntrinsic$1("%Map%",!0),$mapGet=callBound$2("Map.prototype.get",!0),$mapSet=callBound$2("Map.prototype.set",!0),$mapHas=callBound$2("Map.prototype.has",!0),$mapDelete=callBound$2("Map.prototype.delete",!0),$mapSize=callBound$2("Map.prototype.size",!0),sideChannelMap=!!$Map&&function(){var e,n={assert:function(r){if(!n.has(r))throw new $TypeError$2("Side channel does not contain "+inspect$2(r))},delete:function(r){if(e){var h=$mapDelete(e,r);return $mapSize(e)===0&&(e=void 0),h}return!1},get:function(r){if(e)return $mapGet(e,r)},has:function(r){return e?$mapHas(e,r):!1},set:function(r,h){e||(e=new $Map),$mapSet(e,r,h)}};return n},GetIntrinsic=requireGetIntrinsic(),callBound$1=requireCallBound$1(),inspect$1=objectInspect,getSideChannelMap$1=sideChannelMap,$TypeError$1=type,$WeakMap=GetIntrinsic("%WeakMap%",!0),$weakMapGet=callBound$1("WeakMap.prototype.get",!0),$weakMapSet=callBound$1("WeakMap.prototype.set",!0),$weakMapHas=callBound$1("WeakMap.prototype.has",!0),$weakMapDelete=callBound$1("WeakMap.prototype.delete",!0),sideChannelWeakmap=$WeakMap?function(){var e,n,r={assert:function(h){if(!r.has(h))throw new $TypeError$1("Side channel does not contain "+inspect$1(h))},delete:function(h){if($WeakMap&&h&&(typeof h=="object"||typeof h=="function")){if(e)return $weakMapDelete(e,h)}else if(getSideChannelMap$1&&n)return n.delete(h);return!1},get:function(h){return $WeakMap&&h&&(typeof h=="object"||typeof h=="function")&&e?$weakMapGet(e,h):n&&n.get(h)},has:function(h){return $WeakMap&&h&&(typeof h=="object"||typeof h=="function")&&e?$weakMapHas(e,h):!!n&&n.has(h)},set:function(h,y){$WeakMap&&h&&(typeof h=="object"||typeof h=="function")?(e||(e=new $WeakMap),$weakMapSet(e,h,y)):getSideChannelMap$1&&(n||(n=getSideChannelMap$1()),n.set(h,y))}};return r}:getSideChannelMap$1,$TypeError=type,inspect=objectInspect,getSideChannelList=sideChannelList,getSideChannelMap=sideChannelMap,getSideChannelWeakMap=sideChannelWeakmap,makeChannel=getSideChannelWeakMap||getSideChannelMap||getSideChannelList,sideChannel=function(){var e,n={assert:function(r){if(!n.has(r))throw new $TypeError("Side channel does not contain "+inspect(r))},delete:function(r){return!!e&&e.delete(r)},get:function(r){return e&&e.get(r)},has:function(r){return!!e&&e.has(r)},set:function(r,h){e||(e=makeChannel()),e.set(r,h)}};return n},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$3={default:Format.RFC3986,formatters:{RFC1738:function(t){return replace.call(t,percentTwenties,"+")},RFC3986:function(t){return String(t)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$2=formats$3,getSideChannel$1=sideChannel,has$2=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,overflowChannel=getSideChannel$1(),markOverflow=function(e,n){return overflowChannel.set(e,n),e},isOverflow=function(e){return overflowChannel.has(e)},getMaxIndex=function(e){return overflowChannel.get(e)},setMaxIndex=function(e,n){overflowChannel.set(e,n)},hexTable=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),compactQueue=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(isArray$2(r)){for(var h=[],y=0;y<r.length;++y)typeof r[y]<"u"&&h.push(r[y]);n.obj[n.prop]=h}}},arrayToObject=function(e,n){for(var r=n&&n.plainObjects?{__proto__:null}:{},h=0;h<e.length;++h)typeof e[h]<"u"&&(r[h]=e[h]);return r},merge=function t(e,n,r){if(!n)return e;if(typeof n!="object"&&typeof n!="function"){if(isArray$2(e))e.push(n);else if(e&&typeof e=="object")if(isOverflow(e)){var h=getMaxIndex(e)+1;e[h]=n,setMaxIndex(e,h)}else(r&&(r.plainObjects||r.allowPrototypes)||!has$2.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object"){if(isOverflow(n)){for(var y=Object.keys(n),_=r&&r.plainObjects?{__proto__:null,0:e}:{0:e},k=0;k<y.length;k++){var g=parseInt(y[k],10);_[g+1]=n[y[k]]}return markOverflow(_,getMaxIndex(n)+1)}return[e].concat(n)}var m=e;return isArray$2(e)&&!isArray$2(n)&&(m=arrayToObject(e,r)),isArray$2(e)&&isArray$2(n)?(n.forEach(function(a,S){if(has$2.call(e,S)){var A=e[S];A&&typeof A=="object"&&a&&typeof a=="object"?e[S]=t(A,a,r):e.push(a)}else e[S]=a}),e):Object.keys(n).reduce(function(a,S){var A=n[S];return has$2.call(a,S)?a[S]=t(a[S],A,r):a[S]=A,a},m)},assign=function(e,n){return Object.keys(n).reduce(function(r,h){return r[h]=n[h],r},e)},decode=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},limit=1024,encode=function(e,n,r,h,y){if(e.length===0)return e;var _=e;if(typeof e=="symbol"?_=Symbol.prototype.toString.call(e):typeof e!="string"&&(_=String(e)),r==="iso-8859-1")return escape(_).replace(/%u[0-9a-f]{4}/gi,function(M){return"%26%23"+parseInt(M.slice(2),16)+"%3B"});for(var k="",g=0;g<_.length;g+=limit){for(var m=_.length>=limit?_.slice(g,g+limit):_,a=[],S=0;S<m.length;++S){var A=m.charCodeAt(S);if(A===45||A===46||A===95||A===126||A>=48&&A<=57||A>=65&&A<=90||A>=97&&A<=122||y===formats$2.RFC1738&&(A===40||A===41)){a[a.length]=m.charAt(S);continue}if(A<128){a[a.length]=hexTable[A];continue}if(A<2048){a[a.length]=hexTable[192|A>>6]+hexTable[128|A&63];continue}if(A<55296||A>=57344){a[a.length]=hexTable[224|A>>12]+hexTable[128|A>>6&63]+hexTable[128|A&63];continue}S+=1,A=65536+((A&1023)<<10|m.charCodeAt(S)&1023),a[a.length]=hexTable[240|A>>18]+hexTable[128|A>>12&63]+hexTable[128|A>>6&63]+hexTable[128|A&63]}k+=a.join("")}return k},compact=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],h=0;h<n.length;++h)for(var y=n[h],_=y.obj[y.prop],k=Object.keys(_),g=0;g<k.length;++g){var m=k[g],a=_[m];typeof a=="object"&&a!==null&&r.indexOf(a)===-1&&(n.push({obj:_,prop:m}),r.push(a))}return compactQueue(n),e},isRegExp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},isBuffer=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},combine=function(e,n,r,h){if(isOverflow(e)){var y=getMaxIndex(e)+1;return e[y]=n,setMaxIndex(e,y),e}var _=[].concat(e,n);return _.length>r?markOverflow(arrayToObject(_,{plainObjects:h}),_.length-1):_},maybeMap=function(e,n){if(isArray$2(e)){for(var r=[],h=0;h<e.length;h+=1)r.push(n(e[h]));return r}return n(e)},utils$2={arrayToObject,assign,combine,compact,decode,encode,isBuffer,isOverflow,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$1=utils$2,formats$1=formats$3,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},isArray$1=Array.isArray,push=Array.prototype.push,pushToArray=function(t,e){push.apply(t,isArray$1(e)?e:[e])},toISO=Date.prototype.toISOString,defaultFormat=formats$1.default,defaults$1={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:utils$1.encode,encodeValuesOnly:!1,filter:void 0,format:defaultFormat,formatter:formats$1.formatters[defaultFormat],indices:!1,serializeDate:function(e){return toISO.call(e)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},sentinel={},stringify$1=function t(e,n,r,h,y,_,k,g,m,a,S,A,M,F,q,T,o,u){for(var x=e,b=u,l=0,v=!1;(b=b.get(sentinel))!==void 0&&!v;){var c=b.get(e);if(l+=1,typeof c<"u"){if(c===l)throw new RangeError("Cyclic object value");v=!0}typeof b.get(sentinel)>"u"&&(l=0)}if(typeof a=="function"?x=a(n,x):x instanceof Date?x=M(x):r==="comma"&&isArray$1(x)&&(x=utils$1.maybeMap(x,function(W){return W instanceof Date?M(W):W})),x===null){if(_)return m&&!T?m(n,defaults$1.encoder,o,"key",F):n;x=""}if(isNonNullishPrimitive(x)||utils$1.isBuffer(x)){if(m){var P=T?n:m(n,defaults$1.encoder,o,"key",F);return[q(P)+"="+q(m(x,defaults$1.encoder,o,"value",F))]}return[q(n)+"="+q(String(x))]}var R=[];if(typeof x>"u")return R;var X;if(r==="comma"&&isArray$1(x))T&&m&&(x=utils$1.maybeMap(x,m)),X=[{value:x.length>0?x.join(",")||null:void 0}];else if(isArray$1(a))X=a;else{var D=Object.keys(x);X=S?D.sort(S):D}var E=g?String(n).replace(/\./g,"%2E"):String(n),B=h&&isArray$1(x)&&x.length===1?E+"[]":E;if(y&&isArray$1(x)&&x.length===0)return B+"[]";for(var oe=0;oe<X.length;++oe){var ae=X[oe],ue=typeof ae=="object"&&ae&&typeof ae.value<"u"?ae.value:x[ae];if(!(k&&ue===null)){var re=A&&g?String(ae).replace(/\./g,"%2E"):String(ae),pe=isArray$1(x)?typeof r=="function"?r(B,re):B:B+(A?"."+re:"["+re+"]");u.set(e,l);var H=getSideChannel();H.set(sentinel,u),pushToArray(R,t(ue,pe,r,h,y,_,k,g,r==="comma"&&T&&isArray$1(x)?null:m,a,S,A,M,F,q,T,o,H))}}return R},normalizeStringifyOptions=function(e){if(!e)return defaults$1;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||defaults$1.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=formats$1.default;if(typeof e.format<"u"){if(!has$1.call(formats$1.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var h=formats$1.formatters[r],y=defaults$1.filter;(typeof e.filter=="function"||isArray$1(e.filter))&&(y=e.filter);var _;if(e.arrayFormat in arrayPrefixGenerators?_=e.arrayFormat:"indices"in e?_=e.indices?"indices":"repeat":_=defaults$1.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var k=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:defaults$1.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:k,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:defaults$1.allowEmptyArrays,arrayFormat:_,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:defaults$1.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?defaults$1.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:defaults$1.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:defaults$1.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:defaults$1.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:y,format:r,formatter:h,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:defaults$1.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:defaults$1.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:defaults$1.strictNullHandling}},stringify_1=function(t,e){var n=t,r=normalizeStringifyOptions(e),h,y;typeof r.filter=="function"?(y=r.filter,n=y("",n)):isArray$1(r.filter)&&(y=r.filter,h=y);var _=[];if(typeof n!="object"||n===null)return"";var k=arrayPrefixGenerators[r.arrayFormat],g=k==="comma"&&r.commaRoundTrip;h||(h=Object.keys(n)),r.sort&&h.sort(r.sort);for(var m=getSideChannel(),a=0;a<h.length;++a){var S=h[a],A=n[S];r.skipNulls&&A===null||pushToArray(_,stringify$1(A,S,k,g,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,m))}var M=_.join(r.delimiter),F=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?F+="utf8=%26%2310003%3B&":F+="utf8=%E2%9C%93&"),M.length>0?F+M:""},utils=utils$2,has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:utils.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},interpretNumericEntities=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},parseArrayValue=function(t,e,n){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&n>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(e,n){var r={__proto__:null},h=n.ignoreQueryPrefix?e.replace(/^\?/,""):e;h=h.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var y=n.parameterLimit===1/0?void 0:n.parameterLimit,_=h.split(n.delimiter,n.throwOnLimitExceeded?y+1:y);if(n.throwOnLimitExceeded&&_.length>y)throw new RangeError("Parameter limit exceeded. Only "+y+" parameter"+(y===1?"":"s")+" allowed.");var k=-1,g,m=n.charset;if(n.charsetSentinel)for(g=0;g<_.length;++g)_[g].indexOf("utf8=")===0&&(_[g]===charsetSentinel?m="utf-8":_[g]===isoSentinel&&(m="iso-8859-1"),k=g,g=_.length);for(g=0;g<_.length;++g)if(g!==k){var a=_[g],S=a.indexOf("]="),A=S===-1?a.indexOf("="):S+1,M,F;if(A===-1?(M=n.decoder(a,defaults.decoder,m,"key"),F=n.strictNullHandling?null:""):(M=n.decoder(a.slice(0,A),defaults.decoder,m,"key"),M!==null&&(F=utils.maybeMap(parseArrayValue(a.slice(A+1),n,isArray(r[M])?r[M].length:0),function(T){return n.decoder(T,defaults.decoder,m,"value")}))),F&&n.interpretNumericEntities&&m==="iso-8859-1"&&(F=interpretNumericEntities(String(F))),a.indexOf("[]=")>-1&&(F=isArray(F)?[F]:F),M!==null){var q=has.call(r,M);q&&n.duplicates==="combine"?r[M]=utils.combine(r[M],F,n.arrayLimit,n.plainObjects):(!q||n.duplicates==="last")&&(r[M]=F)}}return r},parseObject=function(t,e,n,r){var h=0;if(t.length>0&&t[t.length-1]==="[]"){var y=t.slice(0,-1).join("");h=Array.isArray(e)&&e[y]?e[y].length:0}for(var _=r?e:parseArrayValue(e,n,h),k=t.length-1;k>=0;--k){var g,m=t[k];if(m==="[]"&&n.parseArrays)utils.isOverflow(_)?g=_:g=n.allowEmptyArrays&&(_===""||n.strictNullHandling&&_===null)?[]:utils.combine([],_,n.arrayLimit,n.plainObjects);else{g=n.plainObjects?{__proto__:null}:{};var a=m.charAt(0)==="["&&m.charAt(m.length-1)==="]"?m.slice(1,-1):m,S=n.decodeDotInKeys?a.replace(/%2E/g,"."):a,A=parseInt(S,10);!n.parseArrays&&S===""?g={0:_}:!isNaN(A)&&m!==S&&String(A)===S&&A>=0&&n.parseArrays&&A<=n.arrayLimit?(g=[],g[A]=_):S!=="__proto__"&&(g[S]=_)}_=g}return _},splitKeyIntoSegments=function(e,n){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e;if(n.depth<=0)return!n.plainObjects&&has.call(Object.prototype,r)&&!n.allowPrototypes?void 0:[r];var h=/(\[[^[\]]*])/,y=/(\[[^[\]]*])/g,_=h.exec(r),k=_?r.slice(0,_.index):r,g=[];if(k){if(!n.plainObjects&&has.call(Object.prototype,k)&&!n.allowPrototypes)return;g.push(k)}for(var m=0;(_=y.exec(r))!==null&&m<n.depth;){m+=1;var a=_[1].slice(1,-1);if(!n.plainObjects&&has.call(Object.prototype,a)&&!n.allowPrototypes)return;g.push(_[1])}if(_){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");g.push("["+r.slice(_.index)+"]")}return g},parseKeys=function(e,n,r,h){if(e){var y=splitKeyIntoSegments(e,r);if(y)return parseObject(y,n,r,h)}},normalizeParseOptions=function(e){if(!e)return defaults;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var n=typeof e.charset>"u"?defaults.charset:e.charset,r=typeof e.duplicates>"u"?defaults.duplicates:e.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var h=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:defaults.allowDots:!!e.allowDots;return{allowDots:h,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:defaults.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:defaults.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:defaults.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:defaults.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:defaults.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:defaults.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:defaults.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:defaults.decoder,delimiter:typeof e.delimiter=="string"||utils.isRegExp(e.delimiter)?e.delimiter:defaults.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:defaults.depth,duplicates:r,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:defaults.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:defaults.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:defaults.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:defaults.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},parse$2=function(t,e){var n=normalizeParseOptions(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?{__proto__:null}:{};for(var r=typeof t=="string"?parseValues(t,n):t,h=n.plainObjects?{__proto__:null}:{},y=Object.keys(r),_=0;_<y.length;++_){var k=y[_],g=parseKeys(k,r[k],n,typeof t=="string");h=utils.merge(h,g,n)}return n.allowSparse===!0?h:utils.compact(h)},stringify=stringify_1,parse$1=parse$2,formats=formats$3,lib$1={formats,parse:parse$1,stringify};const require$$1=getDefaultExportFromCjs(lib$1);var punycode=require$$0;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require$$1;function urlParse(t,e,n){if(t&&typeof t=="object"&&t instanceof Url)return t;var r=new Url;return r.parse(t,e,n),r}Url.prototype.parse=function(t,e,n){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),h=r!==-1&&r<t.indexOf("#")?"?":"#",y=t.split(h),_=/\\/g;y[0]=y[0].replace(_,"/"),t=y.join(h);var k=t;if(k=k.trim(),!n&&t.split("#").length===1){var g=simplePathPattern.exec(k);if(g)return this.path=k,this.href=k,this.pathname=g[1],g[2]?(this.search=g[2],e?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var m=protocolPattern.exec(k);if(m){m=m[0];var a=m.toLowerCase();this.protocol=a,k=k.substr(m.length)}if(n||m||k.match(/^\/\/[^@/]+@[^@/]+/)){var S=k.substr(0,2)==="//";S&&!(m&&hostlessProtocol[m])&&(k=k.substr(2),this.slashes=!0)}if(!hostlessProtocol[m]&&(S||m&&!slashedProtocol[m])){for(var A=-1,M=0;M<hostEndingChars.length;M++){var F=k.indexOf(hostEndingChars[M]);F!==-1&&(A===-1||F<A)&&(A=F)}var q,T;A===-1?T=k.lastIndexOf("@"):T=k.lastIndexOf("@",A),T!==-1&&(q=k.slice(0,T),k=k.slice(T+1),this.auth=decodeURIComponent(q)),A=-1;for(var M=0;M<nonHostChars.length;M++){var F=k.indexOf(nonHostChars[M]);F!==-1&&(A===-1||F<A)&&(A=F)}A===-1&&(A=k.length),this.host=k.slice(0,A),k=k.slice(A),this.parseHost(),this.hostname=this.hostname||"";var o=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!o)for(var u=this.hostname.split(/\./),M=0,x=u.length;M<x;M++){var b=u[M];if(b&&!b.match(hostnamePartPattern)){for(var l="",v=0,c=b.length;v<c;v++)b.charCodeAt(v)>127?l+="x":l+=b[v];if(!l.match(hostnamePartPattern)){var P=u.slice(0,M),R=u.slice(M+1),X=b.match(hostnamePartStart);X&&(P.push(X[1]),R.unshift(X[2])),R.length&&(k="/"+R.join(".")+k),this.hostname=P.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),o||(this.hostname=punycode.toASCII(this.hostname));var D=this.port?":"+this.port:"",E=this.hostname||"";this.host=E+D,this.href+=this.host,o&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),k[0]!=="/"&&(k="/"+k))}if(!unsafeProtocol[a])for(var M=0,x=autoEscape.length;M<x;M++){var B=autoEscape[M];if(k.indexOf(B)!==-1){var oe=encodeURIComponent(B);oe===B&&(oe=escape(B)),k=k.split(B).join(oe)}}var ae=k.indexOf("#");ae!==-1&&(this.hash=k.substr(ae),k=k.slice(0,ae));var ue=k.indexOf("?");if(ue!==-1?(this.search=k.substr(ue),this.query=k.substr(ue+1),e&&(this.query=querystring.parse(this.query)),k=k.slice(0,ue)):e&&(this.search="",this.query={}),k&&(this.pathname=k),slashedProtocol[a]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",re=this.search||"";this.path=D+re}return this.href=this.format(),this};function urlFormat(t){return typeof t=="string"&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}Url.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",h=!1,y="";this.host?h=t+this.host:this.hostname&&(h=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(h+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(y=querystring.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var _=this.search||y&&"?"+y||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||slashedProtocol[e])&&h!==!1?(h="//"+(h||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):h||(h=""),r&&r.charAt(0)!=="#"&&(r="#"+r),_&&_.charAt(0)!=="?"&&(_="?"+_),n=n.replace(/[?#]/g,function(k){return encodeURIComponent(k)}),_=_.replace("#","%23"),e+h+n+_+r};function urlResolve(t,e){return urlParse(t,!1,!0).resolve(e)}Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()};function urlResolveObject(t,e){return t?urlParse(t,!1,!0).resolveObject(e):e}Url.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Url;e.parse(t,!1,!0),t=e}for(var n=new Url,r=Object.keys(this),h=0;h<r.length;h++){var y=r[h];n[y]=this[y]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var _=Object.keys(t),k=0;k<_.length;k++){var g=_[k];g!=="protocol"&&(n[g]=t[g])}return slashedProtocol[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!slashedProtocol[t.protocol]){for(var m=Object.keys(t),a=0;a<m.length;a++){var S=m[a];n[S]=t[S]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!hostlessProtocol[t.protocol]){for(var x=(t.pathname||"").split("/");x.length&&!(t.host=x.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),x[0]!==""&&x.unshift(""),x.length<2&&x.unshift(""),n.pathname=x.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var A=n.pathname||"",M=n.search||"";n.path=A+M}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var F=n.pathname&&n.pathname.charAt(0)==="/",q=t.host||t.pathname&&t.pathname.charAt(0)==="/",T=q||F||n.host&&t.pathname,o=T,u=n.pathname&&n.pathname.split("/")||[],x=t.pathname&&t.pathname.split("/")||[],b=n.protocol&&!slashedProtocol[n.protocol];if(b&&(n.hostname="",n.port=null,n.host&&(u[0]===""?u[0]=n.host:u.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(x[0]===""?x[0]=t.host:x.unshift(t.host)),t.host=null),T=T&&(x[0]===""||u[0]==="")),q)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,u=x;else if(x.length)u||(u=[]),u.pop(),u=u.concat(x),n.search=t.search,n.query=t.query;else if(t.search!=null){if(b){n.host=u.shift(),n.hostname=n.host;var l=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;l&&(n.auth=l.shift(),n.hostname=l.shift(),n.host=n.hostname)}return n.search=t.search,n.query=t.query,(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!u.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var v=u.slice(-1)[0],c=(n.host||t.host||u.length>1)&&(v==="."||v==="..")||v==="",P=0,R=u.length;R>=0;R--)v=u[R],v==="."?u.splice(R,1):v===".."?(u.splice(R,1),P++):P&&(u.splice(R,1),P--);if(!T&&!o)for(;P--;P)u.unshift("..");T&&u[0]!==""&&(!u[0]||u[0].charAt(0)!=="/")&&u.unshift(""),c&&u.join("/").substr(-1)!=="/"&&u.push("");var X=u[0]===""||u[0]&&u[0].charAt(0)==="/";if(b){n.hostname=X?"":u.length?u.shift():"",n.host=n.hostname;var l=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;l&&(n.auth=l.shift(),n.hostname=l.shift(),n.host=n.hostname)}return T=T||n.host&&u.length,T&&!X&&u.unshift(""),u.length>0?n.pathname=u.join("/"):(n.pathname=null,n.path=null),(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};Url.prototype.parseHost=function(){var t=this.host,e=portPattern.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var parse=urlParse,resolve$1=urlResolve,resolveObject=urlResolveObject,format=urlFormat,Url_1=Url;function normalizeArray(t,e){for(var n=0,r=t.length-1;r>=0;r--){var h=t[r];h==="."?t.splice(r,1):h===".."?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function resolve(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var r=n>=0?arguments[n]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;t=r+"/"+t,e=r.charAt(0)==="/"}return t=normalizeArray(filter(t.split("/"),function(h){return!!h}),!e).join("/"),(e?"/":"")+t||"."}function filter(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var _globalThis=function(t){function e(){var r=this||self;return delete t.prototype.__magic__,r}if(typeof globalThis=="object")return globalThis;if(this)return e();t.defineProperty(t.prototype,"__magic__",{configurable:!0,get:e});var n=__magic__;return n}(Object),formatImport=format,parseImport=parse,resolveImport=resolve$1,UrlImport=Url_1,URL$1=_globalThis.URL,URLSearchParams=_globalThis.URLSearchParams,percentRegEx=/%/g,backslashRegEx=/\\/g,newlineRegEx=/\n/g,carriageReturnRegEx=/\r/g,tabRegEx=/\t/g,CHAR_FORWARD_SLASH=47;function isURLInstance(t){var e=t??null;return!!(e!==null&&(e!=null&&e.href)&&(e!=null&&e.origin))}function getPathFromURLPosix(t){if(t.hostname!=="")throw new TypeError('File URL host must be "localhost" or empty on browser');for(var e=t.pathname,n=0;n<e.length;n++)if(e[n]==="%"){var r=e.codePointAt(n+2)|32;if(e[n+1]==="2"&&r===102)throw new TypeError("File URL path must not include encoded / characters")}return decodeURIComponent(e)}function encodePathChars(t){return t.includes("%")&&(t=t.replace(percentRegEx,"%25")),t.includes("\\")&&(t=t.replace(backslashRegEx,"%5C")),t.includes(`
`)&&(t=t.replace(newlineRegEx,"%0A")),t.includes("\r")&&(t=t.replace(carriageReturnRegEx,"%0D")),t.includes("	")&&(t=t.replace(tabRegEx,"%09")),t}var domainToASCII=function(e){if(typeof e>"u")throw new TypeError('The "domain" argument must be specified');return new URL$1("http://"+e).hostname},domainToUnicode=function(e){if(typeof e>"u")throw new TypeError('The "domain" argument must be specified');return new URL$1("http://"+e).hostname},pathToFileURL=function(e){var n=new URL$1("file://"),r=resolve(e),h=e.charCodeAt(e.length-1);return h===CHAR_FORWARD_SLASH&&r[r.length-1]!=="/"&&(r+="/"),n.pathname=encodePathChars(r),n},fileURLToPath=function(e){if(!isURLInstance(e)&&typeof e!="string")throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof e+" ("+e+")");var n=new URL$1(e);if(n.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return getPathFromURLPosix(n)},formatImportWithOverloads=function(e,n){var r,h,y,_;if(n===void 0&&(n={}),!(e instanceof URL$1))return formatImport(e);if(typeof n!="object"||n===null)throw new TypeError('The "options" argument must be of type object.');var k=(r=n.auth)!=null?r:!0,g=(h=n.fragment)!=null?h:!0,m=(y=n.search)!=null?y:!0;(_=n.unicode)!=null;var a=new URL$1(e.toString());return k||(a.username="",a.password=""),g||(a.hash=""),m||(a.search=""),a.toString()},api={format:formatImportWithOverloads,parse:parseImport,resolve:resolveImport,resolveObject,Url:UrlImport,URL:URL$1,URLSearchParams,domainToASCII,domainToUnicode,pathToFileURL,fileURLToPath};const url=Object.freeze(Object.defineProperty({__proto__:null,URL:URL$1,URLSearchParams,Url:UrlImport,default:api,domainToASCII,domainToUnicode,fileURLToPath,format:formatImportWithOverloads,parse:parseImport,pathToFileURL,resolve:resolveImport,resolveObject},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(url);var streamHttp={},request={exports:{}},capability={},hasRequiredCapability;function requireCapability(){return hasRequiredCapability||(hasRequiredCapability=1,function(t){t.fetch=h(commonjsGlobal.fetch)&&h(commonjsGlobal.ReadableStream),t.writableStream=h(commonjsGlobal.WritableStream),t.abortController=h(commonjsGlobal.AbortController);var e;function n(){if(e!==void 0)return e;if(commonjsGlobal.XMLHttpRequest){e=new commonjsGlobal.XMLHttpRequest;try{e.open("GET",commonjsGlobal.XDomainRequest?"/":"https://example.com")}catch{e=null}}else e=null;return e}function r(y){var _=n();if(!_)return!1;try{return _.responseType=y,_.responseType===y}catch{}return!1}t.arraybuffer=t.fetch||r("arraybuffer"),t.msstream=!t.fetch&&r("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&r("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||(n()?h(n().overrideMimeType):!1);function h(y){return typeof y=="function"}e=null}(capability)),capability}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}}),inherits_browser.exports}var response={},readableBrowser={exports:{}},events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(l,v,c){return Function.prototype.apply.call(l,v,c)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:n=function(l){return Object.getOwnPropertyNames(l)};function r(b){console&&console.warn&&console.warn(b)}var h=Number.isNaN||function(l){return l!==l};function y(){y.init.call(this)}events.exports=y,events.exports.once=o,y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var _=10;function k(b){if(typeof b!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof b)}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(b){if(typeof b!="number"||b<0||h(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");_=b}}),y.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(l){if(typeof l!="number"||l<0||h(l))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");return this._maxListeners=l,this};function g(b){return b._maxListeners===void 0?y.defaultMaxListeners:b._maxListeners}y.prototype.getMaxListeners=function(){return g(this)},y.prototype.emit=function(l){for(var v=[],c=1;c<arguments.length;c++)v.push(arguments[c]);var P=l==="error",R=this._events;if(R!==void 0)P=P&&R.error===void 0;else if(!P)return!1;if(P){var X;if(v.length>0&&(X=v[0]),X instanceof Error)throw X;var D=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw D.context=X,D}var E=R[l];if(E===void 0)return!1;if(typeof E=="function")e(E,this,v);else for(var B=E.length,oe=F(E,B),c=0;c<B;++c)e(oe[c],this,v);return!0};function m(b,l,v,c){var P,R,X;if(k(v),R=b._events,R===void 0?(R=b._events=Object.create(null),b._eventsCount=0):(R.newListener!==void 0&&(b.emit("newListener",l,v.listener?v.listener:v),R=b._events),X=R[l]),X===void 0)X=R[l]=v,++b._eventsCount;else if(typeof X=="function"?X=R[l]=c?[v,X]:[X,v]:c?X.unshift(v):X.push(v),P=g(b),P>0&&X.length>P&&!X.warned){X.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+X.length+" "+String(l)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=b,D.type=l,D.count=X.length,r(D)}return b}y.prototype.addListener=function(l,v){return m(this,l,v,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(l,v){return m(this,l,v,!0)};function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(b,l,v){var c={fired:!1,wrapFn:void 0,target:b,type:l,listener:v},P=a.bind(c);return P.listener=v,c.wrapFn=P,P}y.prototype.once=function(l,v){return k(v),this.on(l,S(this,l,v)),this},y.prototype.prependOnceListener=function(l,v){return k(v),this.prependListener(l,S(this,l,v)),this},y.prototype.removeListener=function(l,v){var c,P,R,X,D;if(k(v),P=this._events,P===void 0)return this;if(c=P[l],c===void 0)return this;if(c===v||c.listener===v)--this._eventsCount===0?this._events=Object.create(null):(delete P[l],P.removeListener&&this.emit("removeListener",l,c.listener||v));else if(typeof c!="function"){for(R=-1,X=c.length-1;X>=0;X--)if(c[X]===v||c[X].listener===v){D=c[X].listener,R=X;break}if(R<0)return this;R===0?c.shift():q(c,R),c.length===1&&(P[l]=c[0]),P.removeListener!==void 0&&this.emit("removeListener",l,D||v)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(l){var v,c,P;if(c=this._events,c===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[l]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete c[l]),this;if(arguments.length===0){var R=Object.keys(c),X;for(P=0;P<R.length;++P)X=R[P],X!=="removeListener"&&this.removeAllListeners(X);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(v=c[l],typeof v=="function")this.removeListener(l,v);else if(v!==void 0)for(P=v.length-1;P>=0;P--)this.removeListener(l,v[P]);return this};function A(b,l,v){var c=b._events;if(c===void 0)return[];var P=c[l];return P===void 0?[]:typeof P=="function"?v?[P.listener||P]:[P]:v?T(P):F(P,P.length)}y.prototype.listeners=function(l){return A(this,l,!0)},y.prototype.rawListeners=function(l){return A(this,l,!1)},y.listenerCount=function(b,l){return typeof b.listenerCount=="function"?b.listenerCount(l):M.call(b,l)},y.prototype.listenerCount=M;function M(b){var l=this._events;if(l!==void 0){var v=l[b];if(typeof v=="function")return 1;if(v!==void 0)return v.length}return 0}y.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function F(b,l){for(var v=new Array(l),c=0;c<l;++c)v[c]=b[c];return v}function q(b,l){for(;l+1<b.length;l++)b[l]=b[l+1];b.pop()}function T(b){for(var l=new Array(b.length),v=0;v<l.length;++v)l[v]=b[v].listener||b[v];return l}function o(b,l){return new Promise(function(v,c){function P(X){b.removeListener(l,R),c(X)}function R(){typeof b.removeListener=="function"&&b.removeListener("error",P),v([].slice.call(arguments))}x(b,l,R,{once:!0}),l!=="error"&&u(b,P,{once:!0})})}function u(b,l,v){typeof b.on=="function"&&x(b,"error",l,v)}function x(b,l,v,c){if(typeof b.on=="function")c.once?b.once(l,v):b.on(l,v);else if(typeof b.addEventListener=="function")b.addEventListener(l,function P(R){c.once&&b.removeEventListener(l,P),v(R)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof b)}return events.exports}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var util={},types={},shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var t=requireShams$1();return shams=function(){return t()&&!!Symbol.toStringTag},shams}var isArguments$1,hasRequiredIsArguments$1;function requireIsArguments$1(){if(hasRequiredIsArguments$1)return isArguments$1;hasRequiredIsArguments$1=1;var t=requireShams()(),e=requireCallBound$1(),n=e("Object.prototype.toString"),r=function(k){return t&&k&&typeof k=="object"&&Symbol.toStringTag in k?!1:n(k)==="[object Arguments]"},h=function(k){return r(k)?!0:k!==null&&typeof k=="object"&&"length"in k&&typeof k.length=="number"&&k.length>=0&&n(k)!=="[object Array]"&&"callee"in k&&n(k.callee)==="[object Function]"},y=function(){return r(arguments)}();return r.isLegacyArguments=h,isArguments$1=y?r:h,isArguments$1}var isRegex,hasRequiredIsRegex;function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var t=requireCallBound$1(),e=requireShams()(),n=requireHasown(),r=requireGopd(),h;if(e){var y=t("RegExp.prototype.exec"),_={},k=function(){throw _},g={toString:k,valueOf:k};typeof Symbol.toPrimitive=="symbol"&&(g[Symbol.toPrimitive]=k),h=function(A){if(!A||typeof A!="object")return!1;var M=r(A,"lastIndex"),F=M&&n(M,"value");if(!F)return!1;try{y(A,g)}catch(q){return q===_}}}else{var m=t("Object.prototype.toString"),a="[object RegExp]";h=function(A){return!A||typeof A!="object"&&typeof A!="function"?!1:m(A)===a}}return isRegex=h,isRegex}var safeRegexTest,hasRequiredSafeRegexTest;function requireSafeRegexTest(){if(hasRequiredSafeRegexTest)return safeRegexTest;hasRequiredSafeRegexTest=1;var t=requireCallBound$1(),e=requireIsRegex(),n=t("RegExp.prototype.exec"),r=type;return safeRegexTest=function(y){if(!e(y))throw new r("`regex` must be a RegExp");return function(k){return n(y,k)!==null}},safeRegexTest}var generatorFunction,hasRequiredGeneratorFunction;function requireGeneratorFunction(){if(hasRequiredGeneratorFunction)return generatorFunction;hasRequiredGeneratorFunction=1;const t=(function*(){}).constructor;return generatorFunction=()=>t,generatorFunction}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var t=requireCallBound$1(),e=requireSafeRegexTest(),n=e(/^\s*(?:function)?\*/),r=requireShams()(),h=requireGetProto(),y=t("Object.prototype.toString"),_=t("Function.prototype.toString"),k=requireGeneratorFunction();return isGeneratorFunction=function(m){if(typeof m!="function")return!1;if(n(_(m)))return!0;if(!r){var a=y(m);return a==="[object GeneratorFunction]"}if(!h)return!1;var S=k();return S&&h(m)===S.prototype},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(u){u!==r&&(e=null)}else e=null;var h=/^\s*class\b/,y=function(x){try{var b=t.call(x);return h.test(b)}catch{return!1}},_=function(x){try{return y(x)?!1:(t.call(x),!0)}catch{return!1}},k=Object.prototype.toString,g="[object Object]",m="[object Function]",a="[object GeneratorFunction]",S="[object HTMLAllCollection]",A="[object HTML document.all class]",M="[object HTMLCollection]",F=typeof Symbol=="function"&&!!Symbol.toStringTag,q=!(0 in[,]),T=function(){return!1};if(typeof document=="object"){var o=document.all;k.call(o)===k.call(document.all)&&(T=function(x){if((q||!x)&&(typeof x>"u"||typeof x=="object"))try{var b=k.call(x);return(b===S||b===A||b===M||b===g)&&x("")==null}catch{}return!1})}return isCallable=e?function(x){if(T(x))return!0;if(!x||typeof x!="function"&&typeof x!="object")return!1;try{e(x,null,n)}catch(b){if(b!==r)return!1}return!y(x)&&_(x)}:function(x){if(T(x))return!0;if(!x||typeof x!="function"&&typeof x!="object")return!1;if(F)return _(x);if(y(x))return!1;var b=k.call(x);return b!==m&&b!==a&&!/^\[object HTML/.test(b)?!1:_(x)},isCallable}var forEach,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach;hasRequiredForEach=1;var t=requireIsCallable(),e=Object.prototype.toString,n=Object.prototype.hasOwnProperty,r=function(g,m,a){for(var S=0,A=g.length;S<A;S++)n.call(g,S)&&(a==null?m(g[S],S,g):m.call(a,g[S],S,g))},h=function(g,m,a){for(var S=0,A=g.length;S<A;S++)a==null?m(g.charAt(S),S,g):m.call(a,g.charAt(S),S,g)},y=function(g,m,a){for(var S in g)n.call(g,S)&&(a==null?m(g[S],S,g):m.call(a,g[S],S,g))};function _(k){return e.call(k)==="[object Array]"}return forEach=function(g,m,a){if(!t(m))throw new TypeError("iterator must be a function");var S;arguments.length>=3&&(S=a),_(g)?r(g,m,S):typeof g=="string"?h(g,m,S):y(g,m,S)},forEach}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var t=requirePossibleTypedArrayNames(),e=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var r=[],h=0;h<t.length;h++)typeof e[t[h]]=="function"&&(r[r.length]=t[h]);return r},availableTypedArrays}var callBind={exports:{}},defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var t=requireEsDefineProperty(),e=requireSyntax(),n=type,r=requireGopd();return defineDataProperty=function(y,_,k){if(!y||typeof y!="object"&&typeof y!="function")throw new n("`obj` must be an object or a function`");if(typeof _!="string"&&typeof _!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var g=arguments.length>3?arguments[3]:null,m=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,S=arguments.length>6?arguments[6]:!1,A=!!r&&r(y,_);if(t)t(y,_,{configurable:a===null&&A?A.configurable:!a,enumerable:g===null&&A?A.enumerable:!g,value:k,writable:m===null&&A?A.writable:!m});else if(S||!g&&!m&&!a)y[_]=k;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var t=requireEsDefineProperty(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=e,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var t=requireGetIntrinsic(),e=requireDefineDataProperty(),n=requireHasPropertyDescriptors()(),r=requireGopd(),h=type,y=t("%Math.floor%");return setFunctionLength=function(k,g){if(typeof k!="function")throw new h("`fn` is not a function");if(typeof g!="number"||g<0||g>4294967295||y(g)!==g)throw new h("`length` must be a positive 32-bit integer");var m=arguments.length>2&&!!arguments[2],a=!0,S=!0;if("length"in k&&r){var A=r(k,"length");A&&!A.configurable&&(a=!1),A&&!A.writable&&(S=!1)}return(a||S||!m)&&(n?e(k,"length",g,!0,!0):e(k,"length",g)),k},setFunctionLength}var applyBind,hasRequiredApplyBind;function requireApplyBind(){if(hasRequiredApplyBind)return applyBind;hasRequiredApplyBind=1;var t=requireFunctionBind(),e=requireFunctionApply(),n=requireActualApply();return applyBind=function(){return n(t,e,arguments)},applyBind}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(t){var e=requireSetFunctionLength(),n=requireEsDefineProperty(),r=requireCallBindApplyHelpers(),h=requireApplyBind();t.exports=function(_){var k=r(arguments),g=_.length-(arguments.length-1);return e(k,1+(g>0?g:0),!0)},n?n(t.exports,"apply",{value:h}):t.exports.apply=h}(callBind)),callBind.exports}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var t=requireForEach(),e=requireAvailableTypedArrays(),n=requireCallBind(),r=requireCallBound$1(),h=requireGopd(),y=requireGetProto(),_=r("Object.prototype.toString"),k=requireShams()(),g=typeof globalThis>"u"?commonjsGlobal:globalThis,m=e(),a=r("String.prototype.slice"),S=r("Array.prototype.indexOf",!0)||function(T,o){for(var u=0;u<T.length;u+=1)if(T[u]===o)return u;return-1},A={__proto__:null};k&&h&&y?t(m,function(q){var T=new g[q];if(Symbol.toStringTag in T&&y){var o=y(T),u=h(o,Symbol.toStringTag);if(!u&&o){var x=y(o);u=h(x,Symbol.toStringTag)}if(u&&u.get){var b=n(u.get);A["$"+q]=b}}}):t(m,function(q){var T=new g[q],o=T.slice||T.set;if(o){var u=n(o);A["$"+q]=u}});var M=function(T){var o=!1;return t(A,function(u,x){if(!o)try{"$"+u(T)===x&&(o=a(x,1))}catch{}}),o},F=function(T){var o=!1;return t(A,function(u,x){if(!o)try{u(T),o=a(x,1)}catch{}}),o};return whichTypedArray=function(T){if(!T||typeof T!="object")return!1;if(!k){var o=a(_(T),8,-1);return S(m,o)>-1?o:o!=="Object"?!1:F(T)}return h?M(T):null},whichTypedArray}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var t=requireWhichTypedArray();return isTypedArray=function(n){return!!t(n)},isTypedArray}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(t){var e=requireIsArguments$1(),n=requireIsGeneratorFunction(),r=requireWhichTypedArray(),h=requireIsTypedArray();function y($){return $.call.bind($)}var _=typeof BigInt<"u",k=typeof Symbol<"u",g=y(Object.prototype.toString),m=y(Number.prototype.valueOf),a=y(String.prototype.valueOf),S=y(Boolean.prototype.valueOf);if(_)var A=y(BigInt.prototype.valueOf);if(k)var M=y(Symbol.prototype.valueOf);function F($,me){if(typeof $!="object")return!1;try{return me($),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=n,t.isTypedArray=h;function q($){return typeof Promise<"u"&&$ instanceof Promise||$!==null&&typeof $=="object"&&typeof $.then=="function"&&typeof $.catch=="function"}t.isPromise=q;function T($){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView($):h($)||s($)}t.isArrayBufferView=T;function o($){return r($)==="Uint8Array"}t.isUint8Array=o;function u($){return r($)==="Uint8ClampedArray"}t.isUint8ClampedArray=u;function x($){return r($)==="Uint16Array"}t.isUint16Array=x;function b($){return r($)==="Uint32Array"}t.isUint32Array=b;function l($){return r($)==="Int8Array"}t.isInt8Array=l;function v($){return r($)==="Int16Array"}t.isInt16Array=v;function c($){return r($)==="Int32Array"}t.isInt32Array=c;function P($){return r($)==="Float32Array"}t.isFloat32Array=P;function R($){return r($)==="Float64Array"}t.isFloat64Array=R;function X($){return r($)==="BigInt64Array"}t.isBigInt64Array=X;function D($){return r($)==="BigUint64Array"}t.isBigUint64Array=D;function E($){return g($)==="[object Map]"}E.working=typeof Map<"u"&&E(new Map);function B($){return typeof Map>"u"?!1:E.working?E($):$ instanceof Map}t.isMap=B;function oe($){return g($)==="[object Set]"}oe.working=typeof Set<"u"&&oe(new Set);function ae($){return typeof Set>"u"?!1:oe.working?oe($):$ instanceof Set}t.isSet=ae;function ue($){return g($)==="[object WeakMap]"}ue.working=typeof WeakMap<"u"&&ue(new WeakMap);function re($){return typeof WeakMap>"u"?!1:ue.working?ue($):$ instanceof WeakMap}t.isWeakMap=re;function pe($){return g($)==="[object WeakSet]"}pe.working=typeof WeakSet<"u"&&pe(new WeakSet);function H($){return pe($)}t.isWeakSet=H;function W($){return g($)==="[object ArrayBuffer]"}W.working=typeof ArrayBuffer<"u"&&W(new ArrayBuffer);function ne($){return typeof ArrayBuffer>"u"?!1:W.working?W($):$ instanceof ArrayBuffer}t.isArrayBuffer=ne;function j($){return g($)==="[object DataView]"}j.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&j(new DataView(new ArrayBuffer(1),0,1));function s($){return typeof DataView>"u"?!1:j.working?j($):$ instanceof DataView}t.isDataView=s;var i=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function p($){return g($)==="[object SharedArrayBuffer]"}function f($){return typeof i>"u"?!1:(typeof p.working>"u"&&(p.working=p(new i)),p.working?p($):$ instanceof i)}t.isSharedArrayBuffer=f;function C($){return g($)==="[object AsyncFunction]"}t.isAsyncFunction=C;function I($){return g($)==="[object Map Iterator]"}t.isMapIterator=I;function z($){return g($)==="[object Set Iterator]"}t.isSetIterator=z;function Q($){return g($)==="[object Generator]"}t.isGeneratorObject=Q;function L($){return g($)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=L;function N($){return F($,m)}t.isNumberObject=N;function se($){return F($,a)}t.isStringObject=se;function ge($){return F($,S)}t.isBooleanObject=ge;function Ae($){return _&&F($,A)}t.isBigIntObject=Ae;function he($){return k&&F($,M)}t.isSymbolObject=he;function de($){return N($)||se($)||ge($)||Ae($)||he($)}t.isBoxedPrimitive=de;function K($){return typeof Uint8Array<"u"&&(ne($)||f($))}t.isAnyArrayBuffer=K,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function($){Object.defineProperty(t,$,{enumerable:!1,value:function(){throw new Error($+" is not supported in userland")}})})}(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),isBufferBrowser}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(t){var e={},n=Object.getOwnPropertyDescriptors||function(i){for(var p=Object.keys(i),f={},C=0;C<p.length;C++)f[p[C]]=Object.getOwnPropertyDescriptor(i,p[C]);return f},r=/%[sdj%]/g;t.format=function(s){if(!v(s)){for(var i=[],p=0;p<arguments.length;p++)i.push(k(arguments[p]));return i.join(" ")}for(var p=1,f=arguments,C=f.length,I=String(s).replace(r,function(Q){if(Q==="%%")return"%";if(p>=C)return Q;switch(Q){case"%s":return String(f[p++]);case"%d":return Number(f[p++]);case"%j":try{return JSON.stringify(f[p++])}catch{return"[Circular]"}default:return Q}}),z=f[p];p<C;z=f[++p])x(z)||!X(z)?I+=" "+z:I+=" "+k(z);return I},t.deprecate=function(s,i){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return s;if(typeof process$1>"u")return function(){return t.deprecate(s,i).apply(this,arguments)};var p=!1;function f(){if(!p){if(process$1.throwDeprecation)throw new Error(i);process$1.traceDeprecation?console.trace(i):console.error(i),p=!0}return s.apply(this,arguments)}return f};var h={},y=/^$/;if(e.NODE_DEBUG){var _=e.NODE_DEBUG;_=_.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),y=new RegExp("^"+_+"$","i")}t.debuglog=function(s){if(s=s.toUpperCase(),!h[s])if(y.test(s)){var i=process$1.pid;h[s]=function(){var p=t.format.apply(t,arguments);console.error("%s %d: %s",s,i,p)}}else h[s]=function(){};return h[s]};function k(s,i){var p={seen:[],stylize:m};return arguments.length>=3&&(p.depth=arguments[2]),arguments.length>=4&&(p.colors=arguments[3]),u(i)?p.showHidden=i:i&&t._extend(p,i),P(p.showHidden)&&(p.showHidden=!1),P(p.depth)&&(p.depth=2),P(p.colors)&&(p.colors=!1),P(p.customInspect)&&(p.customInspect=!0),p.colors&&(p.stylize=g),S(p,s,p.depth)}t.inspect=k,k.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},k.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function g(s,i){var p=k.styles[i];return p?"\x1B["+k.colors[p][0]+"m"+s+"\x1B["+k.colors[p][1]+"m":s}function m(s,i){return s}function a(s){var i={};return s.forEach(function(p,f){i[p]=!0}),i}function S(s,i,p){if(s.customInspect&&i&&B(i.inspect)&&i.inspect!==t.inspect&&!(i.constructor&&i.constructor.prototype===i)){var f=i.inspect(p,s);return v(f)||(f=S(s,f,p)),f}var C=A(s,i);if(C)return C;var I=Object.keys(i),z=a(I);if(s.showHidden&&(I=Object.getOwnPropertyNames(i)),E(i)&&(I.indexOf("message")>=0||I.indexOf("description")>=0))return M(i);if(I.length===0){if(B(i)){var Q=i.name?": "+i.name:"";return s.stylize("[Function"+Q+"]","special")}if(R(i))return s.stylize(RegExp.prototype.toString.call(i),"regexp");if(D(i))return s.stylize(Date.prototype.toString.call(i),"date");if(E(i))return M(i)}var L="",N=!1,se=["{","}"];if(o(i)&&(N=!0,se=["[","]"]),B(i)){var ge=i.name?": "+i.name:"";L=" [Function"+ge+"]"}if(R(i)&&(L=" "+RegExp.prototype.toString.call(i)),D(i)&&(L=" "+Date.prototype.toUTCString.call(i)),E(i)&&(L=" "+M(i)),I.length===0&&(!N||i.length==0))return se[0]+L+se[1];if(p<0)return R(i)?s.stylize(RegExp.prototype.toString.call(i),"regexp"):s.stylize("[Object]","special");s.seen.push(i);var Ae;return N?Ae=F(s,i,p,z,I):Ae=I.map(function(he){return q(s,i,p,z,he,N)}),s.seen.pop(),T(Ae,L,se)}function A(s,i){if(P(i))return s.stylize("undefined","undefined");if(v(i)){var p="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return s.stylize(p,"string")}if(l(i))return s.stylize(""+i,"number");if(u(i))return s.stylize(""+i,"boolean");if(x(i))return s.stylize("null","null")}function M(s){return"["+Error.prototype.toString.call(s)+"]"}function F(s,i,p,f,C){for(var I=[],z=0,Q=i.length;z<Q;++z)H(i,String(z))?I.push(q(s,i,p,f,String(z),!0)):I.push("");return C.forEach(function(L){L.match(/^\d+$/)||I.push(q(s,i,p,f,L,!0))}),I}function q(s,i,p,f,C,I){var z,Q,L;if(L=Object.getOwnPropertyDescriptor(i,C)||{value:i[C]},L.get?L.set?Q=s.stylize("[Getter/Setter]","special"):Q=s.stylize("[Getter]","special"):L.set&&(Q=s.stylize("[Setter]","special")),H(f,C)||(z="["+C+"]"),Q||(s.seen.indexOf(L.value)<0?(x(p)?Q=S(s,L.value,null):Q=S(s,L.value,p-1),Q.indexOf(`
`)>-1&&(I?Q=Q.split(`
`).map(function(N){return"  "+N}).join(`
`).slice(2):Q=`
`+Q.split(`
`).map(function(N){return"   "+N}).join(`
`))):Q=s.stylize("[Circular]","special")),P(z)){if(I&&C.match(/^\d+$/))return Q;z=JSON.stringify(""+C),z.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(z=z.slice(1,-1),z=s.stylize(z,"name")):(z=z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),z=s.stylize(z,"string"))}return z+": "+Q}function T(s,i,p){var f=s.reduce(function(C,I){return I.indexOf(`
`)>=0,C+I.replace(/\u001b\[\d\d?m/g,"").length+1},0);return f>60?p[0]+(i===""?"":i+`
 `)+" "+s.join(`,
  `)+" "+p[1]:p[0]+i+" "+s.join(", ")+" "+p[1]}t.types=requireTypes();function o(s){return Array.isArray(s)}t.isArray=o;function u(s){return typeof s=="boolean"}t.isBoolean=u;function x(s){return s===null}t.isNull=x;function b(s){return s==null}t.isNullOrUndefined=b;function l(s){return typeof s=="number"}t.isNumber=l;function v(s){return typeof s=="string"}t.isString=v;function c(s){return typeof s=="symbol"}t.isSymbol=c;function P(s){return s===void 0}t.isUndefined=P;function R(s){return X(s)&&ae(s)==="[object RegExp]"}t.isRegExp=R,t.types.isRegExp=R;function X(s){return typeof s=="object"&&s!==null}t.isObject=X;function D(s){return X(s)&&ae(s)==="[object Date]"}t.isDate=D,t.types.isDate=D;function E(s){return X(s)&&(ae(s)==="[object Error]"||s instanceof Error)}t.isError=E,t.types.isNativeError=E;function B(s){return typeof s=="function"}t.isFunction=B;function oe(s){return s===null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||typeof s=="symbol"||typeof s>"u"}t.isPrimitive=oe,t.isBuffer=requireIsBufferBrowser();function ae(s){return Object.prototype.toString.call(s)}function ue(s){return s<10?"0"+s.toString(10):s.toString(10)}var re=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function pe(){var s=new Date,i=[ue(s.getHours()),ue(s.getMinutes()),ue(s.getSeconds())].join(":");return[s.getDate(),re[s.getMonth()],i].join(" ")}t.log=function(){console.log("%s - %s",pe(),t.format.apply(t,arguments))},t.inherits=requireInherits_browser(),t._extend=function(s,i){if(!i||!X(i))return s;for(var p=Object.keys(i),f=p.length;f--;)s[p[f]]=i[p[f]];return s};function H(s,i){return Object.prototype.hasOwnProperty.call(s,i)}var W=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(i){if(typeof i!="function")throw new TypeError('The "original" argument must be of type Function');if(W&&i[W]){var p=i[W];if(typeof p!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(p,W,{value:p,enumerable:!1,writable:!1,configurable:!0}),p}function p(){for(var f,C,I=new Promise(function(L,N){f=L,C=N}),z=[],Q=0;Q<arguments.length;Q++)z.push(arguments[Q]);z.push(function(L,N){L?C(L):f(N)});try{i.apply(this,z)}catch(L){C(L)}return I}return Object.setPrototypeOf(p,Object.getPrototypeOf(i)),W&&Object.defineProperty(p,W,{value:p,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(p,n(i))},t.promisify.custom=W;function ne(s,i){if(!s){var p=new Error("Promise was rejected with a falsy value");p.reason=s,s=p}return i(s)}function j(s){if(typeof s!="function")throw new TypeError('The "original" argument must be of type Function');function i(){for(var p=[],f=0;f<arguments.length;f++)p.push(arguments[f]);var C=p.pop();if(typeof C!="function")throw new TypeError("The last argument must be of type Function");var I=this,z=function(){return C.apply(I,arguments)};s.apply(this,p).then(function(Q){process$1.nextTick(z.bind(null,null,Q))},function(Q){process$1.nextTick(ne.bind(null,Q,z))})}return Object.setPrototypeOf(i,Object.getPrototypeOf(s)),Object.defineProperties(i,n(s)),i}t.callbackify=j}(util)),util}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function t(F,q){var T=Object.keys(F);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(F);q&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(F,u).enumerable})),T.push.apply(T,o)}return T}function e(F){for(var q=1;q<arguments.length;q++){var T=arguments[q]!=null?arguments[q]:{};q%2?t(Object(T),!0).forEach(function(o){n(F,o,T[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(T)):t(Object(T)).forEach(function(o){Object.defineProperty(F,o,Object.getOwnPropertyDescriptor(T,o))})}return F}function n(F,q,T){return q=_(q),q in F?Object.defineProperty(F,q,{value:T,enumerable:!0,configurable:!0,writable:!0}):F[q]=T,F}function r(F,q){if(!(F instanceof q))throw new TypeError("Cannot call a class as a function")}function h(F,q){for(var T=0;T<q.length;T++){var o=q[T];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(F,_(o.key),o)}}function y(F,q,T){return q&&h(F.prototype,q),Object.defineProperty(F,"prototype",{writable:!1}),F}function _(F){var q=k(F,"string");return typeof q=="symbol"?q:String(q)}function k(F,q){if(typeof F!="object"||F===null)return F;var T=F[Symbol.toPrimitive];if(T!==void 0){var o=T.call(F,q);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(F)}var g=requireDist(),m=g.Buffer,a=requireUtil(),S=a.inspect,A=S&&S.custom||"inspect";function M(F,q,T){m.prototype.copy.call(F,q,T)}return buffer_list=function(){function F(){r(this,F),this.head=null,this.tail=null,this.length=0}return y(F,[{key:"push",value:function(T){var o={data:T,next:null};this.length>0?this.tail.next=o:this.head=o,this.tail=o,++this.length}},{key:"unshift",value:function(T){var o={data:T,next:this.head};this.length===0&&(this.tail=o),this.head=o,++this.length}},{key:"shift",value:function(){if(this.length!==0){var T=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,T}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(T){if(this.length===0)return"";for(var o=this.head,u=""+o.data;o=o.next;)u+=T+o.data;return u}},{key:"concat",value:function(T){if(this.length===0)return m.alloc(0);for(var o=m.allocUnsafe(T>>>0),u=this.head,x=0;u;)M(u.data,o,x),x+=u.data.length,u=u.next;return o}},{key:"consume",value:function(T,o){var u;return T<this.head.data.length?(u=this.head.data.slice(0,T),this.head.data=this.head.data.slice(T)):T===this.head.data.length?u=this.shift():u=o?this._getString(T):this._getBuffer(T),u}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(T){var o=this.head,u=1,x=o.data;for(T-=x.length;o=o.next;){var b=o.data,l=T>b.length?b.length:T;if(l===b.length?x+=b:x+=b.slice(0,T),T-=l,T===0){l===b.length?(++u,o.next?this.head=o.next:this.head=this.tail=null):(this.head=o,o.data=b.slice(l));break}++u}return this.length-=u,x}},{key:"_getBuffer",value:function(T){var o=m.allocUnsafe(T),u=this.head,x=1;for(u.data.copy(o),T-=u.data.length;u=u.next;){var b=u.data,l=T>b.length?b.length:T;if(b.copy(o,o.length-T,0,l),T-=l,T===0){l===b.length?(++x,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=b.slice(l));break}++x}return this.length-=x,o}},{key:A,value:function(T,o){return S(this,e(e({},o),{},{depth:0,customInspect:!1}))}}]),F}(),buffer_list}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;function t(_,k){var g=this,m=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return m||a?(k?k(_):_&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(h,this,_)):process$1.nextTick(h,this,_)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(_||null,function(S){!k&&S?g._writableState?g._writableState.errorEmitted?process$1.nextTick(n,g):(g._writableState.errorEmitted=!0,process$1.nextTick(e,g,S)):process$1.nextTick(e,g,S):k?(process$1.nextTick(n,g),k(S)):process$1.nextTick(n,g)}),this)}function e(_,k){h(_,k),n(_)}function n(_){_._writableState&&!_._writableState.emitClose||_._readableState&&!_._readableState.emitClose||_.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function h(_,k){_.emit("error",k)}function y(_,k){var g=_._readableState,m=_._writableState;g&&g.autoDestroy||m&&m.autoDestroy?_.destroy(k):_.emit("error",k)}return destroy_1={destroy:t,undestroy:r,errorOrDestroy:y},destroy_1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function t(k,g){k.prototype=Object.create(g.prototype),k.prototype.constructor=k,k.__proto__=g}var e={};function n(k,g,m){m||(m=Error);function a(A,M,F){return typeof g=="string"?g:g(A,M,F)}var S=function(A){t(M,A);function M(F,q,T){return A.call(this,a(F,q,T))||this}return M}(m);S.prototype.name=m.name,S.prototype.code=k,e[k]=S}function r(k,g){if(Array.isArray(k)){var m=k.length;return k=k.map(function(a){return String(a)}),m>2?"one of ".concat(g," ").concat(k.slice(0,m-1).join(", "),", or ")+k[m-1]:m===2?"one of ".concat(g," ").concat(k[0]," or ").concat(k[1]):"of ".concat(g," ").concat(k[0])}else return"of ".concat(g," ").concat(String(k))}function h(k,g,m){return k.substr(0,g.length)===g}function y(k,g,m){return(m===void 0||m>k.length)&&(m=k.length),k.substring(m-g.length,m)===g}function _(k,g,m){return typeof m!="number"&&(m=0),m+g.length>k.length?!1:k.indexOf(g,m)!==-1}return n("ERR_INVALID_OPT_VALUE",function(k,g){return'The value "'+g+'" is invalid for option "'+k+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(k,g,m){var a;typeof g=="string"&&h(g,"not ")?(a="must not be",g=g.replace(/^not /,"")):a="must be";var S;if(y(k," argument"))S="The ".concat(k," ").concat(a," ").concat(r(g,"type"));else{var A=_(k,".")?"property":"argument";S='The "'.concat(k,'" ').concat(A," ").concat(a," ").concat(r(g,"type"))}return S+=". Received type ".concat(typeof m),S},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var t=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function e(r,h,y){return r.highWaterMark!=null?r.highWaterMark:h?r[y]:null}function n(r,h,y,_){var k=e(h,_,y);if(k!=null){if(!(isFinite(k)&&Math.floor(k)===k)||k<0){var g=_?y:"highWaterMark";throw new t(g,k)}return Math.floor(k)}return r.objectMode?16:16*1024}return state={getHighWaterMark:n},state}var browser$1,hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$1;hasRequiredBrowser$1=1,browser$1=t;function t(n,r){if(e("noDeprecation"))return n;var h=!1;function y(){if(!h){if(e("throwDeprecation"))throw new Error(r);e("traceDeprecation")?console.trace(r):console.warn(r),h=!0}return n.apply(this,arguments)}return y}function e(n){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var r=commonjsGlobal.localStorage[n];return r==null?!1:String(r).toLowerCase()==="true"}return browser$1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=P;function t(f){var C=this;this.next=null,this.entry=null,this.finish=function(){p(C,f)}}var e;P.WritableState=v;var n={deprecate:requireBrowser$1()},r=requireStreamBrowser(),h=requireDist().Buffer,y=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function _(f){return h.from(f)}function k(f){return h.isBuffer(f)||f instanceof y}var g=requireDestroy(),m=requireState(),a=m.getHighWaterMark,S=requireErrorsBrowser().codes,A=S.ERR_INVALID_ARG_TYPE,M=S.ERR_METHOD_NOT_IMPLEMENTED,F=S.ERR_MULTIPLE_CALLBACK,q=S.ERR_STREAM_CANNOT_PIPE,T=S.ERR_STREAM_DESTROYED,o=S.ERR_STREAM_NULL_VALUES,u=S.ERR_STREAM_WRITE_AFTER_END,x=S.ERR_UNKNOWN_ENCODING,b=g.errorOrDestroy;requireInherits_browser()(P,r);function l(){}function v(f,C,I){e=e||require_stream_duplex(),f=f||{},typeof I!="boolean"&&(I=C instanceof e),this.objectMode=!!f.objectMode,I&&(this.objectMode=this.objectMode||!!f.writableObjectMode),this.highWaterMark=a(this,f,"writableHighWaterMark",I),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var z=f.decodeStrings===!1;this.decodeStrings=!z,this.defaultEncoding=f.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Q){ue(C,Q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=f.emitClose!==!1,this.autoDestroy=!!f.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}v.prototype.getBuffer=function(){for(var C=this.bufferedRequest,I=[];C;)I.push(C),C=C.next;return I},function(){try{Object.defineProperty(v.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var c;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(C){return c.call(this,C)?!0:this!==P?!1:C&&C._writableState instanceof v}})):c=function(C){return C instanceof this};function P(f){e=e||require_stream_duplex();var C=this instanceof e;if(!C&&!c.call(P,this))return new P(f);this._writableState=new v(f,this,C),this.writable=!0,f&&(typeof f.write=="function"&&(this._write=f.write),typeof f.writev=="function"&&(this._writev=f.writev),typeof f.destroy=="function"&&(this._destroy=f.destroy),typeof f.final=="function"&&(this._final=f.final)),r.call(this)}P.prototype.pipe=function(){b(this,new q)};function R(f,C){var I=new u;b(f,I),process$1.nextTick(C,I)}function X(f,C,I,z){var Q;return I===null?Q=new o:typeof I!="string"&&!C.objectMode&&(Q=new A("chunk",["string","Buffer"],I)),Q?(b(f,Q),process$1.nextTick(z,Q),!1):!0}P.prototype.write=function(f,C,I){var z=this._writableState,Q=!1,L=!z.objectMode&&k(f);return L&&!h.isBuffer(f)&&(f=_(f)),typeof C=="function"&&(I=C,C=null),L?C="buffer":C||(C=z.defaultEncoding),typeof I!="function"&&(I=l),z.ending?R(this,I):(L||X(this,z,f,I))&&(z.pendingcb++,Q=E(this,z,L,f,C,I)),Q},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var f=this._writableState;f.corked&&(f.corked--,!f.writing&&!f.corked&&!f.bufferProcessing&&f.bufferedRequest&&H(this,f))},P.prototype.setDefaultEncoding=function(C){if(typeof C=="string"&&(C=C.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((C+"").toLowerCase())>-1))throw new x(C);return this._writableState.defaultEncoding=C,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function D(f,C,I){return!f.objectMode&&f.decodeStrings!==!1&&typeof C=="string"&&(C=h.from(C,I)),C}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function E(f,C,I,z,Q,L){if(!I){var N=D(C,z,Q);z!==N&&(I=!0,Q="buffer",z=N)}var se=C.objectMode?1:z.length;C.length+=se;var ge=C.length<C.highWaterMark;if(ge||(C.needDrain=!0),C.writing||C.corked){var Ae=C.lastBufferedRequest;C.lastBufferedRequest={chunk:z,encoding:Q,isBuf:I,callback:L,next:null},Ae?Ae.next=C.lastBufferedRequest:C.bufferedRequest=C.lastBufferedRequest,C.bufferedRequestCount+=1}else B(f,C,!1,se,z,Q,L);return ge}function B(f,C,I,z,Q,L,N){C.writelen=z,C.writecb=N,C.writing=!0,C.sync=!0,C.destroyed?C.onwrite(new T("write")):I?f._writev(Q,C.onwrite):f._write(Q,L,C.onwrite),C.sync=!1}function oe(f,C,I,z,Q){--C.pendingcb,I?(process$1.nextTick(Q,z),process$1.nextTick(s,f,C),f._writableState.errorEmitted=!0,b(f,z)):(Q(z),f._writableState.errorEmitted=!0,b(f,z),s(f,C))}function ae(f){f.writing=!1,f.writecb=null,f.length-=f.writelen,f.writelen=0}function ue(f,C){var I=f._writableState,z=I.sync,Q=I.writecb;if(typeof Q!="function")throw new F;if(ae(I),C)oe(f,I,z,C,Q);else{var L=W(I)||f.destroyed;!L&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&H(f,I),z?process$1.nextTick(re,f,I,L,Q):re(f,I,L,Q)}}function re(f,C,I,z){I||pe(f,C),C.pendingcb--,z(),s(f,C)}function pe(f,C){C.length===0&&C.needDrain&&(C.needDrain=!1,f.emit("drain"))}function H(f,C){C.bufferProcessing=!0;var I=C.bufferedRequest;if(f._writev&&I&&I.next){var z=C.bufferedRequestCount,Q=new Array(z),L=C.corkedRequestsFree;L.entry=I;for(var N=0,se=!0;I;)Q[N]=I,I.isBuf||(se=!1),I=I.next,N+=1;Q.allBuffers=se,B(f,C,!0,C.length,Q,"",L.finish),C.pendingcb++,C.lastBufferedRequest=null,L.next?(C.corkedRequestsFree=L.next,L.next=null):C.corkedRequestsFree=new t(C),C.bufferedRequestCount=0}else{for(;I;){var ge=I.chunk,Ae=I.encoding,he=I.callback,de=C.objectMode?1:ge.length;if(B(f,C,!1,de,ge,Ae,he),I=I.next,C.bufferedRequestCount--,C.writing)break}I===null&&(C.lastBufferedRequest=null)}C.bufferedRequest=I,C.bufferProcessing=!1}P.prototype._write=function(f,C,I){I(new M("_write()"))},P.prototype._writev=null,P.prototype.end=function(f,C,I){var z=this._writableState;return typeof f=="function"?(I=f,f=null,C=null):typeof C=="function"&&(I=C,C=null),f!=null&&this.write(f,C),z.corked&&(z.corked=1,this.uncork()),z.ending||i(this,z,I),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function W(f){return f.ending&&f.length===0&&f.bufferedRequest===null&&!f.finished&&!f.writing}function ne(f,C){f._final(function(I){C.pendingcb--,I&&b(f,I),C.prefinished=!0,f.emit("prefinish"),s(f,C)})}function j(f,C){!C.prefinished&&!C.finalCalled&&(typeof f._final=="function"&&!C.destroyed?(C.pendingcb++,C.finalCalled=!0,process$1.nextTick(ne,f,C)):(C.prefinished=!0,f.emit("prefinish")))}function s(f,C){var I=W(C);if(I&&(j(f,C),C.pendingcb===0&&(C.finished=!0,f.emit("finish"),C.autoDestroy))){var z=f._readableState;(!z||z.autoDestroy&&z.endEmitted)&&f.destroy()}return I}function i(f,C,I){C.ending=!0,s(f,C),I&&(C.finished?process$1.nextTick(I):f.once("finish",I)),C.ended=!0,f.writable=!1}function p(f,C,I){var z=f.entry;for(f.entry=null;z;){var Q=z.callback;C.pendingcb--,Q(I),z=z.next}C.corkedRequestsFree.next=f}return Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(C){this._writableState&&(this._writableState.destroyed=C)}}),P.prototype.destroy=g.destroy,P.prototype._undestroy=g.undestroy,P.prototype._destroy=function(f,C){C(f)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var t=Object.keys||function(m){var a=[];for(var S in m)a.push(S);return a};_stream_duplex=_;var e=require_stream_readable(),n=require_stream_writable();requireInherits_browser()(_,e);for(var r=t(n.prototype),h=0;h<r.length;h++){var y=r[h];_.prototype[y]||(_.prototype[y]=n.prototype[y])}function _(m){if(!(this instanceof _))return new _(m);e.call(this,m),n.call(this,m),this.allowHalfOpen=!0,m&&(m.readable===!1&&(this.readable=!1),m.writable===!1&&(this.writable=!1),m.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",k)))}Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function k(){this._writableState.ended||process$1.nextTick(g,this)}function g(m){m.end()}return Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),_stream_duplex}var string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(t,e){var n=requireDist(),r=n.Buffer;function h(_,k){for(var g in _)k[g]=_[g]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(h(n,e),e.Buffer=y);function y(_,k,g){return r(_,k,g)}y.prototype=Object.create(r.prototype),h(r,y),y.from=function(_,k,g){if(typeof _=="number")throw new TypeError("Argument must not be a number");return r(_,k,g)},y.alloc=function(_,k,g){if(typeof _!="number")throw new TypeError("Argument must be a number");var m=r(_);return k!==void 0?typeof g=="string"?m.fill(k,g):m.fill(k):m.fill(0),m},y.allocUnsafe=function(_){if(typeof _!="number")throw new TypeError("Argument must be a number");return r(_)},y.allocUnsafeSlow=function(_){if(typeof _!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(_)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var t=requireSafeBuffer().Buffer,e=t.isEncoding||function(o){switch(o=""+o,o&&o.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(o){if(!o)return"utf8";for(var u;;)switch(o){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return o;default:if(u)return;o=(""+o).toLowerCase(),u=!0}}function r(o){var u=n(o);if(typeof u!="string"&&(t.isEncoding===e||!e(o)))throw new Error("Unknown encoding: "+o);return u||o}string_decoder.StringDecoder=h;function h(o){this.encoding=r(o);var u;switch(this.encoding){case"utf16le":this.text=S,this.end=A,u=4;break;case"utf8":this.fillLast=g,u=4;break;case"base64":this.text=M,this.end=F,u=3;break;default:this.write=q,this.end=T;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(u)}h.prototype.write=function(o){if(o.length===0)return"";var u,x;if(this.lastNeed){if(u=this.fillLast(o),u===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<o.length?u?u+this.text(o,x):this.text(o,x):u||""},h.prototype.end=a,h.prototype.text=m,h.prototype.fillLast=function(o){if(this.lastNeed<=o.length)return o.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);o.copy(this.lastChar,this.lastTotal-this.lastNeed,0,o.length),this.lastNeed-=o.length};function y(o){return o<=127?0:o>>5===6?2:o>>4===14?3:o>>3===30?4:o>>6===2?-1:-2}function _(o,u,x){var b=u.length-1;if(b<x)return 0;var l=y(u[b]);return l>=0?(l>0&&(o.lastNeed=l-1),l):--b<x||l===-2?0:(l=y(u[b]),l>=0?(l>0&&(o.lastNeed=l-2),l):--b<x||l===-2?0:(l=y(u[b]),l>=0?(l>0&&(l===2?l=0:o.lastNeed=l-3),l):0))}function k(o,u,x){if((u[0]&192)!==128)return o.lastNeed=0,"";if(o.lastNeed>1&&u.length>1){if((u[1]&192)!==128)return o.lastNeed=1,"";if(o.lastNeed>2&&u.length>2&&(u[2]&192)!==128)return o.lastNeed=2,""}}function g(o){var u=this.lastTotal-this.lastNeed,x=k(this,o);if(x!==void 0)return x;if(this.lastNeed<=o.length)return o.copy(this.lastChar,u,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);o.copy(this.lastChar,u,0,o.length),this.lastNeed-=o.length}function m(o,u){var x=_(this,o,u);if(!this.lastNeed)return o.toString("utf8",u);this.lastTotal=x;var b=o.length-(x-this.lastNeed);return o.copy(this.lastChar,0,b),o.toString("utf8",u,b)}function a(o){var u=o&&o.length?this.write(o):"";return this.lastNeed?u+"":u}function S(o,u){if((o.length-u)%2===0){var x=o.toString("utf16le",u);if(x){var b=x.charCodeAt(x.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=o[o.length-2],this.lastChar[1]=o[o.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=o[o.length-1],o.toString("utf16le",u,o.length-1)}function A(o){var u=o&&o.length?this.write(o):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return u+this.lastChar.toString("utf16le",0,x)}return u}function M(o,u){var x=(o.length-u)%3;return x===0?o.toString("base64",u):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=o[o.length-1]:(this.lastChar[0]=o[o.length-2],this.lastChar[1]=o[o.length-1]),o.toString("base64",u,o.length-x))}function F(o){var u=o&&o.length?this.write(o):"";return this.lastNeed?u+this.lastChar.toString("base64",0,3-this.lastNeed):u}function q(o){return o.toString(this.encoding)}function T(o){return o&&o.length?this.write(o):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var t=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function e(y){var _=!1;return function(){if(!_){_=!0;for(var k=arguments.length,g=new Array(k),m=0;m<k;m++)g[m]=arguments[m];y.apply(this,g)}}}function n(){}function r(y){return y.setHeader&&typeof y.abort=="function"}function h(y,_,k){if(typeof _=="function")return h(y,null,_);_||(_={}),k=e(k||n);var g=_.readable||_.readable!==!1&&y.readable,m=_.writable||_.writable!==!1&&y.writable,a=function(){y.writable||A()},S=y._writableState&&y._writableState.finished,A=function(){m=!1,S=!0,g||k.call(y)},M=y._readableState&&y._readableState.endEmitted,F=function(){g=!1,M=!0,m||k.call(y)},q=function(x){k.call(y,x)},T=function(){var x;if(g&&!M)return(!y._readableState||!y._readableState.ended)&&(x=new t),k.call(y,x);if(m&&!S)return(!y._writableState||!y._writableState.ended)&&(x=new t),k.call(y,x)},o=function(){y.req.on("finish",A)};return r(y)?(y.on("complete",A),y.on("abort",T),y.req?o():y.on("request",o)):m&&!y._writableState&&(y.on("end",a),y.on("close",a)),y.on("end",F),y.on("finish",A),_.error!==!1&&y.on("error",q),y.on("close",T),function(){y.removeListener("complete",A),y.removeListener("abort",T),y.removeListener("request",o),y.req&&y.req.removeListener("finish",A),y.removeListener("end",a),y.removeListener("close",a),y.removeListener("finish",A),y.removeListener("end",F),y.removeListener("error",q),y.removeListener("close",T)}}return endOfStream=h,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var t;function e(x,b,l){return b=n(b),b in x?Object.defineProperty(x,b,{value:l,enumerable:!0,configurable:!0,writable:!0}):x[b]=l,x}function n(x){var b=r(x,"string");return typeof b=="symbol"?b:String(b)}function r(x,b){if(typeof x!="object"||x===null)return x;var l=x[Symbol.toPrimitive];if(l!==void 0){var v=l.call(x,b);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(x)}var h=requireEndOfStream(),y=Symbol("lastResolve"),_=Symbol("lastReject"),k=Symbol("error"),g=Symbol("ended"),m=Symbol("lastPromise"),a=Symbol("handlePromise"),S=Symbol("stream");function A(x,b){return{value:x,done:b}}function M(x){var b=x[y];if(b!==null){var l=x[S].read();l!==null&&(x[m]=null,x[y]=null,x[_]=null,b(A(l,!1)))}}function F(x){process$1.nextTick(M,x)}function q(x,b){return function(l,v){x.then(function(){if(b[g]){l(A(void 0,!0));return}b[a](l,v)},v)}}var T=Object.getPrototypeOf(function(){}),o=Object.setPrototypeOf((t={get stream(){return this[S]},next:function(){var b=this,l=this[k];if(l!==null)return Promise.reject(l);if(this[g])return Promise.resolve(A(void 0,!0));if(this[S].destroyed)return new Promise(function(R,X){process$1.nextTick(function(){b[k]?X(b[k]):R(A(void 0,!0))})});var v=this[m],c;if(v)c=new Promise(q(v,this));else{var P=this[S].read();if(P!==null)return Promise.resolve(A(P,!1));c=new Promise(this[a])}return this[m]=c,c}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var b=this;return new Promise(function(l,v){b[S].destroy(null,function(c){if(c){v(c);return}l(A(void 0,!0))})})}),t),T),u=function(b){var l,v=Object.create(o,(l={},e(l,S,{value:b,writable:!0}),e(l,y,{value:null,writable:!0}),e(l,_,{value:null,writable:!0}),e(l,k,{value:null,writable:!0}),e(l,g,{value:b._readableState.endEmitted,writable:!0}),e(l,a,{value:function(P,R){var X=v[S].read();X?(v[m]=null,v[y]=null,v[_]=null,P(A(X,!1))):(v[y]=P,v[_]=R)},writable:!0}),l));return v[m]=null,h(b,function(c){if(c&&c.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=v[_];P!==null&&(v[m]=null,v[y]=null,v[_]=null,P(c)),v[k]=c;return}var R=v[y];R!==null&&(v[m]=null,v[y]=null,v[_]=null,R(A(void 0,!0))),v[g]=!0}),b.on("readable",F.bind(null,v)),v};return async_iterator=u,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=R;var t;R.ReadableState=P,requireEvents().EventEmitter;var e=function(N,se){return N.listeners(se).length},n=requireStreamBrowser(),r=requireDist().Buffer,h=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function y(L){return r.from(L)}function _(L){return r.isBuffer(L)||L instanceof h}var k=requireUtil(),g;k&&k.debuglog?g=k.debuglog("stream"):g=function(){};var m=requireBuffer_list(),a=requireDestroy(),S=requireState(),A=S.getHighWaterMark,M=requireErrorsBrowser().codes,F=M.ERR_INVALID_ARG_TYPE,q=M.ERR_STREAM_PUSH_AFTER_EOF,T=M.ERR_METHOD_NOT_IMPLEMENTED,o=M.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,u,x,b;requireInherits_browser()(R,n);var l=a.errorOrDestroy,v=["error","close","destroy","pause","resume"];function c(L,N,se){if(typeof L.prependListener=="function")return L.prependListener(N,se);!L._events||!L._events[N]?L.on(N,se):Array.isArray(L._events[N])?L._events[N].unshift(se):L._events[N]=[se,L._events[N]]}function P(L,N,se){t=t||require_stream_duplex(),L=L||{},typeof se!="boolean"&&(se=N instanceof t),this.objectMode=!!L.objectMode,se&&(this.objectMode=this.objectMode||!!L.readableObjectMode),this.highWaterMark=A(this,L,"readableHighWaterMark",se),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=L.emitClose!==!1,this.autoDestroy=!!L.autoDestroy,this.destroyed=!1,this.defaultEncoding=L.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,L.encoding&&(u||(u=requireString_decoder().StringDecoder),this.decoder=new u(L.encoding),this.encoding=L.encoding)}function R(L){if(t=t||require_stream_duplex(),!(this instanceof R))return new R(L);var N=this instanceof t;this._readableState=new P(L,this,N),this.readable=!0,L&&(typeof L.read=="function"&&(this._read=L.read),typeof L.destroy=="function"&&(this._destroy=L.destroy)),n.call(this)}Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(N){this._readableState&&(this._readableState.destroyed=N)}}),R.prototype.destroy=a.destroy,R.prototype._undestroy=a.undestroy,R.prototype._destroy=function(L,N){N(L)},R.prototype.push=function(L,N){var se=this._readableState,ge;return se.objectMode?ge=!0:typeof L=="string"&&(N=N||se.defaultEncoding,N!==se.encoding&&(L=r.from(L,N),N=""),ge=!0),X(this,L,N,!1,ge)},R.prototype.unshift=function(L){return X(this,L,null,!0,!1)};function X(L,N,se,ge,Ae){g("readableAddChunk",N);var he=L._readableState;if(N===null)he.reading=!1,ue(L,he);else{var de;if(Ae||(de=E(he,N)),de)l(L,de);else if(he.objectMode||N&&N.length>0)if(typeof N!="string"&&!he.objectMode&&Object.getPrototypeOf(N)!==r.prototype&&(N=y(N)),ge)he.endEmitted?l(L,new o):D(L,he,N,!0);else if(he.ended)l(L,new q);else{if(he.destroyed)return!1;he.reading=!1,he.decoder&&!se?(N=he.decoder.write(N),he.objectMode||N.length!==0?D(L,he,N,!1):H(L,he)):D(L,he,N,!1)}else ge||(he.reading=!1,H(L,he))}return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function D(L,N,se,ge){N.flowing&&N.length===0&&!N.sync?(N.awaitDrain=0,L.emit("data",se)):(N.length+=N.objectMode?1:se.length,ge?N.buffer.unshift(se):N.buffer.push(se),N.needReadable&&re(L)),H(L,N)}function E(L,N){var se;return!_(N)&&typeof N!="string"&&N!==void 0&&!L.objectMode&&(se=new F("chunk",["string","Buffer","Uint8Array"],N)),se}R.prototype.isPaused=function(){return this._readableState.flowing===!1},R.prototype.setEncoding=function(L){u||(u=requireString_decoder().StringDecoder);var N=new u(L);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;for(var se=this._readableState.buffer.head,ge="";se!==null;)ge+=N.write(se.data),se=se.next;return this._readableState.buffer.clear(),ge!==""&&this._readableState.buffer.push(ge),this._readableState.length=ge.length,this};var B=1073741824;function oe(L){return L>=B?L=B:(L--,L|=L>>>1,L|=L>>>2,L|=L>>>4,L|=L>>>8,L|=L>>>16,L++),L}function ae(L,N){return L<=0||N.length===0&&N.ended?0:N.objectMode?1:L!==L?N.flowing&&N.length?N.buffer.head.data.length:N.length:(L>N.highWaterMark&&(N.highWaterMark=oe(L)),L<=N.length?L:N.ended?N.length:(N.needReadable=!0,0))}R.prototype.read=function(L){g("read",L),L=parseInt(L,10);var N=this._readableState,se=L;if(L!==0&&(N.emittedReadable=!1),L===0&&N.needReadable&&((N.highWaterMark!==0?N.length>=N.highWaterMark:N.length>0)||N.ended))return g("read: emitReadable",N.length,N.ended),N.length===0&&N.ended?I(this):re(this),null;if(L=ae(L,N),L===0&&N.ended)return N.length===0&&I(this),null;var ge=N.needReadable;g("need readable",ge),(N.length===0||N.length-L<N.highWaterMark)&&(ge=!0,g("length less than watermark",ge)),N.ended||N.reading?(ge=!1,g("reading or ended",ge)):ge&&(g("do read"),N.reading=!0,N.sync=!0,N.length===0&&(N.needReadable=!0),this._read(N.highWaterMark),N.sync=!1,N.reading||(L=ae(se,N)));var Ae;return L>0?Ae=C(L,N):Ae=null,Ae===null?(N.needReadable=N.length<=N.highWaterMark,L=0):(N.length-=L,N.awaitDrain=0),N.length===0&&(N.ended||(N.needReadable=!0),se!==L&&N.ended&&I(this)),Ae!==null&&this.emit("data",Ae),Ae};function ue(L,N){if(g("onEofChunk"),!N.ended){if(N.decoder){var se=N.decoder.end();se&&se.length&&(N.buffer.push(se),N.length+=N.objectMode?1:se.length)}N.ended=!0,N.sync?re(L):(N.needReadable=!1,N.emittedReadable||(N.emittedReadable=!0,pe(L)))}}function re(L){var N=L._readableState;g("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(g("emitReadable",N.flowing),N.emittedReadable=!0,process$1.nextTick(pe,L))}function pe(L){var N=L._readableState;g("emitReadable_",N.destroyed,N.length,N.ended),!N.destroyed&&(N.length||N.ended)&&(L.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,f(L)}function H(L,N){N.readingMore||(N.readingMore=!0,process$1.nextTick(W,L,N))}function W(L,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&N.length===0);){var se=N.length;if(g("maybeReadMore read 0"),L.read(0),se===N.length)break}N.readingMore=!1}R.prototype._read=function(L){l(this,new T("_read()"))},R.prototype.pipe=function(L,N){var se=this,ge=this._readableState;switch(ge.pipesCount){case 0:ge.pipes=L;break;case 1:ge.pipes=[ge.pipes,L];break;default:ge.pipes.push(L);break}ge.pipesCount+=1,g("pipe count=%d opts=%j",ge.pipesCount,N);var Ae=(!N||N.end!==!1)&&L!==process$1.stdout&&L!==process$1.stderr,he=Ae?K:Se;ge.endEmitted?process$1.nextTick(he):se.once("end",he),L.on("unpipe",de);function de(Te,De){g("onunpipe"),Te===se&&De&&De.hasUnpiped===!1&&(De.hasUnpiped=!0,_e())}function K(){g("onend"),L.end()}var $=ne(se);L.on("drain",$);var me=!1;function _e(){g("cleanup"),L.removeListener("close",te),L.removeListener("finish",J),L.removeListener("drain",$),L.removeListener("error",ke),L.removeListener("unpipe",de),se.removeListener("end",K),se.removeListener("end",Se),se.removeListener("data",Ce),me=!0,ge.awaitDrain&&(!L._writableState||L._writableState.needDrain)&&$()}se.on("data",Ce);function Ce(Te){g("ondata");var De=L.write(Te);g("dest.write",De),De===!1&&((ge.pipesCount===1&&ge.pipes===L||ge.pipesCount>1&&Q(ge.pipes,L)!==-1)&&!me&&(g("false write response, pause",ge.awaitDrain),ge.awaitDrain++),se.pause())}function ke(Te){g("onerror",Te),Se(),L.removeListener("error",ke),e(L,"error")===0&&l(L,Te)}c(L,"error",ke);function te(){L.removeListener("finish",J),Se()}L.once("close",te);function J(){g("onfinish"),L.removeListener("close",te),Se()}L.once("finish",J);function Se(){g("unpipe"),se.unpipe(L)}return L.emit("pipe",se),ge.flowing||(g("pipe resume"),se.resume()),L};function ne(L){return function(){var se=L._readableState;g("pipeOnDrain",se.awaitDrain),se.awaitDrain&&se.awaitDrain--,se.awaitDrain===0&&e(L,"data")&&(se.flowing=!0,f(L))}}R.prototype.unpipe=function(L){var N=this._readableState,se={hasUnpiped:!1};if(N.pipesCount===0)return this;if(N.pipesCount===1)return L&&L!==N.pipes?this:(L||(L=N.pipes),N.pipes=null,N.pipesCount=0,N.flowing=!1,L&&L.emit("unpipe",this,se),this);if(!L){var ge=N.pipes,Ae=N.pipesCount;N.pipes=null,N.pipesCount=0,N.flowing=!1;for(var he=0;he<Ae;he++)ge[he].emit("unpipe",this,{hasUnpiped:!1});return this}var de=Q(N.pipes,L);return de===-1?this:(N.pipes.splice(de,1),N.pipesCount-=1,N.pipesCount===1&&(N.pipes=N.pipes[0]),L.emit("unpipe",this,se),this)},R.prototype.on=function(L,N){var se=n.prototype.on.call(this,L,N),ge=this._readableState;return L==="data"?(ge.readableListening=this.listenerCount("readable")>0,ge.flowing!==!1&&this.resume()):L==="readable"&&!ge.endEmitted&&!ge.readableListening&&(ge.readableListening=ge.needReadable=!0,ge.flowing=!1,ge.emittedReadable=!1,g("on readable",ge.length,ge.reading),ge.length?re(this):ge.reading||process$1.nextTick(s,this)),se},R.prototype.addListener=R.prototype.on,R.prototype.removeListener=function(L,N){var se=n.prototype.removeListener.call(this,L,N);return L==="readable"&&process$1.nextTick(j,this),se},R.prototype.removeAllListeners=function(L){var N=n.prototype.removeAllListeners.apply(this,arguments);return(L==="readable"||L===void 0)&&process$1.nextTick(j,this),N};function j(L){var N=L._readableState;N.readableListening=L.listenerCount("readable")>0,N.resumeScheduled&&!N.paused?N.flowing=!0:L.listenerCount("data")>0&&L.resume()}function s(L){g("readable nexttick read 0"),L.read(0)}R.prototype.resume=function(){var L=this._readableState;return L.flowing||(g("resume"),L.flowing=!L.readableListening,i(this,L)),L.paused=!1,this};function i(L,N){N.resumeScheduled||(N.resumeScheduled=!0,process$1.nextTick(p,L,N))}function p(L,N){g("resume",N.reading),N.reading||L.read(0),N.resumeScheduled=!1,L.emit("resume"),f(L),N.flowing&&!N.reading&&L.read(0)}R.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function f(L){var N=L._readableState;for(g("flow",N.flowing);N.flowing&&L.read()!==null;);}R.prototype.wrap=function(L){var N=this,se=this._readableState,ge=!1;L.on("end",function(){if(g("wrapped end"),se.decoder&&!se.ended){var de=se.decoder.end();de&&de.length&&N.push(de)}N.push(null)}),L.on("data",function(de){if(g("wrapped data"),se.decoder&&(de=se.decoder.write(de)),!(se.objectMode&&de==null)&&!(!se.objectMode&&(!de||!de.length))){var K=N.push(de);K||(ge=!0,L.pause())}});for(var Ae in L)this[Ae]===void 0&&typeof L[Ae]=="function"&&(this[Ae]=function(K){return function(){return L[K].apply(L,arguments)}}(Ae));for(var he=0;he<v.length;he++)L.on(v[he],this.emit.bind(this,v[he]));return this._read=function(de){g("wrapped _read",de),ge&&(ge=!1,L.resume())},this},typeof Symbol=="function"&&(R.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=requireAsync_iterator()),x(this)}),Object.defineProperty(R.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(R.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(R.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(N){this._readableState&&(this._readableState.flowing=N)}}),R._fromList=C,Object.defineProperty(R.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function C(L,N){if(N.length===0)return null;var se;return N.objectMode?se=N.buffer.shift():!L||L>=N.length?(N.decoder?se=N.buffer.join(""):N.buffer.length===1?se=N.buffer.first():se=N.buffer.concat(N.length),N.buffer.clear()):se=N.buffer.consume(L,N.decoder),se}function I(L){var N=L._readableState;g("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,process$1.nextTick(z,N,L))}function z(L,N){if(g("endReadableNT",L.endEmitted,L.length),!L.endEmitted&&L.length===0&&(L.endEmitted=!0,N.readable=!1,N.emit("end"),L.autoDestroy)){var se=N._writableState;(!se||se.autoDestroy&&se.finished)&&N.destroy()}}typeof Symbol=="function"&&(R.from=function(L,N){return b===void 0&&(b=requireFromBrowser()),b(R,L,N)});function Q(L,N){for(var se=0,ge=L.length;se<ge;se++)if(L[se]===N)return se;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=k;var t=requireErrorsBrowser().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,n=t.ERR_MULTIPLE_CALLBACK,r=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,h=t.ERR_TRANSFORM_WITH_LENGTH_0,y=require_stream_duplex();requireInherits_browser()(k,y);function _(a,S){var A=this._transformState;A.transforming=!1;var M=A.writecb;if(M===null)return this.emit("error",new n);A.writechunk=null,A.writecb=null,S!=null&&this.push(S),M(a);var F=this._readableState;F.reading=!1,(F.needReadable||F.length<F.highWaterMark)&&this._read(F.highWaterMark)}function k(a){if(!(this instanceof k))return new k(a);y.call(this,a),this._transformState={afterTransform:_.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&(typeof a.transform=="function"&&(this._transform=a.transform),typeof a.flush=="function"&&(this._flush=a.flush)),this.on("prefinish",g)}function g(){var a=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(S,A){m(a,S,A)}):m(this,null,null)}k.prototype.push=function(a,S){return this._transformState.needTransform=!1,y.prototype.push.call(this,a,S)},k.prototype._transform=function(a,S,A){A(new e("_transform()"))},k.prototype._write=function(a,S,A){var M=this._transformState;if(M.writecb=A,M.writechunk=a,M.writeencoding=S,!M.transforming){var F=this._readableState;(M.needTransform||F.needReadable||F.length<F.highWaterMark)&&this._read(F.highWaterMark)}},k.prototype._read=function(a){var S=this._transformState;S.writechunk!==null&&!S.transforming?(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform)):S.needTransform=!0},k.prototype._destroy=function(a,S){y.prototype._destroy.call(this,a,function(A){S(A)})};function m(a,S,A){if(S)return a.emit("error",S);if(A!=null&&a.push(A),a._writableState.length)throw new h;if(a._transformState.transforming)throw new r;return a.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=e;var t=require_stream_transform();requireInherits_browser()(e,t);function e(n){if(!(this instanceof e))return new e(n);t.call(this,n)}return e.prototype._transform=function(n,r,h){h(null,n)},_stream_passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var t;function e(A){var M=!1;return function(){M||(M=!0,A.apply(void 0,arguments))}}var n=requireErrorsBrowser().codes,r=n.ERR_MISSING_ARGS,h=n.ERR_STREAM_DESTROYED;function y(A){if(A)throw A}function _(A){return A.setHeader&&typeof A.abort=="function"}function k(A,M,F,q){q=e(q);var T=!1;A.on("close",function(){T=!0}),t===void 0&&(t=requireEndOfStream()),t(A,{readable:M,writable:F},function(u){if(u)return q(u);T=!0,q()});var o=!1;return function(u){if(!T&&!o){if(o=!0,_(A))return A.abort();if(typeof A.destroy=="function")return A.destroy();q(u||new h("pipe"))}}}function g(A){A()}function m(A,M){return A.pipe(M)}function a(A){return!A.length||typeof A[A.length-1]!="function"?y:A.pop()}function S(){for(var A=arguments.length,M=new Array(A),F=0;F<A;F++)M[F]=arguments[F];var q=a(M);if(Array.isArray(M[0])&&(M=M[0]),M.length<2)throw new r("streams");var T,o=M.map(function(u,x){var b=x<M.length-1,l=x>0;return k(u,b,l,function(v){T||(T=v),v&&o.forEach(g),!b&&(o.forEach(g),q(T))})});return M.reduce(m)}return pipeline_1=S,pipeline_1}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(t,e){e=t.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=require_stream_transform(),e.PassThrough=require_stream_passthrough(),e.finished=requireEndOfStream(),e.pipeline=requirePipeline()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var hasRequiredResponse;function requireResponse(){if(hasRequiredResponse)return response;hasRequiredResponse=1;var t=requireCapability(),e=requireInherits_browser(),n=requireReadableBrowser(),r=response.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},h=response.IncomingMessage=function(y,_,k,g){var m=this;if(n.Readable.call(m),m._mode=k,m.headers={},m.rawHeaders=[],m.trailers={},m.rawTrailers=[],m.on("end",function(){process$1.nextTick(function(){m.emit("close")})}),k==="fetch"){let q=function(){S.read().then(function(T){if(!m._destroyed){if(g(T.done),T.done){m.push(null);return}m.push(Buffer.from(T.value)),q()}}).catch(function(T){g(!0),m._destroyed||m.emit("error",T)})};if(m._fetchResponse=_,m.url=_.url,m.statusCode=_.status,m.statusMessage=_.statusText,_.headers.forEach(function(T,o){m.headers[o.toLowerCase()]=T,m.rawHeaders.push(o,T)}),t.writableStream){var a=new WritableStream({write:function(T){return g(!1),new Promise(function(o,u){m._destroyed?u():m.push(Buffer.from(T))?o():m._resumeFetch=o})},close:function(){g(!0),m._destroyed||m.push(null)},abort:function(T){g(!0),m._destroyed||m.emit("error",T)}});try{_.body.pipeTo(a).catch(function(T){g(!0),m._destroyed||m.emit("error",T)});return}catch{}}var S=_.body.getReader();q()}else{m._xhr=y,m._pos=0,m.url=y.responseURL,m.statusCode=y.status,m.statusMessage=y.statusText;var A=y.getAllResponseHeaders().split(/\r?\n/);if(A.forEach(function(q){var T=q.match(/^([^:]+):\s*(.*)/);if(T){var o=T[1].toLowerCase();o==="set-cookie"?(m.headers[o]===void 0&&(m.headers[o]=[]),m.headers[o].push(T[2])):m.headers[o]!==void 0?m.headers[o]+=", "+T[2]:m.headers[o]=T[2],m.rawHeaders.push(T[1],T[2])}}),m._charset="x-user-defined",!t.overrideMimeType){var M=m.rawHeaders["mime-type"];if(M){var F=M.match(/;\s*charset=([^;])(;|$)/);F&&(m._charset=F[1].toLowerCase())}m._charset||(m._charset="utf-8")}}};return e(h,n.Readable),h.prototype._read=function(){var y=this,_=y._resumeFetch;_&&(y._resumeFetch=null,_())},h.prototype._onXHRProgress=function(y){var _=this,k=_._xhr,g=null;switch(_._mode){case"text":if(g=k.responseText,g.length>_._pos){var m=g.substr(_._pos);if(_._charset==="x-user-defined"){for(var a=Buffer.alloc(m.length),S=0;S<m.length;S++)a[S]=m.charCodeAt(S)&255;_.push(a)}else _.push(m,_._charset);_._pos=g.length}break;case"arraybuffer":if(k.readyState!==r.DONE||!k.response)break;g=k.response,_.push(Buffer.from(new Uint8Array(g)));break;case"moz-chunked-arraybuffer":if(g=k.response,k.readyState!==r.LOADING||!g)break;_.push(Buffer.from(new Uint8Array(g)));break;case"ms-stream":if(g=k.response,k.readyState!==r.LOADING)break;var A=new commonjsGlobal.MSStreamReader;A.onprogress=function(){A.result.byteLength>_._pos&&(_.push(Buffer.from(new Uint8Array(A.result.slice(_._pos)))),_._pos=A.result.byteLength)},A.onload=function(){y(!0),_.push(null)},A.readAsArrayBuffer(g);break}_._xhr.readyState===r.DONE&&_._mode!=="ms-stream"&&(y(!0),_.push(null))},response}var hasRequiredRequest;function requireRequest(){if(hasRequiredRequest)return request.exports;hasRequiredRequest=1;var t=requireCapability(),e=requireInherits_browser(),n=requireResponse(),r=requireReadableBrowser(),h=n.IncomingMessage,y=n.readyStates;function _(a,S){return t.fetch&&S?"fetch":t.mozchunkedarraybuffer?"moz-chunked-arraybuffer":t.msstream?"ms-stream":t.arraybuffer&&a?"arraybuffer":"text"}var k=request.exports=function(a){var S=this;r.Writable.call(S),S._opts=a,S._body=[],S._headers={},a.auth&&S.setHeader("Authorization","Basic "+Buffer.from(a.auth).toString("base64")),Object.keys(a.headers).forEach(function(F){S.setHeader(F,a.headers[F])});var A,M=!0;if(a.mode==="disable-fetch"||"requestTimeout"in a&&!t.abortController)M=!1,A=!0;else if(a.mode==="prefer-streaming")A=!1;else if(a.mode==="allow-wrong-content-type")A=!t.overrideMimeType;else if(!a.mode||a.mode==="default"||a.mode==="prefer-fast")A=!0;else throw new Error("Invalid value for opts.mode");S._mode=_(A,M),S._fetchTimer=null,S._socketTimeout=null,S._socketTimer=null,S.on("finish",function(){S._onFinish()})};e(k,r.Writable),k.prototype.setHeader=function(a,S){var A=this,M=a.toLowerCase();m.indexOf(M)===-1&&(A._headers[M]={name:a,value:S})},k.prototype.getHeader=function(a){var S=this._headers[a.toLowerCase()];return S?S.value:null},k.prototype.removeHeader=function(a){var S=this;delete S._headers[a.toLowerCase()]},k.prototype._onFinish=function(){var a=this;if(!a._destroyed){var S=a._opts;"timeout"in S&&S.timeout!==0&&a.setTimeout(S.timeout);var A=a._headers,M=null;S.method!=="GET"&&S.method!=="HEAD"&&(M=new Blob(a._body,{type:(A["content-type"]||{}).value||""}));var F=[];if(Object.keys(A).forEach(function(u){var x=A[u].name,b=A[u].value;Array.isArray(b)?b.forEach(function(l){F.push([x,l])}):F.push([x,b])}),a._mode==="fetch"){var q=null;if(t.abortController){var T=new AbortController;q=T.signal,a._fetchAbortController=T,"requestTimeout"in S&&S.requestTimeout!==0&&(a._fetchTimer=commonjsGlobal.setTimeout(function(){a.emit("requestTimeout"),a._fetchAbortController&&a._fetchAbortController.abort()},S.requestTimeout))}commonjsGlobal.fetch(a._opts.url,{method:a._opts.method,headers:F,body:M||void 0,mode:"cors",credentials:S.withCredentials?"include":"same-origin",signal:q}).then(function(u){a._fetchResponse=u,a._resetTimers(!1),a._connect()},function(u){a._resetTimers(!0),a._destroyed||a.emit("error",u)})}else{var o=a._xhr=new commonjsGlobal.XMLHttpRequest;try{o.open(a._opts.method,a._opts.url,!0)}catch(u){process$1.nextTick(function(){a.emit("error",u)});return}"responseType"in o&&(o.responseType=a._mode),"withCredentials"in o&&(o.withCredentials=!!S.withCredentials),a._mode==="text"&&"overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in S&&(o.timeout=S.requestTimeout,o.ontimeout=function(){a.emit("requestTimeout")}),F.forEach(function(u){o.setRequestHeader(u[0],u[1])}),a._response=null,o.onreadystatechange=function(){switch(o.readyState){case y.LOADING:case y.DONE:a._onXHRProgress();break}},a._mode==="moz-chunked-arraybuffer"&&(o.onprogress=function(){a._onXHRProgress()}),o.onerror=function(){a._destroyed||(a._resetTimers(!0),a.emit("error",new Error("XHR error")))};try{o.send(M)}catch(u){process$1.nextTick(function(){a.emit("error",u)});return}}}};function g(a){try{var S=a.status;return S!==null&&S!==0}catch{return!1}}k.prototype._onXHRProgress=function(){var a=this;a._resetTimers(!1),!(!g(a._xhr)||a._destroyed)&&(a._response||a._connect(),a._response._onXHRProgress(a._resetTimers.bind(a)))},k.prototype._connect=function(){var a=this;a._destroyed||(a._response=new h(a._xhr,a._fetchResponse,a._mode,a._resetTimers.bind(a)),a._response.on("error",function(S){a.emit("error",S)}),a.emit("response",a._response))},k.prototype._write=function(a,S,A){var M=this;M._body.push(a),A()},k.prototype._resetTimers=function(a){var S=this;commonjsGlobal.clearTimeout(S._socketTimer),S._socketTimer=null,a?(commonjsGlobal.clearTimeout(S._fetchTimer),S._fetchTimer=null):S._socketTimeout&&(S._socketTimer=commonjsGlobal.setTimeout(function(){S.emit("timeout")},S._socketTimeout))},k.prototype.abort=k.prototype.destroy=function(a){var S=this;S._destroyed=!0,S._resetTimers(!0),S._response&&(S._response._destroyed=!0),S._xhr?S._xhr.abort():S._fetchAbortController&&S._fetchAbortController.abort(),a&&S.emit("error",a)},k.prototype.end=function(a,S,A){var M=this;typeof a=="function"&&(A=a,a=void 0),r.Writable.prototype.end.call(M,a,S,A)},k.prototype.setTimeout=function(a,S){var A=this;S&&A.once("timeout",S),A._socketTimeout=a,A._resetTimers(!1)},k.prototype.flushHeaders=function(){},k.prototype.setNoDelay=function(){},k.prototype.setSocketKeepAlive=function(){};var m=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"];return request.exports}var immutable,hasRequiredImmutable;function requireImmutable(){if(hasRequiredImmutable)return immutable;hasRequiredImmutable=1,immutable=e;var t=Object.prototype.hasOwnProperty;function e(){for(var n={},r=0;r<arguments.length;r++){var h=arguments[r];for(var y in h)t.call(h,y)&&(n[y]=h[y])}return n}return immutable}var browser,hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,browser={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}),browser}var hasRequiredStreamHttp;function requireStreamHttp(){return hasRequiredStreamHttp||(hasRequiredStreamHttp=1,function(t){var e=requireRequest(),n=requireResponse(),r=requireImmutable(),h=requireBrowser(),y=require$$2,_=t;_.request=function(k,g){typeof k=="string"?k=y.parse(k):k=r(k);var m=commonjsGlobal.location.protocol.search(/^https?:$/)===-1?"http:":"",a=k.protocol||m,S=k.hostname||k.host,A=k.port,M=k.path||"/";S&&S.indexOf(":")!==-1&&(S="["+S+"]"),k.url=(S?a+"//"+S:"")+(A?":"+A:"")+M,k.method=(k.method||"GET").toUpperCase(),k.headers=k.headers||{};var F=new e(k);return g&&F.on("response",g),F},_.get=function(g,m){var a=_.request(g,m);return a.end(),a},_.ClientRequest=e,_.IncomingMessage=n.IncomingMessage,_.Agent=function(){},_.Agent.defaultMaxSockets=4,_.globalAgent=new _.Agent,_.STATUS_CODES=h,_.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}(streamHttp)),streamHttp}var httpsBrowserify={exports:{}},hasRequiredHttpsBrowserify;function requireHttpsBrowserify(){return hasRequiredHttpsBrowserify||(hasRequiredHttpsBrowserify=1,function(t){var e=requireStreamHttp(),n=require$$2,r=t.exports;for(var h in e)e.hasOwnProperty(h)&&(r[h]=e[h]);r.request=function(_,k){return _=y(_),e.request.call(this,_,k)},r.get=function(_,k){return _=y(_),e.get.call(this,_,k)};function y(_){if(typeof _=="string"&&(_=n.parse(_)),_.protocol||(_.protocol="https:"),_.protocol!=="https:")throw new Error('Protocol "'+_.protocol+'" not supported. Expected "https:"');return _}}(httpsBrowserify)),httpsBrowserify.exports}var lib={},streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=n;var t=requireEvents().EventEmitter,e=requireInherits_browser();e(n,t),n.Readable=require_stream_readable(),n.Writable=require_stream_writable(),n.Duplex=require_stream_duplex(),n.Transform=require_stream_transform(),n.PassThrough=require_stream_passthrough(),n.finished=requireEndOfStream(),n.pipeline=requirePipeline(),n.Stream=n;function n(){t.call(this)}return n.prototype.pipe=function(r,h){var y=this;function _(M){r.writable&&r.write(M)===!1&&y.pause&&y.pause()}y.on("data",_);function k(){y.readable&&y.resume&&y.resume()}r.on("drain",k),!r._isStdio&&(!h||h.end!==!1)&&(y.on("end",m),y.on("close",a));var g=!1;function m(){g||(g=!0,r.end())}function a(){g||(g=!0,typeof r.destroy=="function"&&r.destroy())}function S(M){if(A(),t.listenerCount(this,"error")===0)throw M}y.on("error",S),r.on("error",S);function A(){y.removeListener("data",_),r.removeListener("drain",k),y.removeListener("end",m),y.removeListener("close",a),y.removeListener("error",S),r.removeListener("error",S),y.removeListener("end",A),y.removeListener("close",A),r.removeListener("close",A)}return y.on("end",A),y.on("close",A),r.on("close",A),r.emit("pipe",y),r},streamBrowserify}var binding={},assert={exports:{}},errors={},hasRequiredErrors;function requireErrors(){if(hasRequiredErrors)return errors;hasRequiredErrors=1;function t(u){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},t(u)}function e(u,x,b){return Object.defineProperty(u,"prototype",{writable:!1}),u}function n(u,x){if(!(u instanceof x))throw new TypeError("Cannot call a class as a function")}function r(u,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(x&&x.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),x&&h(u,x)}function h(u,x){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,v){return l.__proto__=v,l},h(u,x)}function y(u){var x=g();return function(){var l=m(u),v;if(x){var c=m(this).constructor;v=Reflect.construct(l,arguments,c)}else v=l.apply(this,arguments);return _(this,v)}}function _(u,x){if(x&&(t(x)==="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k(u)}function k(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(u){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},m(u)}var a={},S,A;function M(u,x,b){b||(b=Error);function l(c,P,R){return typeof x=="string"?x:x(c,P,R)}var v=function(c){r(R,c);var P=y(R);function R(X,D,E){var B;return n(this,R),B=P.call(this,l(X,D,E)),B.code=u,B}return e(R)}(b);a[u]=v}function F(u,x){if(Array.isArray(u)){var b=u.length;return u=u.map(function(l){return String(l)}),b>2?"one of ".concat(x," ").concat(u.slice(0,b-1).join(", "),", or ")+u[b-1]:b===2?"one of ".concat(x," ").concat(u[0]," or ").concat(u[1]):"of ".concat(x," ").concat(u[0])}else return"of ".concat(x," ").concat(String(u))}function q(u,x,b){return u.substr(0,x.length)===x}function T(u,x,b){return(b===void 0||b>u.length)&&(b=u.length),u.substring(b-x.length,b)===x}function o(u,x,b){return typeof b!="number"&&(b=0),b+x.length>u.length?!1:u.indexOf(x,b)!==-1}return M("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),M("ERR_INVALID_ARG_TYPE",function(u,x,b){S===void 0&&(S=requireAssert()),S(typeof u=="string","'name' must be a string");var l;typeof x=="string"&&q(x,"not ")?(l="must not be",x=x.replace(/^not /,"")):l="must be";var v;if(T(u," argument"))v="The ".concat(u," ").concat(l," ").concat(F(x,"type"));else{var c=o(u,".")?"property":"argument";v='The "'.concat(u,'" ').concat(c," ").concat(l," ").concat(F(x,"type"))}return v+=". Received type ".concat(t(b)),v},TypeError),M("ERR_INVALID_ARG_VALUE",function(u,x){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";A===void 0&&(A=requireUtil());var l=A.inspect(x);return l.length>128&&(l="".concat(l.slice(0,128),"...")),"The argument '".concat(u,"' ").concat(b,". Received ").concat(l)},TypeError),M("ERR_INVALID_RETURN_VALUE",function(u,x,b){var l;return b&&b.constructor&&b.constructor.name?l="instance of ".concat(b.constructor.name):l="type ".concat(t(b)),"Expected ".concat(u,' to be returned from the "').concat(x,'"')+" function but got ".concat(l,".")},TypeError),M("ERR_MISSING_ARGS",function(){for(var u=arguments.length,x=new Array(u),b=0;b<u;b++)x[b]=arguments[b];S===void 0&&(S=requireAssert()),S(x.length>0,"At least one arg needs to be specified");var l="The ",v=x.length;switch(x=x.map(function(c){return'"'.concat(c,'"')}),v){case 1:l+="".concat(x[0]," argument");break;case 2:l+="".concat(x[0]," and ").concat(x[1]," arguments");break;default:l+=x.slice(0,v-1).join(", "),l+=", and ".concat(x[v-1]," arguments");break}return"".concat(l," must be specified")},TypeError),errors.codes=a,errors}var assertion_error,hasRequiredAssertion_error;function requireAssertion_error(){if(hasRequiredAssertion_error)return assertion_error;hasRequiredAssertion_error=1;function t(H,W){var ne=Object.keys(H);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(H);W&&(j=j.filter(function(s){return Object.getOwnPropertyDescriptor(H,s).enumerable})),ne.push.apply(ne,j)}return ne}function e(H){for(var W=1;W<arguments.length;W++){var ne=arguments[W]!=null?arguments[W]:{};W%2?t(Object(ne),!0).forEach(function(j){n(H,j,ne[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(ne)):t(Object(ne)).forEach(function(j){Object.defineProperty(H,j,Object.getOwnPropertyDescriptor(ne,j))})}return H}function n(H,W,ne){return W=_(W),W in H?Object.defineProperty(H,W,{value:ne,enumerable:!0,configurable:!0,writable:!0}):H[W]=ne,H}function r(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")}function h(H,W){for(var ne=0;ne<W.length;ne++){var j=W[ne];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(H,_(j.key),j)}}function y(H,W,ne){return W&&h(H.prototype,W),Object.defineProperty(H,"prototype",{writable:!1}),H}function _(H){var W=k(H,"string");return u(W)==="symbol"?W:String(W)}function k(H,W){if(u(H)!=="object"||H===null)return H;var ne=H[Symbol.toPrimitive];if(ne!==void 0){var j=ne.call(H,W);if(u(j)!=="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(H)}function g(H,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(W&&W.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),Object.defineProperty(H,"prototype",{writable:!1}),W&&T(H,W)}function m(H){var W=F();return function(){var j=o(H),s;if(W){var i=o(this).constructor;s=Reflect.construct(j,arguments,i)}else s=j.apply(this,arguments);return a(this,s)}}function a(H,W){if(W&&(u(W)==="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S(H)}function S(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function A(H){var W=typeof Map=="function"?new Map:void 0;return A=function(j){if(j===null||!q(j))return j;if(typeof j!="function")throw new TypeError("Super expression must either be null or a function");if(typeof W<"u"){if(W.has(j))return W.get(j);W.set(j,s)}function s(){return M(j,arguments,o(this).constructor)}return s.prototype=Object.create(j.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),T(s,j)},A(H)}function M(H,W,ne){return F()?M=Reflect.construct.bind():M=function(s,i,p){var f=[null];f.push.apply(f,i);var C=Function.bind.apply(s,f),I=new C;return p&&T(I,p.prototype),I},M.apply(null,arguments)}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function q(H){return Function.toString.call(H).indexOf("[native code]")!==-1}function T(H,W){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(j,s){return j.__proto__=s,j},T(H,W)}function o(H){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},o(H)}function u(H){"@babel/helpers - typeof";return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},u(H)}var x=requireUtil(),b=x.inspect,l=requireErrors(),v=l.codes.ERR_INVALID_ARG_TYPE;function c(H,W,ne){return(ne===void 0||ne>H.length)&&(ne=H.length),H.substring(ne-W.length,ne)===W}function P(H,W){if(W=Math.floor(W),H.length==0||W==0)return"";var ne=H.length*W;for(W=Math.floor(Math.log(W)/Math.log(2));W;)H+=H,W--;return H+=H.substring(0,ne-H.length),H}var R="",X="",D="",E="",B={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},oe=10;function ae(H){var W=Object.keys(H),ne=Object.create(Object.getPrototypeOf(H));return W.forEach(function(j){ne[j]=H[j]}),Object.defineProperty(ne,"message",{value:H.message}),ne}function ue(H){return b(H,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function re(H,W,ne){var j="",s="",i=0,p="",f=!1,C=ue(H),I=C.split(`
`),z=ue(W).split(`
`),Q=0,L="";if(ne==="strictEqual"&&u(H)==="object"&&u(W)==="object"&&H!==null&&W!==null&&(ne="strictEqualObject"),I.length===1&&z.length===1&&I[0]!==z[0]){var N=I[0].length+z[0].length;if(N<=oe){if((u(H)!=="object"||H===null)&&(u(W)!=="object"||W===null)&&(H!==0||W!==0))return"".concat(B[ne],`

`)+"".concat(I[0]," !== ").concat(z[0],`
`)}else if(ne!=="strictEqualObject"){var se=process$1.stderr&&process$1.stderr.isTTY?process$1.stderr.columns:80;if(N<se){for(;I[0][Q]===z[0][Q];)Q++;Q>2&&(L=`
  `.concat(P(" ",Q),"^"),Q=0)}}}for(var ge=I[I.length-1],Ae=z[z.length-1];ge===Ae&&(Q++<2?p=`
  `.concat(ge).concat(p):j=ge,I.pop(),z.pop(),!(I.length===0||z.length===0));)ge=I[I.length-1],Ae=z[z.length-1];var he=Math.max(I.length,z.length);if(he===0){var de=C.split(`
`);if(de.length>30)for(de[26]="".concat(R,"...").concat(E);de.length>27;)de.pop();return"".concat(B.notIdentical,`

`).concat(de.join(`
`),`
`)}Q>3&&(p=`
`.concat(R,"...").concat(E).concat(p),f=!0),j!==""&&(p=`
  `.concat(j).concat(p),j="");var K=0,$=B[ne]+`
`.concat(X,"+ actual").concat(E," ").concat(D,"- expected").concat(E),me=" ".concat(R,"...").concat(E," Lines skipped");for(Q=0;Q<he;Q++){var _e=Q-i;if(I.length<Q+1)_e>1&&Q>2&&(_e>4?(s+=`
`.concat(R,"...").concat(E),f=!0):_e>3&&(s+=`
  `.concat(z[Q-2]),K++),s+=`
  `.concat(z[Q-1]),K++),i=Q,j+=`
`.concat(D,"-").concat(E," ").concat(z[Q]),K++;else if(z.length<Q+1)_e>1&&Q>2&&(_e>4?(s+=`
`.concat(R,"...").concat(E),f=!0):_e>3&&(s+=`
  `.concat(I[Q-2]),K++),s+=`
  `.concat(I[Q-1]),K++),i=Q,s+=`
`.concat(X,"+").concat(E," ").concat(I[Q]),K++;else{var Ce=z[Q],ke=I[Q],te=ke!==Ce&&(!c(ke,",")||ke.slice(0,-1)!==Ce);te&&c(Ce,",")&&Ce.slice(0,-1)===ke&&(te=!1,ke+=","),te?(_e>1&&Q>2&&(_e>4?(s+=`
`.concat(R,"...").concat(E),f=!0):_e>3&&(s+=`
  `.concat(I[Q-2]),K++),s+=`
  `.concat(I[Q-1]),K++),i=Q,s+=`
`.concat(X,"+").concat(E," ").concat(ke),j+=`
`.concat(D,"-").concat(E," ").concat(Ce),K+=2):(s+=j,j="",(_e===1||Q===0)&&(s+=`
  `.concat(ke),K++))}if(K>20&&Q<he-2)return"".concat($).concat(me,`
`).concat(s,`
`).concat(R,"...").concat(E).concat(j,`
`)+"".concat(R,"...").concat(E)}return"".concat($).concat(f?me:"",`
`).concat(s).concat(j).concat(p).concat(L)}var pe=function(H,W){g(j,H);var ne=m(j);function j(s){var i;if(r(this,j),u(s)!=="object"||s===null)throw new v("options","Object",s);var p=s.message,f=s.operator,C=s.stackStartFn,I=s.actual,z=s.expected,Q=Error.stackTraceLimit;if(Error.stackTraceLimit=0,p!=null)i=ne.call(this,String(p));else if(process$1.stderr&&process$1.stderr.isTTY&&(process$1.stderr&&process$1.stderr.getColorDepth&&process$1.stderr.getColorDepth()!==1?(R="\x1B[34m",X="\x1B[32m",E="\x1B[39m",D="\x1B[31m"):(R="",X="",E="",D="")),u(I)==="object"&&I!==null&&u(z)==="object"&&z!==null&&"stack"in I&&I instanceof Error&&"stack"in z&&z instanceof Error&&(I=ae(I),z=ae(z)),f==="deepStrictEqual"||f==="strictEqual")i=ne.call(this,re(I,z,f));else if(f==="notDeepStrictEqual"||f==="notStrictEqual"){var L=B[f],N=ue(I).split(`
`);if(f==="notStrictEqual"&&u(I)==="object"&&I!==null&&(L=B.notStrictEqualObject),N.length>30)for(N[26]="".concat(R,"...").concat(E);N.length>27;)N.pop();N.length===1?i=ne.call(this,"".concat(L," ").concat(N[0])):i=ne.call(this,"".concat(L,`

`).concat(N.join(`
`),`
`))}else{var se=ue(I),ge="",Ae=B[f];f==="notDeepEqual"||f==="notEqual"?(se="".concat(B[f],`

`).concat(se),se.length>1024&&(se="".concat(se.slice(0,1021),"..."))):(ge="".concat(ue(z)),se.length>512&&(se="".concat(se.slice(0,509),"...")),ge.length>512&&(ge="".concat(ge.slice(0,509),"...")),f==="deepEqual"||f==="equal"?se="".concat(Ae,`

`).concat(se,`

should equal

`):ge=" ".concat(f," ").concat(ge)),i=ne.call(this,"".concat(se).concat(ge))}return Error.stackTraceLimit=Q,i.generatedMessage=!p,Object.defineProperty(S(i),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),i.code="ERR_ASSERTION",i.actual=I,i.expected=z,i.operator=f,Error.captureStackTrace&&Error.captureStackTrace(S(i),C),i.stack,i.name="AssertionError",a(i)}return y(j,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:W,value:function(i,p){return b(this,e(e({},p),{},{customInspect:!1,depth:0}))}}]),j}(A(Error),b.custom);return assertion_error=pe,assertion_error}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var t=Object.prototype.toString;return isArguments=function(n){var r=t.call(n),h=r==="[object Arguments]";return h||(h=r!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&t.call(n.callee)==="[object Function]"),h},isArguments}var implementation$3,hasRequiredImplementation$3;function requireImplementation$3(){if(hasRequiredImplementation$3)return implementation$3;hasRequiredImplementation$3=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=requireIsArguments(),h=Object.prototype.propertyIsEnumerable,y=!h.call({toString:null},"toString"),_=h.call(function(){},"prototype"),k=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],g=function(A){var M=A.constructor;return M&&M.prototype===A},m={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},a=function(){if(typeof window>"u")return!1;for(var A in window)try{if(!m["$"+A]&&e.call(window,A)&&window[A]!==null&&typeof window[A]=="object")try{g(window[A])}catch{return!0}}catch{return!0}return!1}(),S=function(A){if(typeof window>"u"||!a)return g(A);try{return g(A)}catch{return!1}};t=function(M){var F=M!==null&&typeof M=="object",q=n.call(M)==="[object Function]",T=r(M),o=F&&n.call(M)==="[object String]",u=[];if(!F&&!q&&!T)throw new TypeError("Object.keys called on a non-object");var x=_&&q;if(o&&M.length>0&&!e.call(M,0))for(var b=0;b<M.length;++b)u.push(String(b));if(T&&M.length>0)for(var l=0;l<M.length;++l)u.push(String(l));else for(var v in M)!(x&&v==="prototype")&&e.call(M,v)&&u.push(String(v));if(y)for(var c=S(M),P=0;P<k.length;++P)!(c&&k[P]==="constructor")&&e.call(M,k[P])&&u.push(k[P]);return u}}return implementation$3=t,implementation$3}var objectKeys,hasRequiredObjectKeys;function requireObjectKeys(){if(hasRequiredObjectKeys)return objectKeys;hasRequiredObjectKeys=1;var t=Array.prototype.slice,e=requireIsArguments(),n=Object.keys,r=n?function(_){return n(_)}:requireImplementation$3(),h=Object.keys;return r.shim=function(){if(Object.keys){var _=function(){var k=Object.keys(arguments);return k&&k.length===arguments.length}(1,2);_||(Object.keys=function(g){return e(g)?h(t.call(g)):h(g)})}else Object.keys=r;return Object.keys||r},objectKeys=r,objectKeys}var implementation$2,hasRequiredImplementation$2;function requireImplementation$2(){if(hasRequiredImplementation$2)return implementation$2;hasRequiredImplementation$2=1;var t=requireObjectKeys(),e=requireShams$1()(),n=requireCallBound$1(),r=requireEsObjectAtoms(),h=n("Array.prototype.push"),y=n("Object.prototype.propertyIsEnumerable"),_=e?r.getOwnPropertySymbols:null;return implementation$2=function(g,m){if(g==null)throw new TypeError("target must be an object");var a=r(g);if(arguments.length===1)return a;for(var S=1;S<arguments.length;++S){var A=r(arguments[S]),M=t(A),F=e&&(r.getOwnPropertySymbols||_);if(F)for(var q=F(A),T=0;T<q.length;++T){var o=q[T];y(A,o)&&h(M,o)}for(var u=0;u<M.length;++u){var x=M[u];if(y(A,x)){var b=A[x];a[x]=b}}}return a},implementation$2}var polyfill$2,hasRequiredPolyfill$2;function requirePolyfill$2(){if(hasRequiredPolyfill$2)return polyfill$2;hasRequiredPolyfill$2=1;var t=requireImplementation$2(),e=function(){if(!Object.assign)return!1;for(var r="abcdefghijklmnopqrst",h=r.split(""),y={},_=0;_<h.length;++_)y[h[_]]=h[_];var k=Object.assign({},y),g="";for(var m in k)g+=m;return r!==g},n=function(){if(!Object.assign||!Object.preventExtensions)return!1;var r=Object.preventExtensions({1:2});try{Object.assign(r,"xy")}catch{return r[1]==="y"}return!1};return polyfill$2=function(){return!Object.assign||e()||n()?t:Object.assign},polyfill$2}var implementation$1,hasRequiredImplementation$1;function requireImplementation$1(){if(hasRequiredImplementation$1)return implementation$1;hasRequiredImplementation$1=1;var t=function(e){return e!==e};return implementation$1=function(n,r){return n===0&&r===0?1/n===1/r:!!(n===r||t(n)&&t(r))},implementation$1}var polyfill$1,hasRequiredPolyfill$1;function requirePolyfill$1(){if(hasRequiredPolyfill$1)return polyfill$1;hasRequiredPolyfill$1=1;var t=requireImplementation$1();return polyfill$1=function(){return typeof Object.is=="function"?Object.is:t},polyfill$1}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var t=requireGetIntrinsic(),e=requireCallBind(),n=e(t("String.prototype.indexOf"));return callBound=function(h,y){var _=t(h,!!y);return typeof _=="function"&&n(h,".prototype.")>-1?e(_):_},callBound}var defineProperties_1,hasRequiredDefineProperties;function requireDefineProperties(){if(hasRequiredDefineProperties)return defineProperties_1;hasRequiredDefineProperties=1;var t=requireObjectKeys(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",n=Object.prototype.toString,r=Array.prototype.concat,h=requireDefineDataProperty(),y=function(m){return typeof m=="function"&&n.call(m)==="[object Function]"},_=requireHasPropertyDescriptors()(),k=function(m,a,S,A){if(a in m){if(A===!0){if(m[a]===S)return}else if(!y(A)||!A())return}_?h(m,a,S,!0):h(m,a,S)},g=function(m,a){var S=arguments.length>2?arguments[2]:{},A=t(a);e&&(A=r.call(A,Object.getOwnPropertySymbols(a)));for(var M=0;M<A.length;M+=1)k(m,A[M],a[A[M]],S[A[M]])};return g.supportsDescriptors=!!_,defineProperties_1=g,defineProperties_1}var shim$1,hasRequiredShim$1;function requireShim$1(){if(hasRequiredShim$1)return shim$1;hasRequiredShim$1=1;var t=requirePolyfill$1(),e=requireDefineProperties();return shim$1=function(){var r=t();return e(Object,{is:r},{is:function(){return Object.is!==r}}),r},shim$1}var objectIs,hasRequiredObjectIs;function requireObjectIs(){if(hasRequiredObjectIs)return objectIs;hasRequiredObjectIs=1;var t=requireDefineProperties(),e=requireCallBind(),n=requireImplementation$1(),r=requirePolyfill$1(),h=requireShim$1(),y=e(r(),Object);return t(y,{getPolyfill:r,implementation:n,shim:h}),objectIs=y,objectIs}var implementation,hasRequiredImplementation;function requireImplementation(){return hasRequiredImplementation||(hasRequiredImplementation=1,implementation=function(e){return e!==e}),implementation}var polyfill,hasRequiredPolyfill;function requirePolyfill(){if(hasRequiredPolyfill)return polyfill;hasRequiredPolyfill=1;var t=requireImplementation();return polyfill=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:t},polyfill}var shim,hasRequiredShim;function requireShim(){if(hasRequiredShim)return shim;hasRequiredShim=1;var t=requireDefineProperties(),e=requirePolyfill();return shim=function(){var r=e();return t(Number,{isNaN:r},{isNaN:function(){return Number.isNaN!==r}}),r},shim}var isNan,hasRequiredIsNan;function requireIsNan(){if(hasRequiredIsNan)return isNan;hasRequiredIsNan=1;var t=requireCallBind(),e=requireDefineProperties(),n=requireImplementation(),r=requirePolyfill(),h=requireShim(),y=t(r(),Number);return e(y,{getPolyfill:r,implementation:n,shim:h}),isNan=y,isNan}var comparisons,hasRequiredComparisons;function requireComparisons(){if(hasRequiredComparisons)return comparisons;hasRequiredComparisons=1;function t(te,J){return y(te)||h(te,J)||n(te,J)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n(te,J){if(te){if(typeof te=="string")return r(te,J);var Se=Object.prototype.toString.call(te).slice(8,-1);if(Se==="Object"&&te.constructor&&(Se=te.constructor.name),Se==="Map"||Se==="Set")return Array.from(te);if(Se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Se))return r(te,J)}}function r(te,J){(J==null||J>te.length)&&(J=te.length);for(var Se=0,Te=new Array(J);Se<J;Se++)Te[Se]=te[Se];return Te}function h(te,J){var Se=te==null?null:typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(Se!=null){var Te,De,Ne,Ue,V=[],be=!0,Fe=!1;try{if(Ne=(Se=Se.call(te)).next,J!==0)for(;!(be=(Te=Ne.call(Se)).done)&&(V.push(Te.value),V.length!==J);be=!0);}catch(Le){Fe=!0,De=Le}finally{try{if(!be&&Se.return!=null&&(Ue=Se.return(),Object(Ue)!==Ue))return}finally{if(Fe)throw De}}return V}}function y(te){if(Array.isArray(te))return te}function _(te){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},_(te)}var k=/a/g.flags!==void 0,g=function(J){var Se=[];return J.forEach(function(Te){return Se.push(Te)}),Se},m=function(J){var Se=[];return J.forEach(function(Te,De){return Se.push([De,Te])}),Se},a=Object.is?Object.is:requireObjectIs(),S=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},A=Number.isNaN?Number.isNaN:requireIsNan();function M(te){return te.call.bind(te)}var F=M(Object.prototype.hasOwnProperty),q=M(Object.prototype.propertyIsEnumerable),T=M(Object.prototype.toString),o=requireUtil().types,u=o.isAnyArrayBuffer,x=o.isArrayBufferView,b=o.isDate,l=o.isMap,v=o.isRegExp,c=o.isSet,P=o.isNativeError,R=o.isBoxedPrimitive,X=o.isNumberObject,D=o.isStringObject,E=o.isBooleanObject,B=o.isBigIntObject,oe=o.isSymbolObject,ae=o.isFloat32Array,ue=o.isFloat64Array;function re(te){if(te.length===0||te.length>10)return!0;for(var J=0;J<te.length;J++){var Se=te.charCodeAt(J);if(Se<48||Se>57)return!0}return te.length===10&&te>=Math.pow(2,32)}function pe(te){return Object.keys(te).filter(re).concat(S(te).filter(Object.prototype.propertyIsEnumerable.bind(te)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function H(te,J){if(te===J)return 0;for(var Se=te.length,Te=J.length,De=0,Ne=Math.min(Se,Te);De<Ne;++De)if(te[De]!==J[De]){Se=te[De],Te=J[De];break}return Se<Te?-1:Te<Se?1:0}var W=!0,ne=!1,j=0,s=1,i=2,p=3;function f(te,J){return k?te.source===J.source&&te.flags===J.flags:RegExp.prototype.toString.call(te)===RegExp.prototype.toString.call(J)}function C(te,J){if(te.byteLength!==J.byteLength)return!1;for(var Se=0;Se<te.byteLength;Se++)if(te[Se]!==J[Se])return!1;return!0}function I(te,J){return te.byteLength!==J.byteLength?!1:H(new Uint8Array(te.buffer,te.byteOffset,te.byteLength),new Uint8Array(J.buffer,J.byteOffset,J.byteLength))===0}function z(te,J){return te.byteLength===J.byteLength&&H(new Uint8Array(te),new Uint8Array(J))===0}function Q(te,J){return X(te)?X(J)&&a(Number.prototype.valueOf.call(te),Number.prototype.valueOf.call(J)):D(te)?D(J)&&String.prototype.valueOf.call(te)===String.prototype.valueOf.call(J):E(te)?E(J)&&Boolean.prototype.valueOf.call(te)===Boolean.prototype.valueOf.call(J):B(te)?B(J)&&BigInt.prototype.valueOf.call(te)===BigInt.prototype.valueOf.call(J):oe(J)&&Symbol.prototype.valueOf.call(te)===Symbol.prototype.valueOf.call(J)}function L(te,J,Se,Te){if(te===J)return te!==0?!0:Se?a(te,J):!0;if(Se){if(_(te)!=="object")return typeof te=="number"&&A(te)&&A(J);if(_(J)!=="object"||te===null||J===null||Object.getPrototypeOf(te)!==Object.getPrototypeOf(J))return!1}else{if(te===null||_(te)!=="object")return J===null||_(J)!=="object"?te==J:!1;if(J===null||_(J)!=="object")return!1}var De=T(te),Ne=T(J);if(De!==Ne)return!1;if(Array.isArray(te)){if(te.length!==J.length)return!1;var Ue=pe(te),V=pe(J);return Ue.length!==V.length?!1:se(te,J,Se,Te,s,Ue)}if(De==="[object Object]"&&(!l(te)&&l(J)||!c(te)&&c(J)))return!1;if(b(te)){if(!b(J)||Date.prototype.getTime.call(te)!==Date.prototype.getTime.call(J))return!1}else if(v(te)){if(!v(J)||!f(te,J))return!1}else if(P(te)||te instanceof Error){if(te.message!==J.message||te.name!==J.name)return!1}else if(x(te)){if(!Se&&(ae(te)||ue(te))){if(!C(te,J))return!1}else if(!I(te,J))return!1;var be=pe(te),Fe=pe(J);return be.length!==Fe.length?!1:se(te,J,Se,Te,j,be)}else{if(c(te))return!c(J)||te.size!==J.size?!1:se(te,J,Se,Te,i);if(l(te))return!l(J)||te.size!==J.size?!1:se(te,J,Se,Te,p);if(u(te)){if(!z(te,J))return!1}else if(R(te)&&!Q(te,J))return!1}return se(te,J,Se,Te,j)}function N(te,J){return J.filter(function(Se){return q(te,Se)})}function se(te,J,Se,Te,De,Ne){if(arguments.length===5){Ne=Object.keys(te);var Ue=Object.keys(J);if(Ne.length!==Ue.length)return!1}for(var V=0;V<Ne.length;V++)if(!F(J,Ne[V]))return!1;if(Se&&arguments.length===5){var be=S(te);if(be.length!==0){var Fe=0;for(V=0;V<be.length;V++){var Le=be[V];if(q(te,Le)){if(!q(J,Le))return!1;Ne.push(Le),Fe++}else if(q(J,Le))return!1}var ee=S(J);if(be.length!==ee.length&&N(J,ee).length!==Fe)return!1}else{var ie=S(J);if(ie.length!==0&&N(J,ie).length!==0)return!1}}if(Ne.length===0&&(De===j||De===s&&te.length===0||te.size===0))return!0;if(Te===void 0)Te={val1:new Map,val2:new Map,position:0};else{var O=Te.val1.get(te);if(O!==void 0){var we=Te.val2.get(J);if(we!==void 0)return O===we}Te.position++}Te.val1.set(te,Te.position),Te.val2.set(J,Te.position);var qe=_e(te,J,Se,Ne,Te,De);return Te.val1.delete(te),Te.val2.delete(J),qe}function ge(te,J,Se,Te){for(var De=g(te),Ne=0;Ne<De.length;Ne++){var Ue=De[Ne];if(L(J,Ue,Se,Te))return te.delete(Ue),!0}return!1}function Ae(te){switch(_(te)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":te=+te;case"number":if(A(te))return!1}return!0}function he(te,J,Se){var Te=Ae(Se);return Te??(J.has(Te)&&!te.has(Te))}function de(te,J,Se,Te,De){var Ne=Ae(Se);if(Ne!=null)return Ne;var Ue=J.get(Ne);return Ue===void 0&&!J.has(Ne)||!L(Te,Ue,!1,De)?!1:!te.has(Ne)&&L(Te,Ue,!1,De)}function K(te,J,Se,Te){for(var De=null,Ne=g(te),Ue=0;Ue<Ne.length;Ue++){var V=Ne[Ue];if(_(V)==="object"&&V!==null)De===null&&(De=new Set),De.add(V);else if(!J.has(V)){if(Se||!he(te,J,V))return!1;De===null&&(De=new Set),De.add(V)}}if(De!==null){for(var be=g(J),Fe=0;Fe<be.length;Fe++){var Le=be[Fe];if(_(Le)==="object"&&Le!==null){if(!ge(De,Le,Se,Te))return!1}else if(!Se&&!te.has(Le)&&!ge(De,Le,Se,Te))return!1}return De.size===0}return!0}function $(te,J,Se,Te,De,Ne){for(var Ue=g(te),V=0;V<Ue.length;V++){var be=Ue[V];if(L(Se,be,De,Ne)&&L(Te,J.get(be),De,Ne))return te.delete(be),!0}return!1}function me(te,J,Se,Te){for(var De=null,Ne=m(te),Ue=0;Ue<Ne.length;Ue++){var V=t(Ne[Ue],2),be=V[0],Fe=V[1];if(_(be)==="object"&&be!==null)De===null&&(De=new Set),De.add(be);else{var Le=J.get(be);if(Le===void 0&&!J.has(be)||!L(Fe,Le,Se,Te)){if(Se||!de(te,J,be,Fe,Te))return!1;De===null&&(De=new Set),De.add(be)}}}if(De!==null){for(var ee=m(J),ie=0;ie<ee.length;ie++){var O=t(ee[ie],2),we=O[0],qe=O[1];if(_(we)==="object"&&we!==null){if(!$(De,te,we,qe,Se,Te))return!1}else if(!Se&&(!te.has(we)||!L(te.get(we),qe,!1,Te))&&!$(De,te,we,qe,!1,Te))return!1}return De.size===0}return!0}function _e(te,J,Se,Te,De,Ne){var Ue=0;if(Ne===i){if(!K(te,J,Se,De))return!1}else if(Ne===p){if(!me(te,J,Se,De))return!1}else if(Ne===s)for(;Ue<te.length;Ue++)if(F(te,Ue)){if(!F(J,Ue)||!L(te[Ue],J[Ue],Se,De))return!1}else{if(F(J,Ue))return!1;for(var V=Object.keys(te);Ue<V.length;Ue++){var be=V[Ue];if(!F(J,be)||!L(te[be],J[be],Se,De))return!1}return V.length===Object.keys(J).length}for(Ue=0;Ue<Te.length;Ue++){var Fe=Te[Ue];if(!L(te[Fe],J[Fe],Se,De))return!1}return!0}function Ce(te,J){return L(te,J,ne)}function ke(te,J){return L(te,J,W)}return comparisons={isDeepEqual:Ce,isDeepStrictEqual:ke},comparisons}var hasRequiredAssert;function requireAssert(){if(hasRequiredAssert)return assert.exports;hasRequiredAssert=1;function t(i){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},t(i)}function e(i,p,f){return Object.defineProperty(i,"prototype",{writable:!1}),i}function n(i,p){if(!(i instanceof p))throw new TypeError("Cannot call a class as a function")}var r=requireErrors(),h=r.codes,y=h.ERR_AMBIGUOUS_ARGUMENT,_=h.ERR_INVALID_ARG_TYPE,k=h.ERR_INVALID_ARG_VALUE,g=h.ERR_INVALID_RETURN_VALUE,m=h.ERR_MISSING_ARGS,a=requireAssertion_error(),S=requireUtil(),A=S.inspect,M=requireUtil().types,F=M.isPromise,q=M.isRegExp,T=requirePolyfill$2()(),o=requirePolyfill$1()(),u=requireCallBound()("RegExp.prototype.test"),x,b;function l(){var i=requireComparisons();x=i.isDeepEqual,b=i.isDeepStrictEqual}var v=!1,c=assert.exports=E,P={};function R(i){throw i.message instanceof Error?i.message:new a(i)}function X(i,p,f,C,I){var z=arguments.length,Q;if(z===0)Q="Failed";else if(z===1)f=i,i=void 0;else{if(v===!1){v=!0;var L=process$1.emitWarning?process$1.emitWarning:console.warn.bind(console);L("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}z===2&&(C="!=")}if(f instanceof Error)throw f;var N={actual:i,expected:p,operator:C===void 0?"fail":C,stackStartFn:I||X};f!==void 0&&(N.message=f);var se=new a(N);throw Q&&(se.message=Q,se.generatedMessage=!0),se}c.fail=X,c.AssertionError=a;function D(i,p,f,C){if(!f){var I=!1;if(p===0)I=!0,C="No value argument passed to `assert.ok()`";else if(C instanceof Error)throw C;var z=new a({actual:f,expected:!0,message:C,operator:"==",stackStartFn:i});throw z.generatedMessage=I,z}}function E(){for(var i=arguments.length,p=new Array(i),f=0;f<i;f++)p[f]=arguments[f];D.apply(void 0,[E,p.length].concat(p))}c.ok=E,c.equal=function i(p,f,C){if(arguments.length<2)throw new m("actual","expected");p!=f&&R({actual:p,expected:f,message:C,operator:"==",stackStartFn:i})},c.notEqual=function i(p,f,C){if(arguments.length<2)throw new m("actual","expected");p==f&&R({actual:p,expected:f,message:C,operator:"!=",stackStartFn:i})},c.deepEqual=function i(p,f,C){if(arguments.length<2)throw new m("actual","expected");x===void 0&&l(),x(p,f)||R({actual:p,expected:f,message:C,operator:"deepEqual",stackStartFn:i})},c.notDeepEqual=function i(p,f,C){if(arguments.length<2)throw new m("actual","expected");x===void 0&&l(),x(p,f)&&R({actual:p,expected:f,message:C,operator:"notDeepEqual",stackStartFn:i})},c.deepStrictEqual=function i(p,f,C){if(arguments.length<2)throw new m("actual","expected");x===void 0&&l(),b(p,f)||R({actual:p,expected:f,message:C,operator:"deepStrictEqual",stackStartFn:i})},c.notDeepStrictEqual=B;function B(i,p,f){if(arguments.length<2)throw new m("actual","expected");x===void 0&&l(),b(i,p)&&R({actual:i,expected:p,message:f,operator:"notDeepStrictEqual",stackStartFn:B})}c.strictEqual=function i(p,f,C){if(arguments.length<2)throw new m("actual","expected");o(p,f)||R({actual:p,expected:f,message:C,operator:"strictEqual",stackStartFn:i})},c.notStrictEqual=function i(p,f,C){if(arguments.length<2)throw new m("actual","expected");o(p,f)&&R({actual:p,expected:f,message:C,operator:"notStrictEqual",stackStartFn:i})};var oe=e(function i(p,f,C){var I=this;n(this,i),f.forEach(function(z){z in p&&(C!==void 0&&typeof C[z]=="string"&&q(p[z])&&u(p[z],C[z])?I[z]=C[z]:I[z]=p[z])})});function ae(i,p,f,C,I,z){if(!(f in i)||!b(i[f],p[f])){if(!C){var Q=new oe(i,I),L=new oe(p,I,i),N=new a({actual:Q,expected:L,operator:"deepStrictEqual",stackStartFn:z});throw N.actual=i,N.expected=p,N.operator=z.name,N}R({actual:i,expected:p,message:C,operator:z.name,stackStartFn:z})}}function ue(i,p,f,C){if(typeof p!="function"){if(q(p))return u(p,i);if(arguments.length===2)throw new _("expected",["Function","RegExp"],p);if(t(i)!=="object"||i===null){var I=new a({actual:i,expected:p,message:f,operator:"deepStrictEqual",stackStartFn:C});throw I.operator=C.name,I}var z=Object.keys(p);if(p instanceof Error)z.push("name","message");else if(z.length===0)throw new k("error",p,"may not be an empty object");return x===void 0&&l(),z.forEach(function(Q){typeof i[Q]=="string"&&q(p[Q])&&u(p[Q],i[Q])||ae(i,p,Q,f,z,C)}),!0}return p.prototype!==void 0&&i instanceof p?!0:Error.isPrototypeOf(p)?!1:p.call({},i)===!0}function re(i){if(typeof i!="function")throw new _("fn","Function",i);try{i()}catch(p){return p}return P}function pe(i){return F(i)||i!==null&&t(i)==="object"&&typeof i.then=="function"&&typeof i.catch=="function"}function H(i){return Promise.resolve().then(function(){var p;if(typeof i=="function"){if(p=i(),!pe(p))throw new g("instance of Promise","promiseFn",p)}else if(pe(i))p=i;else throw new _("promiseFn",["Function","Promise"],i);return Promise.resolve().then(function(){return p}).then(function(){return P}).catch(function(f){return f})})}function W(i,p,f,C){if(typeof f=="string"){if(arguments.length===4)throw new _("error",["Object","Error","Function","RegExp"],f);if(t(p)==="object"&&p!==null){if(p.message===f)throw new y("error/message",'The error message "'.concat(p.message,'" is identical to the message.'))}else if(p===f)throw new y("error/message",'The error "'.concat(p,'" is identical to the message.'));C=f,f=void 0}else if(f!=null&&t(f)!=="object"&&typeof f!="function")throw new _("error",["Object","Error","Function","RegExp"],f);if(p===P){var I="";f&&f.name&&(I+=" (".concat(f.name,")")),I+=C?": ".concat(C):".";var z=i.name==="rejects"?"rejection":"exception";R({actual:void 0,expected:f,operator:i.name,message:"Missing expected ".concat(z).concat(I),stackStartFn:i})}if(f&&!ue(p,f,C,i))throw p}function ne(i,p,f,C){if(p!==P){if(typeof f=="string"&&(C=f,f=void 0),!f||ue(p,f)){var I=C?": ".concat(C):".",z=i.name==="doesNotReject"?"rejection":"exception";R({actual:p,expected:f,operator:i.name,message:"Got unwanted ".concat(z).concat(I,`
`)+'Actual message: "'.concat(p&&p.message,'"'),stackStartFn:i})}throw p}}c.throws=function i(p){for(var f=arguments.length,C=new Array(f>1?f-1:0),I=1;I<f;I++)C[I-1]=arguments[I];W.apply(void 0,[i,re(p)].concat(C))},c.rejects=function i(p){for(var f=arguments.length,C=new Array(f>1?f-1:0),I=1;I<f;I++)C[I-1]=arguments[I];return H(p).then(function(z){return W.apply(void 0,[i,z].concat(C))})},c.doesNotThrow=function i(p){for(var f=arguments.length,C=new Array(f>1?f-1:0),I=1;I<f;I++)C[I-1]=arguments[I];ne.apply(void 0,[i,re(p)].concat(C))},c.doesNotReject=function i(p){for(var f=arguments.length,C=new Array(f>1?f-1:0),I=1;I<f;I++)C[I-1]=arguments[I];return H(p).then(function(z){return ne.apply(void 0,[i,z].concat(C))})},c.ifError=function i(p){if(p!=null){var f="ifError got unwanted exception: ";t(p)==="object"&&typeof p.message=="string"?p.message.length===0&&p.constructor?f+=p.constructor.name:f+=p.message:f+=A(p);var C=new a({actual:p,expected:null,operator:"ifError",message:f,stackStartFn:i}),I=p.stack;if(typeof I=="string"){var z=I.split(`
`);z.shift();for(var Q=C.stack.split(`
`),L=0;L<z.length;L++){var N=Q.indexOf(z[L]);if(N!==-1){Q=Q.slice(0,N);break}}C.stack="".concat(Q.join(`
`),`
`).concat(z.join(`
`))}throw C}};function j(i,p,f,C,I){if(!q(p))throw new _("regexp","RegExp",p);var z=I==="match";if(typeof i!="string"||u(p,i)!==z){if(f instanceof Error)throw f;var Q=!f;f=f||(typeof i!="string"?'The "string" argument must be of type string. Received type '+"".concat(t(i)," (").concat(A(i),")"):(z?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(A(p),`. Input:

`).concat(A(i),`
`));var L=new a({actual:i,expected:p,message:f,operator:I,stackStartFn:C});throw L.generatedMessage=Q,L}}c.match=function i(p,f,C){j(p,f,C,i,"match")},c.doesNotMatch=function i(p,f,C){j(p,f,C,i,"doesNotMatch")};function s(){for(var i=arguments.length,p=new Array(i),f=0;f<i;f++)p[f]=arguments[f];D.apply(void 0,[s,p.length].concat(p))}return c.strict=T(s,c,{equal:c.strictEqual,deepEqual:c.deepStrictEqual,notEqual:c.notStrictEqual,notDeepEqual:c.notDeepStrictEqual}),c.strict.strict=c.strict,assert.exports}var zstream,hasRequiredZstream;function requireZstream(){if(hasRequiredZstream)return zstream;hasRequiredZstream=1;function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return zstream=t,zstream}var deflate={},common={},hasRequiredCommon;function requireCommon(){return hasRequiredCommon||(hasRequiredCommon=1,function(t){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(y,_){return Object.prototype.hasOwnProperty.call(y,_)}t.assign=function(y){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var k=_.shift();if(k){if(typeof k!="object")throw new TypeError(k+"must be non-object");for(var g in k)n(k,g)&&(y[g]=k[g])}}return y},t.shrinkBuf=function(y,_){return y.length===_?y:y.subarray?y.subarray(0,_):(y.length=_,y)};var r={arraySet:function(y,_,k,g,m){if(_.subarray&&y.subarray){y.set(_.subarray(k,k+g),m);return}for(var a=0;a<g;a++)y[m+a]=_[k+a]},flattenChunks:function(y){var _,k,g,m,a,S;for(g=0,_=0,k=y.length;_<k;_++)g+=y[_].length;for(S=new Uint8Array(g),m=0,_=0,k=y.length;_<k;_++)a=y[_],S.set(a,m),m+=a.length;return S}},h={arraySet:function(y,_,k,g,m){for(var a=0;a<g;a++)y[m+a]=_[k+a]},flattenChunks:function(y){return[].concat.apply([],y)}};t.setTyped=function(y){y?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,h))},t.setTyped(e)}(common)),common}var trees={},hasRequiredTrees;function requireTrees(){if(hasRequiredTrees)return trees;hasRequiredTrees=1;var t=requireCommon(),e=4,n=0,r=1,h=2;function y(V){for(var be=V.length;--be>=0;)V[be]=0}var _=0,k=1,g=2,m=3,a=258,S=29,A=256,M=A+1+S,F=30,q=19,T=2*M+1,o=15,u=16,x=7,b=256,l=16,v=17,c=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],X=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=512,B=new Array((M+2)*2);y(B);var oe=new Array(F*2);y(oe);var ae=new Array(E);y(ae);var ue=new Array(a-m+1);y(ue);var re=new Array(S);y(re);var pe=new Array(F);y(pe);function H(V,be,Fe,Le,ee){this.static_tree=V,this.extra_bits=be,this.extra_base=Fe,this.elems=Le,this.max_length=ee,this.has_stree=V&&V.length}var W,ne,j;function s(V,be){this.dyn_tree=V,this.max_code=0,this.stat_desc=be}function i(V){return V<256?ae[V]:ae[256+(V>>>7)]}function p(V,be){V.pending_buf[V.pending++]=be&255,V.pending_buf[V.pending++]=be>>>8&255}function f(V,be,Fe){V.bi_valid>u-Fe?(V.bi_buf|=be<<V.bi_valid&65535,p(V,V.bi_buf),V.bi_buf=be>>u-V.bi_valid,V.bi_valid+=Fe-u):(V.bi_buf|=be<<V.bi_valid&65535,V.bi_valid+=Fe)}function C(V,be,Fe){f(V,Fe[be*2],Fe[be*2+1])}function I(V,be){var Fe=0;do Fe|=V&1,V>>>=1,Fe<<=1;while(--be>0);return Fe>>>1}function z(V){V.bi_valid===16?(p(V,V.bi_buf),V.bi_buf=0,V.bi_valid=0):V.bi_valid>=8&&(V.pending_buf[V.pending++]=V.bi_buf&255,V.bi_buf>>=8,V.bi_valid-=8)}function Q(V,be){var Fe=be.dyn_tree,Le=be.max_code,ee=be.stat_desc.static_tree,ie=be.stat_desc.has_stree,O=be.stat_desc.extra_bits,we=be.stat_desc.extra_base,qe=be.stat_desc.max_length,d,G,ce,U,le,ye,Me=0;for(U=0;U<=o;U++)V.bl_count[U]=0;for(Fe[V.heap[V.heap_max]*2+1]=0,d=V.heap_max+1;d<T;d++)G=V.heap[d],U=Fe[Fe[G*2+1]*2+1]+1,U>qe&&(U=qe,Me++),Fe[G*2+1]=U,!(G>Le)&&(V.bl_count[U]++,le=0,G>=we&&(le=O[G-we]),ye=Fe[G*2],V.opt_len+=ye*(U+le),ie&&(V.static_len+=ye*(ee[G*2+1]+le)));if(Me!==0){do{for(U=qe-1;V.bl_count[U]===0;)U--;V.bl_count[U]--,V.bl_count[U+1]+=2,V.bl_count[qe]--,Me-=2}while(Me>0);for(U=qe;U!==0;U--)for(G=V.bl_count[U];G!==0;)ce=V.heap[--d],!(ce>Le)&&(Fe[ce*2+1]!==U&&(V.opt_len+=(U-Fe[ce*2+1])*Fe[ce*2],Fe[ce*2+1]=U),G--)}}function L(V,be,Fe){var Le=new Array(o+1),ee=0,ie,O;for(ie=1;ie<=o;ie++)Le[ie]=ee=ee+Fe[ie-1]<<1;for(O=0;O<=be;O++){var we=V[O*2+1];we!==0&&(V[O*2]=I(Le[we]++,we))}}function N(){var V,be,Fe,Le,ee,ie=new Array(o+1);for(Fe=0,Le=0;Le<S-1;Le++)for(re[Le]=Fe,V=0;V<1<<P[Le];V++)ue[Fe++]=Le;for(ue[Fe-1]=Le,ee=0,Le=0;Le<16;Le++)for(pe[Le]=ee,V=0;V<1<<R[Le];V++)ae[ee++]=Le;for(ee>>=7;Le<F;Le++)for(pe[Le]=ee<<7,V=0;V<1<<R[Le]-7;V++)ae[256+ee++]=Le;for(be=0;be<=o;be++)ie[be]=0;for(V=0;V<=143;)B[V*2+1]=8,V++,ie[8]++;for(;V<=255;)B[V*2+1]=9,V++,ie[9]++;for(;V<=279;)B[V*2+1]=7,V++,ie[7]++;for(;V<=287;)B[V*2+1]=8,V++,ie[8]++;for(L(B,M+1,ie),V=0;V<F;V++)oe[V*2+1]=5,oe[V*2]=I(V,5);W=new H(B,P,A+1,M,o),ne=new H(oe,R,0,F,o),j=new H(new Array(0),X,0,q,x)}function se(V){var be;for(be=0;be<M;be++)V.dyn_ltree[be*2]=0;for(be=0;be<F;be++)V.dyn_dtree[be*2]=0;for(be=0;be<q;be++)V.bl_tree[be*2]=0;V.dyn_ltree[b*2]=1,V.opt_len=V.static_len=0,V.last_lit=V.matches=0}function ge(V){V.bi_valid>8?p(V,V.bi_buf):V.bi_valid>0&&(V.pending_buf[V.pending++]=V.bi_buf),V.bi_buf=0,V.bi_valid=0}function Ae(V,be,Fe,Le){ge(V),p(V,Fe),p(V,~Fe),t.arraySet(V.pending_buf,V.window,be,Fe,V.pending),V.pending+=Fe}function he(V,be,Fe,Le){var ee=be*2,ie=Fe*2;return V[ee]<V[ie]||V[ee]===V[ie]&&Le[be]<=Le[Fe]}function de(V,be,Fe){for(var Le=V.heap[Fe],ee=Fe<<1;ee<=V.heap_len&&(ee<V.heap_len&&he(be,V.heap[ee+1],V.heap[ee],V.depth)&&ee++,!he(be,Le,V.heap[ee],V.depth));)V.heap[Fe]=V.heap[ee],Fe=ee,ee<<=1;V.heap[Fe]=Le}function K(V,be,Fe){var Le,ee,ie=0,O,we;if(V.last_lit!==0)do Le=V.pending_buf[V.d_buf+ie*2]<<8|V.pending_buf[V.d_buf+ie*2+1],ee=V.pending_buf[V.l_buf+ie],ie++,Le===0?C(V,ee,be):(O=ue[ee],C(V,O+A+1,be),we=P[O],we!==0&&(ee-=re[O],f(V,ee,we)),Le--,O=i(Le),C(V,O,Fe),we=R[O],we!==0&&(Le-=pe[O],f(V,Le,we)));while(ie<V.last_lit);C(V,b,be)}function $(V,be){var Fe=be.dyn_tree,Le=be.stat_desc.static_tree,ee=be.stat_desc.has_stree,ie=be.stat_desc.elems,O,we,qe=-1,d;for(V.heap_len=0,V.heap_max=T,O=0;O<ie;O++)Fe[O*2]!==0?(V.heap[++V.heap_len]=qe=O,V.depth[O]=0):Fe[O*2+1]=0;for(;V.heap_len<2;)d=V.heap[++V.heap_len]=qe<2?++qe:0,Fe[d*2]=1,V.depth[d]=0,V.opt_len--,ee&&(V.static_len-=Le[d*2+1]);for(be.max_code=qe,O=V.heap_len>>1;O>=1;O--)de(V,Fe,O);d=ie;do O=V.heap[1],V.heap[1]=V.heap[V.heap_len--],de(V,Fe,1),we=V.heap[1],V.heap[--V.heap_max]=O,V.heap[--V.heap_max]=we,Fe[d*2]=Fe[O*2]+Fe[we*2],V.depth[d]=(V.depth[O]>=V.depth[we]?V.depth[O]:V.depth[we])+1,Fe[O*2+1]=Fe[we*2+1]=d,V.heap[1]=d++,de(V,Fe,1);while(V.heap_len>=2);V.heap[--V.heap_max]=V.heap[1],Q(V,be),L(Fe,qe,V.bl_count)}function me(V,be,Fe){var Le,ee=-1,ie,O=be[0*2+1],we=0,qe=7,d=4;for(O===0&&(qe=138,d=3),be[(Fe+1)*2+1]=65535,Le=0;Le<=Fe;Le++)ie=O,O=be[(Le+1)*2+1],!(++we<qe&&ie===O)&&(we<d?V.bl_tree[ie*2]+=we:ie!==0?(ie!==ee&&V.bl_tree[ie*2]++,V.bl_tree[l*2]++):we<=10?V.bl_tree[v*2]++:V.bl_tree[c*2]++,we=0,ee=ie,O===0?(qe=138,d=3):ie===O?(qe=6,d=3):(qe=7,d=4))}function _e(V,be,Fe){var Le,ee=-1,ie,O=be[0*2+1],we=0,qe=7,d=4;for(O===0&&(qe=138,d=3),Le=0;Le<=Fe;Le++)if(ie=O,O=be[(Le+1)*2+1],!(++we<qe&&ie===O)){if(we<d)do C(V,ie,V.bl_tree);while(--we!==0);else ie!==0?(ie!==ee&&(C(V,ie,V.bl_tree),we--),C(V,l,V.bl_tree),f(V,we-3,2)):we<=10?(C(V,v,V.bl_tree),f(V,we-3,3)):(C(V,c,V.bl_tree),f(V,we-11,7));we=0,ee=ie,O===0?(qe=138,d=3):ie===O?(qe=6,d=3):(qe=7,d=4)}}function Ce(V){var be;for(me(V,V.dyn_ltree,V.l_desc.max_code),me(V,V.dyn_dtree,V.d_desc.max_code),$(V,V.bl_desc),be=q-1;be>=3&&V.bl_tree[D[be]*2+1]===0;be--);return V.opt_len+=3*(be+1)+5+5+4,be}function ke(V,be,Fe,Le){var ee;for(f(V,be-257,5),f(V,Fe-1,5),f(V,Le-4,4),ee=0;ee<Le;ee++)f(V,V.bl_tree[D[ee]*2+1],3);_e(V,V.dyn_ltree,be-1),_e(V,V.dyn_dtree,Fe-1)}function te(V){var be=4093624447,Fe;for(Fe=0;Fe<=31;Fe++,be>>>=1)if(be&1&&V.dyn_ltree[Fe*2]!==0)return n;if(V.dyn_ltree[9*2]!==0||V.dyn_ltree[10*2]!==0||V.dyn_ltree[13*2]!==0)return r;for(Fe=32;Fe<A;Fe++)if(V.dyn_ltree[Fe*2]!==0)return r;return n}var J=!1;function Se(V){J||(N(),J=!0),V.l_desc=new s(V.dyn_ltree,W),V.d_desc=new s(V.dyn_dtree,ne),V.bl_desc=new s(V.bl_tree,j),V.bi_buf=0,V.bi_valid=0,se(V)}function Te(V,be,Fe,Le){f(V,(_<<1)+(Le?1:0),3),Ae(V,be,Fe)}function De(V){f(V,k<<1,3),C(V,b,B),z(V)}function Ne(V,be,Fe,Le){var ee,ie,O=0;V.level>0?(V.strm.data_type===h&&(V.strm.data_type=te(V)),$(V,V.l_desc),$(V,V.d_desc),O=Ce(V),ee=V.opt_len+3+7>>>3,ie=V.static_len+3+7>>>3,ie<=ee&&(ee=ie)):ee=ie=Fe+5,Fe+4<=ee&&be!==-1?Te(V,be,Fe,Le):V.strategy===e||ie===ee?(f(V,(k<<1)+(Le?1:0),3),K(V,B,oe)):(f(V,(g<<1)+(Le?1:0),3),ke(V,V.l_desc.max_code+1,V.d_desc.max_code+1,O+1),K(V,V.dyn_ltree,V.dyn_dtree)),se(V),Le&&ge(V)}function Ue(V,be,Fe){return V.pending_buf[V.d_buf+V.last_lit*2]=be>>>8&255,V.pending_buf[V.d_buf+V.last_lit*2+1]=be&255,V.pending_buf[V.l_buf+V.last_lit]=Fe&255,V.last_lit++,be===0?V.dyn_ltree[Fe*2]++:(V.matches++,be--,V.dyn_ltree[(ue[Fe]+A+1)*2]++,V.dyn_dtree[i(be)*2]++),V.last_lit===V.lit_bufsize-1}return trees._tr_init=Se,trees._tr_stored_block=Te,trees._tr_flush_block=Ne,trees._tr_tally=Ue,trees._tr_align=De,trees}var adler32_1,hasRequiredAdler32;function requireAdler32(){if(hasRequiredAdler32)return adler32_1;hasRequiredAdler32=1;function t(e,n,r,h){for(var y=e&65535|0,_=e>>>16&65535|0,k=0;r!==0;){k=r>2e3?2e3:r,r-=k;do y=y+n[h++]|0,_=_+y|0;while(--k);y%=65521,_%=65521}return y|_<<16|0}return adler32_1=t,adler32_1}var crc32_1,hasRequiredCrc32;function requireCrc32(){if(hasRequiredCrc32)return crc32_1;hasRequiredCrc32=1;function t(){for(var r,h=[],y=0;y<256;y++){r=y;for(var _=0;_<8;_++)r=r&1?3988292384^r>>>1:r>>>1;h[y]=r}return h}var e=t();function n(r,h,y,_){var k=e,g=_+y;r^=-1;for(var m=_;m<g;m++)r=r>>>8^k[(r^h[m])&255];return r^-1}return crc32_1=n,crc32_1}var messages,hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),messages}var hasRequiredDeflate;function requireDeflate(){if(hasRequiredDeflate)return deflate;hasRequiredDeflate=1;var t=requireCommon(),e=requireTrees(),n=requireAdler32(),r=requireCrc32(),h=requireMessages(),y=0,_=1,k=3,g=4,m=5,a=0,S=1,A=-2,M=-3,F=-5,q=-1,T=1,o=2,u=3,x=4,b=0,l=2,v=8,c=9,P=15,R=8,X=29,D=256,E=D+1+X,B=30,oe=19,ae=2*E+1,ue=15,re=3,pe=258,H=pe+re+1,W=32,ne=42,j=69,s=73,i=91,p=103,f=113,C=666,I=1,z=2,Q=3,L=4,N=3;function se(d,G){return d.msg=h[G],G}function ge(d){return(d<<1)-(d>4?9:0)}function Ae(d){for(var G=d.length;--G>=0;)d[G]=0}function he(d){var G=d.state,ce=G.pending;ce>d.avail_out&&(ce=d.avail_out),ce!==0&&(t.arraySet(d.output,G.pending_buf,G.pending_out,ce,d.next_out),d.next_out+=ce,G.pending_out+=ce,d.total_out+=ce,d.avail_out-=ce,G.pending-=ce,G.pending===0&&(G.pending_out=0))}function de(d,G){e._tr_flush_block(d,d.block_start>=0?d.block_start:-1,d.strstart-d.block_start,G),d.block_start=d.strstart,he(d.strm)}function K(d,G){d.pending_buf[d.pending++]=G}function $(d,G){d.pending_buf[d.pending++]=G>>>8&255,d.pending_buf[d.pending++]=G&255}function me(d,G,ce,U){var le=d.avail_in;return le>U&&(le=U),le===0?0:(d.avail_in-=le,t.arraySet(G,d.input,d.next_in,le,ce),d.state.wrap===1?d.adler=n(d.adler,G,le,ce):d.state.wrap===2&&(d.adler=r(d.adler,G,le,ce)),d.next_in+=le,d.total_in+=le,le)}function _e(d,G){var ce=d.max_chain_length,U=d.strstart,le,ye,Me=d.prev_length,Z=d.nice_match,Y=d.strstart>d.w_size-H?d.strstart-(d.w_size-H):0,fe=d.window,xe=d.w_mask,Pe=d.prev,Oe=d.strstart+pe,Ie=fe[U+Me-1],He=fe[U+Me];d.prev_length>=d.good_match&&(ce>>=2),Z>d.lookahead&&(Z=d.lookahead);do if(le=G,!(fe[le+Me]!==He||fe[le+Me-1]!==Ie||fe[le]!==fe[U]||fe[++le]!==fe[U+1])){U+=2,le++;do;while(fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&U<Oe);if(ye=pe-(Oe-U),U=Oe-pe,ye>Me){if(d.match_start=G,Me=ye,ye>=Z)break;Ie=fe[U+Me-1],He=fe[U+Me]}}while((G=Pe[G&xe])>Y&&--ce!==0);return Me<=d.lookahead?Me:d.lookahead}function Ce(d){var G=d.w_size,ce,U,le,ye,Me;do{if(ye=d.window_size-d.lookahead-d.strstart,d.strstart>=G+(G-H)){t.arraySet(d.window,d.window,G,G,0),d.match_start-=G,d.strstart-=G,d.block_start-=G,U=d.hash_size,ce=U;do le=d.head[--ce],d.head[ce]=le>=G?le-G:0;while(--U);U=G,ce=U;do le=d.prev[--ce],d.prev[ce]=le>=G?le-G:0;while(--U);ye+=G}if(d.strm.avail_in===0)break;if(U=me(d.strm,d.window,d.strstart+d.lookahead,ye),d.lookahead+=U,d.lookahead+d.insert>=re)for(Me=d.strstart-d.insert,d.ins_h=d.window[Me],d.ins_h=(d.ins_h<<d.hash_shift^d.window[Me+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[Me+re-1])&d.hash_mask,d.prev[Me&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=Me,Me++,d.insert--,!(d.lookahead+d.insert<re)););}while(d.lookahead<H&&d.strm.avail_in!==0)}function ke(d,G){var ce=65535;for(ce>d.pending_buf_size-5&&(ce=d.pending_buf_size-5);;){if(d.lookahead<=1){if(Ce(d),d.lookahead===0&&G===y)return I;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var U=d.block_start+ce;if((d.strstart===0||d.strstart>=U)&&(d.lookahead=d.strstart-U,d.strstart=U,de(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-H&&(de(d,!1),d.strm.avail_out===0))return I}return d.insert=0,G===g?(de(d,!0),d.strm.avail_out===0?Q:L):(d.strstart>d.block_start&&(de(d,!1),d.strm.avail_out===0),I)}function te(d,G){for(var ce,U;;){if(d.lookahead<H){if(Ce(d),d.lookahead<H&&G===y)return I;if(d.lookahead===0)break}if(ce=0,d.lookahead>=re&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+re-1])&d.hash_mask,ce=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),ce!==0&&d.strstart-ce<=d.w_size-H&&(d.match_length=_e(d,ce)),d.match_length>=re)if(U=e._tr_tally(d,d.strstart-d.match_start,d.match_length-re),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=re){d.match_length--;do d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+re-1])&d.hash_mask,ce=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart;while(--d.match_length!==0);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else U=e._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(U&&(de(d,!1),d.strm.avail_out===0))return I}return d.insert=d.strstart<re-1?d.strstart:re-1,G===g?(de(d,!0),d.strm.avail_out===0?Q:L):d.last_lit&&(de(d,!1),d.strm.avail_out===0)?I:z}function J(d,G){for(var ce,U,le;;){if(d.lookahead<H){if(Ce(d),d.lookahead<H&&G===y)return I;if(d.lookahead===0)break}if(ce=0,d.lookahead>=re&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+re-1])&d.hash_mask,ce=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=re-1,ce!==0&&d.prev_length<d.max_lazy_match&&d.strstart-ce<=d.w_size-H&&(d.match_length=_e(d,ce),d.match_length<=5&&(d.strategy===T||d.match_length===re&&d.strstart-d.match_start>4096)&&(d.match_length=re-1)),d.prev_length>=re&&d.match_length<=d.prev_length){le=d.strstart+d.lookahead-re,U=e._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-re),d.lookahead-=d.prev_length-1,d.prev_length-=2;do++d.strstart<=le&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+re-1])&d.hash_mask,ce=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart);while(--d.prev_length!==0);if(d.match_available=0,d.match_length=re-1,d.strstart++,U&&(de(d,!1),d.strm.avail_out===0))return I}else if(d.match_available){if(U=e._tr_tally(d,0,d.window[d.strstart-1]),U&&de(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return I}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(U=e._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<re-1?d.strstart:re-1,G===g?(de(d,!0),d.strm.avail_out===0?Q:L):d.last_lit&&(de(d,!1),d.strm.avail_out===0)?I:z}function Se(d,G){for(var ce,U,le,ye,Me=d.window;;){if(d.lookahead<=pe){if(Ce(d),d.lookahead<=pe&&G===y)return I;if(d.lookahead===0)break}if(d.match_length=0,d.lookahead>=re&&d.strstart>0&&(le=d.strstart-1,U=Me[le],U===Me[++le]&&U===Me[++le]&&U===Me[++le])){ye=d.strstart+pe;do;while(U===Me[++le]&&U===Me[++le]&&U===Me[++le]&&U===Me[++le]&&U===Me[++le]&&U===Me[++le]&&U===Me[++le]&&U===Me[++le]&&le<ye);d.match_length=pe-(ye-le),d.match_length>d.lookahead&&(d.match_length=d.lookahead)}if(d.match_length>=re?(ce=e._tr_tally(d,1,d.match_length-re),d.lookahead-=d.match_length,d.strstart+=d.match_length,d.match_length=0):(ce=e._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++),ce&&(de(d,!1),d.strm.avail_out===0))return I}return d.insert=0,G===g?(de(d,!0),d.strm.avail_out===0?Q:L):d.last_lit&&(de(d,!1),d.strm.avail_out===0)?I:z}function Te(d,G){for(var ce;;){if(d.lookahead===0&&(Ce(d),d.lookahead===0)){if(G===y)return I;break}if(d.match_length=0,ce=e._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++,ce&&(de(d,!1),d.strm.avail_out===0))return I}return d.insert=0,G===g?(de(d,!0),d.strm.avail_out===0?Q:L):d.last_lit&&(de(d,!1),d.strm.avail_out===0)?I:z}function De(d,G,ce,U,le){this.good_length=d,this.max_lazy=G,this.nice_length=ce,this.max_chain=U,this.func=le}var Ne;Ne=[new De(0,0,0,0,ke),new De(4,4,8,4,te),new De(4,5,16,8,te),new De(4,6,32,32,te),new De(4,4,16,16,J),new De(8,16,32,32,J),new De(8,16,128,128,J),new De(8,32,128,256,J),new De(32,128,258,1024,J),new De(32,258,258,4096,J)];function Ue(d){d.window_size=2*d.w_size,Ae(d.head),d.max_lazy_match=Ne[d.level].max_lazy,d.good_match=Ne[d.level].good_length,d.nice_match=Ne[d.level].nice_length,d.max_chain_length=Ne[d.level].max_chain,d.strstart=0,d.block_start=0,d.lookahead=0,d.insert=0,d.match_length=d.prev_length=re-1,d.match_available=0,d.ins_h=0}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new t.Buf16(ae*2),this.dyn_dtree=new t.Buf16((2*B+1)*2),this.bl_tree=new t.Buf16((2*oe+1)*2),Ae(this.dyn_ltree),Ae(this.dyn_dtree),Ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new t.Buf16(ue+1),this.heap=new t.Buf16(2*E+1),Ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new t.Buf16(2*E+1),Ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function be(d){var G;return!d||!d.state?se(d,A):(d.total_in=d.total_out=0,d.data_type=l,G=d.state,G.pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?ne:f,d.adler=G.wrap===2?0:1,G.last_flush=y,e._tr_init(G),a)}function Fe(d){var G=be(d);return G===a&&Ue(d.state),G}function Le(d,G){return!d||!d.state||d.state.wrap!==2?A:(d.state.gzhead=G,a)}function ee(d,G,ce,U,le,ye){if(!d)return A;var Me=1;if(G===q&&(G=6),U<0?(Me=0,U=-U):U>15&&(Me=2,U-=16),le<1||le>c||ce!==v||U<8||U>15||G<0||G>9||ye<0||ye>x)return se(d,A);U===8&&(U=9);var Z=new V;return d.state=Z,Z.strm=d,Z.wrap=Me,Z.gzhead=null,Z.w_bits=U,Z.w_size=1<<Z.w_bits,Z.w_mask=Z.w_size-1,Z.hash_bits=le+7,Z.hash_size=1<<Z.hash_bits,Z.hash_mask=Z.hash_size-1,Z.hash_shift=~~((Z.hash_bits+re-1)/re),Z.window=new t.Buf8(Z.w_size*2),Z.head=new t.Buf16(Z.hash_size),Z.prev=new t.Buf16(Z.w_size),Z.lit_bufsize=1<<le+6,Z.pending_buf_size=Z.lit_bufsize*4,Z.pending_buf=new t.Buf8(Z.pending_buf_size),Z.d_buf=1*Z.lit_bufsize,Z.l_buf=3*Z.lit_bufsize,Z.level=G,Z.strategy=ye,Z.method=ce,Fe(d)}function ie(d,G){return ee(d,G,v,P,R,b)}function O(d,G){var ce,U,le,ye;if(!d||!d.state||G>m||G<0)return d?se(d,A):A;if(U=d.state,!d.output||!d.input&&d.avail_in!==0||U.status===C&&G!==g)return se(d,d.avail_out===0?F:A);if(U.strm=d,ce=U.last_flush,U.last_flush=G,U.status===ne)if(U.wrap===2)d.adler=0,K(U,31),K(U,139),K(U,8),U.gzhead?(K(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),K(U,U.gzhead.time&255),K(U,U.gzhead.time>>8&255),K(U,U.gzhead.time>>16&255),K(U,U.gzhead.time>>24&255),K(U,U.level===9?2:U.strategy>=o||U.level<2?4:0),K(U,U.gzhead.os&255),U.gzhead.extra&&U.gzhead.extra.length&&(K(U,U.gzhead.extra.length&255),K(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(d.adler=r(d.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=j):(K(U,0),K(U,0),K(U,0),K(U,0),K(U,0),K(U,U.level===9?2:U.strategy>=o||U.level<2?4:0),K(U,N),U.status=f);else{var Me=v+(U.w_bits-8<<4)<<8,Z=-1;U.strategy>=o||U.level<2?Z=0:U.level<6?Z=1:U.level===6?Z=2:Z=3,Me|=Z<<6,U.strstart!==0&&(Me|=W),Me+=31-Me%31,U.status=f,$(U,Me),U.strstart!==0&&($(U,d.adler>>>16),$(U,d.adler&65535)),d.adler=1}if(U.status===j)if(U.gzhead.extra){for(le=U.pending;U.gzindex<(U.gzhead.extra.length&65535)&&!(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>le&&(d.adler=r(d.adler,U.pending_buf,U.pending-le,le)),he(d),le=U.pending,U.pending===U.pending_buf_size));)K(U,U.gzhead.extra[U.gzindex]&255),U.gzindex++;U.gzhead.hcrc&&U.pending>le&&(d.adler=r(d.adler,U.pending_buf,U.pending-le,le)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=s)}else U.status=s;if(U.status===s)if(U.gzhead.name){le=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>le&&(d.adler=r(d.adler,U.pending_buf,U.pending-le,le)),he(d),le=U.pending,U.pending===U.pending_buf_size)){ye=1;break}U.gzindex<U.gzhead.name.length?ye=U.gzhead.name.charCodeAt(U.gzindex++)&255:ye=0,K(U,ye)}while(ye!==0);U.gzhead.hcrc&&U.pending>le&&(d.adler=r(d.adler,U.pending_buf,U.pending-le,le)),ye===0&&(U.gzindex=0,U.status=i)}else U.status=i;if(U.status===i)if(U.gzhead.comment){le=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>le&&(d.adler=r(d.adler,U.pending_buf,U.pending-le,le)),he(d),le=U.pending,U.pending===U.pending_buf_size)){ye=1;break}U.gzindex<U.gzhead.comment.length?ye=U.gzhead.comment.charCodeAt(U.gzindex++)&255:ye=0,K(U,ye)}while(ye!==0);U.gzhead.hcrc&&U.pending>le&&(d.adler=r(d.adler,U.pending_buf,U.pending-le,le)),ye===0&&(U.status=p)}else U.status=p;if(U.status===p&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&he(d),U.pending+2<=U.pending_buf_size&&(K(U,d.adler&255),K(U,d.adler>>8&255),d.adler=0,U.status=f)):U.status=f),U.pending!==0){if(he(d),d.avail_out===0)return U.last_flush=-1,a}else if(d.avail_in===0&&ge(G)<=ge(ce)&&G!==g)return se(d,F);if(U.status===C&&d.avail_in!==0)return se(d,F);if(d.avail_in!==0||U.lookahead!==0||G!==y&&U.status!==C){var Y=U.strategy===o?Te(U,G):U.strategy===u?Se(U,G):Ne[U.level].func(U,G);if((Y===Q||Y===L)&&(U.status=C),Y===I||Y===Q)return d.avail_out===0&&(U.last_flush=-1),a;if(Y===z&&(G===_?e._tr_align(U):G!==m&&(e._tr_stored_block(U,0,0,!1),G===k&&(Ae(U.head),U.lookahead===0&&(U.strstart=0,U.block_start=0,U.insert=0))),he(d),d.avail_out===0))return U.last_flush=-1,a}return G!==g?a:U.wrap<=0?S:(U.wrap===2?(K(U,d.adler&255),K(U,d.adler>>8&255),K(U,d.adler>>16&255),K(U,d.adler>>24&255),K(U,d.total_in&255),K(U,d.total_in>>8&255),K(U,d.total_in>>16&255),K(U,d.total_in>>24&255)):($(U,d.adler>>>16),$(U,d.adler&65535)),he(d),U.wrap>0&&(U.wrap=-U.wrap),U.pending!==0?a:S)}function we(d){var G;return!d||!d.state?A:(G=d.state.status,G!==ne&&G!==j&&G!==s&&G!==i&&G!==p&&G!==f&&G!==C?se(d,A):(d.state=null,G===f?se(d,M):a))}function qe(d,G){var ce=G.length,U,le,ye,Me,Z,Y,fe,xe;if(!d||!d.state||(U=d.state,Me=U.wrap,Me===2||Me===1&&U.status!==ne||U.lookahead))return A;for(Me===1&&(d.adler=n(d.adler,G,ce,0)),U.wrap=0,ce>=U.w_size&&(Me===0&&(Ae(U.head),U.strstart=0,U.block_start=0,U.insert=0),xe=new t.Buf8(U.w_size),t.arraySet(xe,G,ce-U.w_size,U.w_size,0),G=xe,ce=U.w_size),Z=d.avail_in,Y=d.next_in,fe=d.input,d.avail_in=ce,d.next_in=0,d.input=G,Ce(U);U.lookahead>=re;){le=U.strstart,ye=U.lookahead-(re-1);do U.ins_h=(U.ins_h<<U.hash_shift^U.window[le+re-1])&U.hash_mask,U.prev[le&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=le,le++;while(--ye);U.strstart=le,U.lookahead=re-1,Ce(U)}return U.strstart+=U.lookahead,U.block_start=U.strstart,U.insert=U.lookahead,U.lookahead=0,U.match_length=U.prev_length=re-1,U.match_available=0,d.next_in=Y,d.input=fe,d.avail_in=Z,U.wrap=Me,a}return deflate.deflateInit=ie,deflate.deflateInit2=ee,deflate.deflateReset=Fe,deflate.deflateResetKeep=be,deflate.deflateSetHeader=Le,deflate.deflate=O,deflate.deflateEnd=we,deflate.deflateSetDictionary=qe,deflate.deflateInfo="pako deflate (from Nodeca project)",deflate}var inflate={},inffast,hasRequiredInffast;function requireInffast(){if(hasRequiredInffast)return inffast;hasRequiredInffast=1;var t=30,e=12;return inffast=function(r,h){var y,_,k,g,m,a,S,A,M,F,q,T,o,u,x,b,l,v,c,P,R,X,D,E,B;y=r.state,_=r.next_in,E=r.input,k=_+(r.avail_in-5),g=r.next_out,B=r.output,m=g-(h-r.avail_out),a=g+(r.avail_out-257),S=y.dmax,A=y.wsize,M=y.whave,F=y.wnext,q=y.window,T=y.hold,o=y.bits,u=y.lencode,x=y.distcode,b=(1<<y.lenbits)-1,l=(1<<y.distbits)-1;e:do{o<15&&(T+=E[_++]<<o,o+=8,T+=E[_++]<<o,o+=8),v=u[T&b];t:for(;;){if(c=v>>>24,T>>>=c,o-=c,c=v>>>16&255,c===0)B[g++]=v&65535;else if(c&16){P=v&65535,c&=15,c&&(o<c&&(T+=E[_++]<<o,o+=8),P+=T&(1<<c)-1,T>>>=c,o-=c),o<15&&(T+=E[_++]<<o,o+=8,T+=E[_++]<<o,o+=8),v=x[T&l];r:for(;;){if(c=v>>>24,T>>>=c,o-=c,c=v>>>16&255,c&16){if(R=v&65535,c&=15,o<c&&(T+=E[_++]<<o,o+=8,o<c&&(T+=E[_++]<<o,o+=8)),R+=T&(1<<c)-1,R>S){r.msg="invalid distance too far back",y.mode=t;break e}if(T>>>=c,o-=c,c=g-m,R>c){if(c=R-c,c>M&&y.sane){r.msg="invalid distance too far back",y.mode=t;break e}if(X=0,D=q,F===0){if(X+=A-c,c<P){P-=c;do B[g++]=q[X++];while(--c);X=g-R,D=B}}else if(F<c){if(X+=A+F-c,c-=F,c<P){P-=c;do B[g++]=q[X++];while(--c);if(X=0,F<P){c=F,P-=c;do B[g++]=q[X++];while(--c);X=g-R,D=B}}}else if(X+=F-c,c<P){P-=c;do B[g++]=q[X++];while(--c);X=g-R,D=B}for(;P>2;)B[g++]=D[X++],B[g++]=D[X++],B[g++]=D[X++],P-=3;P&&(B[g++]=D[X++],P>1&&(B[g++]=D[X++]))}else{X=g-R;do B[g++]=B[X++],B[g++]=B[X++],B[g++]=B[X++],P-=3;while(P>2);P&&(B[g++]=B[X++],P>1&&(B[g++]=B[X++]))}}else if(c&64){r.msg="invalid distance code",y.mode=t;break e}else{v=x[(v&65535)+(T&(1<<c)-1)];continue r}break}}else if(c&64)if(c&32){y.mode=e;break e}else{r.msg="invalid literal/length code",y.mode=t;break e}else{v=u[(v&65535)+(T&(1<<c)-1)];continue t}break}}while(_<k&&g<a);P=o>>3,_-=P,o-=P<<3,T&=(1<<o)-1,r.next_in=_,r.next_out=g,r.avail_in=_<k?5+(k-_):5-(_-k),r.avail_out=g<a?257+(a-g):257-(g-a),y.hold=T,y.bits=o},inffast}var inftrees,hasRequiredInftrees;function requireInftrees(){if(hasRequiredInftrees)return inftrees;hasRequiredInftrees=1;var t=requireCommon(),e=15,n=852,r=592,h=0,y=1,_=2,k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return inftrees=function(A,M,F,q,T,o,u,x){var b=x.bits,l=0,v=0,c=0,P=0,R=0,X=0,D=0,E=0,B=0,oe=0,ae,ue,re,pe,H,W=null,ne=0,j,s=new t.Buf16(e+1),i=new t.Buf16(e+1),p=null,f=0,C,I,z;for(l=0;l<=e;l++)s[l]=0;for(v=0;v<q;v++)s[M[F+v]]++;for(R=b,P=e;P>=1&&s[P]===0;P--);if(R>P&&(R=P),P===0)return T[o++]=1<<24|64<<16|0,T[o++]=1<<24|64<<16|0,x.bits=1,0;for(c=1;c<P&&s[c]===0;c++);for(R<c&&(R=c),E=1,l=1;l<=e;l++)if(E<<=1,E-=s[l],E<0)return-1;if(E>0&&(A===h||P!==1))return-1;for(i[1]=0,l=1;l<e;l++)i[l+1]=i[l]+s[l];for(v=0;v<q;v++)M[F+v]!==0&&(u[i[M[F+v]]++]=v);if(A===h?(W=p=u,j=19):A===y?(W=k,ne-=257,p=g,f-=257,j=256):(W=m,p=a,j=-1),oe=0,v=0,l=c,H=o,X=R,D=0,re=-1,B=1<<R,pe=B-1,A===y&&B>n||A===_&&B>r)return 1;for(;;){C=l-D,u[v]<j?(I=0,z=u[v]):u[v]>j?(I=p[f+u[v]],z=W[ne+u[v]]):(I=96,z=0),ae=1<<l-D,ue=1<<X,c=ue;do ue-=ae,T[H+(oe>>D)+ue]=C<<24|I<<16|z|0;while(ue!==0);for(ae=1<<l-1;oe&ae;)ae>>=1;if(ae!==0?(oe&=ae-1,oe+=ae):oe=0,v++,--s[l]===0){if(l===P)break;l=M[F+u[v]]}if(l>R&&(oe&pe)!==re){for(D===0&&(D=R),H+=c,X=l-D,E=1<<X;X+D<P&&(E-=s[X+D],!(E<=0));)X++,E<<=1;if(B+=1<<X,A===y&&B>n||A===_&&B>r)return 1;re=oe&pe,T[re]=R<<24|X<<16|H-o|0}}return oe!==0&&(T[H+oe]=l-D<<24|64<<16|0),x.bits=R,0},inftrees}var hasRequiredInflate;function requireInflate(){if(hasRequiredInflate)return inflate;hasRequiredInflate=1;var t=requireCommon(),e=requireAdler32(),n=requireCrc32(),r=requireInffast(),h=requireInftrees(),y=0,_=1,k=2,g=4,m=5,a=6,S=0,A=1,M=2,F=-2,q=-3,T=-4,o=-5,u=8,x=1,b=2,l=3,v=4,c=5,P=6,R=7,X=8,D=9,E=10,B=11,oe=12,ae=13,ue=14,re=15,pe=16,H=17,W=18,ne=19,j=20,s=21,i=22,p=23,f=24,C=25,I=26,z=27,Q=28,L=29,N=30,se=31,ge=32,Ae=852,he=592,de=15,K=de;function $(ee){return(ee>>>24&255)+(ee>>>8&65280)+((ee&65280)<<8)+((ee&255)<<24)}function me(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _e(ee){var ie;return!ee||!ee.state?F:(ie=ee.state,ee.total_in=ee.total_out=ie.total=0,ee.msg="",ie.wrap&&(ee.adler=ie.wrap&1),ie.mode=x,ie.last=0,ie.havedict=0,ie.dmax=32768,ie.head=null,ie.hold=0,ie.bits=0,ie.lencode=ie.lendyn=new t.Buf32(Ae),ie.distcode=ie.distdyn=new t.Buf32(he),ie.sane=1,ie.back=-1,S)}function Ce(ee){var ie;return!ee||!ee.state?F:(ie=ee.state,ie.wsize=0,ie.whave=0,ie.wnext=0,_e(ee))}function ke(ee,ie){var O,we;return!ee||!ee.state||(we=ee.state,ie<0?(O=0,ie=-ie):(O=(ie>>4)+1,ie<48&&(ie&=15)),ie&&(ie<8||ie>15))?F:(we.window!==null&&we.wbits!==ie&&(we.window=null),we.wrap=O,we.wbits=ie,Ce(ee))}function te(ee,ie){var O,we;return ee?(we=new me,ee.state=we,we.window=null,O=ke(ee,ie),O!==S&&(ee.state=null),O):F}function J(ee){return te(ee,K)}var Se=!0,Te,De;function Ne(ee){if(Se){var ie;for(Te=new t.Buf32(512),De=new t.Buf32(32),ie=0;ie<144;)ee.lens[ie++]=8;for(;ie<256;)ee.lens[ie++]=9;for(;ie<280;)ee.lens[ie++]=7;for(;ie<288;)ee.lens[ie++]=8;for(h(_,ee.lens,0,288,Te,0,ee.work,{bits:9}),ie=0;ie<32;)ee.lens[ie++]=5;h(k,ee.lens,0,32,De,0,ee.work,{bits:5}),Se=!1}ee.lencode=Te,ee.lenbits=9,ee.distcode=De,ee.distbits=5}function Ue(ee,ie,O,we){var qe,d=ee.state;return d.window===null&&(d.wsize=1<<d.wbits,d.wnext=0,d.whave=0,d.window=new t.Buf8(d.wsize)),we>=d.wsize?(t.arraySet(d.window,ie,O-d.wsize,d.wsize,0),d.wnext=0,d.whave=d.wsize):(qe=d.wsize-d.wnext,qe>we&&(qe=we),t.arraySet(d.window,ie,O-we,qe,d.wnext),we-=qe,we?(t.arraySet(d.window,ie,O-we,we,0),d.wnext=we,d.whave=d.wsize):(d.wnext+=qe,d.wnext===d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=qe))),0}function V(ee,ie){var O,we,qe,d,G,ce,U,le,ye,Me,Z,Y,fe,xe,Pe=0,Oe,Ie,He,We,Be,Ve,je,ze,Ge=new t.Buf8(4),$e,Xe,Ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ee||!ee.state||!ee.output||!ee.input&&ee.avail_in!==0)return F;O=ee.state,O.mode===oe&&(O.mode=ae),G=ee.next_out,qe=ee.output,U=ee.avail_out,d=ee.next_in,we=ee.input,ce=ee.avail_in,le=O.hold,ye=O.bits,Me=ce,Z=U,ze=S;e:for(;;)switch(O.mode){case x:if(O.wrap===0){O.mode=ae;break}for(;ye<16;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(O.wrap&2&&le===35615){O.check=0,Ge[0]=le&255,Ge[1]=le>>>8&255,O.check=n(O.check,Ge,2,0),le=0,ye=0,O.mode=b;break}if(O.flags=0,O.head&&(O.head.done=!1),!(O.wrap&1)||(((le&255)<<8)+(le>>8))%31){ee.msg="incorrect header check",O.mode=N;break}if((le&15)!==u){ee.msg="unknown compression method",O.mode=N;break}if(le>>>=4,ye-=4,je=(le&15)+8,O.wbits===0)O.wbits=je;else if(je>O.wbits){ee.msg="invalid window size",O.mode=N;break}O.dmax=1<<je,ee.adler=O.check=1,O.mode=le&512?E:oe,le=0,ye=0;break;case b:for(;ye<16;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(O.flags=le,(O.flags&255)!==u){ee.msg="unknown compression method",O.mode=N;break}if(O.flags&57344){ee.msg="unknown header flags set",O.mode=N;break}O.head&&(O.head.text=le>>8&1),O.flags&512&&(Ge[0]=le&255,Ge[1]=le>>>8&255,O.check=n(O.check,Ge,2,0)),le=0,ye=0,O.mode=l;case l:for(;ye<32;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}O.head&&(O.head.time=le),O.flags&512&&(Ge[0]=le&255,Ge[1]=le>>>8&255,Ge[2]=le>>>16&255,Ge[3]=le>>>24&255,O.check=n(O.check,Ge,4,0)),le=0,ye=0,O.mode=v;case v:for(;ye<16;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}O.head&&(O.head.xflags=le&255,O.head.os=le>>8),O.flags&512&&(Ge[0]=le&255,Ge[1]=le>>>8&255,O.check=n(O.check,Ge,2,0)),le=0,ye=0,O.mode=c;case c:if(O.flags&1024){for(;ye<16;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}O.length=le,O.head&&(O.head.extra_len=le),O.flags&512&&(Ge[0]=le&255,Ge[1]=le>>>8&255,O.check=n(O.check,Ge,2,0)),le=0,ye=0}else O.head&&(O.head.extra=null);O.mode=P;case P:if(O.flags&1024&&(Y=O.length,Y>ce&&(Y=ce),Y&&(O.head&&(je=O.head.extra_len-O.length,O.head.extra||(O.head.extra=new Array(O.head.extra_len)),t.arraySet(O.head.extra,we,d,Y,je)),O.flags&512&&(O.check=n(O.check,we,Y,d)),ce-=Y,d+=Y,O.length-=Y),O.length))break e;O.length=0,O.mode=R;case R:if(O.flags&2048){if(ce===0)break e;Y=0;do je=we[d+Y++],O.head&&je&&O.length<65536&&(O.head.name+=String.fromCharCode(je));while(je&&Y<ce);if(O.flags&512&&(O.check=n(O.check,we,Y,d)),ce-=Y,d+=Y,je)break e}else O.head&&(O.head.name=null);O.length=0,O.mode=X;case X:if(O.flags&4096){if(ce===0)break e;Y=0;do je=we[d+Y++],O.head&&je&&O.length<65536&&(O.head.comment+=String.fromCharCode(je));while(je&&Y<ce);if(O.flags&512&&(O.check=n(O.check,we,Y,d)),ce-=Y,d+=Y,je)break e}else O.head&&(O.head.comment=null);O.mode=D;case D:if(O.flags&512){for(;ye<16;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(le!==(O.check&65535)){ee.msg="header crc mismatch",O.mode=N;break}le=0,ye=0}O.head&&(O.head.hcrc=O.flags>>9&1,O.head.done=!0),ee.adler=O.check=0,O.mode=oe;break;case E:for(;ye<32;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}ee.adler=O.check=$(le),le=0,ye=0,O.mode=B;case B:if(O.havedict===0)return ee.next_out=G,ee.avail_out=U,ee.next_in=d,ee.avail_in=ce,O.hold=le,O.bits=ye,M;ee.adler=O.check=1,O.mode=oe;case oe:if(ie===m||ie===a)break e;case ae:if(O.last){le>>>=ye&7,ye-=ye&7,O.mode=z;break}for(;ye<3;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}switch(O.last=le&1,le>>>=1,ye-=1,le&3){case 0:O.mode=ue;break;case 1:if(Ne(O),O.mode=j,ie===a){le>>>=2,ye-=2;break e}break;case 2:O.mode=H;break;case 3:ee.msg="invalid block type",O.mode=N}le>>>=2,ye-=2;break;case ue:for(le>>>=ye&7,ye-=ye&7;ye<32;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if((le&65535)!==(le>>>16^65535)){ee.msg="invalid stored block lengths",O.mode=N;break}if(O.length=le&65535,le=0,ye=0,O.mode=re,ie===a)break e;case re:O.mode=pe;case pe:if(Y=O.length,Y){if(Y>ce&&(Y=ce),Y>U&&(Y=U),Y===0)break e;t.arraySet(qe,we,d,Y,G),ce-=Y,d+=Y,U-=Y,G+=Y,O.length-=Y;break}O.mode=oe;break;case H:for(;ye<14;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(O.nlen=(le&31)+257,le>>>=5,ye-=5,O.ndist=(le&31)+1,le>>>=5,ye-=5,O.ncode=(le&15)+4,le>>>=4,ye-=4,O.nlen>286||O.ndist>30){ee.msg="too many length or distance symbols",O.mode=N;break}O.have=0,O.mode=W;case W:for(;O.have<O.ncode;){for(;ye<3;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}O.lens[Ke[O.have++]]=le&7,le>>>=3,ye-=3}for(;O.have<19;)O.lens[Ke[O.have++]]=0;if(O.lencode=O.lendyn,O.lenbits=7,$e={bits:O.lenbits},ze=h(y,O.lens,0,19,O.lencode,0,O.work,$e),O.lenbits=$e.bits,ze){ee.msg="invalid code lengths set",O.mode=N;break}O.have=0,O.mode=ne;case ne:for(;O.have<O.nlen+O.ndist;){for(;Pe=O.lencode[le&(1<<O.lenbits)-1],Oe=Pe>>>24,Ie=Pe>>>16&255,He=Pe&65535,!(Oe<=ye);){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(He<16)le>>>=Oe,ye-=Oe,O.lens[O.have++]=He;else{if(He===16){for(Xe=Oe+2;ye<Xe;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(le>>>=Oe,ye-=Oe,O.have===0){ee.msg="invalid bit length repeat",O.mode=N;break}je=O.lens[O.have-1],Y=3+(le&3),le>>>=2,ye-=2}else if(He===17){for(Xe=Oe+3;ye<Xe;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}le>>>=Oe,ye-=Oe,je=0,Y=3+(le&7),le>>>=3,ye-=3}else{for(Xe=Oe+7;ye<Xe;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}le>>>=Oe,ye-=Oe,je=0,Y=11+(le&127),le>>>=7,ye-=7}if(O.have+Y>O.nlen+O.ndist){ee.msg="invalid bit length repeat",O.mode=N;break}for(;Y--;)O.lens[O.have++]=je}}if(O.mode===N)break;if(O.lens[256]===0){ee.msg="invalid code -- missing end-of-block",O.mode=N;break}if(O.lenbits=9,$e={bits:O.lenbits},ze=h(_,O.lens,0,O.nlen,O.lencode,0,O.work,$e),O.lenbits=$e.bits,ze){ee.msg="invalid literal/lengths set",O.mode=N;break}if(O.distbits=6,O.distcode=O.distdyn,$e={bits:O.distbits},ze=h(k,O.lens,O.nlen,O.ndist,O.distcode,0,O.work,$e),O.distbits=$e.bits,ze){ee.msg="invalid distances set",O.mode=N;break}if(O.mode=j,ie===a)break e;case j:O.mode=s;case s:if(ce>=6&&U>=258){ee.next_out=G,ee.avail_out=U,ee.next_in=d,ee.avail_in=ce,O.hold=le,O.bits=ye,r(ee,Z),G=ee.next_out,qe=ee.output,U=ee.avail_out,d=ee.next_in,we=ee.input,ce=ee.avail_in,le=O.hold,ye=O.bits,O.mode===oe&&(O.back=-1);break}for(O.back=0;Pe=O.lencode[le&(1<<O.lenbits)-1],Oe=Pe>>>24,Ie=Pe>>>16&255,He=Pe&65535,!(Oe<=ye);){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(Ie&&!(Ie&240)){for(We=Oe,Be=Ie,Ve=He;Pe=O.lencode[Ve+((le&(1<<We+Be)-1)>>We)],Oe=Pe>>>24,Ie=Pe>>>16&255,He=Pe&65535,!(We+Oe<=ye);){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}le>>>=We,ye-=We,O.back+=We}if(le>>>=Oe,ye-=Oe,O.back+=Oe,O.length=He,Ie===0){O.mode=I;break}if(Ie&32){O.back=-1,O.mode=oe;break}if(Ie&64){ee.msg="invalid literal/length code",O.mode=N;break}O.extra=Ie&15,O.mode=i;case i:if(O.extra){for(Xe=O.extra;ye<Xe;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}O.length+=le&(1<<O.extra)-1,le>>>=O.extra,ye-=O.extra,O.back+=O.extra}O.was=O.length,O.mode=p;case p:for(;Pe=O.distcode[le&(1<<O.distbits)-1],Oe=Pe>>>24,Ie=Pe>>>16&255,He=Pe&65535,!(Oe<=ye);){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(!(Ie&240)){for(We=Oe,Be=Ie,Ve=He;Pe=O.distcode[Ve+((le&(1<<We+Be)-1)>>We)],Oe=Pe>>>24,Ie=Pe>>>16&255,He=Pe&65535,!(We+Oe<=ye);){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}le>>>=We,ye-=We,O.back+=We}if(le>>>=Oe,ye-=Oe,O.back+=Oe,Ie&64){ee.msg="invalid distance code",O.mode=N;break}O.offset=He,O.extra=Ie&15,O.mode=f;case f:if(O.extra){for(Xe=O.extra;ye<Xe;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}O.offset+=le&(1<<O.extra)-1,le>>>=O.extra,ye-=O.extra,O.back+=O.extra}if(O.offset>O.dmax){ee.msg="invalid distance too far back",O.mode=N;break}O.mode=C;case C:if(U===0)break e;if(Y=Z-U,O.offset>Y){if(Y=O.offset-Y,Y>O.whave&&O.sane){ee.msg="invalid distance too far back",O.mode=N;break}Y>O.wnext?(Y-=O.wnext,fe=O.wsize-Y):fe=O.wnext-Y,Y>O.length&&(Y=O.length),xe=O.window}else xe=qe,fe=G-O.offset,Y=O.length;Y>U&&(Y=U),U-=Y,O.length-=Y;do qe[G++]=xe[fe++];while(--Y);O.length===0&&(O.mode=s);break;case I:if(U===0)break e;qe[G++]=O.length,U--,O.mode=s;break;case z:if(O.wrap){for(;ye<32;){if(ce===0)break e;ce--,le|=we[d++]<<ye,ye+=8}if(Z-=U,ee.total_out+=Z,O.total+=Z,Z&&(ee.adler=O.check=O.flags?n(O.check,qe,Z,G-Z):e(O.check,qe,Z,G-Z)),Z=U,(O.flags?le:$(le))!==O.check){ee.msg="incorrect data check",O.mode=N;break}le=0,ye=0}O.mode=Q;case Q:if(O.wrap&&O.flags){for(;ye<32;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(le!==(O.total&4294967295)){ee.msg="incorrect length check",O.mode=N;break}le=0,ye=0}O.mode=L;case L:ze=A;break e;case N:ze=q;break e;case se:return T;case ge:default:return F}return ee.next_out=G,ee.avail_out=U,ee.next_in=d,ee.avail_in=ce,O.hold=le,O.bits=ye,(O.wsize||Z!==ee.avail_out&&O.mode<N&&(O.mode<z||ie!==g))&&Ue(ee,ee.output,ee.next_out,Z-ee.avail_out),Me-=ee.avail_in,Z-=ee.avail_out,ee.total_in+=Me,ee.total_out+=Z,O.total+=Z,O.wrap&&Z&&(ee.adler=O.check=O.flags?n(O.check,qe,Z,ee.next_out-Z):e(O.check,qe,Z,ee.next_out-Z)),ee.data_type=O.bits+(O.last?64:0)+(O.mode===oe?128:0)+(O.mode===j||O.mode===re?256:0),(Me===0&&Z===0||ie===g)&&ze===S&&(ze=o),ze}function be(ee){if(!ee||!ee.state)return F;var ie=ee.state;return ie.window&&(ie.window=null),ee.state=null,S}function Fe(ee,ie){var O;return!ee||!ee.state||(O=ee.state,!(O.wrap&2))?F:(O.head=ie,ie.done=!1,S)}function Le(ee,ie){var O=ie.length,we,qe,d;return!ee||!ee.state||(we=ee.state,we.wrap!==0&&we.mode!==B)?F:we.mode===B&&(qe=1,qe=e(qe,ie,O,0),qe!==we.check)?q:(d=Ue(ee,ie,O,O),d?(we.mode=se,T):(we.havedict=1,S))}return inflate.inflateReset=Ce,inflate.inflateReset2=ke,inflate.inflateResetKeep=_e,inflate.inflateInit=J,inflate.inflateInit2=te,inflate.inflate=V,inflate.inflateEnd=be,inflate.inflateGetHeader=Fe,inflate.inflateSetDictionary=Le,inflate.inflateInfo="pako inflate (from Nodeca project)",inflate}var constants,hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),constants}var hasRequiredBinding;function requireBinding(){return hasRequiredBinding||(hasRequiredBinding=1,function(t){var e=requireAssert(),n=requireZstream(),r=requireDeflate(),h=requireInflate(),y=requireConstants();for(var _ in y)t[_]=y[_];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;var k=31,g=139;function m(a){if(typeof a!="number"||a<t.DEFLATE||a>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=a,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}m.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,e(this.init_done,"close before init"),e(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?r.deflateEnd(this.strm):(this.mode===t.INFLATE||this.mode===t.GUNZIP||this.mode===t.INFLATERAW||this.mode===t.UNZIP)&&h.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null},m.prototype.write=function(a,S,A,M,F,q,T){return this._write(!0,a,S,A,M,F,q,T)},m.prototype.writeSync=function(a,S,A,M,F,q,T){return this._write(!1,a,S,A,M,F,q,T)},m.prototype._write=function(a,S,A,M,F,q,T,o){if(e.equal(arguments.length,8),e(this.init_done,"write before init"),e(this.mode!==t.NONE,"already finalized"),e.equal(!1,this.write_in_progress,"write already in progress"),e.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,e.equal(!1,S===void 0,"must provide flush value"),this.write_in_progress=!0,S!==t.Z_NO_FLUSH&&S!==t.Z_PARTIAL_FLUSH&&S!==t.Z_SYNC_FLUSH&&S!==t.Z_FULL_FLUSH&&S!==t.Z_FINISH&&S!==t.Z_BLOCK)throw new Error("Invalid flush value");if(A==null&&(A=Buffer.alloc(0),F=0,M=0),this.strm.avail_in=F,this.strm.input=A,this.strm.next_in=M,this.strm.avail_out=o,this.strm.output=q,this.strm.next_out=T,this.flush=S,!a)return this._process(),this._checkError()?this._afterSync():void 0;var u=this;return process$1.nextTick(function(){u._process(),u._after()}),this},m.prototype._afterSync=function(){var a=this.strm.avail_out,S=this.strm.avail_in;return this.write_in_progress=!1,[S,a]},m.prototype._process=function(){var a=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=r.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(a=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(a===null)break;if(this.strm.input[a]===k){if(this.gzip_id_bytes_read=1,a++,this.strm.avail_in===1)break}else{this.mode=t.INFLATE;break}case 1:if(a===null)break;this.strm.input[a]===g?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=h.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=h.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=h.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=h.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},m.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},m.prototype._after=function(){if(this._checkError()){var a=this.strm.avail_out,S=this.strm.avail_in;this.write_in_progress=!1,this.callback(S,a),this.pending_close&&this.close()}},m.prototype._error=function(a){this.strm.msg&&(a=this.strm.msg),this.onerror(a,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},m.prototype.init=function(a,S,A,M,F){e(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),e(a>=8&&a<=15,"invalid windowBits"),e(S>=-1&&S<=9,"invalid compression level"),e(A>=1&&A<=9,"invalid memlevel"),e(M===t.Z_FILTERED||M===t.Z_HUFFMAN_ONLY||M===t.Z_RLE||M===t.Z_FIXED||M===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(S,a,A,M,F),this._setDictionary()},m.prototype.params=function(){throw new Error("deflateParams Not supported")},m.prototype.reset=function(){this._reset(),this._setDictionary()},m.prototype._init=function(a,S,A,M,F){switch(this.level=a,this.windowBits=S,this.memLevel=A,this.strategy=M,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,(this.mode===t.GZIP||this.mode===t.GUNZIP)&&(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),(this.mode===t.DEFLATERAW||this.mode===t.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new n,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=r.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=h.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=F,this.write_in_progress=!1,this.init_done=!0},m.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=r.deflateSetDictionary(this.strm,this.dictionary);break}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},m.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=r.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=h.inflateReset(this.strm);break}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=m}(binding)),binding}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,function(t){var e=requireDist().Buffer,n=requireStreamBrowserify().Transform,r=requireBinding(),h=requireUtil(),y=requireAssert().ok,_=requireDist().kMaxLength,k="Cannot create final Buffer. It would be larger than 0x"+_.toString(16)+" bytes";r.Z_MIN_WINDOWBITS=8,r.Z_MAX_WINDOWBITS=15,r.Z_DEFAULT_WINDOWBITS=15,r.Z_MIN_CHUNK=64,r.Z_MAX_CHUNK=1/0,r.Z_DEFAULT_CHUNK=16*1024,r.Z_MIN_MEMLEVEL=1,r.Z_MAX_MEMLEVEL=9,r.Z_DEFAULT_MEMLEVEL=8,r.Z_MIN_LEVEL=-1,r.Z_MAX_LEVEL=9,r.Z_DEFAULT_LEVEL=r.Z_DEFAULT_COMPRESSION;for(var g=Object.keys(r),m=0;m<g.length;m++){var a=g[m];a.match(/^Z/)&&Object.defineProperty(t,a,{enumerable:!0,value:r[a],writable:!1})}for(var S={Z_OK:r.Z_OK,Z_STREAM_END:r.Z_STREAM_END,Z_NEED_DICT:r.Z_NEED_DICT,Z_ERRNO:r.Z_ERRNO,Z_STREAM_ERROR:r.Z_STREAM_ERROR,Z_DATA_ERROR:r.Z_DATA_ERROR,Z_MEM_ERROR:r.Z_MEM_ERROR,Z_BUF_ERROR:r.Z_BUF_ERROR,Z_VERSION_ERROR:r.Z_VERSION_ERROR},A=Object.keys(S),M=0;M<A.length;M++){var F=A[M];S[S[F]]=F}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(S),writable:!1}),t.Deflate=o,t.Inflate=u,t.Gzip=x,t.Gunzip=b,t.DeflateRaw=l,t.InflateRaw=v,t.Unzip=c,t.createDeflate=function(E){return new o(E)},t.createInflate=function(E){return new u(E)},t.createDeflateRaw=function(E){return new l(E)},t.createInflateRaw=function(E){return new v(E)},t.createGzip=function(E){return new x(E)},t.createGunzip=function(E){return new b(E)},t.createUnzip=function(E){return new c(E)},t.deflate=function(E,B,oe){return typeof B=="function"&&(oe=B,B={}),q(new o(B),E,oe)},t.deflateSync=function(E,B){return T(new o(B),E)},t.gzip=function(E,B,oe){return typeof B=="function"&&(oe=B,B={}),q(new x(B),E,oe)},t.gzipSync=function(E,B){return T(new x(B),E)},t.deflateRaw=function(E,B,oe){return typeof B=="function"&&(oe=B,B={}),q(new l(B),E,oe)},t.deflateRawSync=function(E,B){return T(new l(B),E)},t.unzip=function(E,B,oe){return typeof B=="function"&&(oe=B,B={}),q(new c(B),E,oe)},t.unzipSync=function(E,B){return T(new c(B),E)},t.inflate=function(E,B,oe){return typeof B=="function"&&(oe=B,B={}),q(new u(B),E,oe)},t.inflateSync=function(E,B){return T(new u(B),E)},t.gunzip=function(E,B,oe){return typeof B=="function"&&(oe=B,B={}),q(new b(B),E,oe)},t.gunzipSync=function(E,B){return T(new b(B),E)},t.inflateRaw=function(E,B,oe){return typeof B=="function"&&(oe=B,B={}),q(new v(B),E,oe)},t.inflateRawSync=function(E,B){return T(new v(B),E)};function q(E,B,oe){var ae=[],ue=0;E.on("error",pe),E.on("end",H),E.end(B),re();function re(){for(var W;(W=E.read())!==null;)ae.push(W),ue+=W.length;E.once("readable",re)}function pe(W){E.removeListener("end",H),E.removeListener("readable",re),oe(W)}function H(){var W,ne=null;ue>=_?ne=new RangeError(k):W=e.concat(ae,ue),ae=[],E.close(),oe(ne,W)}}function T(E,B){if(typeof B=="string"&&(B=e.from(B)),!e.isBuffer(B))throw new TypeError("Not a string or buffer");var oe=E._finishFlushFlag;return E._processChunk(B,oe)}function o(E){if(!(this instanceof o))return new o(E);R.call(this,E,r.DEFLATE)}function u(E){if(!(this instanceof u))return new u(E);R.call(this,E,r.INFLATE)}function x(E){if(!(this instanceof x))return new x(E);R.call(this,E,r.GZIP)}function b(E){if(!(this instanceof b))return new b(E);R.call(this,E,r.GUNZIP)}function l(E){if(!(this instanceof l))return new l(E);R.call(this,E,r.DEFLATERAW)}function v(E){if(!(this instanceof v))return new v(E);R.call(this,E,r.INFLATERAW)}function c(E){if(!(this instanceof c))return new c(E);R.call(this,E,r.UNZIP)}function P(E){return E===r.Z_NO_FLUSH||E===r.Z_PARTIAL_FLUSH||E===r.Z_SYNC_FLUSH||E===r.Z_FULL_FLUSH||E===r.Z_FINISH||E===r.Z_BLOCK}function R(E,B){var oe=this;if(this._opts=E=E||{},this._chunkSize=E.chunkSize||t.Z_DEFAULT_CHUNK,n.call(this,E),E.flush&&!P(E.flush))throw new Error("Invalid flush flag: "+E.flush);if(E.finishFlush&&!P(E.finishFlush))throw new Error("Invalid flush flag: "+E.finishFlush);if(this._flushFlag=E.flush||r.Z_NO_FLUSH,this._finishFlushFlag=typeof E.finishFlush<"u"?E.finishFlush:r.Z_FINISH,E.chunkSize&&(E.chunkSize<t.Z_MIN_CHUNK||E.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+E.chunkSize);if(E.windowBits&&(E.windowBits<t.Z_MIN_WINDOWBITS||E.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+E.windowBits);if(E.level&&(E.level<t.Z_MIN_LEVEL||E.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+E.level);if(E.memLevel&&(E.memLevel<t.Z_MIN_MEMLEVEL||E.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+E.memLevel);if(E.strategy&&E.strategy!=t.Z_FILTERED&&E.strategy!=t.Z_HUFFMAN_ONLY&&E.strategy!=t.Z_RLE&&E.strategy!=t.Z_FIXED&&E.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+E.strategy);if(E.dictionary&&!e.isBuffer(E.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new r.Zlib(B);var ae=this;this._hadError=!1,this._handle.onerror=function(pe,H){X(ae),ae._hadError=!0;var W=new Error(pe);W.errno=H,W.code=t.codes[H],ae.emit("error",W)};var ue=t.Z_DEFAULT_COMPRESSION;typeof E.level=="number"&&(ue=E.level);var re=t.Z_DEFAULT_STRATEGY;typeof E.strategy=="number"&&(re=E.strategy),this._handle.init(E.windowBits||t.Z_DEFAULT_WINDOWBITS,ue,E.memLevel||t.Z_DEFAULT_MEMLEVEL,re,E.dictionary),this._buffer=e.allocUnsafe(this._chunkSize),this._offset=0,this._level=ue,this._strategy=re,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!oe._handle},configurable:!0,enumerable:!0})}h.inherits(R,n),R.prototype.params=function(E,B,oe){if(E<t.Z_MIN_LEVEL||E>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+E);if(B!=t.Z_FILTERED&&B!=t.Z_HUFFMAN_ONLY&&B!=t.Z_RLE&&B!=t.Z_FIXED&&B!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+B);if(this._level!==E||this._strategy!==B){var ae=this;this.flush(r.Z_SYNC_FLUSH,function(){y(ae._handle,"zlib binding closed"),ae._handle.params(E,B),ae._hadError||(ae._level=E,ae._strategy=B,oe&&oe())})}else process$1.nextTick(oe)},R.prototype.reset=function(){return y(this._handle,"zlib binding closed"),this._handle.reset()},R.prototype._flush=function(E){this._transform(e.alloc(0),"",E)},R.prototype.flush=function(E,B){var oe=this,ae=this._writableState;(typeof E=="function"||E===void 0&&!B)&&(B=E,E=r.Z_FULL_FLUSH),ae.ended?B&&process$1.nextTick(B):ae.ending?B&&this.once("end",B):ae.needDrain?B&&this.once("drain",function(){return oe.flush(E,B)}):(this._flushFlag=E,this.write(e.alloc(0),"",B))},R.prototype.close=function(E){X(this,E),process$1.nextTick(D,this)};function X(E,B){B&&process$1.nextTick(B),E._handle&&(E._handle.close(),E._handle=null)}function D(E){E.emit("close")}R.prototype._transform=function(E,B,oe){var ae,ue=this._writableState,re=ue.ending||ue.ended,pe=re&&(!E||ue.length===E.length);if(E!==null&&!e.isBuffer(E))return oe(new Error("invalid input"));if(!this._handle)return oe(new Error("zlib binding closed"));pe?ae=this._finishFlushFlag:(ae=this._flushFlag,E.length>=ue.length&&(this._flushFlag=this._opts.flush||r.Z_NO_FLUSH)),this._processChunk(E,ae,oe)},R.prototype._processChunk=function(E,B,oe){var ae=E&&E.length,ue=this._chunkSize-this._offset,re=0,pe=this,H=typeof oe=="function";if(!H){var W=[],ne=0,j;this.on("error",function(C){j=C}),y(this._handle,"zlib binding closed");do var s=this._handle.writeSync(B,E,re,ae,this._buffer,this._offset,ue);while(!this._hadError&&f(s[0],s[1]));if(this._hadError)throw j;if(ne>=_)throw X(this),new RangeError(k);var i=e.concat(W,ne);return X(this),i}y(this._handle,"zlib binding closed");var p=this._handle.write(B,E,re,ae,this._buffer,this._offset,ue);p.buffer=E,p.callback=f;function f(C,I){if(this&&(this.buffer=null,this.callback=null),!pe._hadError){var z=ue-I;if(y(z>=0,"have should not go down"),z>0){var Q=pe._buffer.slice(pe._offset,pe._offset+z);pe._offset+=z,H?pe.push(Q):(W.push(Q),ne+=Q.length)}if((I===0||pe._offset>=pe._chunkSize)&&(ue=pe._chunkSize,pe._offset=0,pe._buffer=e.allocUnsafe(pe._chunkSize)),I===0){if(re+=ae-C,ae=C,!H)return!0;var L=pe._handle.write(B,E,re,ae,pe._buffer,pe._offset,pe._chunkSize);L.callback=f,L.buffer=E;return}if(!H)return!1;oe()}}},h.inherits(o,R),h.inherits(u,R),h.inherits(x,R),h.inherits(b,R),h.inherits(l,R),h.inherits(v,R),h.inherits(c,R)}(lib)),lib}(function(module,exports$1){(function(e,n){module.exports=e.pdfjsLib=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var Le;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=H,e.bytesToString=L,e.createValidAbsoluteUrl=ne,e.getModificationDate=Te,e.getUuid=be,e.getVerbosityLevel=ae,e.info=ue,e.isArrayBuffer=J,e.isArrayEqual=Se,e.isNodeJS=void 0,e.normalizeUnicode=V,e.objectFromMap=Ae,e.objectSize=ge,e.setVerbosityLevel=oe,e.shadow=j,e.string32=se,e.stringToBytes=N,e.stringToPDFString=Ce,e.stringToUTF8String=ke,e.unreachable=pe,e.utf8StringToString=te,e.warn=re;const n=typeof process$1=="object"&&process$1+""=="[object process]"&&!process$1.versions.nw&&!(process$1.versions.electron&&process$1.type&&process$1.type!=="browser");e.isNodeJS=n;const r=[1,0,0,1,0,0];e.IDENTITY_MATRIX=r;const h=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=h;const y=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=y;const _=1.35;e.LINE_FACTOR=_;const k=.35;e.LINE_DESCENT_FACTOR=k;const g=k/_;e.BASELINE_FACTOR=g;const m={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=m;const a={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=a;const S="pdfjs_internal_editor_";e.AnnotationEditorPrefix=S;const A={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=A;const M={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=M;const F={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=F;const q={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=q;const T={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=T;const o={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=o;const u={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=u;const x={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=x;const b={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=b;const l={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=l;const v={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=v;const c={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=c;const P={O:"PageOpen",C:"PageClose"};e.PageActionEventType=P;const R={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=R;const X={NONE:0,BINARY:1};e.CMapCompressionType=X;const D={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=D;const E={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=E;let B=R.WARNINGS;function oe(ee){Number.isInteger(ee)&&(B=ee)}function ae(){return B}function ue(ee){B>=R.INFOS&&console.log(`Info: ${ee}`)}function re(ee){B>=R.WARNINGS&&console.log(`Warning: ${ee}`)}function pe(ee){throw new Error(ee)}function H(ee,ie){ee||pe(ie)}function W(ee){switch(ee==null?void 0:ee.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ne(ee,ie=null,O=null){if(!ee)return null;try{if(O&&typeof ee=="string"){if(O.addDefaultProtocol&&ee.startsWith("www.")){const qe=ee.match(/\./g);(qe==null?void 0:qe.length)>=2&&(ee=`http://${ee}`)}if(O.tryConvertEncoding)try{ee=ke(ee)}catch{}}const we=ie?new URL(ee,ie):new URL(ee);if(W(we))return we}catch{}return null}function j(ee,ie,O,we=!1){return Object.defineProperty(ee,ie,{value:O,enumerable:!we,configurable:!0,writable:!1}),O}const s=function(){function ie(O,we){this.constructor===ie&&pe("Cannot initialize BaseException."),this.message=O,this.name=we}return ie.prototype=new Error,ie.constructor=ie,ie}();e.BaseException=s;class i extends s{constructor(ie,O){super(ie,"PasswordException"),this.code=O}}e.PasswordException=i;class p extends s{constructor(ie,O){super(ie,"UnknownErrorException"),this.details=O}}e.UnknownErrorException=p;class f extends s{constructor(ie){super(ie,"InvalidPDFException")}}e.InvalidPDFException=f;class C extends s{constructor(ie){super(ie,"MissingPDFException")}}e.MissingPDFException=C;class I extends s{constructor(ie,O){super(ie,"UnexpectedResponseException"),this.status=O}}e.UnexpectedResponseException=I;class z extends s{constructor(ie){super(ie,"FormatError")}}e.FormatError=z;class Q extends s{constructor(ie){super(ie,"AbortException")}}e.AbortException=Q;function L(ee){(typeof ee!="object"||(ee==null?void 0:ee.length)===void 0)&&pe("Invalid argument for bytesToString");const ie=ee.length,O=8192;if(ie<O)return String.fromCharCode.apply(null,ee);const we=[];for(let qe=0;qe<ie;qe+=O){const d=Math.min(qe+O,ie),G=ee.subarray(qe,d);we.push(String.fromCharCode.apply(null,G))}return we.join("")}function N(ee){typeof ee!="string"&&pe("Invalid argument for stringToBytes");const ie=ee.length,O=new Uint8Array(ie);for(let we=0;we<ie;++we)O[we]=ee.charCodeAt(we)&255;return O}function se(ee){return String.fromCharCode(ee>>24&255,ee>>16&255,ee>>8&255,ee&255)}function ge(ee){return Object.keys(ee).length}function Ae(ee){const ie=Object.create(null);for(const[O,we]of ee)ie[O]=we;return ie}function he(){const ee=new Uint8Array(4);return ee[0]=1,new Uint32Array(ee.buffer,0,1)[0]===1}function de(){try{return new Function(""),!0}catch{return!1}}class K{static get isLittleEndian(){return j(this,"isLittleEndian",he())}static get isEvalSupported(){return j(this,"isEvalSupported",de())}static get isOffscreenCanvasSupported(){return j(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?j(this,"platform",{isWin:!1,isMac:!1}):j(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var ie,O;return j(this,"isCSSRoundSupported",(O=(ie=globalThis.CSS)==null?void 0:ie.supports)==null?void 0:O.call(ie,"width: round(1.5px, 1px)"))}}e.FeatureTest=K;const $=[...Array(256).keys()].map(ee=>ee.toString(16).padStart(2,"0"));class me{static makeHexColor(ie,O,we){return`#${$[ie]}${$[O]}${$[we]}`}static scaleMinMax(ie,O){let we;ie[0]?(ie[0]<0&&(we=O[0],O[0]=O[1],O[1]=we),O[0]*=ie[0],O[1]*=ie[0],ie[3]<0&&(we=O[2],O[2]=O[3],O[3]=we),O[2]*=ie[3],O[3]*=ie[3]):(we=O[0],O[0]=O[2],O[2]=we,we=O[1],O[1]=O[3],O[3]=we,ie[1]<0&&(we=O[2],O[2]=O[3],O[3]=we),O[2]*=ie[1],O[3]*=ie[1],ie[2]<0&&(we=O[0],O[0]=O[1],O[1]=we),O[0]*=ie[2],O[1]*=ie[2]),O[0]+=ie[4],O[1]+=ie[4],O[2]+=ie[5],O[3]+=ie[5]}static transform(ie,O){return[ie[0]*O[0]+ie[2]*O[1],ie[1]*O[0]+ie[3]*O[1],ie[0]*O[2]+ie[2]*O[3],ie[1]*O[2]+ie[3]*O[3],ie[0]*O[4]+ie[2]*O[5]+ie[4],ie[1]*O[4]+ie[3]*O[5]+ie[5]]}static applyTransform(ie,O){const we=ie[0]*O[0]+ie[1]*O[2]+O[4],qe=ie[0]*O[1]+ie[1]*O[3]+O[5];return[we,qe]}static applyInverseTransform(ie,O){const we=O[0]*O[3]-O[1]*O[2],qe=(ie[0]*O[3]-ie[1]*O[2]+O[2]*O[5]-O[4]*O[3])/we,d=(-ie[0]*O[1]+ie[1]*O[0]+O[4]*O[1]-O[5]*O[0])/we;return[qe,d]}static getAxialAlignedBoundingBox(ie,O){const we=this.applyTransform(ie,O),qe=this.applyTransform(ie.slice(2,4),O),d=this.applyTransform([ie[0],ie[3]],O),G=this.applyTransform([ie[2],ie[1]],O);return[Math.min(we[0],qe[0],d[0],G[0]),Math.min(we[1],qe[1],d[1],G[1]),Math.max(we[0],qe[0],d[0],G[0]),Math.max(we[1],qe[1],d[1],G[1])]}static inverseTransform(ie){const O=ie[0]*ie[3]-ie[1]*ie[2];return[ie[3]/O,-ie[1]/O,-ie[2]/O,ie[0]/O,(ie[2]*ie[5]-ie[4]*ie[3])/O,(ie[4]*ie[1]-ie[5]*ie[0])/O]}static singularValueDecompose2dScale(ie){const O=[ie[0],ie[2],ie[1],ie[3]],we=ie[0]*O[0]+ie[1]*O[2],qe=ie[0]*O[1]+ie[1]*O[3],d=ie[2]*O[0]+ie[3]*O[2],G=ie[2]*O[1]+ie[3]*O[3],ce=(we+G)/2,U=Math.sqrt((we+G)**2-4*(we*G-d*qe))/2,le=ce+U||1,ye=ce-U||1;return[Math.sqrt(le),Math.sqrt(ye)]}static normalizeRect(ie){const O=ie.slice(0);return ie[0]>ie[2]&&(O[0]=ie[2],O[2]=ie[0]),ie[1]>ie[3]&&(O[1]=ie[3],O[3]=ie[1]),O}static intersect(ie,O){const we=Math.max(Math.min(ie[0],ie[2]),Math.min(O[0],O[2])),qe=Math.min(Math.max(ie[0],ie[2]),Math.max(O[0],O[2]));if(we>qe)return null;const d=Math.max(Math.min(ie[1],ie[3]),Math.min(O[1],O[3])),G=Math.min(Math.max(ie[1],ie[3]),Math.max(O[1],O[3]));return d>G?null:[we,d,qe,G]}static bezierBoundingBox(ie,O,we,qe,d,G,ce,U){const le=[],ye=[[],[]];let Me,Z,Y,fe,xe,Pe,Oe,Ie;for(let Ve=0;Ve<2;++Ve){if(Ve===0?(Z=6*ie-12*we+6*d,Me=-3*ie+9*we-9*d+3*ce,Y=3*we-3*ie):(Z=6*O-12*qe+6*G,Me=-3*O+9*qe-9*G+3*U,Y=3*qe-3*O),Math.abs(Me)<1e-12){if(Math.abs(Z)<1e-12)continue;fe=-Y/Z,0<fe&&fe<1&&le.push(fe);continue}Oe=Z*Z-4*Y*Me,Ie=Math.sqrt(Oe),!(Oe<0)&&(xe=(-Z+Ie)/(2*Me),0<xe&&xe<1&&le.push(xe),Pe=(-Z-Ie)/(2*Me),0<Pe&&Pe<1&&le.push(Pe))}let He=le.length,We;const Be=He;for(;He--;)fe=le[He],We=1-fe,ye[0][He]=We*We*We*ie+3*We*We*fe*we+3*We*fe*fe*d+fe*fe*fe*ce,ye[1][He]=We*We*We*O+3*We*We*fe*qe+3*We*fe*fe*G+fe*fe*fe*U;return ye[0][Be]=ie,ye[1][Be]=O,ye[0][Be+1]=ce,ye[1][Be+1]=U,ye[0].length=ye[1].length=Be+2,[Math.min(...ye[0]),Math.min(...ye[1]),Math.max(...ye[0]),Math.max(...ye[1])]}}e.Util=me;const _e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ce(ee){if(ee[0]>=""){let O;if(ee[0]===""&&ee[1]===""?O="utf-16be":ee[0]===""&&ee[1]===""?O="utf-16le":ee[0]===""&&ee[1]===""&&ee[2]===""&&(O="utf-8"),O)try{const we=new TextDecoder(O,{fatal:!0}),qe=N(ee);return we.decode(qe)}catch(we){re(`stringToPDFString: "${we}".`)}}const ie=[];for(let O=0,we=ee.length;O<we;O++){const qe=_e[ee.charCodeAt(O)];ie.push(qe?String.fromCharCode(qe):ee.charAt(O))}return ie.join("")}function ke(ee){return decodeURIComponent(escape(ee))}function te(ee){return unescape(encodeURIComponent(ee))}function J(ee){return typeof ee=="object"&&(ee==null?void 0:ee.byteLength)!==void 0}function Se(ee,ie){if(ee.length!==ie.length)return!1;for(let O=0,we=ee.length;O<we;O++)if(ee[O]!==ie[O])return!1;return!0}function Te(ee=new Date){return[ee.getUTCFullYear().toString(),(ee.getUTCMonth()+1).toString().padStart(2,"0"),ee.getUTCDate().toString().padStart(2,"0"),ee.getUTCHours().toString().padStart(2,"0"),ee.getUTCMinutes().toString().padStart(2,"0"),ee.getUTCSeconds().toString().padStart(2,"0")].join("")}class De{constructor(){Ee(this,Le,!1);this.promise=new Promise((ie,O)=>{this.resolve=we=>{Re(this,Le,!0),ie(we)},this.reject=we=>{Re(this,Le,!0),O(we)}})}get settled(){return w(this,Le)}}Le=new WeakMap,e.PromiseCapability=De;let Ne=null,Ue=null;function V(ee){return Ne||(Ne=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ue=new Map([["","t"]])),ee.replaceAll(Ne,(ie,O,we)=>O?O.normalize("NFKC"):Ue.get(we))}function be(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ee=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ee);else for(let ie=0;ie<32;ie++)ee[ie]=Math.floor(Math.random()*255);return L(ee)}const Fe="pdfjs_internal_id_";e.AnnotationPrefix=Fe},(__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{var t,n,r,h,at,_t,k,g,m,a,S,A,M,F,q,vt,o,u,Mt,b,l;Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(c){if(typeof c=="string"||c instanceof URL?c={url:c}:(0,_util.isArrayBuffer)(c)&&(c={data:c}),typeof c!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!c.url&&!c.data&&!c.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const P=new PDFDocumentLoadingTask,{docId:R}=P,X=c.url?getUrlProp(c.url):null,D=c.data?getDataProp(c.data):null,E=c.httpHeaders||null,B=c.withCredentials===!0,oe=c.password??null,ae=c.range instanceof PDFDataRangeTransport?c.range:null,ue=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let re=c.worker instanceof PDFWorker?c.worker:null;const pe=c.verbosity,H=typeof c.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(c.docBaseUrl)?c.docBaseUrl:null,W=typeof c.cMapUrl=="string"?c.cMapUrl:null,ne=c.cMapPacked!==!1,j=c.CMapReaderFactory||DefaultCMapReaderFactory,s=typeof c.standardFontDataUrl=="string"?c.standardFontDataUrl:null,i=c.StandardFontDataFactory||DefaultStandardFontDataFactory,p=c.stopAtErrors!==!0,f=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,C=c.isEvalSupported!==!1,I=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!_util.isNodeJS,z=Number.isInteger(c.canvasMaxAreaInBytes)?c.canvasMaxAreaInBytes:-1,Q=typeof c.disableFontFace=="boolean"?c.disableFontFace:_util.isNodeJS,L=c.fontExtraProperties===!0,N=c.enableXfa===!0,se=c.ownerDocument||globalThis.document,ge=c.disableRange===!0,Ae=c.disableStream===!0,he=c.disableAutoFetch===!0,de=c.pdfBug===!0,K=ae?ae.length:c.length??NaN,$=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!_util.isNodeJS&&!Q,me=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:j===_display_utils.DOMCMapReaderFactory&&i===_display_utils.DOMStandardFontDataFactory&&W&&s&&(0,_display_utils.isValidFetchUrl)(W,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(s,document.baseURI),_e=c.canvasFactory||new DefaultCanvasFactory({ownerDocument:se}),Ce=c.filterFactory||new DefaultFilterFactory({docId:R,ownerDocument:se}),ke=null;(0,_util.setVerbosityLevel)(pe);const te={canvasFactory:_e,filterFactory:Ce};if(me||(te.cMapReaderFactory=new j({baseUrl:W,isCompressed:ne}),te.standardFontDataFactory=new i({baseUrl:s})),!re){const Te={verbosity:pe,port:_worker_options.GlobalWorkerOptions.workerPort};re=Te.port?PDFWorker.fromPort(Te):new PDFWorker(Te),P._worker=re}const J={docId:R,apiVersion:"3.11.174",data:D,password:oe,disableAutoFetch:he,rangeChunkSize:ue,length:K,docBaseUrl:H,enableXfa:N,evaluatorOptions:{maxImageSize:f,disableFontFace:Q,ignoreErrors:p,isEvalSupported:C,isOffscreenCanvasSupported:I,canvasMaxAreaInBytes:z,fontExtraProperties:L,useSystemFonts:$,cMapUrl:me?W:null,standardFontDataUrl:me?s:null}},Se={ignoreErrors:p,isEvalSupported:C,disableFontFace:Q,fontExtraProperties:L,enableXfa:N,ownerDocument:se,disableAutoFetch:he,pdfBug:de,styleElement:ke};return re.promise.then(function(){if(P.destroyed)throw new Error("Loading aborted");const Te=_fetchDocument(re,J),De=new Promise(function(Ne){let Ue;ae?Ue=new _transport_stream.PDFDataTransportStream({length:K,initialData:ae.initialData,progressiveDone:ae.progressiveDone,contentDispositionFilename:ae.contentDispositionFilename,disableRange:ge,disableStream:Ae},ae):D||(Ue=(be=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(be):(0,_display_utils.isValidFetchUrl)(be.url)?new _displayFetch_stream.PDFFetchStream(be):new _displayNetwork.PDFNetworkStream(be))({url:X,length:K,httpHeaders:E,withCredentials:B,rangeChunkSize:ue,disableRange:ge,disableStream:Ae})),Ne(Ue)});return Promise.all([Te,De]).then(function([Ne,Ue]){if(P.destroyed)throw new Error("Loading aborted");const V=new _message_handler.MessageHandler(R,Ne,re.port),be=new WorkerTransport(V,P,Ue,Se,te);P._transport=be,V.send("Ready",null)})}).catch(P._capability.reject),P}async function _fetchDocument(c,P){if(c.destroyed)throw new Error("Worker was destroyed");const R=await c.messageHandler.sendWithPromise("GetDocRequest",P,P.data?[P.data.buffer]:null);if(c.destroyed)throw new Error("Worker was destroyed");return R}function getUrlProp(c){if(c instanceof URL)return c.href;try{return new URL(c,window.location).href}catch{if(_util.isNodeJS&&typeof c=="string")return c}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(c){if(_util.isNodeJS&&typeof Buffer<"u"&&c instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return(0,_util.stringToBytes)(c);if(typeof c=="object"&&!isNaN(c==null?void 0:c.length)||(0,_util.isArrayBuffer)(c))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ut(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var P,R,X;this.destroyed=!0;try{(P=this._worker)!=null&&P.port&&(this._worker._pendingDestroy=!0),await((R=this._transport)==null?void 0:R.destroy())}catch(D){throw(X=this._worker)!=null&&X.port&&delete this._worker._pendingDestroy,D}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,Ee(e,t,0);let PDFDocumentLoadingTask=e;exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(P,R,X=!1,D=null){this.length=P,this.initialData=R,this.progressiveDone=X,this.contentDispositionFilename=D,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(P){this._rangeListeners.push(P)}addProgressListener(P){this._progressListeners.push(P)}addProgressiveReadListener(P){this._progressiveReadListeners.push(P)}addProgressiveDoneListener(P){this._progressiveDoneListeners.push(P)}onDataRange(P,R){for(const X of this._rangeListeners)X(P,R)}onDataProgress(P,R){this._readyCapability.promise.then(()=>{for(const X of this._progressListeners)X(P,R)})}onDataProgressiveRead(P){this._readyCapability.promise.then(()=>{for(const R of this._progressiveReadListeners)R(P)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const P of this._progressiveDoneListeners)P()})}transportReady(){this._readyCapability.resolve()}requestDataRange(P,R){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(P,R){this._pdfInfo=P,this._transport=R,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(X=>{if(!X)return X;const D=[];for(const E in X)D.push(...X[E]);return D}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(P){return this._transport.getPage(P)}getPageIndex(P){return this._transport.getPageIndex(P)}getDestinations(){return this._transport.getDestinations()}getDestination(P){return this._transport.getDestination(P)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(P=!1){return this._transport.startCleanup(P||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(P,R,X,D=!1){Ee(this,h);Ee(this,n,null);Ee(this,r,!1);this._pageIndex=P,this._pageInfo=R,this._transport=X,this._stats=D?new _display_utils.StatTimer:null,this._pdfBug=D,this.commonObjs=X.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:P,rotation:R=this.rotate,offsetX:X=0,offsetY:D=0,dontFlip:E=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:P,rotation:R,offsetX:X,offsetY:D,dontFlip:E})}getAnnotations({intent:P="display"}={}){const R=this._transport.getRenderingIntent(P);return this._transport.getAnnotations(this._pageIndex,R.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var P;return((P=this._transport._htmlForXfa)==null?void 0:P.children[this._pageIndex])||null}render({canvasContext:P,viewport:R,intent:X="display",annotationMode:D=_util.AnnotationMode.ENABLE,transform:E=null,background:B=null,optionalContentConfigPromise:oe=null,annotationCanvasMap:ae=null,pageColors:ue=null,printAnnotationStorage:re=null}){var i,p;(i=this._stats)==null||i.time("Overall");const pe=this._transport.getRenderingIntent(X,D,re);Re(this,r,!1),ve(this,h,_t).call(this),oe||(oe=this._transport.getOptionalContentConfig());let H=this._intentStates.get(pe.cacheKey);H||(H=Object.create(null),this._intentStates.set(pe.cacheKey,H)),H.streamReaderCancelTimeout&&(clearTimeout(H.streamReaderCancelTimeout),H.streamReaderCancelTimeout=null);const W=!!(pe.renderingIntent&_util.RenderingIntentFlag.PRINT);H.displayReadyCapability||(H.displayReadyCapability=new _util.PromiseCapability,H.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(pe));const ne=f=>{var C,I;H.renderTasks.delete(j),(this._maybeCleanupAfterRender||W)&&Re(this,r,!0),ve(this,h,at).call(this,!W),f?(j.capability.reject(f),this._abortOperatorList({intentState:H,reason:f instanceof Error?f:new Error(f)})):j.capability.resolve(),(C=this._stats)==null||C.timeEnd("Rendering"),(I=this._stats)==null||I.timeEnd("Overall")},j=new InternalRenderTask({callback:ne,params:{canvasContext:P,viewport:R,transform:E,background:B},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ae,operatorList:H.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!W,pdfBug:this._pdfBug,pageColors:ue});(H.renderTasks||(H.renderTasks=new Set)).add(j);const s=j.task;return Promise.all([H.displayReadyCapability.promise,oe]).then(([f,C])=>{var I;if(this.destroyed){ne();return}(I=this._stats)==null||I.time("Rendering"),j.initializeGraphics({transparency:f,optionalContentConfig:C}),j.operatorListChanged()}).catch(ne),s}getOperatorList({intent:P="display",annotationMode:R=_util.AnnotationMode.ENABLE,printAnnotationStorage:X=null}={}){var ae;function D(){B.operatorList.lastChunk&&(B.opListReadCapability.resolve(B.operatorList),B.renderTasks.delete(oe))}const E=this._transport.getRenderingIntent(P,R,X,!0);let B=this._intentStates.get(E.cacheKey);B||(B=Object.create(null),this._intentStates.set(E.cacheKey,B));let oe;return B.opListReadCapability||(oe=Object.create(null),oe.operatorListChanged=D,B.opListReadCapability=new _util.PromiseCapability,(B.renderTasks||(B.renderTasks=new Set)).add(oe),B.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ae=this._stats)==null||ae.time("Page Request"),this._pumpOperatorList(E)),B.opListReadCapability.promise}streamTextContent({includeMarkedContent:P=!1,disableNormalization:R=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:P===!0,disableNormalization:R===!0},{highWaterMark:100,size(D){return D.items.length}})}getTextContent(P={}){if(this._transport._htmlForXfa)return this.getXfa().then(X=>_xfa_text.XfaText.textContent(X));const R=this.streamTextContent(P);return new Promise(function(X,D){function E(){B.read().then(function({value:ae,done:ue}){if(ue){X(oe);return}Object.assign(oe.styles,ae.styles),oe.items.push(...ae.items),E()},D)}const B=R.getReader(),oe={items:[],styles:Object.create(null)};E()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const P=[];for(const R of this._intentStates.values())if(this._abortOperatorList({intentState:R,reason:new Error("Page was destroyed."),force:!0}),!R.opListReadCapability)for(const X of R.renderTasks)P.push(X.completed),X.cancel();return this.objs.clear(),Re(this,r,!1),ve(this,h,_t).call(this),Promise.all(P)}cleanup(P=!1){Re(this,r,!0);const R=ve(this,h,at).call(this,!1);return P&&R&&this._stats&&(this._stats=new _display_utils.StatTimer),R}_startRenderPage(P,R){var D,E;const X=this._intentStates.get(R);X&&((D=this._stats)==null||D.timeEnd("Page Request"),(E=X.displayReadyCapability)==null||E.resolve(P))}_renderPageChunk(P,R){for(let X=0,D=P.length;X<D;X++)R.operatorList.fnArray.push(P.fnArray[X]),R.operatorList.argsArray.push(P.argsArray[X]);R.operatorList.lastChunk=P.lastChunk,R.operatorList.separateAnnots=P.separateAnnots;for(const X of R.renderTasks)X.operatorListChanged();P.lastChunk&&ve(this,h,at).call(this,!0)}_pumpOperatorList({renderingIntent:P,cacheKey:R,annotationStorageSerializable:X}){const{map:D,transfers:E}=X,oe=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:P,cacheKey:R,annotationStorage:D},E).getReader(),ae=this._intentStates.get(R);ae.streamReader=oe;const ue=()=>{oe.read().then(({value:re,done:pe})=>{if(pe){ae.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(re,ae),ue())},re=>{if(ae.streamReader=null,!this._transport.destroyed){if(ae.operatorList){ae.operatorList.lastChunk=!0;for(const pe of ae.renderTasks)pe.operatorListChanged();ve(this,h,at).call(this,!0)}if(ae.displayReadyCapability)ae.displayReadyCapability.reject(re);else if(ae.opListReadCapability)ae.opListReadCapability.reject(re);else throw re}})};ue()}_abortOperatorList({intentState:P,reason:R,force:X=!1}){if(P.streamReader){if(P.streamReaderCancelTimeout&&(clearTimeout(P.streamReaderCancelTimeout),P.streamReaderCancelTimeout=null),!X){if(P.renderTasks.size>0)return;if(R instanceof _display_utils.RenderingCancelledException){let D=RENDERING_CANCELLED_TIMEOUT;R.extraDelay>0&&R.extraDelay<1e3&&(D+=R.extraDelay),P.streamReaderCancelTimeout=setTimeout(()=>{P.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:P,reason:R,force:!0})},D);return}}if(P.streamReader.cancel(new _util.AbortException(R.message)).catch(()=>{}),P.streamReader=null,!this._transport.destroyed){for(const[D,E]of this._intentStates)if(E===P){this._intentStates.delete(D);break}this.cleanup()}}}get stats(){return this._stats}}n=new WeakMap,r=new WeakMap,h=new WeakSet,at=function(P=!1){if(ve(this,h,_t).call(this),!w(this,r)||this.destroyed)return!1;if(P)return Re(this,n,setTimeout(()=>{Re(this,n,null),ve(this,h,at).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:R,operatorList:X}of this._intentStates.values())if(R.size>0||!X.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Re(this,r,!1),!0},_t=function(){w(this,n)&&(clearTimeout(w(this,n)),Re(this,n,null))},exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Ee(this,k,new Set);Ee(this,g,Promise.resolve())}postMessage(P,R){const X={data:structuredClone(P,R?{transfer:R}:null)};w(this,g).then(()=>{for(const D of w(this,k))D.call(this,X)})}addEventListener(P,R){w(this,k).add(R)}removeEventListener(P,R){w(this,k).delete(R)}terminate(){w(this,k).clear()}}k=new WeakMap,g=new WeakMap,exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const c=(m=document==null?void 0:document.currentScript)==null?void 0:m.src;c&&(PDFWorkerUtil.fallbackWorkerSrc=c.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(c,P){let R;try{if(R=new URL(c),!R.origin||R.origin==="null")return!1}catch{return!1}const X=new URL(P,R);return R.origin===X.origin},PDFWorkerUtil.createCDNWrapper=function(c){const P=`importScripts("${c}");`;return URL.createObjectURL(new Blob([P]))}}const _PDFWorker=class _PDFWorker{constructor({name:c=null,port:P=null,verbosity:R=(0,_util.getVerbosityLevel)()}={}){var X;if(this.name=c,this.destroyed=!1,this.verbosity=R,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,P){if((X=w(_PDFWorker,a))!=null&&X.has(P))throw new Error("Cannot use more than one PDFWorker per port.");(w(_PDFWorker,a)||Re(_PDFWorker,a,new WeakMap)).set(P,this),this._initializeFromPort(P);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(c){this._port=c,this._messageHandler=new _message_handler.MessageHandler("main","worker",c),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:c}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,c)||(c=PDFWorkerUtil.createCDNWrapper(new URL(c,window.location).href));const P=new Worker(c),R=new _message_handler.MessageHandler("main","worker",P),X=()=>{P.removeEventListener("error",D),R.destroy(),P.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},D=()=>{this._webWorker||X()};P.addEventListener("error",D),R.on("test",B=>{if(P.removeEventListener("error",D),this.destroyed){X();return}B?(this._messageHandler=R,this._port=P,this._webWorker=P,this._readyCapability.resolve(),R.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),R.destroy(),P.terminate())}),R.on("ready",B=>{if(P.removeEventListener("error",D),this.destroyed){X();return}try{E()}catch{this._setupFakeWorker()}});const E=()=>{const B=new Uint8Array;R.send("test",B,[B.buffer])};E();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(c=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const P=new LoopbackPort;this._port=P;const R=`fake${PDFWorkerUtil.fakeWorkerId++}`,X=new _message_handler.MessageHandler(R+"_worker",R,P);c.setup(X,P);const D=new _message_handler.MessageHandler(R,R+"_worker",P);this._messageHandler=D,this._readyCapability.resolve(),D.send("configure",{verbosity:this.verbosity})}).catch(c=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${c.message}".`))})}destroy(){var c;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(c=w(_PDFWorker,a))==null||c.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(c){var R;if(!(c!=null&&c.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const P=(R=w(this,a))==null?void 0:R.get(c.port);if(P){if(P._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return P}return new _PDFWorker(c)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var c;try{return((c=globalThis.pdfjsWorker)==null?void 0:c.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};a=new WeakMap,Ee(_PDFWorker,a);let PDFWorker=_PDFWorker;exports$1.PDFWorker=PDFWorker;class WorkerTransport{constructor(P,R,X,D,E){Ee(this,q);Ee(this,S,new Map);Ee(this,A,new Map);Ee(this,M,new Map);Ee(this,F,null);this.messageHandler=P,this.loadingTask=R,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:D.ownerDocument,styleElement:D.styleElement}),this._params=D,this.canvasFactory=E.canvasFactory,this.filterFactory=E.filterFactory,this.cMapReaderFactory=E.cMapReaderFactory,this.standardFontDataFactory=E.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=X,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(P,R=_util.AnnotationMode.ENABLE,X=null,D=!1){let E=_util.RenderingIntentFlag.DISPLAY,B=_annotation_storage.SerializableEmpty;switch(P){case"any":E=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":E=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${P}`)}switch(R){case _util.AnnotationMode.DISABLE:E+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:E+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:E+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,B=(E&_util.RenderingIntentFlag.PRINT&&X instanceof _annotation_storage.PrintAnnotationStorage?X:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${R}`)}return D&&(E+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:E,cacheKey:`${E}_${B.hash}`,annotationStorageSerializable:B}}destroy(){var X;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(X=w(this,F))==null||X.reject(new Error("Worker was destroyed during onPassword callback"));const P=[];for(const D of w(this,A).values())P.push(D._destroy());w(this,A).clear(),w(this,M).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const R=this.messageHandler.sendWithPromise("Terminate",null);return P.push(R),Promise.all(P).then(()=>{var D;this.commonObjs.clear(),this.fontLoader.clear(),w(this,S).clear(),this.filterFactory.destroy(),(D=this._networkStream)==null||D.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:P,loadingTask:R}=this;P.on("GetReader",(X,D)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=E=>{this._lastProgress={loaded:E.loaded,total:E.total}},D.onPull=()=>{this._fullReader.read().then(function({value:E,done:B}){if(B){D.close();return}(0,_util.assert)(E instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),D.enqueue(new Uint8Array(E),1,[E])}).catch(E=>{D.error(E)})},D.onCancel=E=>{this._fullReader.cancel(E),D.ready.catch(B=>{if(!this.destroyed)throw B})}}),P.on("ReaderHeadersReady",X=>{const D=new _util.PromiseCapability,E=this._fullReader;return E.headersReady.then(()=>{var B;(!E.isStreamingSupported||!E.isRangeSupported)&&(this._lastProgress&&((B=R.onProgress)==null||B.call(R,this._lastProgress)),E.onProgress=oe=>{var ae;(ae=R.onProgress)==null||ae.call(R,{loaded:oe.loaded,total:oe.total})}),D.resolve({isStreamingSupported:E.isStreamingSupported,isRangeSupported:E.isRangeSupported,contentLength:E.contentLength})},D.reject),D.promise}),P.on("GetRangeReader",(X,D)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const E=this._networkStream.getRangeReader(X.begin,X.end);if(!E){D.close();return}D.onPull=()=>{E.read().then(function({value:B,done:oe}){if(oe){D.close();return}(0,_util.assert)(B instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),D.enqueue(new Uint8Array(B),1,[B])}).catch(B=>{D.error(B)})},D.onCancel=B=>{E.cancel(B),D.ready.catch(oe=>{if(!this.destroyed)throw oe})}}),P.on("GetDoc",({pdfInfo:X})=>{this._numPages=X.numPages,this._htmlForXfa=X.htmlForXfa,delete X.htmlForXfa,R._capability.resolve(new PDFDocumentProxy(X,this))}),P.on("DocException",function(X){let D;switch(X.name){case"PasswordException":D=new _util.PasswordException(X.message,X.code);break;case"InvalidPDFException":D=new _util.InvalidPDFException(X.message);break;case"MissingPDFException":D=new _util.MissingPDFException(X.message);break;case"UnexpectedResponseException":D=new _util.UnexpectedResponseException(X.message,X.status);break;case"UnknownErrorException":D=new _util.UnknownErrorException(X.message,X.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}R._capability.reject(D)}),P.on("PasswordRequest",X=>{if(Re(this,F,new _util.PromiseCapability),R.onPassword){const D=E=>{E instanceof Error?w(this,F).reject(E):w(this,F).resolve({password:E})};try{R.onPassword(D,X.code)}catch(E){w(this,F).reject(E)}}else w(this,F).reject(new _util.PasswordException(X.message,X.code));return w(this,F).promise}),P.on("DataLoaded",X=>{var D;(D=R.onProgress)==null||D.call(R,{loaded:X.length,total:X.length}),this.downloadInfoCapability.resolve(X)}),P.on("StartRenderPage",X=>{if(this.destroyed)return;w(this,A).get(X.pageIndex)._startRenderPage(X.transparency,X.cacheKey)}),P.on("commonobj",([X,D,E])=>{var B;if(!this.destroyed&&!this.commonObjs.has(X))switch(D){case"Font":const oe=this._params;if("error"in E){const re=E.error;(0,_util.warn)(`Error during font loading: ${re}`),this.commonObjs.resolve(X,re);break}const ae=oe.pdfBug&&((B=globalThis.FontInspector)!=null&&B.enabled)?(re,pe)=>globalThis.FontInspector.fontAdded(re,pe):null,ue=new _font_loader.FontFaceObject(E,{isEvalSupported:oe.isEvalSupported,disableFontFace:oe.disableFontFace,ignoreErrors:oe.ignoreErrors,inspectFont:ae});this.fontLoader.bind(ue).catch(re=>P.sendWithPromise("FontFallback",{id:X})).finally(()=>{!oe.fontExtraProperties&&ue.data&&(ue.data=null),this.commonObjs.resolve(X,ue)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(X,E);break;default:throw new Error(`Got unknown common object type ${D}`)}}),P.on("obj",([X,D,E,B])=>{var ae;if(this.destroyed)return;const oe=w(this,A).get(D);if(!oe.objs.has(X))switch(E){case"Image":if(oe.objs.resolve(X,B),B){let ue;if(B.bitmap){const{width:re,height:pe}=B;ue=re*pe*4}else ue=((ae=B.data)==null?void 0:ae.length)||0;ue>_util.MAX_IMAGE_SIZE_TO_CACHE&&(oe._maybeCleanupAfterRender=!0)}break;case"Pattern":oe.objs.resolve(X,B);break;default:throw new Error(`Got unknown object type ${E}`)}}),P.on("DocProgress",X=>{var D;this.destroyed||(D=R.onProgress)==null||D.call(R,{loaded:X.loaded,total:X.total})}),P.on("FetchBuiltInCMap",X=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(X):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),P.on("FetchStandardFontData",X=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(X):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var X;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:P,transfers:R}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:P,filename:((X=this._fullReader)==null?void 0:X.filename)??null},R).finally(()=>{this.annotationStorage.resetModified()})}getPage(P){if(!Number.isInteger(P)||P<=0||P>this._numPages)return Promise.reject(new Error("Invalid page request."));const R=P-1,X=w(this,M).get(R);if(X)return X;const D=this.messageHandler.sendWithPromise("GetPage",{pageIndex:R}).then(E=>{if(this.destroyed)throw new Error("Transport destroyed");const B=new PDFPageProxy(R,E,this,this._params.pdfBug);return w(this,A).set(R,B),B});return w(this,M).set(R,D),D}getPageIndex(P){return typeof P!="object"||P===null||!Number.isInteger(P.num)||P.num<0||!Number.isInteger(P.gen)||P.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:P.num,gen:P.gen})}getAnnotations(P,R){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:P,intent:R})}getFieldObjects(){return ve(this,q,vt).call(this,"GetFieldObjects")}hasJSActions(){return ve(this,q,vt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(P){return typeof P!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:P})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return ve(this,q,vt).call(this,"GetDocJSActions")}getPageJSActions(P){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:P})}getStructTree(P){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:P})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(P=>new _optional_content_config.OptionalContentConfig(P))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const P="GetMetadata",R=w(this,S).get(P);if(R)return R;const X=this.messageHandler.sendWithPromise(P,null).then(D=>{var E,B;return{info:D[0],metadata:D[1]?new _metadata.Metadata(D[1]):null,contentDispositionFilename:((E=this._fullReader)==null?void 0:E.filename)??null,contentLength:((B=this._fullReader)==null?void 0:B.contentLength)??null}});return w(this,S).set(P,X),X}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(P=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const R of w(this,A).values())if(!R.cleanup())throw new Error(`startCleanup: Page ${R.pageNumber} is currently rendering.`);this.commonObjs.clear(),P||this.fontLoader.clear(),w(this,S).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:P,enableXfa:R}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:P,enableXfa:R})}}S=new WeakMap,A=new WeakMap,M=new WeakMap,F=new WeakMap,q=new WeakSet,vt=function(P,R=null){const X=w(this,S).get(P);if(X)return X;const D=this.messageHandler.sendWithPromise(P,R);return w(this,S).set(P,D),D};class PDFObjects{constructor(){Ee(this,u);Ee(this,o,Object.create(null))}get(P,R=null){if(R){const D=ve(this,u,Mt).call(this,P);return D.capability.promise.then(()=>R(D.data)),null}const X=w(this,o)[P];if(!(X!=null&&X.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${P}.`);return X.data}has(P){const R=w(this,o)[P];return(R==null?void 0:R.capability.settled)||!1}resolve(P,R=null){const X=ve(this,u,Mt).call(this,P);X.data=R,X.capability.resolve()}clear(){var P;for(const R in w(this,o)){const{data:X}=w(this,o)[R];(P=X==null?void 0:X.bitmap)==null||P.close()}Re(this,o,Object.create(null))}}o=new WeakMap,u=new WeakSet,Mt=function(P){var R;return(R=w(this,o))[P]||(R[P]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(P){Ee(this,b,null);Re(this,b,P),this.onContinue=null}get promise(){return w(this,b).capability.promise}cancel(P=0){w(this,b).cancel(null,P)}get separateAnnots(){const{separateAnnots:P}=w(this,b).operatorList;if(!P)return!1;const{annotationCanvasMap:R}=w(this,b);return P.form||P.canvas&&(R==null?void 0:R.size)>0}}b=new WeakMap,exports$1.RenderTask=RenderTask;const v=class v{constructor({callback:P,params:R,objs:X,commonObjs:D,annotationCanvasMap:E,operatorList:B,pageIndex:oe,canvasFactory:ae,filterFactory:ue,useRequestAnimationFrame:re=!1,pdfBug:pe=!1,pageColors:H=null}){this.callback=P,this.params=R,this.objs=X,this.commonObjs=D,this.annotationCanvasMap=E,this.operatorListIdx=null,this.operatorList=B,this._pageIndex=oe,this.canvasFactory=ae,this.filterFactory=ue,this._pdfBug=pe,this.pageColors=H,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=re===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=R.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:P=!1,optionalContentConfig:R}){var oe,ae;if(this.cancelled)return;if(this._canvas){if(w(v,l).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");w(v,l).add(this._canvas)}this._pdfBug&&((oe=globalThis.StepperManager)!=null&&oe.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:X,viewport:D,transform:E,background:B}=this.params;this.gfx=new _canvas.CanvasGraphics(X,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:R},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:E,viewport:D,transparency:P,background:B}),this.operatorListIdx=0,this.graphicsReady=!0,(ae=this.graphicsReadyCallback)==null||ae.call(this)}cancel(P=null,R=0){var X;this.running=!1,this.cancelled=!0,(X=this.gfx)==null||X.endDrawing(),w(v,l).delete(this._canvas),this.callback(P||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,R))}operatorListChanged(){var P;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(P=this.stepper)==null||P.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),w(v,l).delete(this._canvas),this.callback())))}};l=new WeakMap,Ee(v,l,new WeakSet);let InternalRenderTask=v;const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build},(t,e,n)=>{var m,a,S,gr,M;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var r=n(1),h=n(4),y=n(8);const _=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=_;class k{constructor(){Ee(this,S);Ee(this,m,!1);Ee(this,a,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(q,T){const o=w(this,a).get(q);return o===void 0?T:Object.assign(T,o)}getRawValue(q){return w(this,a).get(q)}remove(q){if(w(this,a).delete(q),w(this,a).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const T of w(this,a).values())if(T instanceof h.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(q,T){const o=w(this,a).get(q);let u=!1;if(o!==void 0)for(const[x,b]of Object.entries(T))o[x]!==b&&(u=!0,o[x]=b);else u=!0,w(this,a).set(q,T);u&&ve(this,S,gr).call(this),T instanceof h.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(T.constructor._type)}has(q){return w(this,a).has(q)}getAll(){return w(this,a).size>0?(0,r.objectFromMap)(w(this,a)):null}setAll(q){for(const[T,o]of Object.entries(q))this.setValue(T,o)}get size(){return w(this,a).size}resetModified(){w(this,m)&&(Re(this,m,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new g(this)}get serializable(){if(w(this,a).size===0)return _;const q=new Map,T=new y.MurmurHash3_64,o=[],u=Object.create(null);let x=!1;for(const[b,l]of w(this,a)){const v=l instanceof h.AnnotationEditor?l.serialize(!1,u):l;v&&(q.set(b,v),T.update(`${b}:${JSON.stringify(v)}`),x||(x=!!v.bitmap))}if(x)for(const b of q.values())b.bitmap&&o.push(b.bitmap);return q.size>0?{map:q,hash:T.hexdigest(),transfers:o}:_}}m=new WeakMap,a=new WeakMap,S=new WeakSet,gr=function(){w(this,m)||(Re(this,m,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=k;class g extends k{constructor(T){super();Ee(this,M);const{map:o,hash:u,transfers:x}=T.serializable,b=structuredClone(o,x?{transfer:x}:null);Re(this,M,{map:b,hash:u,transfers:x})}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return w(this,M)}}M=new WeakMap,e.PrintAnnotationStorage=g},(t,e,n)=>{var g,m,a,S,A,M,F,q,T,o,u,x,b,l,v,It,Dt,R,Lt,Nt,mr,yr,_r,qt,vr;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var r=n(5),h=n(1),y=n(6);const re=class re{constructor(H){Ee(this,v);Ee(this,g,"");Ee(this,m,!1);Ee(this,a,null);Ee(this,S,null);Ee(this,A,null);Ee(this,M,!1);Ee(this,F,null);Ee(this,q,this.focusin.bind(this));Ee(this,T,this.focusout.bind(this));Ee(this,o,!1);Ee(this,u,!1);Ee(this,x,!1);Ye(this,"_initialOptions",Object.create(null));Ye(this,"_uiManager",null);Ye(this,"_focusEventsAllowed",!0);Ye(this,"_l10nPromise",null);Ee(this,b,!1);Ee(this,l,re._zIndex++);this.constructor===re&&(0,h.unreachable)("Cannot initialize AnnotationEditor."),this.parent=H.parent,this.id=H.id,this.width=this.height=null,this.pageIndex=H.parent.pageIndex,this.name=H.name,this.div=null,this._uiManager=H.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=H.isCentered,this._structTreeParentId=null;const{rotation:W,rawDims:{pageWidth:ne,pageHeight:j,pageX:s,pageY:i}}=this.parent.viewport;this.rotation=W,this.pageRotation=(360+W-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ne,j],this.pageTranslation=[s,i];const[p,f]=this.parentDimensions;this.x=H.x/p,this.y=H.y/f,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,h.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(H){const W=new k({id:H.parent.getNextId(),parent:H.parent,uiManager:H._uiManager});W.annotationElementId=H.annotationElementId,W.deleted=!0,W._uiManager.addToAnnotationStorage(W)}static initialize(H,W=null){if(re._l10nPromise||(re._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(j=>[j,H.get(j)]))),W!=null&&W.strings)for(const j of W.strings)re._l10nPromise.set(j,H.get(j));if(re._borderLineWidth!==-1)return;const ne=getComputedStyle(document.documentElement);re._borderLineWidth=parseFloat(ne.getPropertyValue("--outline-width"))||0}static updateDefaultParams(H,W){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(H){return!1}static paste(H,W){(0,h.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return w(this,b)}set _isDraggable(H){var W;Re(this,b,H),(W=this.div)==null||W.classList.toggle("draggable",H)}center(){const[H,W]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*W/(H*2),this.y+=this.width*H/(W*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*W/(H*2),this.y-=this.width*H/(W*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(H){this._uiManager.addCommands(H)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=w(this,l)}setParent(H){H!==null&&(this.pageIndex=H.pageIndex,this.pageDimensions=H.pageDimensions),this.parent=H}focusin(H){this._focusEventsAllowed&&(w(this,o)?Re(this,o,!1):this.parent.setSelected(this))}focusout(H){var ne;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const W=H.relatedTarget;W!=null&&W.closest(`#${this.id}`)||(H.preventDefault(),(ne=this.parent)!=null&&ne.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(H,W,ne,j){const[s,i]=this.parentDimensions;[ne,j]=this.screenToPageTranslation(ne,j),this.x=(H+ne)/s,this.y=(W+j)/i,this.fixAndSetPosition()}translate(H,W){ve(this,v,It).call(this,this.parentDimensions,H,W)}translateInPage(H,W){ve(this,v,It).call(this,this.pageDimensions,H,W),this.div.scrollIntoView({block:"nearest"})}drag(H,W){const[ne,j]=this.parentDimensions;if(this.x+=H/ne,this.y+=W/j,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:C,y:I}=this.div.getBoundingClientRect();this.parent.findNewParent(this,C,I)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:i}=this;const[p,f]=ve(this,v,Dt).call(this);s+=p,i+=f,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*i).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[H,W]=this.pageDimensions;let{x:ne,y:j,width:s,height:i}=this;switch(s*=H,i*=W,ne*=H,j*=W,this.rotation){case 0:ne=Math.max(0,Math.min(H-s,ne)),j=Math.max(0,Math.min(W-i,j));break;case 90:ne=Math.max(0,Math.min(H-i,ne)),j=Math.min(W,Math.max(s,j));break;case 180:ne=Math.min(H,Math.max(s,ne)),j=Math.min(W,Math.max(i,j));break;case 270:ne=Math.min(H,Math.max(i,ne)),j=Math.max(0,Math.min(W-s,j));break}this.x=ne/=H,this.y=j/=W;const[p,f]=ve(this,v,Dt).call(this);ne+=p,j+=f;const{style:C}=this.div;C.left=`${(100*ne).toFixed(2)}%`,C.top=`${(100*j).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(H,W){var ne;return ve(ne=re,R,Lt).call(ne,H,W,this.parentRotation)}pageTranslationToScreen(H,W){var ne;return ve(ne=re,R,Lt).call(ne,H,W,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:H,pageDimensions:[W,ne]}=this,j=W*H,s=ne*H;return h.FeatureTest.isCSSRoundSupported?[Math.round(j),Math.round(s)]:[j,s]}setDims(H,W){var s;const[ne,j]=this.parentDimensions;this.div.style.width=`${(100*H/ne).toFixed(2)}%`,w(this,M)||(this.div.style.height=`${(100*W/j).toFixed(2)}%`),(s=w(this,a))==null||s.classList.toggle("small",H<re.SMALL_EDITOR_SIZE||W<re.SMALL_EDITOR_SIZE)}fixDims(){const{style:H}=this.div,{height:W,width:ne}=H,j=ne.endsWith("%"),s=!w(this,M)&&W.endsWith("%");if(j&&s)return;const[i,p]=this.parentDimensions;j||(H.width=`${(100*parseFloat(ne)/i).toFixed(2)}%`),!w(this,M)&&!s&&(H.height=`${(100*parseFloat(W)/p).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(w(this,a))return;const H=Re(this,a,document.createElement("button"));H.className="altText";const W=await re._l10nPromise.get("editor_alt_text_button_label");H.textContent=W,H.setAttribute("aria-label",W),H.tabIndex="0",H.addEventListener("contextmenu",y.noContextMenu),H.addEventListener("pointerdown",ne=>ne.stopPropagation()),H.addEventListener("click",ne=>{ne.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),H.addEventListener("keydown",ne=>{ne.target===H&&ne.key==="Enter"&&(ne.preventDefault(),this._uiManager.editAltText(this))}),ve(this,v,qt).call(this),this.div.append(H),re.SMALL_EDITOR_SIZE||(re.SMALL_EDITOR_SIZE=Math.min(128,Math.round(H.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:w(this,g),decorative:w(this,m)}}set altTextData({altText:H,decorative:W}){w(this,g)===H&&w(this,m)===W||(Re(this,g,H),Re(this,m,W),ve(this,v,qt).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",w(this,q)),this.div.addEventListener("focusout",w(this,T));const[H,W]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*W/H).toFixed(2)}%`,this.div.style.maxHeight=`${(100*H/W).toFixed(2)}%`);const[ne,j]=this.getInitialTranslation();return this.translate(ne,j),(0,r.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(H){const{isMac:W}=h.FeatureTest.platform;if(H.button!==0||H.ctrlKey&&W){H.preventDefault();return}Re(this,o,!0),ve(this,v,vr).call(this,H)}moveInDOM(){var H;(H=this.parent)==null||H.moveEditorInDOM(this)}_setParentAndPosition(H,W,ne){H.changeParent(this),this.x=W,this.y=ne,this.fixAndSetPosition()}getRect(H,W){const ne=this.parentScale,[j,s]=this.pageDimensions,[i,p]=this.pageTranslation,f=H/ne,C=W/ne,I=this.x*j,z=this.y*s,Q=this.width*j,L=this.height*s;switch(this.rotation){case 0:return[I+f+i,s-z-C-L+p,I+f+Q+i,s-z-C+p];case 90:return[I+C+i,s-z+f+p,I+C+L+i,s-z+f+Q+p];case 180:return[I-f-Q+i,s-z+C+p,I-f+i,s-z+C+L+p];case 270:return[I-C-L+i,s-z-f-Q+p,I-C+i,s-z-f+p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(H,W){const[ne,j,s,i]=H,p=s-ne,f=i-j;switch(this.rotation){case 0:return[ne,W-i,p,f];case 90:return[ne,W-j,f,p];case 180:return[s,W-j,p,f];case 270:return[s,W-i,f,p];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Re(this,x,!0)}disableEditMode(){Re(this,x,!1)}isInEditMode(){return w(this,x)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var H,W;(H=this.div)==null||H.addEventListener("focusin",w(this,q)),(W=this.div)==null||W.addEventListener("focusout",w(this,T))}serialize(H=!1,W=null){(0,h.unreachable)("An editor must be serializable")}static deserialize(H,W,ne){const j=new this.prototype.constructor({parent:W,id:W.getNextId(),uiManager:ne});j.rotation=H.rotation;const[s,i]=j.pageDimensions,[p,f,C,I]=j.getRectInCurrentCoords(H.rect,i);return j.x=p/s,j.y=f/i,j.width=C/s,j.height=I/i,j}remove(){var H;this.div.removeEventListener("focusin",w(this,q)),this.div.removeEventListener("focusout",w(this,T)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(H=w(this,a))==null||H.remove(),Re(this,a,null),Re(this,S,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(ve(this,v,mr).call(this),w(this,F).classList.remove("hidden"))}select(){var H;this.makeResizable(),(H=this.div)==null||H.classList.add("selectedEditor")}unselect(){var H,W,ne;(H=w(this,F))==null||H.classList.add("hidden"),(W=this.div)==null||W.classList.remove("selectedEditor"),(ne=this.div)!=null&&ne.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(H,W){}disableEditing(){w(this,a)&&(w(this,a).hidden=!0)}enableEditing(){w(this,a)&&(w(this,a).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return w(this,u)}set isEditing(H){Re(this,u,H),this.parent&&(H?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(H,W){Re(this,M,!0);const ne=H/W,{style:j}=this.div;j.aspectRatio=ne,j.height="auto"}static get MIN_SIZE(){return 16}};g=new WeakMap,m=new WeakMap,a=new WeakMap,S=new WeakMap,A=new WeakMap,M=new WeakMap,F=new WeakMap,q=new WeakMap,T=new WeakMap,o=new WeakMap,u=new WeakMap,x=new WeakMap,b=new WeakMap,l=new WeakMap,v=new WeakSet,It=function([H,W],ne,j){[ne,j]=this.screenToPageTranslation(ne,j),this.x+=ne/H,this.y+=j/W,this.fixAndSetPosition()},Dt=function(){const[H,W]=this.parentDimensions,{_borderLineWidth:ne}=re,j=ne/H,s=ne/W;switch(this.rotation){case 90:return[-j,s];case 180:return[j,s];case 270:return[j,-s];default:return[-j,-s]}},R=new WeakSet,Lt=function(H,W,ne){switch(ne){case 90:return[W,-H];case 180:return[-H,-W];case 270:return[-W,H];default:return[H,W]}},Nt=function(H){switch(H){case 90:{const[W,ne]=this.pageDimensions;return[0,-W/ne,ne/W,0]}case 180:return[-1,0,0,-1];case 270:{const[W,ne]=this.pageDimensions;return[0,W/ne,-ne/W,0]}default:return[1,0,0,1]}},mr=function(){if(w(this,F))return;Re(this,F,document.createElement("div")),w(this,F).classList.add("resizers");const H=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||H.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const W of H){const ne=document.createElement("div");w(this,F).append(ne),ne.classList.add("resizer",W),ne.addEventListener("pointerdown",ve(this,v,yr).bind(this,W)),ne.addEventListener("contextmenu",y.noContextMenu)}this.div.prepend(w(this,F))},yr=function(H,W){W.preventDefault();const{isMac:ne}=h.FeatureTest.platform;if(W.button!==0||W.ctrlKey&&ne)return;const j=ve(this,v,_r).bind(this,H),s=this._isDraggable;this._isDraggable=!1;const i={passive:!0,capture:!0};window.addEventListener("pointermove",j,i);const p=this.x,f=this.y,C=this.width,I=this.height,z=this.parent.div.style.cursor,Q=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(W.target).cursor;const L=()=>{this._isDraggable=s,window.removeEventListener("pointerup",L),window.removeEventListener("blur",L),window.removeEventListener("pointermove",j,i),this.parent.div.style.cursor=z,this.div.style.cursor=Q;const N=this.x,se=this.y,ge=this.width,Ae=this.height;N===p&&se===f&&ge===C&&Ae===I||this.addCommands({cmd:()=>{this.width=ge,this.height=Ae,this.x=N,this.y=se;const[he,de]=this.parentDimensions;this.setDims(he*ge,de*Ae),this.fixAndSetPosition()},undo:()=>{this.width=C,this.height=I,this.x=p,this.y=f;const[he,de]=this.parentDimensions;this.setDims(he*C,de*I),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",L),window.addEventListener("blur",L)},_r=function(H,W){const[ne,j]=this.parentDimensions,s=this.x,i=this.y,p=this.width,f=this.height,C=re.MIN_SIZE/ne,I=re.MIN_SIZE/j,z=V=>Math.round(V*1e4)/1e4,Q=ve(this,v,Nt).call(this,this.rotation),L=(V,be)=>[Q[0]*V+Q[2]*be,Q[1]*V+Q[3]*be],N=ve(this,v,Nt).call(this,360-this.rotation),se=(V,be)=>[N[0]*V+N[2]*be,N[1]*V+N[3]*be];let ge,Ae,he=!1,de=!1;switch(H){case"topLeft":he=!0,ge=(V,be)=>[0,0],Ae=(V,be)=>[V,be];break;case"topMiddle":ge=(V,be)=>[V/2,0],Ae=(V,be)=>[V/2,be];break;case"topRight":he=!0,ge=(V,be)=>[V,0],Ae=(V,be)=>[0,be];break;case"middleRight":de=!0,ge=(V,be)=>[V,be/2],Ae=(V,be)=>[0,be/2];break;case"bottomRight":he=!0,ge=(V,be)=>[V,be],Ae=(V,be)=>[0,0];break;case"bottomMiddle":ge=(V,be)=>[V/2,be],Ae=(V,be)=>[V/2,0];break;case"bottomLeft":he=!0,ge=(V,be)=>[0,be],Ae=(V,be)=>[V,0];break;case"middleLeft":de=!0,ge=(V,be)=>[0,be/2],Ae=(V,be)=>[V,be/2];break}const K=ge(p,f),$=Ae(p,f);let me=L(...$);const _e=z(s+me[0]),Ce=z(i+me[1]);let ke=1,te=1,[J,Se]=this.screenToPageTranslation(W.movementX,W.movementY);if([J,Se]=se(J/ne,Se/j),he){const V=Math.hypot(p,f);ke=te=Math.max(Math.min(Math.hypot($[0]-K[0]-J,$[1]-K[1]-Se)/V,1/p,1/f),C/p,I/f)}else de?ke=Math.max(C,Math.min(1,Math.abs($[0]-K[0]-J)))/p:te=Math.max(I,Math.min(1,Math.abs($[1]-K[1]-Se)))/f;const Te=z(p*ke),De=z(f*te);me=L(...Ae(Te,De));const Ne=_e-me[0],Ue=Ce-me[1];this.width=Te,this.height=De,this.x=Ne,this.y=Ue,this.setDims(ne*Te,j*De),this.fixAndSetPosition()},qt=async function(){var ne;const H=w(this,a);if(!H)return;if(!w(this,g)&&!w(this,m)){H.classList.remove("done"),(ne=w(this,S))==null||ne.remove();return}re._l10nPromise.get("editor_alt_text_edit_button_label").then(j=>{H.setAttribute("aria-label",j)});let W=w(this,S);if(!W){Re(this,S,W=document.createElement("span")),W.className="tooltip",W.setAttribute("role","tooltip");const j=W.id=`alt-text-tooltip-${this.id}`;H.setAttribute("aria-describedby",j);const s=100;H.addEventListener("mouseenter",()=>{Re(this,A,setTimeout(()=>{Re(this,A,null),w(this,S).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},s))}),H.addEventListener("mouseleave",()=>{var i;clearTimeout(w(this,A)),Re(this,A,null),(i=w(this,S))==null||i.classList.remove("show")})}H.classList.add("done"),W.innerText=w(this,m)?await re._l10nPromise.get("editor_alt_text_decorative_tooltip"):w(this,g),W.parentNode||H.append(W)},vr=function(H){if(!this._isDraggable)return;const W=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let ne,j;W&&(ne={passive:!0,capture:!0},j=i=>{const[p,f]=this.screenToPageTranslation(i.movementX,i.movementY);this._uiManager.dragSelectedEditors(p,f)},window.addEventListener("pointermove",j,ne));const s=()=>{if(window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),W&&window.removeEventListener("pointermove",j,ne),Re(this,o,!1),!this._uiManager.endDragSession()){const{isMac:i}=h.FeatureTest.platform;H.ctrlKey&&!i||H.shiftKey||H.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",s),window.addEventListener("blur",s)},Ee(re,R),Ye(re,"_borderLineWidth",-1),Ye(re,"_colorManager",new r.ColorManager),Ye(re,"_zIndex",1),Ye(re,"SMALL_EDITOR_SIZE",0);let _=re;e.AnnotationEditor=_;class k extends _{constructor(H){super(H),this.annotationElementId=H.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,n)=>{var M,F,q,T,o,Bt,b,l,v,c,P,br,D,E,B,oe,ae,ue,re,pe,H,W,ne,j,s,i,p,f,C,I,z,Q,L,N,se,ge,Ae,he,de,K,$,me,_e,Ce,ke,te,J,Ar,jt,Ut,bt,Ht,Wt,Qe,ht,wr,Sr,zt,ft,Gt;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=y,e.opacityToHex=_;var r=n(1),h=n(6);function y(d,G,ce){for(const U of ce)G.addEventListener(U,d[U].bind(d))}function _(d){return Math.round(Math.min(255,Math.max(1,255*d))).toString(16).padStart(2,"0")}class k{constructor(){Ee(this,M,0)}getId(){return`${r.AnnotationEditorPrefix}${ut(this,M)._++}`}}M=new WeakMap;const x=class x{constructor(){Ee(this,o);Ee(this,F,(0,r.getUuid)());Ee(this,q,0);Ee(this,T,null)}static get _isSVGFittingCanvas(){const G='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',U=new OffscreenCanvas(1,3).getContext("2d"),le=new Image;le.src=G;const ye=le.decode().then(()=>(U.drawImage(le,0,0,1,1,0,0,1,3),new Uint32Array(U.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,r.shadow)(this,"_isSVGFittingCanvas",ye)}async getFromFile(G){const{lastModified:ce,name:U,size:le,type:ye}=G;return ve(this,o,Bt).call(this,`${ce}_${U}_${le}_${ye}`,G)}async getFromUrl(G){return ve(this,o,Bt).call(this,G,G)}async getFromId(G){w(this,T)||Re(this,T,new Map);const ce=w(this,T).get(G);return ce?ce.bitmap?(ce.refCounter+=1,ce):ce.file?this.getFromFile(ce.file):this.getFromUrl(ce.url):null}getSvgUrl(G){const ce=w(this,T).get(G);return ce!=null&&ce.isSvg?ce.svgUrl:null}deleteId(G){w(this,T)||Re(this,T,new Map);const ce=w(this,T).get(G);ce&&(ce.refCounter-=1,ce.refCounter===0&&(ce.bitmap=null))}isValidId(G){return G.startsWith(`image_${w(this,F)}_`)}};F=new WeakMap,q=new WeakMap,T=new WeakMap,o=new WeakSet,Bt=async function(G,ce){w(this,T)||Re(this,T,new Map);let U=w(this,T).get(G);if(U===null)return null;if(U!=null&&U.bitmap)return U.refCounter+=1,U;try{U||(U={bitmap:null,id:`image_${w(this,F)}_${ut(this,q)._++}`,refCounter:0,isSvg:!1});let le;if(typeof ce=="string"){U.url=ce;const ye=await fetch(ce);if(!ye.ok)throw new Error(ye.statusText);le=await ye.blob()}else le=U.file=ce;if(le.type==="image/svg+xml"){const ye=x._isSVGFittingCanvas,Me=new FileReader,Z=new Image,Y=new Promise((fe,xe)=>{Z.onload=()=>{U.bitmap=Z,U.isSvg=!0,fe()},Me.onload=async()=>{const Pe=U.svgUrl=Me.result;Z.src=await ye?`${Pe}#svgView(preserveAspectRatio(none))`:Pe},Z.onerror=Me.onerror=xe});Me.readAsDataURL(le),await Y}else U.bitmap=await createImageBitmap(le);U.refCounter=1}catch(le){console.error(le),U=null}return w(this,T).set(G,U),U&&w(this,T).set(U.id,U),U};let g=x;class m{constructor(G=128){Ee(this,b,[]);Ee(this,l,!1);Ee(this,v);Ee(this,c,-1);Re(this,v,G)}add({cmd:G,undo:ce,mustExec:U,type:le=NaN,overwriteIfSameType:ye=!1,keepUndo:Me=!1}){if(U&&G(),w(this,l))return;const Z={cmd:G,undo:ce,type:le};if(w(this,c)===-1){w(this,b).length>0&&(w(this,b).length=0),Re(this,c,0),w(this,b).push(Z);return}if(ye&&w(this,b)[w(this,c)].type===le){Me&&(Z.undo=w(this,b)[w(this,c)].undo),w(this,b)[w(this,c)]=Z;return}const Y=w(this,c)+1;Y===w(this,v)?w(this,b).splice(0,1):(Re(this,c,Y),Y<w(this,b).length&&w(this,b).splice(Y)),w(this,b).push(Z)}undo(){w(this,c)!==-1&&(Re(this,l,!0),w(this,b)[w(this,c)].undo(),Re(this,l,!1),Re(this,c,w(this,c)-1))}redo(){w(this,c)<w(this,b).length-1&&(Re(this,c,w(this,c)+1),Re(this,l,!0),w(this,b)[w(this,c)].cmd(),Re(this,l,!1))}hasSomethingToUndo(){return w(this,c)!==-1}hasSomethingToRedo(){return w(this,c)<w(this,b).length-1}destroy(){Re(this,b,null)}}b=new WeakMap,l=new WeakMap,v=new WeakMap,c=new WeakMap,e.CommandManager=m;class a{constructor(G){Ee(this,P);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:ce}=r.FeatureTest.platform;for(const[U,le,ye={}]of G)for(const Me of U){const Z=Me.startsWith("mac+");ce&&Z?(this.callbacks.set(Me.slice(4),{callback:le,options:ye}),this.allKeys.add(Me.split("+").at(-1))):!ce&&!Z&&(this.callbacks.set(Me,{callback:le,options:ye}),this.allKeys.add(Me.split("+").at(-1)))}}exec(G,ce){if(!this.allKeys.has(ce.key))return;const U=this.callbacks.get(ve(this,P,br).call(this,ce));if(!U)return;const{callback:le,options:{bubbles:ye=!1,args:Me=[],checker:Z=null}}=U;Z&&!Z(G,ce)||(le.bind(G,...Me)(),ye||(ce.stopPropagation(),ce.preventDefault()))}}P=new WeakSet,br=function(G){G.altKey&&this.buffer.push("alt"),G.ctrlKey&&this.buffer.push("ctrl"),G.metaKey&&this.buffer.push("meta"),G.shiftKey&&this.buffer.push("shift"),this.buffer.push(G.key);const ce=this.buffer.join("+");return this.buffer.length=0,ce},e.KeyboardManager=a;const X=class X{get _colors(){const G=new Map([["CanvasText",null],["Canvas",null]]);return(0,h.getColorValues)(G),(0,r.shadow)(this,"_colors",G)}convert(G){const ce=(0,h.getRGB)(G);if(!window.matchMedia("(forced-colors: active)").matches)return ce;for(const[U,le]of this._colors)if(le.every((ye,Me)=>ye===ce[Me]))return X._colorsMapping.get(U);return ce}getHexCode(G){const ce=this._colors.get(G);return ce?r.Util.makeHexColor(...ce):G}};Ye(X,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let S=X;e.ColorManager=S;const qe=class qe{constructor(G,ce,U,le,ye,Me){Ee(this,J);Ee(this,D,null);Ee(this,E,new Map);Ee(this,B,new Map);Ee(this,oe,null);Ee(this,ae,null);Ee(this,ue,new m);Ee(this,re,0);Ee(this,pe,new Set);Ee(this,H,null);Ee(this,W,null);Ee(this,ne,new Set);Ee(this,j,null);Ee(this,s,new k);Ee(this,i,!1);Ee(this,p,!1);Ee(this,f,null);Ee(this,C,r.AnnotationEditorType.NONE);Ee(this,I,new Set);Ee(this,z,null);Ee(this,Q,this.blur.bind(this));Ee(this,L,this.focus.bind(this));Ee(this,N,this.copy.bind(this));Ee(this,se,this.cut.bind(this));Ee(this,ge,this.paste.bind(this));Ee(this,Ae,this.keydown.bind(this));Ee(this,he,this.onEditingAction.bind(this));Ee(this,de,this.onPageChanging.bind(this));Ee(this,K,this.onScaleChanging.bind(this));Ee(this,$,this.onRotationChanging.bind(this));Ee(this,me,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Ee(this,_e,[0,0]);Ee(this,Ce,null);Ee(this,ke,null);Ee(this,te,null);Re(this,ke,G),Re(this,te,ce),Re(this,oe,U),this._eventBus=le,this._eventBus._on("editingaction",w(this,he)),this._eventBus._on("pagechanging",w(this,de)),this._eventBus._on("scalechanging",w(this,K)),this._eventBus._on("rotationchanging",w(this,$)),Re(this,ae,ye.annotationStorage),Re(this,j,ye.filterFactory),Re(this,z,Me),this.viewParameters={realScale:h.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const G=qe.prototype,ce=ye=>{const{activeElement:Me}=document;return Me&&w(ye,ke).contains(Me)&&ye.hasSomethingToControl()},U=this.TRANSLATE_SMALL,le=this.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new a([[["ctrl+a","mac+meta+a"],G.selectAll],[["ctrl+z","mac+meta+z"],G.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],G.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],G.delete],[["Escape","mac+Escape"],G.unselectAll],[["ArrowLeft","mac+ArrowLeft"],G.translateSelectedEditors,{args:[-U,0],checker:ce}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],G.translateSelectedEditors,{args:[-le,0],checker:ce}],[["ArrowRight","mac+ArrowRight"],G.translateSelectedEditors,{args:[U,0],checker:ce}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],G.translateSelectedEditors,{args:[le,0],checker:ce}],[["ArrowUp","mac+ArrowUp"],G.translateSelectedEditors,{args:[0,-U],checker:ce}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],G.translateSelectedEditors,{args:[0,-le],checker:ce}],[["ArrowDown","mac+ArrowDown"],G.translateSelectedEditors,{args:[0,U],checker:ce}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],G.translateSelectedEditors,{args:[0,le],checker:ce}]]))}destroy(){ve(this,J,bt).call(this),ve(this,J,jt).call(this),this._eventBus._off("editingaction",w(this,he)),this._eventBus._off("pagechanging",w(this,de)),this._eventBus._off("scalechanging",w(this,K)),this._eventBus._off("rotationchanging",w(this,$));for(const G of w(this,B).values())G.destroy();w(this,B).clear(),w(this,E).clear(),w(this,ne).clear(),Re(this,D,null),w(this,I).clear(),w(this,ue).destroy(),w(this,oe).destroy()}get hcmFilter(){return(0,r.shadow)(this,"hcmFilter",w(this,z)?w(this,j).addHCMFilter(w(this,z).foreground,w(this,z).background):"none")}get direction(){return(0,r.shadow)(this,"direction",getComputedStyle(w(this,ke)).direction)}editAltText(G){var ce;(ce=w(this,oe))==null||ce.editAltText(this,G)}onPageChanging({pageNumber:G}){Re(this,re,G-1)}focusMainContainer(){w(this,ke).focus()}findParent(G,ce){for(const U of w(this,B).values()){const{x:le,y:ye,width:Me,height:Z}=U.div.getBoundingClientRect();if(G>=le&&G<=le+Me&&ce>=ye&&ce<=ye+Z)return U}return null}disableUserSelect(G=!1){w(this,te).classList.toggle("noUserSelect",G)}addShouldRescale(G){w(this,ne).add(G)}removeShouldRescale(G){w(this,ne).delete(G)}onScaleChanging({scale:G}){this.commitOrRemove(),this.viewParameters.realScale=G*h.PixelsPerInch.PDF_TO_CSS_UNITS;for(const ce of w(this,ne))ce.onScaleChanging()}onRotationChanging({pagesRotation:G}){this.commitOrRemove(),this.viewParameters.rotation=G}addToAnnotationStorage(G){!G.isEmpty()&&w(this,ae)&&!w(this,ae).has(G.id)&&w(this,ae).setValue(G.id,G)}blur(){if(!this.hasSelection)return;const{activeElement:G}=document;for(const ce of w(this,I))if(ce.div.contains(G)){Re(this,f,[ce,G]),ce._focusEventsAllowed=!1;break}}focus(){if(!w(this,f))return;const[G,ce]=w(this,f);Re(this,f,null),ce.addEventListener("focusin",()=>{G._focusEventsAllowed=!0},{once:!0}),ce.focus()}addEditListeners(){ve(this,J,Ut).call(this),ve(this,J,Ht).call(this)}removeEditListeners(){ve(this,J,bt).call(this),ve(this,J,Wt).call(this)}copy(G){var U;if(G.preventDefault(),(U=w(this,D))==null||U.commitOrRemove(),!this.hasSelection)return;const ce=[];for(const le of w(this,I)){const ye=le.serialize(!0);ye&&ce.push(ye)}ce.length!==0&&G.clipboardData.setData("application/pdfjs",JSON.stringify(ce))}cut(G){this.copy(G),this.delete()}paste(G){G.preventDefault();const{clipboardData:ce}=G;for(const ye of ce.items)for(const Me of w(this,W))if(Me.isHandlingMimeForPasting(ye.type)){Me.paste(ye,this.currentLayer);return}let U=ce.getData("application/pdfjs");if(!U)return;try{U=JSON.parse(U)}catch(ye){(0,r.warn)(`paste: "${ye.message}".`);return}if(!Array.isArray(U))return;this.unselectAll();const le=this.currentLayer;try{const ye=[];for(const Y of U){const fe=le.deserialize(Y);if(!fe)return;ye.push(fe)}const Me=()=>{for(const Y of ye)ve(this,J,zt).call(this,Y);ve(this,J,Gt).call(this,ye)},Z=()=>{for(const Y of ye)Y.remove()};this.addCommands({cmd:Me,undo:Z,mustExec:!0})}catch(ye){(0,r.warn)(`paste: "${ye.message}".`)}}keydown(G){var ce;(ce=this.getActive())!=null&&ce.shouldGetKeyboardEvents()||qe._keyboardManager.exec(this,G)}onEditingAction(G){["undo","redo","delete","selectAll"].includes(G.name)&&this[G.name]()}setEditingState(G){G?(ve(this,J,Ar).call(this),ve(this,J,Ut).call(this),ve(this,J,Ht).call(this),ve(this,J,Qe).call(this,{isEditing:w(this,C)!==r.AnnotationEditorType.NONE,isEmpty:ve(this,J,ft).call(this),hasSomethingToUndo:w(this,ue).hasSomethingToUndo(),hasSomethingToRedo:w(this,ue).hasSomethingToRedo(),hasSelectedEditor:!1})):(ve(this,J,jt).call(this),ve(this,J,bt).call(this),ve(this,J,Wt).call(this),ve(this,J,Qe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(G){if(!w(this,W)){Re(this,W,G);for(const ce of w(this,W))ve(this,J,ht).call(this,ce.defaultPropertiesToUpdate)}}getId(){return w(this,s).getId()}get currentLayer(){return w(this,B).get(w(this,re))}getLayer(G){return w(this,B).get(G)}get currentPageIndex(){return w(this,re)}addLayer(G){w(this,B).set(G.pageIndex,G),w(this,i)?G.enable():G.disable()}removeLayer(G){w(this,B).delete(G.pageIndex)}updateMode(G,ce=null){if(w(this,C)!==G){if(Re(this,C,G),G===r.AnnotationEditorType.NONE){this.setEditingState(!1),ve(this,J,Sr).call(this);return}this.setEditingState(!0),ve(this,J,wr).call(this),this.unselectAll();for(const U of w(this,B).values())U.updateMode(G);if(ce){for(const U of w(this,E).values())if(U.annotationElementId===ce){this.setSelected(U),U.enterInEditMode();break}}}}updateToolbar(G){G!==w(this,C)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:G})}updateParams(G,ce){if(w(this,W)){if(G===r.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(G);return}for(const U of w(this,I))U.updateParams(G,ce);for(const U of w(this,W))U.updateDefaultParams(G,ce)}}enableWaiting(G=!1){if(w(this,p)!==G){Re(this,p,G);for(const ce of w(this,B).values())G?ce.disableClick():ce.enableClick(),ce.div.classList.toggle("waiting",G)}}getEditors(G){const ce=[];for(const U of w(this,E).values())U.pageIndex===G&&ce.push(U);return ce}getEditor(G){return w(this,E).get(G)}addEditor(G){w(this,E).set(G.id,G)}removeEditor(G){var ce;w(this,E).delete(G.id),this.unselect(G),(!G.annotationElementId||!w(this,pe).has(G.annotationElementId))&&((ce=w(this,ae))==null||ce.remove(G.id))}addDeletedAnnotationElement(G){w(this,pe).add(G.annotationElementId),G.deleted=!0}isDeletedAnnotationElement(G){return w(this,pe).has(G)}removeDeletedAnnotationElement(G){w(this,pe).delete(G.annotationElementId),G.deleted=!1}setActiveEditor(G){w(this,D)!==G&&(Re(this,D,G),G&&ve(this,J,ht).call(this,G.propertiesToUpdate))}toggleSelected(G){if(w(this,I).has(G)){w(this,I).delete(G),G.unselect(),ve(this,J,Qe).call(this,{hasSelectedEditor:this.hasSelection});return}w(this,I).add(G),G.select(),ve(this,J,ht).call(this,G.propertiesToUpdate),ve(this,J,Qe).call(this,{hasSelectedEditor:!0})}setSelected(G){for(const ce of w(this,I))ce!==G&&ce.unselect();w(this,I).clear(),w(this,I).add(G),G.select(),ve(this,J,ht).call(this,G.propertiesToUpdate),ve(this,J,Qe).call(this,{hasSelectedEditor:!0})}isSelected(G){return w(this,I).has(G)}unselect(G){G.unselect(),w(this,I).delete(G),ve(this,J,Qe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return w(this,I).size!==0}undo(){w(this,ue).undo(),ve(this,J,Qe).call(this,{hasSomethingToUndo:w(this,ue).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ve(this,J,ft).call(this)})}redo(){w(this,ue).redo(),ve(this,J,Qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:w(this,ue).hasSomethingToRedo(),isEmpty:ve(this,J,ft).call(this)})}addCommands(G){w(this,ue).add(G),ve(this,J,Qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ve(this,J,ft).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const G=[...w(this,I)],ce=()=>{for(const le of G)le.remove()},U=()=>{for(const le of G)ve(this,J,zt).call(this,le)};this.addCommands({cmd:ce,undo:U,mustExec:!0})}commitOrRemove(){var G;(G=w(this,D))==null||G.commitOrRemove()}hasSomethingToControl(){return w(this,D)||this.hasSelection}selectAll(){for(const G of w(this,I))G.commit();ve(this,J,Gt).call(this,w(this,E).values())}unselectAll(){if(w(this,D)){w(this,D).commitOrRemove();return}if(this.hasSelection){for(const G of w(this,I))G.unselect();w(this,I).clear(),ve(this,J,Qe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(G,ce,U=!1){if(U||this.commitOrRemove(),!this.hasSelection)return;w(this,_e)[0]+=G,w(this,_e)[1]+=ce;const[le,ye]=w(this,_e),Me=[...w(this,I)],Z=1e3;w(this,Ce)&&clearTimeout(w(this,Ce)),Re(this,Ce,setTimeout(()=>{Re(this,Ce,null),w(this,_e)[0]=w(this,_e)[1]=0,this.addCommands({cmd:()=>{for(const Y of Me)w(this,E).has(Y.id)&&Y.translateInPage(le,ye)},undo:()=>{for(const Y of Me)w(this,E).has(Y.id)&&Y.translateInPage(-le,-ye)},mustExec:!1})},Z));for(const Y of Me)Y.translateInPage(G,ce)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Re(this,H,new Map);for(const G of w(this,I))w(this,H).set(G,{savedX:G.x,savedY:G.y,savedPageIndex:G.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!w(this,H))return!1;this.disableUserSelect(!1);const G=w(this,H);Re(this,H,null);let ce=!1;for(const[{x:le,y:ye,pageIndex:Me},Z]of G)Z.newX=le,Z.newY=ye,Z.newPageIndex=Me,ce||(ce=le!==Z.savedX||ye!==Z.savedY||Me!==Z.savedPageIndex);if(!ce)return!1;const U=(le,ye,Me,Z)=>{if(w(this,E).has(le.id)){const Y=w(this,B).get(Z);Y?le._setParentAndPosition(Y,ye,Me):(le.pageIndex=Z,le.x=ye,le.y=Me)}};return this.addCommands({cmd:()=>{for(const[le,{newX:ye,newY:Me,newPageIndex:Z}]of G)U(le,ye,Me,Z)},undo:()=>{for(const[le,{savedX:ye,savedY:Me,savedPageIndex:Z}]of G)U(le,ye,Me,Z)},mustExec:!0}),!0}dragSelectedEditors(G,ce){if(w(this,H))for(const U of w(this,H).keys())U.drag(G,ce)}rebuild(G){if(G.parent===null){const ce=this.getLayer(G.pageIndex);ce?(ce.changeParent(G),ce.addOrRebuild(G)):(this.addEditor(G),this.addToAnnotationStorage(G),G.rebuild())}else G.parent.addOrRebuild(G)}isActive(G){return w(this,D)===G}getActive(){return w(this,D)}getMode(){return w(this,C)}get imageManager(){return(0,r.shadow)(this,"imageManager",new g)}};D=new WeakMap,E=new WeakMap,B=new WeakMap,oe=new WeakMap,ae=new WeakMap,ue=new WeakMap,re=new WeakMap,pe=new WeakMap,H=new WeakMap,W=new WeakMap,ne=new WeakMap,j=new WeakMap,s=new WeakMap,i=new WeakMap,p=new WeakMap,f=new WeakMap,C=new WeakMap,I=new WeakMap,z=new WeakMap,Q=new WeakMap,L=new WeakMap,N=new WeakMap,se=new WeakMap,ge=new WeakMap,Ae=new WeakMap,he=new WeakMap,de=new WeakMap,K=new WeakMap,$=new WeakMap,me=new WeakMap,_e=new WeakMap,Ce=new WeakMap,ke=new WeakMap,te=new WeakMap,J=new WeakSet,Ar=function(){window.addEventListener("focus",w(this,L)),window.addEventListener("blur",w(this,Q))},jt=function(){window.removeEventListener("focus",w(this,L)),window.removeEventListener("blur",w(this,Q))},Ut=function(){window.addEventListener("keydown",w(this,Ae),{capture:!0})},bt=function(){window.removeEventListener("keydown",w(this,Ae),{capture:!0})},Ht=function(){document.addEventListener("copy",w(this,N)),document.addEventListener("cut",w(this,se)),document.addEventListener("paste",w(this,ge))},Wt=function(){document.removeEventListener("copy",w(this,N)),document.removeEventListener("cut",w(this,se)),document.removeEventListener("paste",w(this,ge))},Qe=function(G){Object.entries(G).some(([U,le])=>w(this,me)[U]!==le)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(w(this,me),G)})},ht=function(G){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:G})},wr=function(){if(!w(this,i)){Re(this,i,!0);for(const G of w(this,B).values())G.enable()}},Sr=function(){if(this.unselectAll(),w(this,i)){Re(this,i,!1);for(const G of w(this,B).values())G.disable()}},zt=function(G){const ce=w(this,B).get(G.pageIndex);ce?ce.addOrRebuild(G):this.addEditor(G)},ft=function(){if(w(this,E).size===0)return!0;if(w(this,E).size===1)for(const G of w(this,E).values())return G.isEmpty();return!1},Gt=function(G){w(this,I).clear();for(const ce of G)ce.isEmpty()||(w(this,I).add(ce),ce.select());ve(this,J,Qe).call(this,{hasSelectedEditor:!0})},Ye(qe,"TRANSLATE_SMALL",1),Ye(qe,"TRANSLATE_BIG",10);let A=qe;e.AnnotationEditorUIManager=A},(t,e,n)=>{var re,pe,H,W,ne,j,s,i,p,f,C,I,st,ot,Vt,At,wt,dt,pt;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=c,e.getColorValues=E,e.getCurrentTransform=B,e.getCurrentTransformInverse=oe,e.getFilenameFromUrl=o,e.getPdfFilenameFromUrl=u,e.getRGB=D,e.getXfaPageViewport=X,e.isDataScheme=q,e.isPdfFile=T,e.isValidFetchUrl=b,e.loadScript=v,e.noContextMenu=l,e.setLayerDimensions=ae;var r=n(7),h=n(1);const y="http://www.w3.org/2000/svg",ue=class ue{};Ye(ue,"CSS",96),Ye(ue,"PDF",72),Ye(ue,"PDF_TO_CSS_UNITS",ue.CSS/ue.PDF);let _=ue;e.PixelsPerInch=_;class k extends r.BaseFilterFactory{constructor({docId:K,ownerDocument:$=globalThis.document}={}){super();Ee(this,I);Ee(this,re);Ee(this,pe);Ee(this,H);Ee(this,W);Ee(this,ne);Ee(this,j);Ee(this,s);Ee(this,i);Ee(this,p);Ee(this,f);Ee(this,C,0);Re(this,H,K),Re(this,W,$)}addFilter(K){if(!K)return"none";let $=w(this,I,st).get(K);if($)return $;let me,_e,Ce,ke;if(K.length===1){const Te=K[0],De=new Array(256);for(let Ne=0;Ne<256;Ne++)De[Ne]=Te[Ne]/255;ke=me=_e=Ce=De.join(",")}else{const[Te,De,Ne]=K,Ue=new Array(256),V=new Array(256),be=new Array(256);for(let Fe=0;Fe<256;Fe++)Ue[Fe]=Te[Fe]/255,V[Fe]=De[Fe]/255,be[Fe]=Ne[Fe]/255;me=Ue.join(","),_e=V.join(","),Ce=be.join(","),ke=`${me}${_e}${Ce}`}if($=w(this,I,st).get(ke),$)return w(this,I,st).set(K,$),$;const te=`g_${w(this,H)}_transfer_map_${ut(this,C)._++}`,J=`url(#${te})`;w(this,I,st).set(K,J),w(this,I,st).set(ke,J);const Se=ve(this,I,At).call(this,te);return ve(this,I,dt).call(this,me,_e,Ce,Se),J}addHCMFilter(K,$){var De;const me=`${K}-${$}`;if(w(this,j)===me)return w(this,s);if(Re(this,j,me),Re(this,s,"none"),(De=w(this,ne))==null||De.remove(),!K||!$)return w(this,s);const _e=ve(this,I,pt).call(this,K);K=h.Util.makeHexColor(..._e);const Ce=ve(this,I,pt).call(this,$);if($=h.Util.makeHexColor(...Ce),w(this,I,ot).style.color="",K==="#000000"&&$==="#ffffff"||K===$)return w(this,s);const ke=new Array(256);for(let Ne=0;Ne<=255;Ne++){const Ue=Ne/255;ke[Ne]=Ue<=.03928?Ue/12.92:((Ue+.055)/1.055)**2.4}const te=ke.join(","),J=`g_${w(this,H)}_hcm_filter`,Se=Re(this,i,ve(this,I,At).call(this,J));ve(this,I,dt).call(this,te,te,te,Se),ve(this,I,Vt).call(this,Se);const Te=(Ne,Ue)=>{const V=_e[Ne]/255,be=Ce[Ne]/255,Fe=new Array(Ue+1);for(let Le=0;Le<=Ue;Le++)Fe[Le]=V+Le/Ue*(be-V);return Fe.join(",")};return ve(this,I,dt).call(this,Te(0,5),Te(1,5),Te(2,5),Se),Re(this,s,`url(#${J})`),w(this,s)}addHighlightHCMFilter(K,$,me,_e){var be;const Ce=`${K}-${$}-${me}-${_e}`;if(w(this,p)===Ce)return w(this,f);if(Re(this,p,Ce),Re(this,f,"none"),(be=w(this,i))==null||be.remove(),!K||!$)return w(this,f);const[ke,te]=[K,$].map(ve(this,I,pt).bind(this));let J=Math.round(.2126*ke[0]+.7152*ke[1]+.0722*ke[2]),Se=Math.round(.2126*te[0]+.7152*te[1]+.0722*te[2]),[Te,De]=[me,_e].map(ve(this,I,pt).bind(this));Se<J&&([J,Se,Te,De]=[Se,J,De,Te]),w(this,I,ot).style.color="";const Ne=(Fe,Le,ee)=>{const ie=new Array(256),O=(Se-J)/ee,we=Fe/255,qe=(Le-Fe)/(255*ee);let d=0;for(let G=0;G<=ee;G++){const ce=Math.round(J+G*O),U=we+G*qe;for(let le=d;le<=ce;le++)ie[le]=U;d=ce+1}for(let G=d;G<256;G++)ie[G]=ie[d-1];return ie.join(",")},Ue=`g_${w(this,H)}_hcm_highlight_filter`,V=Re(this,i,ve(this,I,At).call(this,Ue));return ve(this,I,Vt).call(this,V),ve(this,I,dt).call(this,Ne(Te[0],De[0],5),Ne(Te[1],De[1],5),Ne(Te[2],De[2],5),V),Re(this,f,`url(#${Ue})`),w(this,f)}destroy(K=!1){K&&(w(this,s)||w(this,f))||(w(this,pe)&&(w(this,pe).parentNode.parentNode.remove(),Re(this,pe,null)),w(this,re)&&(w(this,re).clear(),Re(this,re,null)),Re(this,C,0))}}re=new WeakMap,pe=new WeakMap,H=new WeakMap,W=new WeakMap,ne=new WeakMap,j=new WeakMap,s=new WeakMap,i=new WeakMap,p=new WeakMap,f=new WeakMap,C=new WeakMap,I=new WeakSet,st=function(){return w(this,re)||Re(this,re,new Map)},ot=function(){if(!w(this,pe)){const K=w(this,W).createElement("div"),{style:$}=K;$.visibility="hidden",$.contain="strict",$.width=$.height=0,$.position="absolute",$.top=$.left=0,$.zIndex=-1;const me=w(this,W).createElementNS(y,"svg");me.setAttribute("width",0),me.setAttribute("height",0),Re(this,pe,w(this,W).createElementNS(y,"defs")),K.append(me),me.append(w(this,pe)),w(this,W).body.append(K)}return w(this,pe)},Vt=function(K){const $=w(this,W).createElementNS(y,"feColorMatrix");$.setAttribute("type","matrix"),$.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),K.append($)},At=function(K){const $=w(this,W).createElementNS(y,"filter");return $.setAttribute("color-interpolation-filters","sRGB"),$.setAttribute("id",K),w(this,I,ot).append($),$},wt=function(K,$,me){const _e=w(this,W).createElementNS(y,$);_e.setAttribute("type","discrete"),_e.setAttribute("tableValues",me),K.append(_e)},dt=function(K,$,me,_e){const Ce=w(this,W).createElementNS(y,"feComponentTransfer");_e.append(Ce),ve(this,I,wt).call(this,Ce,"feFuncR",K),ve(this,I,wt).call(this,Ce,"feFuncG",$),ve(this,I,wt).call(this,Ce,"feFuncB",me)},pt=function(K){return w(this,I,ot).style.color=K,D(getComputedStyle(w(this,I,ot)).getPropertyValue("color"))},e.DOMFilterFactory=k;class g extends r.BaseCanvasFactory{constructor({ownerDocument:de=globalThis.document}={}){super(),this._document=de}_createCanvas(de,K){const $=this._document.createElement("canvas");return $.width=de,$.height=K,$}}e.DOMCanvasFactory=g;async function m(he,de=!1){if(b(he,document.baseURI)){const K=await fetch(he);if(!K.ok)throw new Error(K.statusText);return de?new Uint8Array(await K.arrayBuffer()):(0,h.stringToBytes)(await K.text())}return new Promise((K,$)=>{const me=new XMLHttpRequest;me.open("GET",he,!0),de&&(me.responseType="arraybuffer"),me.onreadystatechange=()=>{if(me.readyState===XMLHttpRequest.DONE){if(me.status===200||me.status===0){let _e;if(de&&me.response?_e=new Uint8Array(me.response):!de&&me.responseText&&(_e=(0,h.stringToBytes)(me.responseText)),_e){K(_e);return}}$(new Error(me.statusText))}},me.send(null)})}class a extends r.BaseCMapReaderFactory{_fetchData(de,K){return m(de,this.isCompressed).then($=>({cMapData:$,compressionType:K}))}}e.DOMCMapReaderFactory=a;class S extends r.BaseStandardFontDataFactory{_fetchData(de){return m(de,!0)}}e.DOMStandardFontDataFactory=S;class A extends r.BaseSVGFactory{_createSVG(de){return document.createElementNS(y,de)}}e.DOMSVGFactory=A;class M{constructor({viewBox:de,scale:K,rotation:$,offsetX:me=0,offsetY:_e=0,dontFlip:Ce=!1}){this.viewBox=de,this.scale=K,this.rotation=$,this.offsetX=me,this.offsetY=_e;const ke=(de[2]+de[0])/2,te=(de[3]+de[1])/2;let J,Se,Te,De;switch($%=360,$<0&&($+=360),$){case 180:J=-1,Se=0,Te=0,De=1;break;case 90:J=0,Se=1,Te=1,De=0;break;case 270:J=0,Se=-1,Te=-1,De=0;break;case 0:J=1,Se=0,Te=0,De=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ce&&(Te=-Te,De=-De);let Ne,Ue,V,be;J===0?(Ne=Math.abs(te-de[1])*K+me,Ue=Math.abs(ke-de[0])*K+_e,V=(de[3]-de[1])*K,be=(de[2]-de[0])*K):(Ne=Math.abs(ke-de[0])*K+me,Ue=Math.abs(te-de[1])*K+_e,V=(de[2]-de[0])*K,be=(de[3]-de[1])*K),this.transform=[J*K,Se*K,Te*K,De*K,Ne-J*K*ke-Te*K*te,Ue-Se*K*ke-De*K*te],this.width=V,this.height=be}get rawDims(){const{viewBox:de}=this;return(0,h.shadow)(this,"rawDims",{pageWidth:de[2]-de[0],pageHeight:de[3]-de[1],pageX:de[0],pageY:de[1]})}clone({scale:de=this.scale,rotation:K=this.rotation,offsetX:$=this.offsetX,offsetY:me=this.offsetY,dontFlip:_e=!1}={}){return new M({viewBox:this.viewBox.slice(),scale:de,rotation:K,offsetX:$,offsetY:me,dontFlip:_e})}convertToViewportPoint(de,K){return h.Util.applyTransform([de,K],this.transform)}convertToViewportRectangle(de){const K=h.Util.applyTransform([de[0],de[1]],this.transform),$=h.Util.applyTransform([de[2],de[3]],this.transform);return[K[0],K[1],$[0],$[1]]}convertToPdfPoint(de,K){return h.Util.applyInverseTransform([de,K],this.transform)}}e.PageViewport=M;class F extends h.BaseException{constructor(de,K=0){super(de,"RenderingCancelledException"),this.extraDelay=K}}e.RenderingCancelledException=F;function q(he){const de=he.length;let K=0;for(;K<de&&he[K].trim()==="";)K++;return he.substring(K,K+5).toLowerCase()==="data:"}function T(he){return typeof he=="string"&&/\.pdf$/i.test(he)}function o(he,de=!1){return de||([he]=he.split(/[#?]/,1)),he.substring(he.lastIndexOf("/")+1)}function u(he,de="document.pdf"){if(typeof he!="string")return de;if(q(he))return(0,h.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),de;const K=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,$=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,me=K.exec(he);let _e=$.exec(me[1])||$.exec(me[2])||$.exec(me[3]);if(_e&&(_e=_e[0],_e.includes("%")))try{_e=$.exec(decodeURIComponent(_e))[0]}catch{}return _e||de}class x{constructor(){Ye(this,"started",Object.create(null));Ye(this,"times",[])}time(de){de in this.started&&(0,h.warn)(`Timer is already running for ${de}`),this.started[de]=Date.now()}timeEnd(de){de in this.started||(0,h.warn)(`Timer has not been started for ${de}`),this.times.push({name:de,start:this.started[de],end:Date.now()}),delete this.started[de]}toString(){const de=[];let K=0;for(const{name:$}of this.times)K=Math.max($.length,K);for(const{name:$,start:me,end:_e}of this.times)de.push(`${$.padEnd(K)} ${_e-me}ms
`);return de.join("")}}e.StatTimer=x;function b(he,de){try{const{protocol:K}=de?new URL(he,de):new URL(he);return K==="http:"||K==="https:"}catch{return!1}}function l(he){he.preventDefault()}function v(he,de=!1){return new Promise((K,$)=>{const me=document.createElement("script");me.src=he,me.onload=function(_e){de&&me.remove(),K(_e)},me.onerror=function(){$(new Error(`Cannot load script at: ${me.src}`))},(document.head||document.documentElement).append(me)})}function c(he){console.log("Deprecated API usage: "+he)}let P;class R{static toDateObject(de){if(!de||typeof de!="string")return null;P||(P=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const K=P.exec(de);if(!K)return null;const $=parseInt(K[1],10);let me=parseInt(K[2],10);me=me>=1&&me<=12?me-1:0;let _e=parseInt(K[3],10);_e=_e>=1&&_e<=31?_e:1;let Ce=parseInt(K[4],10);Ce=Ce>=0&&Ce<=23?Ce:0;let ke=parseInt(K[5],10);ke=ke>=0&&ke<=59?ke:0;let te=parseInt(K[6],10);te=te>=0&&te<=59?te:0;const J=K[7]||"Z";let Se=parseInt(K[8],10);Se=Se>=0&&Se<=23?Se:0;let Te=parseInt(K[9],10)||0;return Te=Te>=0&&Te<=59?Te:0,J==="-"?(Ce+=Se,ke+=Te):J==="+"&&(Ce-=Se,ke-=Te),new Date(Date.UTC($,me,_e,Ce,ke,te))}}e.PDFDateString=R;function X(he,{scale:de=1,rotation:K=0}){const{width:$,height:me}=he.attributes.style,_e=[0,0,parseInt($),parseInt(me)];return new M({viewBox:_e,scale:de,rotation:K})}function D(he){if(he.startsWith("#")){const de=parseInt(he.slice(1),16);return[(de&16711680)>>16,(de&65280)>>8,de&255]}return he.startsWith("rgb(")?he.slice(4,-1).split(",").map(de=>parseInt(de)):he.startsWith("rgba(")?he.slice(5,-1).split(",").map(de=>parseInt(de)).slice(0,3):((0,h.warn)(`Not a valid color format: "${he}"`),[0,0,0])}function E(he){const de=document.createElement("span");de.style.visibility="hidden",document.body.append(de);for(const K of he.keys()){de.style.color=K;const $=window.getComputedStyle(de).color;he.set(K,D($))}de.remove()}function B(he){const{a:de,b:K,c:$,d:me,e:_e,f:Ce}=he.getTransform();return[de,K,$,me,_e,Ce]}function oe(he){const{a:de,b:K,c:$,d:me,e:_e,f:Ce}=he.getTransform().invertSelf();return[de,K,$,me,_e,Ce]}function ae(he,de,K=!1,$=!0){if(de instanceof M){const{pageWidth:me,pageHeight:_e}=de.rawDims,{style:Ce}=he,ke=h.FeatureTest.isCSSRoundSupported,te=`var(--scale-factor) * ${me}px`,J=`var(--scale-factor) * ${_e}px`,Se=ke?`round(${te}, 1px)`:`calc(${te})`,Te=ke?`round(${J}, 1px)`:`calc(${J})`;!K||de.rotation%180===0?(Ce.width=Se,Ce.height=Te):(Ce.width=Te,Ce.height=Se)}$&&he.setAttribute("data-main-rotation",de.rotation)}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var r=n(1);class h{constructor(){this.constructor===h&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(a){return"none"}addHCMFilter(a,S){return"none"}addHighlightHCMFilter(a,S,A,M){return"none"}destroy(a=!1){}}e.BaseFilterFactory=h;class y{constructor(){this.constructor===y&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(a,S){if(a<=0||S<=0)throw new Error("Invalid canvas size");const A=this._createCanvas(a,S);return{canvas:A,context:A.getContext("2d")}}reset(a,S,A){if(!a.canvas)throw new Error("Canvas is not specified");if(S<=0||A<=0)throw new Error("Invalid canvas size");a.canvas.width=S,a.canvas.height=A}destroy(a){if(!a.canvas)throw new Error("Canvas is not specified");a.canvas.width=0,a.canvas.height=0,a.canvas=null,a.context=null}_createCanvas(a,S){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=y;class _{constructor({baseUrl:a=null,isCompressed:S=!0}){this.constructor===_&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=a,this.isCompressed=S}async fetch({name:a}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!a)throw new Error("CMap name must be specified.");const S=this.baseUrl+a+(this.isCompressed?".bcmap":""),A=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(S,A).catch(M=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${S}`)})}_fetchData(a,S){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=_;class k{constructor({baseUrl:a=null}){this.constructor===k&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=a}async fetch({filename:a}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!a)throw new Error("Font filename must be specified.");const S=`${this.baseUrl}${a}`;return this._fetchData(S).catch(A=>{throw new Error(`Unable to load font data at: ${S}`)})}_fetchData(a){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=k;class g{constructor(){this.constructor===g&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(a,S,A=!1){if(a<=0||S<=0)throw new Error("Invalid SVG dimensions");const M=this._createSVG("svg:svg");return M.setAttribute("version","1.1"),A||(M.setAttribute("width",`${a}px`),M.setAttribute("height",`${S}px`)),M.setAttribute("preserveAspectRatio","none"),M.setAttribute("viewBox",`0 0 ${a} ${S}`),M}createElement(a){if(typeof a!="string")throw new Error("Invalid SVG element type");return this._createSVG(a)}_createSVG(a){(0,r.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=g},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=n(1);const h=3285377520,y=4294901760,_=65535;class k{constructor(m){this.h1=m?m&4294967295:h,this.h2=m?m&4294967295:h}update(m){let a,S;if(typeof m=="string"){a=new Uint8Array(m.length*2),S=0;for(let c=0,P=m.length;c<P;c++){const R=m.charCodeAt(c);R<=255?a[S++]=R:(a[S++]=R>>>8,a[S++]=R&255)}}else if((0,r.isArrayBuffer)(m))a=m.slice(),S=a.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const A=S>>2,M=S-A*4,F=new Uint32Array(a.buffer,0,A);let q=0,T=0,o=this.h1,u=this.h2;const x=3432918353,b=461845907,l=x&_,v=b&_;for(let c=0;c<A;c++)c&1?(q=F[c],q=q*x&y|q*l&_,q=q<<15|q>>>17,q=q*b&y|q*v&_,o^=q,o=o<<13|o>>>19,o=o*5+3864292196):(T=F[c],T=T*x&y|T*l&_,T=T<<15|T>>>17,T=T*b&y|T*v&_,u^=T,u=u<<13|u>>>19,u=u*5+3864292196);switch(q=0,M){case 3:q^=a[A*4+2]<<16;case 2:q^=a[A*4+1]<<8;case 1:q^=a[A*4],q=q*x&y|q*l&_,q=q<<15|q>>>17,q=q*b&y|q*v&_,A&1?o^=q:u^=q}this.h1=o,this.h2=u}hexdigest(){let m=this.h1,a=this.h2;return m^=a>>>1,m=m*3981806797&y|m*36045&_,a=a*4283543511&y|((a<<16|m>>>16)*2950163797&y)>>>16,m^=a>>>1,m=m*444984403&y|m*60499&_,a=a*3301882366&y|((a<<16|m>>>16)*3120437893&y)>>>16,m^=a>>>1,(m>>>0).toString(16).padStart(8,"0")+(a>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=k},(t,e,n)=>{var _;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r=n(1);class h{constructor({ownerDocument:g=globalThis.document,styleElement:m=null}){Ee(this,_,new Set);this._document=g,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const m=this.styleElement.sheet;m.insertRule(g,m.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),w(this,_).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(g){if(!(!g||w(this,_).has(g.loadedName))){if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:m,src:a,style:S}=g,A=new FontFace(m,a,S);this.addNativeFontFace(A);try{await A.load(),w(this,_).add(m)}catch{(0,r.warn)(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(A)}return}(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g.systemFontInfo);return}if(this.isFontLoadingAPISupported){const a=g.createNativeFontFace();if(a){this.addNativeFontFace(a);try{await a.loaded}catch(S){throw(0,r.warn)(`Failed to load font '${a.family}': '${S}'.`),g.disableFontFace=!0,S}}return}const m=g.createFontFaceRule();if(m){if(this.insertRule(m),this.isSyncFontLoadingSupported)return;await new Promise(a=>{const S=this._queueLoadingCallback(a);this._prepareFontLoadEvent(g,S)})}}get isFontLoadingAPISupported(){var m;const g=!!((m=this._document)!=null&&m.fonts);return(0,r.shadow)(this,"isFontLoadingAPISupported",g)}get isSyncFontLoadingSupported(){let g=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(g=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",g)}_queueLoadingCallback(g){function m(){for((0,r.assert)(!S.done,"completeRequest() cannot be called twice."),S.done=!0;a.length>0&&a[0].done;){const A=a.shift();setTimeout(A.callback,0)}}const{loadingRequests:a}=this,S={done:!1,complete:m,callback:g};return a.push(S),S}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,m){function a(D,E){return D.charCodeAt(E)<<24|D.charCodeAt(E+1)<<16|D.charCodeAt(E+2)<<8|D.charCodeAt(E+3)&255}function S(D,E,B,oe){const ae=D.substring(0,E),ue=D.substring(E+B);return ae+oe+ue}let A,M;const F=this._document.createElement("canvas");F.width=1,F.height=1;const q=F.getContext("2d");let T=0;function o(D,E){if(++T>30){(0,r.warn)("Load test font never loaded."),E();return}if(q.font="30px "+D,q.fillText(".",0,20),q.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(o.bind(null,D,E))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=S(x,976,u.length,u);const l=16,v=1482184792;let c=a(x,l);for(A=0,M=u.length-3;A<M;A+=4)c=c-v+a(u,A)|0;A<u.length&&(c=c-v+a(u+"XXX",A)|0),x=S(x,l,4,(0,r.string32)(c));const P=`url(data:font/opentype;base64,${btoa(x)});`,R=`@font-face {font-family:"${u}";src:${P}}`;this.insertRule(R);const X=this._document.createElement("div");X.style.visibility="hidden",X.style.width=X.style.height="10px",X.style.position="absolute",X.style.top=X.style.left="0px";for(const D of[g.loadedName,u]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=D,X.append(E)}this._document.body.append(X),o(u,()=>{X.remove(),m.complete()})}}_=new WeakMap,e.FontLoader=h;class y{constructor(g,{isEvalSupported:m=!0,disableFontFace:a=!1,ignoreErrors:S=!1,inspectFont:A=null}){this.compiledGlyphs=Object.create(null);for(const M in g)this[M]=g[M];this.isEvalSupported=m!==!1,this.disableFontFace=a===!0,this.ignoreErrors=S===!0,this._inspectFont=A}createNativeFontFace(){var m;if(!this.data||this.disableFontFace)return null;let g;if(!this.cssFontInfo)g=new FontFace(this.loadedName,this.data,{});else{const a={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(a.style=`oblique ${this.cssFontInfo.italicAngle}deg`),g=new FontFace(this.cssFontInfo.fontFamily,this.data,a)}return(m=this._inspectFont)==null||m.call(this,this),g}createFontFaceRule(){var S;if(!this.data||this.disableFontFace)return null;const g=(0,r.bytesToString)(this.data),m=`url(data:${this.mimetype};base64,${btoa(g)});`;let a;if(!this.cssFontInfo)a=`@font-face {font-family:"${this.loadedName}";src:${m}}`;else{let A=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(A+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${A}src:${m}}`}return(S=this._inspectFont)==null||S.call(this,this,m),a}getPathGenerator(g,m){if(this.compiledGlyphs[m]!==void 0)return this.compiledGlyphs[m];let a;try{a=g.get(this.loadedName+"_path_"+m)}catch(S){if(!this.ignoreErrors)throw S;return(0,r.warn)(`getPathGenerator - ignoring character: "${S}".`),this.compiledGlyphs[m]=function(A,M){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const S=[];for(const A of a){const M=A.args!==void 0?A.args.join(","):"";S.push("c.",A.cmd,"(",M,`);
`)}return this.compiledGlyphs[m]=new Function("c","size",S.join(""))}return this.compiledGlyphs[m]=function(S,A){for(const M of a)M.cmd==="scale"&&(M.args=[A,-A]),S[M.cmd].apply(S,M.args)}}}e.FontFaceObject=y},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var r=n(7);n(1);const h=function(m){return new Promise((a,S)=>{require$$0$1.readFile(m,(M,F)=>{if(M||!F){S(new Error(M));return}a(new Uint8Array(F))})})};class y extends r.BaseFilterFactory{}e.NodeFilterFactory=y;class _ extends r.BaseCanvasFactory{_createCanvas(a,S){return require$$1$1.createCanvas(a,S)}}e.NodeCanvasFactory=_;class k extends r.BaseCMapReaderFactory{_fetchData(a,S){return h(a).then(A=>({cMapData:A,compressionType:S}))}}e.NodeCMapReaderFactory=k;class g extends r.BaseStandardFontDataFactory{_fetchData(a){return h(a)}}e.NodeStandardFontDataFactory=g},(t,e,n)=>{var pe,$t,Xt;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=n(1),h=n(6),y=n(12),_=n(13);const k=16,g=100,m=4096,a=15,S=10,A=1e3,M=16;function F(j,s){if(j._removeMirroring)throw new Error("Context is already forwarding operations.");j.__originalSave=j.save,j.__originalRestore=j.restore,j.__originalRotate=j.rotate,j.__originalScale=j.scale,j.__originalTranslate=j.translate,j.__originalTransform=j.transform,j.__originalSetTransform=j.setTransform,j.__originalResetTransform=j.resetTransform,j.__originalClip=j.clip,j.__originalMoveTo=j.moveTo,j.__originalLineTo=j.lineTo,j.__originalBezierCurveTo=j.bezierCurveTo,j.__originalRect=j.rect,j.__originalClosePath=j.closePath,j.__originalBeginPath=j.beginPath,j._removeMirroring=()=>{j.save=j.__originalSave,j.restore=j.__originalRestore,j.rotate=j.__originalRotate,j.scale=j.__originalScale,j.translate=j.__originalTranslate,j.transform=j.__originalTransform,j.setTransform=j.__originalSetTransform,j.resetTransform=j.__originalResetTransform,j.clip=j.__originalClip,j.moveTo=j.__originalMoveTo,j.lineTo=j.__originalLineTo,j.bezierCurveTo=j.__originalBezierCurveTo,j.rect=j.__originalRect,j.closePath=j.__originalClosePath,j.beginPath=j.__originalBeginPath,delete j._removeMirroring},j.save=function(){s.save(),this.__originalSave()},j.restore=function(){s.restore(),this.__originalRestore()},j.translate=function(p,f){s.translate(p,f),this.__originalTranslate(p,f)},j.scale=function(p,f){s.scale(p,f),this.__originalScale(p,f)},j.transform=function(p,f,C,I,z,Q){s.transform(p,f,C,I,z,Q),this.__originalTransform(p,f,C,I,z,Q)},j.setTransform=function(p,f,C,I,z,Q){s.setTransform(p,f,C,I,z,Q),this.__originalSetTransform(p,f,C,I,z,Q)},j.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},j.rotate=function(p){s.rotate(p),this.__originalRotate(p)},j.clip=function(p){s.clip(p),this.__originalClip(p)},j.moveTo=function(i,p){s.moveTo(i,p),this.__originalMoveTo(i,p)},j.lineTo=function(i,p){s.lineTo(i,p),this.__originalLineTo(i,p)},j.bezierCurveTo=function(i,p,f,C,I,z){s.bezierCurveTo(i,p,f,C,I,z),this.__originalBezierCurveTo(i,p,f,C,I,z)},j.rect=function(i,p,f,C){s.rect(i,p,f,C),this.__originalRect(i,p,f,C)},j.closePath=function(){s.closePath(),this.__originalClosePath()},j.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}class q{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,i,p){let f;return this.cache[s]!==void 0?(f=this.cache[s],this.canvasFactory.reset(f,i,p)):(f=this.canvasFactory.create(i,p),this.cache[s]=f),f}delete(s){delete this.cache[s]}clear(){for(const s in this.cache){const i=this.cache[s];this.canvasFactory.destroy(i),delete this.cache[s]}}}function T(j,s,i,p,f,C,I,z,Q,L){const[N,se,ge,Ae,he,de]=(0,h.getCurrentTransform)(j);if(se===0&&ge===0){const me=I*N+he,_e=Math.round(me),Ce=z*Ae+de,ke=Math.round(Ce),te=(I+Q)*N+he,J=Math.abs(Math.round(te)-_e)||1,Se=(z+L)*Ae+de,Te=Math.abs(Math.round(Se)-ke)||1;return j.setTransform(Math.sign(N),0,0,Math.sign(Ae),_e,ke),j.drawImage(s,i,p,f,C,0,0,J,Te),j.setTransform(N,se,ge,Ae,he,de),[J,Te]}if(N===0&&Ae===0){const me=z*ge+he,_e=Math.round(me),Ce=I*se+de,ke=Math.round(Ce),te=(z+L)*ge+he,J=Math.abs(Math.round(te)-_e)||1,Se=(I+Q)*se+de,Te=Math.abs(Math.round(Se)-ke)||1;return j.setTransform(0,Math.sign(se),Math.sign(ge),0,_e,ke),j.drawImage(s,i,p,f,C,0,0,Te,J),j.setTransform(N,se,ge,Ae,he,de),[Te,J]}j.drawImage(s,i,p,f,C,I,z,Q,L);const K=Math.hypot(N,se),$=Math.hypot(ge,Ae);return[K*Q,$*L]}function o(j){const{width:s,height:i}=j;if(s>A||i>A)return null;const p=1e3,f=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),C=s+1;let I=new Uint8Array(C*(i+1)),z,Q,L;const N=s+7&-8;let se=new Uint8Array(N*i),ge=0;for(const $ of j.data){let me=128;for(;me>0;)se[ge++]=$&me?0:255,me>>=1}let Ae=0;for(ge=0,se[ge]!==0&&(I[0]=1,++Ae),Q=1;Q<s;Q++)se[ge]!==se[ge+1]&&(I[Q]=se[ge]?2:1,++Ae),ge++;for(se[ge]!==0&&(I[Q]=2,++Ae),z=1;z<i;z++){ge=z*N,L=z*C,se[ge-N]!==se[ge]&&(I[L]=se[ge]?1:8,++Ae);let $=(se[ge]?4:0)+(se[ge-N]?8:0);for(Q=1;Q<s;Q++)$=($>>2)+(se[ge+1]?4:0)+(se[ge-N+1]?8:0),f[$]&&(I[L+Q]=f[$],++Ae),ge++;if(se[ge-N]!==se[ge]&&(I[L+Q]=se[ge]?2:4,++Ae),Ae>p)return null}for(ge=N*(i-1),L=z*C,se[ge]!==0&&(I[L]=8,++Ae),Q=1;Q<s;Q++)se[ge]!==se[ge+1]&&(I[L+Q]=se[ge]?4:8,++Ae),ge++;if(se[ge]!==0&&(I[L+Q]=4,++Ae),Ae>p)return null;const he=new Int32Array([0,C,-1,0,-C,0,0,0,1]),de=new Path2D;for(z=0;Ae&&z<=i;z++){let $=z*C;const me=$+s;for(;$<me&&!I[$];)$++;if($===me)continue;de.moveTo($%C,z);const _e=$;let Ce=I[$];do{const ke=he[Ce];do $+=ke;while(!I[$]);const te=I[$];te!==5&&te!==10?(Ce=te,I[$]=0):(Ce=te&51*Ce>>4,I[$]&=Ce>>2|Ce<<2),de.lineTo($%C,$/C|0),I[$]||--Ae}while(_e!==$);--z}return se=null,I=null,function($){$.save(),$.scale(1/s,-1/i),$.translate(0,-i),$.fill(de),$.beginPath(),$.restore()}}class u{constructor(s,i){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,s,i])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,i){this.x=s,this.y=i}updatePathMinMax(s,i,p){[i,p]=r.Util.applyTransform([i,p],s),this.minX=Math.min(this.minX,i),this.minY=Math.min(this.minY,p),this.maxX=Math.max(this.maxX,i),this.maxY=Math.max(this.maxY,p)}updateRectMinMax(s,i){const p=r.Util.applyTransform(i,s),f=r.Util.applyTransform(i.slice(2),s);this.minX=Math.min(this.minX,p[0],f[0]),this.minY=Math.min(this.minY,p[1],f[1]),this.maxX=Math.max(this.maxX,p[0],f[0]),this.maxY=Math.max(this.maxY,p[1],f[1])}updateScalingPathMinMax(s,i){r.Util.scaleMinMax(s,i),this.minX=Math.min(this.minX,i[0]),this.maxX=Math.max(this.maxX,i[1]),this.minY=Math.min(this.minY,i[2]),this.maxY=Math.max(this.maxY,i[3])}updateCurvePathMinMax(s,i,p,f,C,I,z,Q,L,N){const se=r.Util.bezierBoundingBox(i,p,f,C,I,z,Q,L);if(N){N[0]=Math.min(N[0],se[0],se[2]),N[1]=Math.max(N[1],se[0],se[2]),N[2]=Math.min(N[2],se[1],se[3]),N[3]=Math.max(N[3],se[1],se[3]);return}this.updateRectMinMax(s,se)}getPathBoundingBox(s=y.PathType.FILL,i=null){const p=[this.minX,this.minY,this.maxX,this.maxY];if(s===y.PathType.STROKE){i||(0,r.unreachable)("Stroke bounding box must include transform.");const f=r.Util.singularValueDecompose2dScale(i),C=f[0]*this.lineWidth/2,I=f[1]*this.lineWidth/2;p[0]-=C,p[1]-=I,p[2]+=C,p[3]+=I}return p}updateClipFromPath(){const s=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=y.PathType.FILL,i=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(s,i))}}function x(j,s){if(typeof ImageData<"u"&&s instanceof ImageData){j.putImageData(s,0,0);return}const i=s.height,p=s.width,f=i%M,C=(i-f)/M,I=f===0?C:C+1,z=j.createImageData(p,M);let Q=0,L;const N=s.data,se=z.data;let ge,Ae,he,de;if(s.kind===r.ImageKind.GRAYSCALE_1BPP){const K=N.byteLength,$=new Uint32Array(se.buffer,0,se.byteLength>>2),me=$.length,_e=p+7>>3,Ce=4294967295,ke=r.FeatureTest.isLittleEndian?4278190080:255;for(ge=0;ge<I;ge++){for(he=ge<C?M:f,L=0,Ae=0;Ae<he;Ae++){const te=K-Q;let J=0;const Se=te>_e?p:te*8-7,Te=Se&-8;let De=0,Ne=0;for(;J<Te;J+=8)Ne=N[Q++],$[L++]=Ne&128?Ce:ke,$[L++]=Ne&64?Ce:ke,$[L++]=Ne&32?Ce:ke,$[L++]=Ne&16?Ce:ke,$[L++]=Ne&8?Ce:ke,$[L++]=Ne&4?Ce:ke,$[L++]=Ne&2?Ce:ke,$[L++]=Ne&1?Ce:ke;for(;J<Se;J++)De===0&&(Ne=N[Q++],De=128),$[L++]=Ne&De?Ce:ke,De>>=1}for(;L<me;)$[L++]=0;j.putImageData(z,0,ge*M)}}else if(s.kind===r.ImageKind.RGBA_32BPP){for(Ae=0,de=p*M*4,ge=0;ge<C;ge++)se.set(N.subarray(Q,Q+de)),Q+=de,j.putImageData(z,0,Ae),Ae+=M;ge<I&&(de=p*f*4,se.set(N.subarray(Q,Q+de)),j.putImageData(z,0,Ae))}else if(s.kind===r.ImageKind.RGB_24BPP)for(he=M,de=p*he,ge=0;ge<I;ge++){for(ge>=C&&(he=f,de=p*he),L=0,Ae=de;Ae--;)se[L++]=N[Q++],se[L++]=N[Q++],se[L++]=N[Q++],se[L++]=255;j.putImageData(z,0,ge*M)}else throw new Error(`bad image kind: ${s.kind}`)}function b(j,s){if(s.bitmap){j.drawImage(s.bitmap,0,0);return}const i=s.height,p=s.width,f=i%M,C=(i-f)/M,I=f===0?C:C+1,z=j.createImageData(p,M);let Q=0;const L=s.data,N=z.data;for(let se=0;se<I;se++){const ge=se<C?M:f;({srcPos:Q}=(0,_.convertBlackAndWhiteToRGBA)({src:L,srcPos:Q,dest:N,width:p,height:ge,nonBlackColor:0})),j.putImageData(z,0,se*M)}}function l(j,s){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const p of i)j[p]!==void 0&&(s[p]=j[p]);j.setLineDash!==void 0&&(s.setLineDash(j.getLineDash()),s.lineDashOffset=j.lineDashOffset)}function v(j){if(j.strokeStyle=j.fillStyle="#000000",j.fillRule="nonzero",j.globalAlpha=1,j.lineWidth=1,j.lineCap="butt",j.lineJoin="miter",j.miterLimit=10,j.globalCompositeOperation="source-over",j.font="10px sans-serif",j.setLineDash!==void 0&&(j.setLineDash([]),j.lineDashOffset=0),!r.isNodeJS){const{filter:s}=j;s!=="none"&&s!==""&&(j.filter="none")}}function c(j,s,i,p){const f=j.length;for(let C=3;C<f;C+=4){const I=j[C];if(I===0)j[C-3]=s,j[C-2]=i,j[C-1]=p;else if(I<255){const z=255-I;j[C-3]=j[C-3]*I+s*z>>8,j[C-2]=j[C-2]*I+i*z>>8,j[C-1]=j[C-1]*I+p*z>>8}}}function P(j,s,i){const p=j.length,f=1/255;for(let C=3;C<p;C+=4){const I=i?i[j[C]]:j[C];s[C]=s[C]*I*f|0}}function R(j,s,i){const p=j.length;for(let f=3;f<p;f+=4){const C=j[f-3]*77+j[f-2]*152+j[f-1]*28;s[f]=i?s[f]*i[C>>8]>>8:s[f]*C>>16}}function X(j,s,i,p,f,C,I,z,Q,L,N){const se=!!C,ge=se?C[0]:0,Ae=se?C[1]:0,he=se?C[2]:0,de=f==="Luminosity"?R:P,$=Math.min(p,Math.ceil(1048576/i));for(let me=0;me<p;me+=$){const _e=Math.min($,p-me),Ce=j.getImageData(z-L,me+(Q-N),i,_e),ke=s.getImageData(z,me+Q,i,_e);se&&c(Ce.data,ge,Ae,he),de(Ce.data,ke.data,I),s.putImageData(ke,z,me+Q)}}function D(j,s,i,p){const f=p[0],C=p[1],I=p[2]-f,z=p[3]-C;I===0||z===0||(X(s.context,i,I,z,s.subtype,s.backdrop,s.transferMap,f,C,s.offsetX,s.offsetY),j.save(),j.globalAlpha=1,j.globalCompositeOperation="source-over",j.setTransform(1,0,0,1,0,0),j.drawImage(i.canvas,0,0),j.restore())}function E(j,s){const i=r.Util.singularValueDecompose2dScale(j);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const p=Math.fround((globalThis.devicePixelRatio||1)*h.PixelsPerInch.PDF_TO_CSS_UNITS);return s!==void 0?s:i[0]<=p||i[1]<=p}const B=["butt","round","square"],oe=["miter","round","bevel"],ae={},ue={},ne=class ne{constructor(s,i,p,f,C,{optionalContentConfig:I,markedContentStack:z=null},Q,L){Ee(this,pe);this.ctx=s,this.current=new u(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=p,this.canvasFactory=f,this.filterFactory=C,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=z||[],this.optionalContentConfig=I,this.cachedCanvases=new q(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Q,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=L,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,i=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):i}beginDrawing({transform:s,viewport:i,transparency:p=!1,background:f=null}){const C=this.ctx.canvas.width,I=this.ctx.canvas.height,z=this.ctx.fillStyle;if(this.ctx.fillStyle=f||"#ffffff",this.ctx.fillRect(0,0,C,I),this.ctx.fillStyle=z,p){const Q=this.cachedCanvases.getCanvas("transparent",C,I);this.compositeCtx=this.ctx,this.transparentCanvas=Q.canvas,this.ctx=Q.context,this.ctx.save(),this.ctx.transform(...(0,h.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),v(this.ctx),s&&(this.ctx.transform(...s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=(0,h.getCurrentTransform)(this.ctx)}executeOperatorList(s,i,p,f){const C=s.argsArray,I=s.fnArray;let z=i||0;const Q=C.length;if(Q===z)return z;const L=Q-z>S&&typeof p=="function",N=L?Date.now()+a:0;let se=0;const ge=this.commonObjs,Ae=this.objs;let he;for(;;){if(f!==void 0&&z===f.nextBreakPoint)return f.breakIt(z,p),z;if(he=I[z],he!==r.OPS.dependency)this[he].apply(this,C[z]);else for(const de of C[z]){const K=de.startsWith("g_")?ge:Ae;if(!K.has(de))return K.get(de,p),z}if(z++,z===Q)return z;if(L&&++se>S){if(Date.now()>N)return p(),z;se=0}}}endDrawing(){ve(this,pe,$t).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const i of s.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);s.clear()}this._cachedBitmapsMap.clear(),ve(this,pe,Xt).call(this)}_scaleImage(s,i){const p=s.width,f=s.height;let C=Math.max(Math.hypot(i[0],i[1]),1),I=Math.max(Math.hypot(i[2],i[3]),1),z=p,Q=f,L="prescale1",N,se;for(;C>2&&z>1||I>2&&Q>1;){let ge=z,Ae=Q;C>2&&z>1&&(ge=z>=16384?Math.floor(z/2)-1||1:Math.ceil(z/2),C/=z/ge),I>2&&Q>1&&(Ae=Q>=16384?Math.floor(Q/2)-1||1:Math.ceil(Q)/2,I/=Q/Ae),N=this.cachedCanvases.getCanvas(L,ge,Ae),se=N.context,se.clearRect(0,0,ge,Ae),se.drawImage(s,0,0,z,Q,0,0,ge,Ae),s=N.canvas,z=ge,Q=Ae,L=L==="prescale1"?"prescale2":"prescale1"}return{img:s,paintWidth:z,paintHeight:Q}}_createMaskCanvas(s){const i=this.ctx,{width:p,height:f}=s,C=this.current.fillColor,I=this.current.patternFill,z=(0,h.getCurrentTransform)(i);let Q,L,N,se;if((s.bitmap||s.data)&&s.count>1){const J=s.bitmap||s.data.buffer;L=JSON.stringify(I?z:[z.slice(0,4),C]),Q=this._cachedBitmapsMap.get(J),Q||(Q=new Map,this._cachedBitmapsMap.set(J,Q));const Se=Q.get(L);if(Se&&!I){const Te=Math.round(Math.min(z[0],z[2])+z[4]),De=Math.round(Math.min(z[1],z[3])+z[5]);return{canvas:Se,offsetX:Te,offsetY:De}}N=Se}N||(se=this.cachedCanvases.getCanvas("maskCanvas",p,f),b(se.context,s));let ge=r.Util.transform(z,[1/p,0,0,-1/f,0,0]);ge=r.Util.transform(ge,[1,0,0,1,0,-f]);const Ae=r.Util.applyTransform([0,0],ge),he=r.Util.applyTransform([p,f],ge),de=r.Util.normalizeRect([Ae[0],Ae[1],he[0],he[1]]),K=Math.round(de[2]-de[0])||1,$=Math.round(de[3]-de[1])||1,me=this.cachedCanvases.getCanvas("fillCanvas",K,$),_e=me.context,Ce=Math.min(Ae[0],he[0]),ke=Math.min(Ae[1],he[1]);_e.translate(-Ce,-ke),_e.transform(...ge),N||(N=this._scaleImage(se.canvas,(0,h.getCurrentTransformInverse)(_e)),N=N.img,Q&&I&&Q.set(L,N)),_e.imageSmoothingEnabled=E((0,h.getCurrentTransform)(_e),s.interpolate),T(_e,N,0,0,N.width,N.height,0,0,p,f),_e.globalCompositeOperation="source-in";const te=r.Util.transform((0,h.getCurrentTransformInverse)(_e),[1,0,0,1,-Ce,-ke]);return _e.fillStyle=I?C.getPattern(i,this,te,y.PathType.FILL):C,_e.fillRect(0,0,p,f),Q&&!I&&(this.cachedCanvases.delete("fillCanvas"),Q.set(L,me.canvas)),{canvas:me.canvas,offsetX:Math.round(Ce),offsetY:Math.round(ke)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=B[s]}setLineJoin(s){this.ctx.lineJoin=oe[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,i){const p=this.ctx;p.setLineDash!==void 0&&(p.setLineDash(s),p.lineDashOffset=i)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[i,p]of s)switch(i){case"LW":this.setLineWidth(p);break;case"LC":this.setLineCap(p);break;case"LJ":this.setLineJoin(p);break;case"ML":this.setMiterLimit(p);break;case"D":this.setDash(p[0],p[1]);break;case"RI":this.setRenderingIntent(p);break;case"FL":this.setFlatness(p);break;case"Font":this.setFont(p[0],p[1]);break;case"CA":this.current.strokeAlpha=p;break;case"ca":this.current.fillAlpha=p,this.ctx.globalAlpha=p;break;case"BM":this.ctx.globalCompositeOperation=p;break;case"SMask":this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(p);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,i=this.ctx.canvas.height,p="smaskGroupAt"+this.groupLevel,f=this.cachedCanvases.getCanvas(p,s,i);this.suspendedCtx=this.ctx,this.ctx=f.context;const C=this.ctx;C.setTransform(...(0,h.getCurrentTransform)(this.suspendedCtx)),l(this.suspendedCtx,C),F(C,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),l(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){if(!this.current.activeSMask)return;s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,p=this.suspendedCtx;D(p,i,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(l(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),l(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(s,i,p,f,C,I){this.ctx.transform(s,i,p,f,C,I),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(s,i,p){const f=this.ctx,C=this.current;let I=C.x,z=C.y,Q,L;const N=(0,h.getCurrentTransform)(f),se=N[0]===0&&N[3]===0||N[1]===0&&N[2]===0,ge=se?p.slice(0):null;for(let Ae=0,he=0,de=s.length;Ae<de;Ae++)switch(s[Ae]|0){case r.OPS.rectangle:I=i[he++],z=i[he++];const K=i[he++],$=i[he++],me=I+K,_e=z+$;f.moveTo(I,z),K===0||$===0?f.lineTo(me,_e):(f.lineTo(me,z),f.lineTo(me,_e),f.lineTo(I,_e)),se||C.updateRectMinMax(N,[I,z,me,_e]),f.closePath();break;case r.OPS.moveTo:I=i[he++],z=i[he++],f.moveTo(I,z),se||C.updatePathMinMax(N,I,z);break;case r.OPS.lineTo:I=i[he++],z=i[he++],f.lineTo(I,z),se||C.updatePathMinMax(N,I,z);break;case r.OPS.curveTo:Q=I,L=z,I=i[he+4],z=i[he+5],f.bezierCurveTo(i[he],i[he+1],i[he+2],i[he+3],I,z),C.updateCurvePathMinMax(N,Q,L,i[he],i[he+1],i[he+2],i[he+3],I,z,ge),he+=6;break;case r.OPS.curveTo2:Q=I,L=z,f.bezierCurveTo(I,z,i[he],i[he+1],i[he+2],i[he+3]),C.updateCurvePathMinMax(N,Q,L,I,z,i[he],i[he+1],i[he+2],i[he+3],ge),I=i[he+2],z=i[he+3],he+=4;break;case r.OPS.curveTo3:Q=I,L=z,I=i[he+2],z=i[he+3],f.bezierCurveTo(i[he],i[he+1],I,z,I,z),C.updateCurvePathMinMax(N,Q,L,i[he],i[he+1],I,z,I,z,ge),he+=4;break;case r.OPS.closePath:f.closePath();break}se&&C.updateScalingPathMinMax(N,ge),C.setCurrentPoint(I,z)}closePath(){this.ctx.closePath()}stroke(s=!0){const i=this.ctx,p=this.current.strokeColor;i.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof p=="object"&&(p!=null&&p.getPattern)?(i.save(),i.strokeStyle=p.getPattern(i,this,(0,h.getCurrentTransformInverse)(i),y.PathType.STROKE),this.rescaleAndStroke(!1),i.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),i.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s=!0){const i=this.ctx,p=this.current.fillColor,f=this.current.patternFill;let C=!1;f&&(i.save(),i.fillStyle=p.getPattern(i,this,(0,h.getCurrentTransformInverse)(i),y.PathType.FILL),C=!0);const I=this.current.getClippedPathBoundingBox();this.contentVisible&&I!==null&&(this.pendingEOFill?(i.fill("evenodd"),this.pendingEOFill=!1):i.fill()),C&&i.restore(),s&&this.consumePath(I)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ae}eoClip(){this.pendingClip=ue}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,i=this.ctx;if(s===void 0){i.beginPath();return}i.save(),i.beginPath();for(const p of s)i.setTransform(...p.transform),i.translate(p.x,p.y),p.addToPath(i,p.fontSize);i.restore(),i.clip(),i.beginPath(),delete this.pendingTextPaths}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,i){var N;const p=this.commonObjs.get(s),f=this.current;if(!p)throw new Error(`Can't find font for ${s}`);if(f.fontMatrix=p.fontMatrix||r.FONT_IDENTITY_MATRIX,(f.fontMatrix[0]===0||f.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+s),i<0?(i=-i,f.fontDirection=-1):f.fontDirection=1,this.current.font=p,this.current.fontSize=i,p.isType3Font)return;const C=p.loadedName||"sans-serif",I=((N=p.systemFontInfo)==null?void 0:N.css)||`"${C}", ${p.fallbackName}`;let z="normal";p.black?z="900":p.bold&&(z="bold");const Q=p.italic?"italic":"normal";let L=i;i<k?L=k:i>g&&(L=g),this.current.fontSizeScale=i/L,this.ctx.font=`${Q} ${z} ${L}px ${I}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,i){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=i}setLeadingMoveText(s,i){this.setLeading(-i),this.moveText(s,i)}setTextMatrix(s,i,p,f,C,I){this.current.textMatrix=[s,i,p,f,C,I],this.current.textMatrixScale=Math.hypot(s,i),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,i,p,f){const C=this.ctx,I=this.current,z=I.font,Q=I.textRenderingMode,L=I.fontSize/I.fontSizeScale,N=Q&r.TextRenderingMode.FILL_STROKE_MASK,se=!!(Q&r.TextRenderingMode.ADD_TO_PATH_FLAG),ge=I.patternFill&&!z.missingFile;let Ae;(z.disableFontFace||se||ge)&&(Ae=z.getPathGenerator(this.commonObjs,s)),z.disableFontFace||ge?(C.save(),C.translate(i,p),C.beginPath(),Ae(C,L),f&&C.setTransform(...f),(N===r.TextRenderingMode.FILL||N===r.TextRenderingMode.FILL_STROKE)&&C.fill(),(N===r.TextRenderingMode.STROKE||N===r.TextRenderingMode.FILL_STROKE)&&C.stroke(),C.restore()):((N===r.TextRenderingMode.FILL||N===r.TextRenderingMode.FILL_STROKE)&&C.fillText(s,i,p),(N===r.TextRenderingMode.STROKE||N===r.TextRenderingMode.FILL_STROKE)&&C.strokeText(s,i,p)),se&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,h.getCurrentTransform)(C),x:i,y:p,fontSize:L,addToPath:Ae})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const i=s.getImageData(0,0,10,10).data;let p=!1;for(let f=3;f<i.length;f+=4)if(i[f]>0&&i[f]<255){p=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",p)}showText(s){const i=this.current,p=i.font;if(p.isType3Font)return this.showType3Text(s);const f=i.fontSize;if(f===0)return;const C=this.ctx,I=i.fontSizeScale,z=i.charSpacing,Q=i.wordSpacing,L=i.fontDirection,N=i.textHScale*L,se=s.length,ge=p.vertical,Ae=ge?1:-1,he=p.defaultVMetrics,de=f*i.fontMatrix[0],K=i.textRenderingMode===r.TextRenderingMode.FILL&&!p.disableFontFace&&!i.patternFill;C.save(),C.transform(...i.textMatrix),C.translate(i.x,i.y+i.textRise),L>0?C.scale(N,-1):C.scale(N,1);let $;if(i.patternFill){C.save();const te=i.fillColor.getPattern(C,this,(0,h.getCurrentTransformInverse)(C),y.PathType.FILL);$=(0,h.getCurrentTransform)(C),C.restore(),C.fillStyle=te}let me=i.lineWidth;const _e=i.textMatrixScale;if(_e===0||me===0){const te=i.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(te===r.TextRenderingMode.STROKE||te===r.TextRenderingMode.FILL_STROKE)&&(me=this.getSinglePixelWidth())}else me/=_e;if(I!==1&&(C.scale(I,I),me/=I),C.lineWidth=me,p.isInvalidPDFjsFont){const te=[];let J=0;for(const Se of s)te.push(Se.unicode),J+=Se.width;C.fillText(te.join(""),0,0),i.x+=J*de*N,C.restore(),this.compose();return}let Ce=0,ke;for(ke=0;ke<se;++ke){const te=s[ke];if(typeof te=="number"){Ce+=Ae*te*f/1e3;continue}let J=!1;const Se=(te.isSpace?Q:0)+z,Te=te.fontChar,De=te.accent;let Ne,Ue,V=te.width;if(ge){const Fe=te.vmetric||he,Le=-(te.vmetric?Fe[1]:V*.5)*de,ee=Fe[2]*de;V=Fe?-Fe[0]:V,Ne=Le/I,Ue=(Ce+ee)/I}else Ne=Ce/I,Ue=0;if(p.remeasure&&V>0){const Fe=C.measureText(Te).width*1e3/f*I;if(V<Fe&&this.isFontSubpixelAAEnabled){const Le=V/Fe;J=!0,C.save(),C.scale(Le,1),Ne/=Le}else V!==Fe&&(Ne+=(V-Fe)/2e3*f/I)}if(this.contentVisible&&(te.isInFont||p.missingFile)){if(K&&!De)C.fillText(Te,Ne,Ue);else if(this.paintChar(Te,Ne,Ue,$),De){const Fe=Ne+f*De.offset.x/I,Le=Ue-f*De.offset.y/I;this.paintChar(De.fontChar,Fe,Le,$)}}const be=ge?V*de-Se*L:V*de+Se*L;Ce+=be,J&&C.restore()}ge?i.y-=Ce:i.x+=Ce*N,C.restore(),this.compose()}showType3Text(s){const i=this.ctx,p=this.current,f=p.font,C=p.fontSize,I=p.fontDirection,z=f.vertical?1:-1,Q=p.charSpacing,L=p.wordSpacing,N=p.textHScale*I,se=p.fontMatrix||r.FONT_IDENTITY_MATRIX,ge=s.length,Ae=p.textRenderingMode===r.TextRenderingMode.INVISIBLE;let he,de,K,$;if(!(Ae||C===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),i.transform(...p.textMatrix),i.translate(p.x,p.y),i.scale(N,I),he=0;he<ge;++he){if(de=s[he],typeof de=="number"){$=z*de*C/1e3,this.ctx.translate($,0),p.x+=$*N;continue}const me=(de.isSpace?L:0)+Q,_e=f.charProcOperatorList[de.operatorListId];if(!_e){(0,r.warn)(`Type3 character "${de.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=de,this.save(),i.scale(C,C),i.transform(...se),this.executeOperatorList(_e),this.restore()),K=r.Util.applyTransform([de.width,0],se)[0]*C+me,i.translate(K,0),p.x+=K*N}i.restore(),this.processingType3=null}}setCharWidth(s,i){}setCharWidthAndBounds(s,i,p,f,C,I){this.ctx.rect(p,f,C-p,I-f),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let i;if(s[0]==="TilingPattern"){const p=s[1],f=this.baseTransform||(0,h.getCurrentTransform)(this.ctx),C={createCanvasGraphics:I=>new ne(I,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new y.TilingPattern(s,p,this.ctx,C,f)}else i=this._getPattern(s[1],s[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,i,p){const f=r.Util.makeHexColor(s,i,p);this.ctx.strokeStyle=f,this.current.strokeColor=f}setFillRGBColor(s,i,p){const f=r.Util.makeHexColor(s,i,p);this.ctx.fillStyle=f,this.current.fillColor=f,this.current.patternFill=!1}_getPattern(s,i=null){let p;return this.cachedPatterns.has(s)?p=this.cachedPatterns.get(s):(p=(0,y.getShadingPattern)(this.getObject(s)),this.cachedPatterns.set(s,p)),i&&(p.matrix=i),p}shadingFill(s){if(!this.contentVisible)return;const i=this.ctx;this.save();const p=this._getPattern(s);i.fillStyle=p.getPattern(i,this,(0,h.getCurrentTransformInverse)(i),y.PathType.SHADING);const f=(0,h.getCurrentTransformInverse)(i);if(f){const{width:C,height:I}=i.canvas,[z,Q,L,N]=r.Util.getAxialAlignedBoundingBox([0,0,C,I],f);this.ctx.fillRect(z,Q,L-z,N-Q)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,i){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&s.length===6&&this.transform(...s),this.baseTransform=(0,h.getCurrentTransform)(this.ctx),i)){const p=i[2]-i[0],f=i[3]-i[1];this.ctx.rect(i[0],i[1],p,f),this.current.updateRectMinMax((0,h.getCurrentTransform)(this.ctx),i),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;s.isolated||(0,r.info)("TODO: Support non-isolated groups."),s.knockout&&(0,r.warn)("Knockout groups not supported.");const p=(0,h.getCurrentTransform)(i);if(s.matrix&&i.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let f=r.Util.getAxialAlignedBoundingBox(s.bbox,(0,h.getCurrentTransform)(i));const C=[0,0,i.canvas.width,i.canvas.height];f=r.Util.intersect(f,C)||[0,0,0,0];const I=Math.floor(f[0]),z=Math.floor(f[1]);let Q=Math.max(Math.ceil(f[2])-I,1),L=Math.max(Math.ceil(f[3])-z,1),N=1,se=1;Q>m&&(N=Q/m,Q=m),L>m&&(se=L/m,L=m),this.current.startNewPathAndClipBox([0,0,Q,L]);let ge="groupAt"+this.groupLevel;s.smask&&(ge+="_smask_"+this.smaskCounter++%2);const Ae=this.cachedCanvases.getCanvas(ge,Q,L),he=Ae.context;he.scale(1/N,1/se),he.translate(-I,-z),he.transform(...p),s.smask?this.smaskStack.push({canvas:Ae.canvas,context:he,offsetX:I,offsetY:z,scaleX:N,scaleY:se,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(I,z),i.scale(N,se),i.save()),l(i,he),this.ctx=he,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,p=this.groupStack.pop();if(this.ctx=p,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const f=(0,h.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...f);const C=r.Util.getAxialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],f);this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(C)}}beginAnnotation(s,i,p,f,C){if(ve(this,pe,$t).call(this),v(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(i)&&i.length===4){const I=i[2]-i[0],z=i[3]-i[1];if(C&&this.annotationCanvasMap){p=p.slice(),p[4]-=i[0],p[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=I,i[3]=z;const[Q,L]=r.Util.singularValueDecompose2dScale((0,h.getCurrentTransform)(this.ctx)),{viewportScale:N}=this,se=Math.ceil(I*this.outputScaleX*N),ge=Math.ceil(z*this.outputScaleY*N);this.annotationCanvas=this.canvasFactory.create(se,ge);const{canvas:Ae,context:he}=this.annotationCanvas;this.annotationCanvasMap.set(s,Ae),this.annotationCanvas.savedCtx=this.ctx,this.ctx=he,this.ctx.save(),this.ctx.setTransform(Q,0,0,-L,0,z*L),v(this.ctx)}else v(this.ctx),this.ctx.rect(i[0],i[1],I,z),this.ctx.clip(),this.endPath()}this.current=new u(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...p),this.transform(...f)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),ve(this,pe,Xt).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(s){if(!this.contentVisible)return;const i=s.count;s=this.getObject(s.data,s),s.count=i;const p=this.ctx,f=this.processingType3;if(f&&(f.compiled===void 0&&(f.compiled=o(s)),f.compiled)){f.compiled(p);return}const C=this._createMaskCanvas(s),I=C.canvas;p.save(),p.setTransform(1,0,0,1,0,0),p.drawImage(I,C.offsetX,C.offsetY),p.restore(),this.compose()}paintImageMaskXObjectRepeat(s,i,p=0,f=0,C,I){if(!this.contentVisible)return;s=this.getObject(s.data,s);const z=this.ctx;z.save();const Q=(0,h.getCurrentTransform)(z);z.transform(i,p,f,C,0,0);const L=this._createMaskCanvas(s);z.setTransform(1,0,0,1,L.offsetX-Q[4],L.offsetY-Q[5]);for(let N=0,se=I.length;N<se;N+=2){const ge=r.Util.transform(Q,[i,p,f,C,I[N],I[N+1]]),[Ae,he]=r.Util.applyTransform([0,0],ge);z.drawImage(L.canvas,Ae,he)}z.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const i=this.ctx,p=this.current.fillColor,f=this.current.patternFill;for(const C of s){const{data:I,width:z,height:Q,transform:L}=C,N=this.cachedCanvases.getCanvas("maskCanvas",z,Q),se=N.context;se.save();const ge=this.getObject(I,C);b(se,ge),se.globalCompositeOperation="source-in",se.fillStyle=f?p.getPattern(se,this,(0,h.getCurrentTransformInverse)(i),y.PathType.FILL):p,se.fillRect(0,0,z,Q),se.restore(),i.save(),i.transform(...L),i.scale(1,-1),T(i,N.canvas,0,0,z,Q,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const i=this.getObject(s);if(!i){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(s,i,p,f){if(!this.contentVisible)return;const C=this.getObject(s);if(!C){(0,r.warn)("Dependent image isn't ready yet");return}const I=C.width,z=C.height,Q=[];for(let L=0,N=f.length;L<N;L+=2)Q.push({transform:[i,0,0,p,f[L],f[L+1]],x:0,y:0,w:I,h:z});this.paintInlineImageXObjectGroup(C,Q)}applyTransferMapsToCanvas(s){return this.current.transferMaps!=="none"&&(s.filter=this.current.transferMaps,s.drawImage(s.canvas,0,0),s.filter="none"),s.canvas}applyTransferMapsToBitmap(s){if(this.current.transferMaps==="none")return s.bitmap;const{bitmap:i,width:p,height:f}=s,C=this.cachedCanvases.getCanvas("inlineImage",p,f),I=C.context;return I.filter=this.current.transferMaps,I.drawImage(i,0,0),I.filter="none",C.canvas}paintInlineImageXObject(s){if(!this.contentVisible)return;const i=s.width,p=s.height,f=this.ctx;if(this.save(),!r.isNodeJS){const{filter:z}=f;z!=="none"&&z!==""&&(f.filter="none")}f.scale(1/i,-1/p);let C;if(s.bitmap)C=this.applyTransferMapsToBitmap(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)C=s;else{const Q=this.cachedCanvases.getCanvas("inlineImage",i,p).context;x(Q,s),C=this.applyTransferMapsToCanvas(Q)}const I=this._scaleImage(C,(0,h.getCurrentTransformInverse)(f));f.imageSmoothingEnabled=E((0,h.getCurrentTransform)(f),s.interpolate),T(f,I.img,0,0,I.paintWidth,I.paintHeight,0,-p,i,p),this.compose(),this.restore()}paintInlineImageXObjectGroup(s,i){if(!this.contentVisible)return;const p=this.ctx;let f;if(s.bitmap)f=s.bitmap;else{const C=s.width,I=s.height,Q=this.cachedCanvases.getCanvas("inlineImage",C,I).context;x(Q,s),f=this.applyTransferMapsToCanvas(Q)}for(const C of i)p.save(),p.transform(...C.transform),p.scale(1,-1),T(p,f,C.x,C.y,C.w,C.h,0,-1,1,1),p.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,i){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,i){s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const p=this.ctx;this.pendingClip&&(i||(this.pendingClip===ue?p.clip("evenodd"):p.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),p.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=(0,h.getCurrentTransform)(this.ctx);if(s[1]===0&&s[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const i=Math.abs(s[0]*s[3]-s[2]*s[1]),p=Math.hypot(s[0],s[2]),f=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(p,f)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:s}=this.current,{a:i,b:p,c:f,d:C}=this.ctx.getTransform();let I,z;if(p===0&&f===0){const Q=Math.abs(i),L=Math.abs(C);if(Q===L)if(s===0)I=z=1/Q;else{const N=Q*s;I=z=N<1?1/N:1}else if(s===0)I=1/Q,z=1/L;else{const N=Q*s,se=L*s;I=N<1?1/N:1,z=se<1?1/se:1}}else{const Q=Math.abs(i*C-p*f),L=Math.hypot(i,p),N=Math.hypot(f,C);if(s===0)I=N/Q,z=L/Q;else{const se=s*Q;I=N>se?N/se:1,z=L>se?L/se:1}}this._cachedScaleForStroking[0]=I,this._cachedScaleForStroking[1]=z}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:i}=this,{lineWidth:p}=this.current,[f,C]=this.getScaleForStroking();if(i.lineWidth=p||1,f===1&&C===1){i.stroke();return}const I=i.getLineDash();if(s&&i.save(),i.scale(f,C),I.length>0){const z=Math.max(f,C);i.setLineDash(I.map(Q=>Q/z)),i.lineDashOffset/=z}i.stroke(),s&&i.restore()}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}};pe=new WeakSet,$t=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Xt=function(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(s!=="none"){const i=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}};let re=ne;e.CanvasGraphics=re;for(const j in r.OPS)re.prototype[j]!==void 0&&(re.prototype[r.OPS[j]]=re.prototype[j])},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=M;var r=n(1),h=n(6);const y={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=y;function _(o,u){if(!u)return;const x=u[2]-u[0],b=u[3]-u[1],l=new Path2D;l.rect(u[0],u[1],x,b),o.clip(l)}class k{constructor(){this.constructor===k&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class g extends k{constructor(u){super(),this._type=u[1],this._bbox=u[2],this._colorStops=u[3],this._p0=u[4],this._p1=u[5],this._r0=u[6],this._r1=u[7],this.matrix=null}_createGradient(u){let x;this._type==="axial"?x=u.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(x=u.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const b of this._colorStops)x.addColorStop(b[0],b[1]);return x}getPattern(u,x,b,l){let v;if(l===y.STROKE||l===y.FILL){const c=x.current.getClippedPathBoundingBox(l,(0,h.getCurrentTransform)(u))||[0,0,0,0],P=Math.ceil(c[2]-c[0])||1,R=Math.ceil(c[3]-c[1])||1,X=x.cachedCanvases.getCanvas("pattern",P,R,!0),D=X.context;D.clearRect(0,0,D.canvas.width,D.canvas.height),D.beginPath(),D.rect(0,0,D.canvas.width,D.canvas.height),D.translate(-c[0],-c[1]),b=r.Util.transform(b,[1,0,0,1,c[0],c[1]]),D.transform(...x.baseTransform),this.matrix&&D.transform(...this.matrix),_(D,this._bbox),D.fillStyle=this._createGradient(D),D.fill(),v=u.createPattern(X.canvas,"no-repeat");const E=new DOMMatrix(b);v.setTransform(E)}else _(u,this._bbox),v=this._createGradient(u);return v}}function m(o,u,x,b,l,v,c,P){const R=u.coords,X=u.colors,D=o.data,E=o.width*4;let B;R[x+1]>R[b+1]&&(B=x,x=b,b=B,B=v,v=c,c=B),R[b+1]>R[l+1]&&(B=b,b=l,l=B,B=c,c=P,P=B),R[x+1]>R[b+1]&&(B=x,x=b,b=B,B=v,v=c,c=B);const oe=(R[x]+u.offsetX)*u.scaleX,ae=(R[x+1]+u.offsetY)*u.scaleY,ue=(R[b]+u.offsetX)*u.scaleX,re=(R[b+1]+u.offsetY)*u.scaleY,pe=(R[l]+u.offsetX)*u.scaleX,H=(R[l+1]+u.offsetY)*u.scaleY;if(ae>=H)return;const W=X[v],ne=X[v+1],j=X[v+2],s=X[c],i=X[c+1],p=X[c+2],f=X[P],C=X[P+1],I=X[P+2],z=Math.round(ae),Q=Math.round(H);let L,N,se,ge,Ae,he,de,K;for(let $=z;$<=Q;$++){if($<re){const te=$<ae?0:(ae-$)/(ae-re);L=oe-(oe-ue)*te,N=W-(W-s)*te,se=ne-(ne-i)*te,ge=j-(j-p)*te}else{let te;$>H?te=1:re===H?te=0:te=(re-$)/(re-H),L=ue-(ue-pe)*te,N=s-(s-f)*te,se=i-(i-C)*te,ge=p-(p-I)*te}let me;$<ae?me=0:$>H?me=1:me=(ae-$)/(ae-H),Ae=oe-(oe-pe)*me,he=W-(W-f)*me,de=ne-(ne-C)*me,K=j-(j-I)*me;const _e=Math.round(Math.min(L,Ae)),Ce=Math.round(Math.max(L,Ae));let ke=E*$+_e*4;for(let te=_e;te<=Ce;te++)me=(L-te)/(L-Ae),me<0?me=0:me>1&&(me=1),D[ke++]=N-(N-he)*me|0,D[ke++]=se-(se-de)*me|0,D[ke++]=ge-(ge-K)*me|0,D[ke++]=255}}function a(o,u,x){const b=u.coords,l=u.colors;let v,c;switch(u.type){case"lattice":const P=u.verticesPerRow,R=Math.floor(b.length/P)-1,X=P-1;for(v=0;v<R;v++){let D=v*P;for(let E=0;E<X;E++,D++)m(o,x,b[D],b[D+1],b[D+P],l[D],l[D+1],l[D+P]),m(o,x,b[D+P+1],b[D+1],b[D+P],l[D+P+1],l[D+1],l[D+P])}break;case"triangles":for(v=0,c=b.length;v<c;v+=3)m(o,x,b[v],b[v+1],b[v+2],l[v],l[v+1],l[v+2]);break;default:throw new Error("illegal figure")}}class S extends k{constructor(u){super(),this._coords=u[2],this._colors=u[3],this._figures=u[4],this._bounds=u[5],this._bbox=u[7],this._background=u[8],this.matrix=null}_createMeshCanvas(u,x,b){const P=Math.floor(this._bounds[0]),R=Math.floor(this._bounds[1]),X=Math.ceil(this._bounds[2])-P,D=Math.ceil(this._bounds[3])-R,E=Math.min(Math.ceil(Math.abs(X*u[0]*1.1)),3e3),B=Math.min(Math.ceil(Math.abs(D*u[1]*1.1)),3e3),oe=X/E,ae=D/B,ue={coords:this._coords,colors:this._colors,offsetX:-P,offsetY:-R,scaleX:1/oe,scaleY:1/ae},re=E+2*2,pe=B+2*2,H=b.getCanvas("mesh",re,pe,!1),W=H.context,ne=W.createImageData(E,B);if(x){const s=ne.data;for(let i=0,p=s.length;i<p;i+=4)s[i]=x[0],s[i+1]=x[1],s[i+2]=x[2],s[i+3]=255}for(const s of this._figures)a(ne,s,ue);return W.putImageData(ne,2,2),{canvas:H.canvas,offsetX:P-2*oe,offsetY:R-2*ae,scaleX:oe,scaleY:ae}}getPattern(u,x,b,l){_(u,this._bbox);let v;if(l===y.SHADING)v=r.Util.singularValueDecompose2dScale((0,h.getCurrentTransform)(u));else if(v=r.Util.singularValueDecompose2dScale(x.baseTransform),this.matrix){const P=r.Util.singularValueDecompose2dScale(this.matrix);v=[v[0]*P[0],v[1]*P[1]]}const c=this._createMeshCanvas(v,l===y.SHADING?null:this._background,x.cachedCanvases);return l!==y.SHADING&&(u.setTransform(...x.baseTransform),this.matrix&&u.transform(...this.matrix)),u.translate(c.offsetX,c.offsetY),u.scale(c.scaleX,c.scaleY),u.createPattern(c.canvas,"no-repeat")}}class A extends k{getPattern(){return"hotpink"}}function M(o){switch(o[0]){case"RadialAxial":return new g(o);case"Mesh":return new S(o);case"Dummy":return new A}throw new Error(`Unknown IR type: ${o[0]}`)}const F={COLORED:1,UNCOLORED:2},T=class T{constructor(u,x,b,l,v){this.operatorList=u[2],this.matrix=u[3]||[1,0,0,1,0,0],this.bbox=u[4],this.xstep=u[5],this.ystep=u[6],this.paintType=u[7],this.tilingType=u[8],this.color=x,this.ctx=b,this.canvasGraphicsFactory=l,this.baseTransform=v}createPatternCanvas(u){const x=this.operatorList,b=this.bbox,l=this.xstep,v=this.ystep,c=this.paintType,P=this.tilingType,R=this.color,X=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+P);const D=b[0],E=b[1],B=b[2],oe=b[3],ae=r.Util.singularValueDecompose2dScale(this.matrix),ue=r.Util.singularValueDecompose2dScale(this.baseTransform),re=[ae[0]*ue[0],ae[1]*ue[1]],pe=this.getSizeAndScale(l,this.ctx.canvas.width,re[0]),H=this.getSizeAndScale(v,this.ctx.canvas.height,re[1]),W=u.cachedCanvases.getCanvas("pattern",pe.size,H.size,!0),ne=W.context,j=X.createCanvasGraphics(ne);j.groupLevel=u.groupLevel,this.setFillAndStrokeStyleToContext(j,c,R);let s=D,i=E,p=B,f=oe;return D<0&&(s=0,p+=Math.abs(D)),E<0&&(i=0,f+=Math.abs(E)),ne.translate(-(pe.scale*s),-(H.scale*i)),j.transform(pe.scale,0,0,H.scale,0,0),ne.save(),this.clipBbox(j,s,i,p,f),j.baseTransform=(0,h.getCurrentTransform)(j.ctx),j.executeOperatorList(x),j.endDrawing(),{canvas:W.canvas,scaleX:pe.scale,scaleY:H.scale,offsetX:s,offsetY:i}}getSizeAndScale(u,x,b){u=Math.abs(u);const l=Math.max(T.MAX_PATTERN_SIZE,x);let v=Math.ceil(u*b);return v>=l?v=l:b=v/u,{scale:b,size:v}}clipBbox(u,x,b,l,v){const c=l-x,P=v-b;u.ctx.rect(x,b,c,P),u.current.updateRectMinMax((0,h.getCurrentTransform)(u.ctx),[x,b,l,v]),u.clip(),u.endPath()}setFillAndStrokeStyleToContext(u,x,b){const l=u.ctx,v=u.current;switch(x){case F.COLORED:const c=this.ctx;l.fillStyle=c.fillStyle,l.strokeStyle=c.strokeStyle,v.fillColor=c.fillStyle,v.strokeColor=c.strokeStyle;break;case F.UNCOLORED:const P=r.Util.makeHexColor(b[0],b[1],b[2]);l.fillStyle=P,l.strokeStyle=P,v.fillColor=P,v.strokeColor=P;break;default:throw new r.FormatError(`Unsupported paint type: ${x}`)}}getPattern(u,x,b,l){let v=b;l!==y.SHADING&&(v=r.Util.transform(v,x.baseTransform),this.matrix&&(v=r.Util.transform(v,this.matrix)));const c=this.createPatternCanvas(x);let P=new DOMMatrix(v);P=P.translate(c.offsetX,c.offsetY),P=P.scale(1/c.scaleX,1/c.scaleY);const R=u.createPattern(c.canvas,"repeat");return R.setTransform(P),R}};Ye(T,"MAX_PATTERN_SIZE",3e3);let q=T;e.TilingPattern=q},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=y,e.convertToRGBA=h,e.grayToRGBA=k;var r=n(1);function h(g){switch(g.kind){case r.ImageKind.GRAYSCALE_1BPP:return y(g);case r.ImageKind.RGB_24BPP:return _(g)}return null}function y({src:g,srcPos:m=0,dest:a,width:S,height:A,nonBlackColor:M=4294967295,inverseDecode:F=!1}){const q=r.FeatureTest.isLittleEndian?4278190080:255,[T,o]=F?[M,q]:[q,M],u=S>>3,x=S&7,b=g.length;a=new Uint32Array(a.buffer);let l=0;for(let v=0;v<A;v++){for(const P=m+u;m<P;m++){const R=m<b?g[m]:255;a[l++]=R&128?o:T,a[l++]=R&64?o:T,a[l++]=R&32?o:T,a[l++]=R&16?o:T,a[l++]=R&8?o:T,a[l++]=R&4?o:T,a[l++]=R&2?o:T,a[l++]=R&1?o:T}if(x===0)continue;const c=m<b?g[m++]:255;for(let P=0;P<x;P++)a[l++]=c&1<<7-P?o:T}return{srcPos:m,destPos:l}}function _({src:g,srcPos:m=0,dest:a,destPos:S=0,width:A,height:M}){let F=0;const q=g.length>>2,T=new Uint32Array(g.buffer,m,q);if(r.FeatureTest.isLittleEndian){for(;F<q-2;F+=3,S+=4){const o=T[F],u=T[F+1],x=T[F+2];a[S]=o|4278190080,a[S+1]=o>>>24|u<<8|4278190080,a[S+2]=u>>>16|x<<16|4278190080,a[S+3]=x>>>8|4278190080}for(let o=F*4,u=g.length;o<u;o+=3)a[S++]=g[o]|g[o+1]<<8|g[o+2]<<16|4278190080}else{for(;F<q-2;F+=3,S+=4){const o=T[F],u=T[F+1],x=T[F+2];a[S]=o|255,a[S+1]=o<<24|u>>>8|255,a[S+2]=u<<16|x>>>16|255,a[S+3]=x<<8|255}for(let o=F*4,u=g.length;o<u;o+=3)a[S++]=g[o]<<24|g[o+1]<<16|g[o+2]<<8|255}return{srcPos:m,destPos:S}}function k(g,m){if(r.FeatureTest.isLittleEndian)for(let a=0,S=g.length;a<S;a++)m[a]=g[a]*65793|4278190080;else for(let a=0,S=g.length;a<S;a++)m[a]=g[a]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(t,e,n)=>{var g,Er,Rr,St;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=n(1);const h={DATA:1,ERROR:2},y={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function _(A){switch(A instanceof Error||typeof A=="object"&&A!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),A.name){case"AbortException":return new r.AbortException(A.message);case"MissingPDFException":return new r.MissingPDFException(A.message);case"PasswordException":return new r.PasswordException(A.message,A.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(A.message,A.status);case"UnknownErrorException":return new r.UnknownErrorException(A.message,A.details);default:return new r.UnknownErrorException(A.message,A.toString())}}class k{constructor(M,F,q){Ee(this,g);this.sourceName=M,this.targetName=F,this.comObj=q,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=T=>{const o=T.data;if(o.targetName!==this.sourceName)return;if(o.stream){ve(this,g,Rr).call(this,o);return}if(o.callback){const x=o.callbackId,b=this.callbackCapabilities[x];if(!b)throw new Error(`Cannot resolve callback ${x}`);if(delete this.callbackCapabilities[x],o.callback===h.DATA)b.resolve(o.data);else if(o.callback===h.ERROR)b.reject(_(o.reason));else throw new Error("Unexpected callback case");return}const u=this.actionHandler[o.action];if(!u)throw new Error(`Unknown action from worker: ${o.action}`);if(o.callbackId){const x=this.sourceName,b=o.sourceName;new Promise(function(l){l(u(o.data))}).then(function(l){q.postMessage({sourceName:x,targetName:b,callback:h.DATA,callbackId:o.callbackId,data:l})},function(l){q.postMessage({sourceName:x,targetName:b,callback:h.ERROR,callbackId:o.callbackId,reason:_(l)})});return}if(o.streamId){ve(this,g,Er).call(this,o);return}u(o.data)},q.addEventListener("message",this._onComObjOnMessage)}on(M,F){const q=this.actionHandler;if(q[M])throw new Error(`There is already an actionName called "${M}"`);q[M]=F}send(M,F,q){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:M,data:F},q)}sendWithPromise(M,F,q){const T=this.callbackId++,o=new r.PromiseCapability;this.callbackCapabilities[T]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:M,callbackId:T,data:F},q)}catch(u){o.reject(u)}return o.promise}sendWithStream(M,F,q,T){const o=this.streamId++,u=this.sourceName,x=this.targetName,b=this.comObj;return new ReadableStream({start:l=>{const v=new r.PromiseCapability;return this.streamControllers[o]={controller:l,startCall:v,pullCall:null,cancelCall:null,isClosed:!1},b.postMessage({sourceName:u,targetName:x,action:M,streamId:o,data:F,desiredSize:l.desiredSize},T),v.promise},pull:l=>{const v=new r.PromiseCapability;return this.streamControllers[o].pullCall=v,b.postMessage({sourceName:u,targetName:x,stream:y.PULL,streamId:o,desiredSize:l.desiredSize}),v.promise},cancel:l=>{(0,r.assert)(l instanceof Error,"cancel must have a valid reason");const v=new r.PromiseCapability;return this.streamControllers[o].cancelCall=v,this.streamControllers[o].isClosed=!0,b.postMessage({sourceName:u,targetName:x,stream:y.CANCEL,streamId:o,reason:_(l)}),v.promise}},q)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}g=new WeakSet,Er=function(M){const F=M.streamId,q=this.sourceName,T=M.sourceName,o=this.comObj,u=this,x=this.actionHandler[M.action],b={enqueue(l,v=1,c){if(this.isCancelled)return;const P=this.desiredSize;this.desiredSize-=v,P>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),o.postMessage({sourceName:q,targetName:T,stream:y.ENQUEUE,streamId:F,chunk:l},c)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:q,targetName:T,stream:y.CLOSE,streamId:F}),delete u.streamSinks[F])},error(l){(0,r.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:q,targetName:T,stream:y.ERROR,streamId:F,reason:_(l)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:M.desiredSize,ready:null};b.sinkCapability.resolve(),b.ready=b.sinkCapability.promise,this.streamSinks[F]=b,new Promise(function(l){l(x(M.data,b))}).then(function(){o.postMessage({sourceName:q,targetName:T,stream:y.START_COMPLETE,streamId:F,success:!0})},function(l){o.postMessage({sourceName:q,targetName:T,stream:y.START_COMPLETE,streamId:F,reason:_(l)})})},Rr=function(M){const F=M.streamId,q=this.sourceName,T=M.sourceName,o=this.comObj,u=this.streamControllers[F],x=this.streamSinks[F];switch(M.stream){case y.START_COMPLETE:M.success?u.startCall.resolve():u.startCall.reject(_(M.reason));break;case y.PULL_COMPLETE:M.success?u.pullCall.resolve():u.pullCall.reject(_(M.reason));break;case y.PULL:if(!x){o.postMessage({sourceName:q,targetName:T,stream:y.PULL_COMPLETE,streamId:F,success:!0});break}x.desiredSize<=0&&M.desiredSize>0&&x.sinkCapability.resolve(),x.desiredSize=M.desiredSize,new Promise(function(b){var l;b((l=x.onPull)==null?void 0:l.call(x))}).then(function(){o.postMessage({sourceName:q,targetName:T,stream:y.PULL_COMPLETE,streamId:F,success:!0})},function(b){o.postMessage({sourceName:q,targetName:T,stream:y.PULL_COMPLETE,streamId:F,reason:_(b)})});break;case y.ENQUEUE:if((0,r.assert)(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(M.chunk);break;case y.CLOSE:if((0,r.assert)(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),ve(this,g,St).call(this,u,F);break;case y.ERROR:(0,r.assert)(u,"error should have stream controller"),u.controller.error(_(M.reason)),ve(this,g,St).call(this,u,F);break;case y.CANCEL_COMPLETE:M.success?u.cancelCall.resolve():u.cancelCall.reject(_(M.reason)),ve(this,g,St).call(this,u,F);break;case y.CANCEL:if(!x)break;new Promise(function(b){var l;b((l=x.onCancel)==null?void 0:l.call(x,_(M.reason)))}).then(function(){o.postMessage({sourceName:q,targetName:T,stream:y.CANCEL_COMPLETE,streamId:F,success:!0})},function(b){o.postMessage({sourceName:q,targetName:T,stream:y.CANCEL_COMPLETE,streamId:F,reason:_(b)})}),x.sinkCapability.reject(_(M.reason)),x.isCancelled=!0,delete this.streamSinks[F];break;default:throw new Error("Unexpected stream case")}},St=async function(M,F){var q,T,o;await Promise.allSettled([(q=M.startCall)==null?void 0:q.promise,(T=M.pullCall)==null?void 0:T.promise,(o=M.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[F]},e.MessageHandler=k},(t,e,n)=>{var y,_;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(1);class h{constructor({parsedData:g,rawData:m}){Ee(this,y);Ee(this,_);Re(this,y,g),Re(this,_,m)}getRaw(){return w(this,_)}get(g){return w(this,y).get(g)??null}getAll(){return(0,r.objectFromMap)(w(this,y))}has(g){return w(this,y).has(g)}}y=new WeakMap,_=new WeakMap,e.Metadata=h},(t,e,n)=>{var g,m,a,S,A,M,Kt;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=n(1),h=n(8);const y=Symbol("INTERNAL");class _{constructor(T,o){Ee(this,g,!0);this.name=T,this.intent=o}get visible(){return w(this,g)}_setVisible(T,o){T!==y&&(0,r.unreachable)("Internal method `_setVisible` called."),Re(this,g,o)}}g=new WeakMap;class k{constructor(T){Ee(this,M);Ee(this,m,null);Ee(this,a,new Map);Ee(this,S,null);Ee(this,A,null);if(this.name=null,this.creator=null,T!==null){this.name=T.name,this.creator=T.creator,Re(this,A,T.order);for(const o of T.groups)w(this,a).set(o.id,new _(o.name,o.intent));if(T.baseState==="OFF")for(const o of w(this,a).values())o._setVisible(y,!1);for(const o of T.on)w(this,a).get(o)._setVisible(y,!0);for(const o of T.off)w(this,a).get(o)._setVisible(y,!1);Re(this,S,this.getHash())}}isVisible(T){if(w(this,a).size===0)return!0;if(!T)return(0,r.warn)("Optional content group not defined."),!0;if(T.type==="OCG")return w(this,a).has(T.id)?w(this,a).get(T.id).visible:((0,r.warn)(`Optional content group not found: ${T.id}`),!0);if(T.type==="OCMD"){if(T.expression)return ve(this,M,Kt).call(this,T.expression);if(!T.policy||T.policy==="AnyOn"){for(const o of T.ids){if(!w(this,a).has(o))return(0,r.warn)(`Optional content group not found: ${o}`),!0;if(w(this,a).get(o).visible)return!0}return!1}else if(T.policy==="AllOn"){for(const o of T.ids){if(!w(this,a).has(o))return(0,r.warn)(`Optional content group not found: ${o}`),!0;if(!w(this,a).get(o).visible)return!1}return!0}else if(T.policy==="AnyOff"){for(const o of T.ids){if(!w(this,a).has(o))return(0,r.warn)(`Optional content group not found: ${o}`),!0;if(!w(this,a).get(o).visible)return!0}return!1}else if(T.policy==="AllOff"){for(const o of T.ids){if(!w(this,a).has(o))return(0,r.warn)(`Optional content group not found: ${o}`),!0;if(w(this,a).get(o).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${T.policy}.`),!0}return(0,r.warn)(`Unknown group type ${T.type}.`),!0}setVisibility(T,o=!0){if(!w(this,a).has(T)){(0,r.warn)(`Optional content group not found: ${T}`);return}w(this,a).get(T)._setVisible(y,!!o),Re(this,m,null)}get hasInitialVisibility(){return w(this,S)===null||this.getHash()===w(this,S)}getOrder(){return w(this,a).size?w(this,A)?w(this,A).slice():[...w(this,a).keys()]:null}getGroups(){return w(this,a).size>0?(0,r.objectFromMap)(w(this,a)):null}getGroup(T){return w(this,a).get(T)||null}getHash(){if(w(this,m)!==null)return w(this,m);const T=new h.MurmurHash3_64;for(const[o,u]of w(this,a))T.update(`${o}:${u.visible}`);return Re(this,m,T.hexdigest())}}m=new WeakMap,a=new WeakMap,S=new WeakMap,A=new WeakMap,M=new WeakSet,Kt=function(T){const o=T.length;if(o<2)return!0;const u=T[0];for(let x=1;x<o;x++){const b=T[x];let l;if(Array.isArray(b))l=ve(this,M,Kt).call(this,b);else if(w(this,a).has(b))l=w(this,a).get(b).visible;else return(0,r.warn)(`Optional content group not found: ${b}`),!0;switch(u){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return u==="And"},e.OptionalContentConfig=k},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=n(1),h=n(6);class y{constructor({length:m,initialData:a,progressiveDone:S=!1,contentDispositionFilename:A=null,disableRange:M=!1,disableStream:F=!1},q){if((0,r.assert)(q,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=S,this._contentDispositionFilename=A,(a==null?void 0:a.length)>0){const T=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(T)}this._pdfDataRangeTransport=q,this._isStreamingSupported=!F,this._isRangeSupported=!M,this._contentLength=m,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((T,o)=>{this._onReceiveData({begin:T,chunk:o})}),this._pdfDataRangeTransport.addProgressListener((T,o)=>{this._onProgress({loaded:T,total:o})}),this._pdfDataRangeTransport.addProgressiveReadListener(T=>{this._onReceiveData({chunk:T})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:m,chunk:a}){const S=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;if(m===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(S):this._queuedChunks.push(S);else{const A=this._rangeReaders.some(function(M){return M._begin!==m?!1:(M._enqueue(S),!0)});(0,r.assert)(A,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}_onProgress(m){var a,S,A,M;m.total===void 0?(S=(a=this._rangeReaders[0])==null?void 0:a.onProgress)==null||S.call(a,{loaded:m.loaded}):(M=(A=this._fullRequestReader)==null?void 0:A.onProgress)==null||M.call(A,{loaded:m.loaded,total:m.total})}_onProgressiveDone(){var m;(m=this._fullRequestReader)==null||m.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(m){const a=this._rangeReaders.indexOf(m);a>=0&&this._rangeReaders.splice(a,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const m=this._queuedChunks;return this._queuedChunks=null,new _(this,m,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(m,a){if(a<=this._progressiveDataLength)return null;const S=new k(this,m,a);return this._pdfDataRangeTransport.requestDataRange(m,a),this._rangeReaders.push(S),S}cancelAllRequests(m){var a;(a=this._fullRequestReader)==null||a.cancel(m);for(const S of this._rangeReaders.slice(0))S.cancel(m);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=y;class _{constructor(m,a,S=!1,A=null){this._stream=m,this._done=S||!1,this._filename=(0,h.isPdfFile)(A)?A:null,this._queuedChunks=a||[],this._loaded=0;for(const M of this._queuedChunks)this._loaded+=M.byteLength;this._requests=[],this._headersReady=Promise.resolve(),m._fullRequestReader=this,this.onProgress=null}_enqueue(m){this._done||(this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunks.push(m),this._loaded+=m.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const m=new r.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class k{constructor(m,a,S){this._stream=m,this._begin=a,this._end=S,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(m){if(!this._done){if(this._requests.length===0)this._queuedChunk=m;else{this._requests.shift().resolve({value:m,done:!1});for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};const m=new r.PromiseCapability;return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=n(1),h=n(20);function y(S,A,M){return{method:"GET",headers:S,signal:M.signal,mode:"cors",credentials:A?"include":"same-origin",redirect:"follow"}}function _(S){const A=new Headers;for(const M in S){const F=S[M];F!==void 0&&A.append(M,F)}return A}function k(S){return S instanceof Uint8Array?S.buffer:S instanceof ArrayBuffer?S:((0,r.warn)(`getArrayBuffer - unexpected data format: ${S}`),new Uint8Array(S).buffer)}class g{constructor(A){this.source=A,this.isHttp=/^https?:/i.test(A.url),this.httpHeaders=this.isHttp&&A.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var A;return((A=this._fullRequestReader)==null?void 0:A._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new m(this),this._fullRequestReader}getRangeReader(A,M){if(M<=this._progressiveDataLength)return null;const F=new a(this,A,M);return this._rangeRequestReaders.push(F),F}cancelAllRequests(A){var M;(M=this._fullRequestReader)==null||M.cancel(A);for(const F of this._rangeRequestReaders.slice(0))F.cancel(A)}}e.PDFFetchStream=g;class m{constructor(A){this._stream=A,this._reader=null,this._loaded=0,this._filename=null;const M=A.source;this._withCredentials=M.withCredentials||!1,this._contentLength=M.length,this._headersCapability=new r.PromiseCapability,this._disableRange=M.disableRange||!1,this._rangeChunkSize=M.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!M.disableStream,this._isRangeSupported=!M.disableRange,this._headers=_(this._stream.httpHeaders);const F=M.url;fetch(F,y(this._headers,this._withCredentials,this._abortController)).then(q=>{if(!(0,h.validateResponseStatus)(q.status))throw(0,h.createResponseStatusError)(q.status,F);this._reader=q.body.getReader(),this._headersCapability.resolve();const T=x=>q.headers.get(x),{allowRangeRequests:o,suggestedLength:u}=(0,h.validateRangeRequestCapabilities)({getResponseHeader:T,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=u||this._contentLength,this._filename=(0,h.extractFilenameFromHeader)(T),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var F;await this._headersCapability.promise;const{value:A,done:M}=await this._reader.read();return M?{value:A,done:M}:(this._loaded+=A.byteLength,(F=this.onProgress)==null||F.call(this,{loaded:this._loaded,total:this._contentLength}),{value:k(A),done:!1})}cancel(A){var M;(M=this._reader)==null||M.cancel(A),this._abortController.abort()}}class a{constructor(A,M,F){this._stream=A,this._reader=null,this._loaded=0;const q=A.source;this._withCredentials=q.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!q.disableStream,this._abortController=new AbortController,this._headers=_(this._stream.httpHeaders),this._headers.append("Range",`bytes=${M}-${F-1}`);const T=q.url;fetch(T,y(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!(0,h.validateResponseStatus)(o.status))throw(0,h.createResponseStatusError)(o.status,T);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var F;await this._readCapability.promise;const{value:A,done:M}=await this._reader.read();return M?{value:A,done:M}:(this._loaded+=A.byteLength,(F=this.onProgress)==null||F.call(this,{loaded:this._loaded}),{value:k(A),done:!1})}cancel(A){var M;(M=this._reader)==null||M.cancel(A),this._abortController.abort()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=g,e.extractFilenameFromHeader=k,e.validateRangeRequestCapabilities=_,e.validateResponseStatus=m;var r=n(1),h=n(21),y=n(6);function _({getResponseHeader:a,isHttp:S,rangeChunkSize:A,disableRange:M}){const F={allowRangeRequests:!1,suggestedLength:void 0},q=parseInt(a("Content-Length"),10);return!Number.isInteger(q)||(F.suggestedLength=q,q<=2*A)||M||!S||a("Accept-Ranges")!=="bytes"||(a("Content-Encoding")||"identity")!=="identity"||(F.allowRangeRequests=!0),F}function k(a){const S=a("Content-Disposition");if(S){let A=(0,h.getFilenameFromContentDispositionHeader)(S);if(A.includes("%"))try{A=decodeURIComponent(A)}catch{}if((0,y.isPdfFile)(A))return A}return null}function g(a,S){return a===404||a===0&&S.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+S+'".'):new r.UnexpectedResponseException(`Unexpected server response (${a}) while retrieving PDF "${S}".`,a)}function m(a){return a===200||a===206}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=h;var r=n(1);function h(y){let _=!0,k=g("filename\\*","i").exec(y);if(k){k=k[1];let q=A(k);return q=unescape(q),q=M(q),q=F(q),a(q)}if(k=S(y),k){const q=F(k);return a(q)}if(k=g("filename","i").exec(y),k){k=k[1];let q=A(k);return q=F(q),a(q)}function g(q,T){return new RegExp("(?:^|;)\\s*"+q+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',T)}function m(q,T){if(q){if(!/^[\x00-\xFF]+$/.test(T))return T;try{const o=new TextDecoder(q,{fatal:!0}),u=(0,r.stringToBytes)(T);T=o.decode(u),_=!1}catch{}}return T}function a(q){return _&&/[\x80-\xff]/.test(q)&&(q=m("utf-8",q),_&&(q=m("iso-8859-1",q))),q}function S(q){const T=[];let o;const u=g("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(o=u.exec(q))!==null;){let[,b,l,v]=o;if(b=parseInt(b,10),b in T){if(b===0)break;continue}T[b]=[l,v]}const x=[];for(let b=0;b<T.length&&b in T;++b){let[l,v]=T[b];v=A(v),l&&(v=unescape(v),b===0&&(v=M(v))),x.push(v)}return x.join("")}function A(q){if(q.startsWith('"')){const T=q.slice(1).split('\\"');for(let o=0;o<T.length;++o){const u=T[o].indexOf('"');u!==-1&&(T[o]=T[o].slice(0,u),T.length=o+1),T[o]=T[o].replaceAll(/\\(.)/g,"$1")}q=T.join('"')}return q}function M(q){const T=q.indexOf("'");if(T===-1)return q;const o=q.slice(0,T),x=q.slice(T+1).replace(/^[^']*'/,"");return m(o,x)}function F(q){return!q.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(q)?q:q.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(T,o,u,x){if(u==="q"||u==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,l){return String.fromCharCode(parseInt(l,16))}),m(o,x);try{x=atob(x)}catch{}return m(o,x)})}return""}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=n(1),h=n(20);const y=200,_=206;function k(A){const M=A.response;return typeof M!="string"?M:(0,r.stringToBytes)(M).buffer}class g{constructor(M,F={}){this.url=M,this.isHttp=/^https?:/i.test(M),this.httpHeaders=this.isHttp&&F.httpHeaders||Object.create(null),this.withCredentials=F.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(M,F,q){const T={begin:M,end:F};for(const o in q)T[o]=q[o];return this.request(T)}requestFull(M){return this.request(M)}request(M){const F=new XMLHttpRequest,q=this.currXhrId++,T=this.pendingRequests[q]={xhr:F};F.open("GET",this.url),F.withCredentials=this.withCredentials;for(const o in this.httpHeaders){const u=this.httpHeaders[o];u!==void 0&&F.setRequestHeader(o,u)}return this.isHttp&&"begin"in M&&"end"in M?(F.setRequestHeader("Range",`bytes=${M.begin}-${M.end-1}`),T.expectedStatus=_):T.expectedStatus=y,F.responseType="arraybuffer",M.onError&&(F.onerror=function(o){M.onError(F.status)}),F.onreadystatechange=this.onStateChange.bind(this,q),F.onprogress=this.onProgress.bind(this,q),T.onHeadersReceived=M.onHeadersReceived,T.onDone=M.onDone,T.onError=M.onError,T.onProgress=M.onProgress,F.send(null),q}onProgress(M,F){var T;const q=this.pendingRequests[M];q&&((T=q.onProgress)==null||T.call(q,F))}onStateChange(M,F){var b,l,v;const q=this.pendingRequests[M];if(!q)return;const T=q.xhr;if(T.readyState>=2&&q.onHeadersReceived&&(q.onHeadersReceived(),delete q.onHeadersReceived),T.readyState!==4||!(M in this.pendingRequests))return;if(delete this.pendingRequests[M],T.status===0&&this.isHttp){(b=q.onError)==null||b.call(q,T.status);return}const o=T.status||y;if(!(o===y&&q.expectedStatus===_)&&o!==q.expectedStatus){(l=q.onError)==null||l.call(q,T.status);return}const x=k(T);if(o===_){const c=T.getResponseHeader("Content-Range"),P=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);q.onDone({begin:parseInt(P[1],10),chunk:x})}else x?q.onDone({begin:0,chunk:x}):(v=q.onError)==null||v.call(q,T.status)}getRequestXhr(M){return this.pendingRequests[M].xhr}isPendingRequest(M){return M in this.pendingRequests}abortRequest(M){const F=this.pendingRequests[M].xhr;delete this.pendingRequests[M],F.abort()}}class m{constructor(M){this._source=M,this._manager=new g(M.url,{httpHeaders:M.httpHeaders,withCredentials:M.withCredentials}),this._rangeChunkSize=M.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(M){const F=this._rangeRequestReaders.indexOf(M);F>=0&&this._rangeRequestReaders.splice(F,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._manager,this._source),this._fullRequestReader}getRangeReader(M,F){const q=new S(this._manager,M,F);return q.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(q),q}cancelAllRequests(M){var F;(F=this._fullRequestReader)==null||F.cancel(M);for(const q of this._rangeRequestReaders.slice(0))q.cancel(M)}}e.PDFNetworkStream=m;class a{constructor(M,F){this._manager=M;const q={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=F.url,this._fullRequestId=M.requestFull(q),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=F.disableRange||!1,this._contentLength=F.length,this._rangeChunkSize=F.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const M=this._fullRequestId,F=this._manager.getRequestXhr(M),q=u=>F.getResponseHeader(u),{allowRangeRequests:T,suggestedLength:o}=(0,h.validateRangeRequestCapabilities)({getResponseHeader:q,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});T&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,h.extractFilenameFromHeader)(q),this._isRangeSupported&&this._manager.abortRequest(M),this._headersReceivedCapability.resolve()}_onDone(M){if(M&&(this._requests.length>0?this._requests.shift().resolve({value:M.chunk,done:!1}):this._cachedChunks.push(M.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(M){this._storedError=(0,h.createResponseStatusError)(M,this._url),this._headersReceivedCapability.reject(this._storedError);for(const F of this._requests)F.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(M){var F;(F=this.onProgress)==null||F.call(this,{loaded:M.loaded,total:M.lengthComputable?M.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const M=new r.PromiseCapability;return this._requests.push(M),M.promise}cancel(M){this._done=!0,this._headersReceivedCapability.reject(M);for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class S{constructor(M,F,q){this._manager=M;const T={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=M.url,this._requestId=M.requestRange(F,q,T),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var M;(M=this.onClosed)==null||M.call(this,this)}_onDone(M){const F=M.chunk;this._requests.length>0?this._requests.shift().resolve({value:F,done:!1}):this._queuedChunk=F,this._done=!0;for(const q of this._requests)q.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(M){this._storedError=(0,h.createResponseStatusError)(M,this._url);for(const F of this._requests)F.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(M){var F;this.isStreamingSupported||(F=this.onProgress)==null||F.call(this,{loaded:M.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const F=this._queuedChunk;return this._queuedChunk=null,{value:F,done:!1}}if(this._done)return{value:void 0,done:!0};const M=new r.PromiseCapability;return this._requests.push(M),M.promise}cancel(M){this._done=!0;for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=n(1),h=n(20);const y=/^file:\/\/\/[a-zA-Z]:\//;function _(q){const T=require$$2,o=T.parse(q);return o.protocol==="file:"||o.host?o:/^[a-z]:[/\\]/i.test(q)?T.parse(`file:///${q}`):(o.host||(o.protocol="file:"),o)}class k{constructor(T){this.source=T,this.url=_(T.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&T.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var T;return((T=this._fullRequestReader)==null?void 0:T._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new M(this):new S(this),this._fullRequestReader}getRangeReader(T,o){if(o<=this._progressiveDataLength)return null;const u=this.isFsUrl?new F(this,T,o):new A(this,T,o);return this._rangeRequestReaders.push(u),u}cancelAllRequests(T){var o;(o=this._fullRequestReader)==null||o.cancel(T);for(const u of this._rangeRequestReaders.slice(0))u.cancel(T)}}e.PDFNodeStream=k;class g{constructor(T){this._url=T.url,this._done=!1,this._storedError=null,this.onProgress=null;const o=T.source;this._contentLength=o.length,this._loaded=0,this._filename=null,this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var u;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const T=this._readableStream.read();return T===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=T.length,(u=this.onProgress)==null||u.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(T).buffer,done:!1})}cancel(T){if(!this._readableStream){this._error(T);return}this._readableStream.destroy(T)}_error(T){this._storedError=T,this._readCapability.resolve()}_setReadableStream(T){this._readableStream=T,T.on("readable",()=>{this._readCapability.resolve()}),T.on("end",()=>{T.destroy(),this._done=!0,this._readCapability.resolve()}),T.on("error",o=>{this._error(o)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class m{constructor(T){this._url=T.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;const o=T.source;this._isStreamingSupported=!o.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var u;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const T=this._readableStream.read();return T===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=T.length,(u=this.onProgress)==null||u.call(this,{loaded:this._loaded}),{value:new Uint8Array(T).buffer,done:!1})}cancel(T){if(!this._readableStream){this._error(T);return}this._readableStream.destroy(T)}_error(T){this._storedError=T,this._readCapability.resolve()}_setReadableStream(T){this._readableStream=T,T.on("readable",()=>{this._readCapability.resolve()}),T.on("end",()=>{T.destroy(),this._done=!0,this._readCapability.resolve()}),T.on("error",o=>{this._error(o)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function a(q,T){return{protocol:q.protocol,auth:q.auth,host:q.hostname,port:q.port,path:q.path,method:"GET",headers:T}}class S extends g{constructor(T){super(T);const o=u=>{if(u.statusCode===404){const v=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=v,this._headersCapability.reject(v);return}this._headersCapability.resolve(),this._setReadableStream(u);const x=v=>this._readableStream.headers[v.toLowerCase()],{allowRangeRequests:b,suggestedLength:l}=(0,h.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:T.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=b,this._contentLength=l||this._contentLength,this._filename=(0,h.extractFilenameFromHeader)(x)};if(this._request=null,this._url.protocol==="http:"){const u=requireStreamHttp();this._request=u.request(a(this._url,T.httpHeaders),o)}else{const u=requireHttpsBrowserify();this._request=u.request(a(this._url,T.httpHeaders),o)}this._request.on("error",u=>{this._storedError=u,this._headersCapability.reject(u)}),this._request.end()}}class A extends m{constructor(T,o,u){super(T),this._httpHeaders={};for(const b in T.httpHeaders){const l=T.httpHeaders[b];l!==void 0&&(this._httpHeaders[b]=l)}this._httpHeaders.Range=`bytes=${o}-${u-1}`;const x=b=>{if(b.statusCode===404){const l=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(b)};if(this._request=null,this._url.protocol==="http:"){const b=requireStreamHttp();this._request=b.request(a(this._url,this._httpHeaders),x)}else{const b=requireHttpsBrowserify();this._request=b.request(a(this._url,this._httpHeaders),x)}this._request.on("error",b=>{this._storedError=b}),this._request.end()}}class M extends g{constructor(T){super(T);let o=decodeURIComponent(this._url.path);y.test(this._url.href)&&(o=o.replace(/^\//,""));const u=require$$0$1;u.lstat(o,(x,b)=>{if(x){x.code==="ENOENT"&&(x=new r.MissingPDFException(`Missing PDF "${o}".`)),this._storedError=x,this._headersCapability.reject(x);return}this._contentLength=b.size,this._setReadableStream(u.createReadStream(o)),this._headersCapability.resolve()})}}class F extends m{constructor(T,o,u){super(T);let x=decodeURIComponent(this._url.path);y.test(this._url.href)&&(x=x.replace(/^\//,""));const b=require$$0$1;this._setReadableStream(b.createReadStream(x,{start:o,end:u-1}))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=n(6),h=n(1);const y={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},_="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/1999/xlink",g=["butt","round","square"],m=["miter","round","bevel"],a=function(b,l="",v=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!v)return URL.createObjectURL(new Blob([b],{type:l}));const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let P=`data:${l};base64,`;for(let R=0,X=b.length;R<X;R+=3){const D=b[R]&255,E=b[R+1]&255,B=b[R+2]&255,oe=D>>2,ae=(D&3)<<4|E>>4,ue=R+1<X?(E&15)<<2|B>>6:64,re=R+2<X?B&63:64;P+=c[oe]+c[ae]+c[ue]+c[re]}return P},S=function(){const b=new Uint8Array([137,80,78,71,13,10,26,10]),l=12,v=new Int32Array(256);for(let B=0;B<256;B++){let oe=B;for(let ae=0;ae<8;ae++)oe=oe&1?3988292384^oe>>1&2147483647:oe>>1&2147483647;v[B]=oe}function c(B,oe,ae){let ue=-1;for(let re=oe;re<ae;re++){const pe=(ue^B[re])&255,H=v[pe];ue=ue>>>8^H}return ue^-1}function P(B,oe,ae,ue){let re=ue;const pe=oe.length;ae[re]=pe>>24&255,ae[re+1]=pe>>16&255,ae[re+2]=pe>>8&255,ae[re+3]=pe&255,re+=4,ae[re]=B.charCodeAt(0)&255,ae[re+1]=B.charCodeAt(1)&255,ae[re+2]=B.charCodeAt(2)&255,ae[re+3]=B.charCodeAt(3)&255,re+=4,ae.set(oe,re),re+=oe.length;const H=c(ae,ue+4,re);ae[re]=H>>24&255,ae[re+1]=H>>16&255,ae[re+2]=H>>8&255,ae[re+3]=H&255}function R(B,oe,ae){let ue=1,re=0;for(let pe=oe;pe<ae;++pe)ue=(ue+(B[pe]&255))%65521,re=(re+ue)%65521;return re<<16|ue}function X(B){if(!h.isNodeJS)return D(B);try{const oe=parseInt(process$1.versions.node)>=8?B:Buffer.from(B),ae=requireLib().deflateSync(oe,{level:9});return ae instanceof Uint8Array?ae:new Uint8Array(ae)}catch(oe){(0,h.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+oe)}return D(B)}function D(B){let oe=B.length;const ae=65535,ue=Math.ceil(oe/ae),re=new Uint8Array(2+oe+ue*5+4);let pe=0;re[pe++]=120,re[pe++]=156;let H=0;for(;oe>ae;)re[pe++]=0,re[pe++]=255,re[pe++]=255,re[pe++]=0,re[pe++]=0,re.set(B.subarray(H,H+ae),pe),pe+=ae,H+=ae,oe-=ae;re[pe++]=1,re[pe++]=oe&255,re[pe++]=oe>>8&255,re[pe++]=~oe&65535&255,re[pe++]=(~oe&65535)>>8&255,re.set(B.subarray(H),pe),pe+=B.length-H;const W=R(B,0,B.length);return re[pe++]=W>>24&255,re[pe++]=W>>16&255,re[pe++]=W>>8&255,re[pe++]=W&255,re}function E(B,oe,ae,ue){const re=B.width,pe=B.height;let H,W,ne;const j=B.data;switch(oe){case h.ImageKind.GRAYSCALE_1BPP:W=0,H=1,ne=re+7>>3;break;case h.ImageKind.RGB_24BPP:W=2,H=8,ne=re*3;break;case h.ImageKind.RGBA_32BPP:W=6,H=8,ne=re*4;break;default:throw new Error("invalid format")}const s=new Uint8Array((1+ne)*pe);let i=0,p=0;for(let L=0;L<pe;++L)s[i++]=0,s.set(j.subarray(p,p+ne),i),p+=ne,i+=ne;if(oe===h.ImageKind.GRAYSCALE_1BPP&&ue){i=0;for(let L=0;L<pe;L++){i++;for(let N=0;N<ne;N++)s[i++]^=255}}const f=new Uint8Array([re>>24&255,re>>16&255,re>>8&255,re&255,pe>>24&255,pe>>16&255,pe>>8&255,pe&255,H,W,0,0,0]),C=X(s),I=b.length+l*3+f.length+C.length,z=new Uint8Array(I);let Q=0;return z.set(b,Q),Q+=b.length,P("IHDR",f,z,Q),Q+=l+f.length,P("IDATA",C,z,Q),Q+=l+C.length,P("IEND",new Uint8Array(0),z,Q),a(z,"image/png",ae)}return function(oe,ae,ue){const re=oe.kind===void 0?h.ImageKind.GRAYSCALE_1BPP:oe.kind;return E(oe,re,ae,ue)}}();class A{constructor(){this.fontSizeScale=1,this.fontWeight=y.fontWeight,this.fontSize=0,this.textMatrix=h.IDENTITY_MATRIX,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=h.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=y.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(l,v){this.x=l,this.y=v}}function M(b){let l=[];const v=[];for(const c of b){if(c.fn==="save"){l.push({fnId:92,fn:"group",items:[]}),v.push(l),l=l.at(-1).items;continue}c.fn==="restore"?l=v.pop():l.push(c)}return l}function F(b){if(Number.isInteger(b))return b.toString();const l=b.toFixed(10);let v=l.length-1;if(l[v]!=="0")return l;do v--;while(l[v]==="0");return l.substring(0,l[v]==="."?v:v+1)}function q(b){if(b[4]===0&&b[5]===0){if(b[1]===0&&b[2]===0)return b[0]===1&&b[3]===1?"":`scale(${F(b[0])} ${F(b[3])})`;if(b[0]===b[3]&&b[1]===-b[2]){const l=Math.acos(b[0])*180/Math.PI;return`rotate(${F(l)})`}}else if(b[0]===1&&b[1]===0&&b[2]===0&&b[3]===1)return`translate(${F(b[4])} ${F(b[5])})`;return`matrix(${F(b[0])} ${F(b[1])} ${F(b[2])} ${F(b[3])} ${F(b[4])} ${F(b[5])})`}let T=0,o=0,u=0;class x{constructor(l,v,c=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new A,this.transformMatrix=h.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=l,this.objs=v,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!c,this._operatorIdMapping=[];for(const P in h.OPS)this._operatorIdMapping[h.OPS[P]]=P}getObject(l,v=null){return typeof l=="string"?l.startsWith("g_")?this.commonObjs.get(l):this.objs.get(l):v}save(){this.transformStack.push(this.transformMatrix);const l=this.current;this.extraStack.push(l),this.current=l.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(l){this.save(),this.executeOpTree(l),this.restore()}loadDependencies(l){const v=l.fnArray,c=l.argsArray;for(let P=0,R=v.length;P<R;P++)if(v[P]===h.OPS.dependency)for(const X of c[P]){const D=X.startsWith("g_")?this.commonObjs:this.objs,E=new Promise(B=>{D.get(X,B)});this.current.dependencies.push(E)}return Promise.all(this.current.dependencies)}transform(l,v,c,P,R,X){const D=[l,v,c,P,R,X];this.transformMatrix=h.Util.transform(this.transformMatrix,D),this.tgrp=null}getSVG(l,v){this.viewport=v;const c=this._initialize(v);return this.loadDependencies(l).then(()=>(this.transformMatrix=h.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(l)),c))}convertOpList(l){const v=this._operatorIdMapping,c=l.argsArray,P=l.fnArray,R=[];for(let X=0,D=P.length;X<D;X++){const E=P[X];R.push({fnId:E,fn:v[E],args:c[X]})}return M(R)}executeOpTree(l){for(const v of l){const c=v.fn,P=v.fnId,R=v.args;switch(P|0){case h.OPS.beginText:this.beginText();break;case h.OPS.dependency:break;case h.OPS.setLeading:this.setLeading(R);break;case h.OPS.setLeadingMoveText:this.setLeadingMoveText(R[0],R[1]);break;case h.OPS.setFont:this.setFont(R);break;case h.OPS.showText:this.showText(R[0]);break;case h.OPS.showSpacedText:this.showText(R[0]);break;case h.OPS.endText:this.endText();break;case h.OPS.moveText:this.moveText(R[0],R[1]);break;case h.OPS.setCharSpacing:this.setCharSpacing(R[0]);break;case h.OPS.setWordSpacing:this.setWordSpacing(R[0]);break;case h.OPS.setHScale:this.setHScale(R[0]);break;case h.OPS.setTextMatrix:this.setTextMatrix(R[0],R[1],R[2],R[3],R[4],R[5]);break;case h.OPS.setTextRise:this.setTextRise(R[0]);break;case h.OPS.setTextRenderingMode:this.setTextRenderingMode(R[0]);break;case h.OPS.setLineWidth:this.setLineWidth(R[0]);break;case h.OPS.setLineJoin:this.setLineJoin(R[0]);break;case h.OPS.setLineCap:this.setLineCap(R[0]);break;case h.OPS.setMiterLimit:this.setMiterLimit(R[0]);break;case h.OPS.setFillRGBColor:this.setFillRGBColor(R[0],R[1],R[2]);break;case h.OPS.setStrokeRGBColor:this.setStrokeRGBColor(R[0],R[1],R[2]);break;case h.OPS.setStrokeColorN:this.setStrokeColorN(R);break;case h.OPS.setFillColorN:this.setFillColorN(R);break;case h.OPS.shadingFill:this.shadingFill(R[0]);break;case h.OPS.setDash:this.setDash(R[0],R[1]);break;case h.OPS.setRenderingIntent:this.setRenderingIntent(R[0]);break;case h.OPS.setFlatness:this.setFlatness(R[0]);break;case h.OPS.setGState:this.setGState(R[0]);break;case h.OPS.fill:this.fill();break;case h.OPS.eoFill:this.eoFill();break;case h.OPS.stroke:this.stroke();break;case h.OPS.fillStroke:this.fillStroke();break;case h.OPS.eoFillStroke:this.eoFillStroke();break;case h.OPS.clip:this.clip("nonzero");break;case h.OPS.eoClip:this.clip("evenodd");break;case h.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case h.OPS.paintImageXObject:this.paintImageXObject(R[0]);break;case h.OPS.paintInlineImageXObject:this.paintInlineImageXObject(R[0]);break;case h.OPS.paintImageMaskXObject:this.paintImageMaskXObject(R[0]);break;case h.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(R[0],R[1]);break;case h.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case h.OPS.closePath:this.closePath();break;case h.OPS.closeStroke:this.closeStroke();break;case h.OPS.closeFillStroke:this.closeFillStroke();break;case h.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case h.OPS.nextLine:this.nextLine();break;case h.OPS.transform:this.transform(R[0],R[1],R[2],R[3],R[4],R[5]);break;case h.OPS.constructPath:this.constructPath(R[0],R[1]);break;case h.OPS.endPath:this.endPath();break;case 92:this.group(v.items);break;default:(0,h.warn)(`Unimplemented operator ${c}`);break}}}setWordSpacing(l){this.current.wordSpacing=l}setCharSpacing(l){this.current.charSpacing=l}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(l,v,c,P,R,X){const D=this.current;D.textMatrix=D.lineMatrix=[l,v,c,P,R,X],D.textMatrixScale=Math.hypot(l,v),D.x=D.lineX=0,D.y=D.lineY=0,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${F(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",F(-D.y)),D.txtElement=this.svgFactory.createElement("svg:text"),D.txtElement.append(D.tspan)}beginText(){const l=this.current;l.x=l.lineX=0,l.y=l.lineY=0,l.textMatrix=h.IDENTITY_MATRIX,l.lineMatrix=h.IDENTITY_MATRIX,l.textMatrixScale=1,l.tspan=this.svgFactory.createElement("svg:tspan"),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtgrp=this.svgFactory.createElement("svg:g"),l.xcoords=[],l.ycoords=[]}moveText(l,v){const c=this.current;c.x=c.lineX+=l,c.y=c.lineY+=v,c.xcoords=[],c.ycoords=[],c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${F(c.fontSize)}px`),c.tspan.setAttributeNS(null,"y",F(-c.y))}showText(l){const v=this.current,c=v.font,P=v.fontSize;if(P===0)return;const R=v.fontSizeScale,X=v.charSpacing,D=v.wordSpacing,E=v.fontDirection,B=v.textHScale*E,oe=c.vertical,ae=oe?1:-1,ue=c.defaultVMetrics,re=P*v.fontMatrix[0];let pe=0;for(const ne of l){if(ne===null){pe+=E*D;continue}else if(typeof ne=="number"){pe+=ae*ne*P/1e3;continue}const j=(ne.isSpace?D:0)+X,s=ne.fontChar;let i,p,f=ne.width;if(oe){let I;const z=ne.vmetric||ue;I=ne.vmetric?z[1]:f*.5,I=-I*re;const Q=z[2]*re;f=z?-z[0]:f,i=I/R,p=(pe+Q)/R}else i=pe/R,p=0;(ne.isInFont||c.missingFile)&&(v.xcoords.push(v.x+i),oe&&v.ycoords.push(-v.y+p),v.tspan.textContent+=s);const C=oe?f*re-j*E:f*re+j*E;pe+=C}v.tspan.setAttributeNS(null,"x",v.xcoords.map(F).join(" ")),oe?v.tspan.setAttributeNS(null,"y",v.ycoords.map(F).join(" ")):v.tspan.setAttributeNS(null,"y",F(-v.y)),oe?v.y-=pe:v.x+=pe*B,v.tspan.setAttributeNS(null,"font-family",v.fontFamily),v.tspan.setAttributeNS(null,"font-size",`${F(v.fontSize)}px`),v.fontStyle!==y.fontStyle&&v.tspan.setAttributeNS(null,"font-style",v.fontStyle),v.fontWeight!==y.fontWeight&&v.tspan.setAttributeNS(null,"font-weight",v.fontWeight);const H=v.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;if(H===h.TextRenderingMode.FILL||H===h.TextRenderingMode.FILL_STROKE?(v.fillColor!==y.fillColor&&v.tspan.setAttributeNS(null,"fill",v.fillColor),v.fillAlpha<1&&v.tspan.setAttributeNS(null,"fill-opacity",v.fillAlpha)):v.textRenderingMode===h.TextRenderingMode.ADD_TO_PATH?v.tspan.setAttributeNS(null,"fill","transparent"):v.tspan.setAttributeNS(null,"fill","none"),H===h.TextRenderingMode.STROKE||H===h.TextRenderingMode.FILL_STROKE){const ne=1/(v.textMatrixScale||1);this._setStrokeAttributes(v.tspan,ne)}let W=v.textMatrix;v.textRise!==0&&(W=W.slice(),W[5]+=v.textRise),v.txtElement.setAttributeNS(null,"transform",`${q(W)} scale(${F(B)}, -1)`),v.txtElement.setAttributeNS(_,"xml:space","preserve"),v.txtElement.append(v.tspan),v.txtgrp.append(v.txtElement),this._ensureTransformGroup().append(v.txtElement)}setLeadingMoveText(l,v){this.setLeading(-v),this.moveText(l,v)}addFontStyle(l){if(!l.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const v=a(l.data,l.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${l.loadedName}"; src: url(${v}); }
`}setFont(l){const v=this.current,c=this.commonObjs.get(l[0]);let P=l[1];v.font=c,this.embedFonts&&!c.missingFile&&!this.embeddedFonts[c.loadedName]&&(this.addFontStyle(c),this.embeddedFonts[c.loadedName]=c),v.fontMatrix=c.fontMatrix||h.FONT_IDENTITY_MATRIX;let R="normal";c.black?R="900":c.bold&&(R="bold");const X=c.italic?"italic":"normal";P<0?(P=-P,v.fontDirection=-1):v.fontDirection=1,v.fontSize=P,v.fontFamily=c.loadedName,v.fontWeight=R,v.fontStyle=X,v.tspan=this.svgFactory.createElement("svg:tspan"),v.tspan.setAttributeNS(null,"y",F(-v.y)),v.xcoords=[],v.ycoords=[]}endText(){var v;const l=this.current;l.textRenderingMode&h.TextRenderingMode.ADD_TO_PATH_FLAG&&((v=l.txtElement)!=null&&v.hasChildNodes())&&(l.element=l.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(l){l>0&&(this.current.lineWidth=l)}setLineCap(l){this.current.lineCap=g[l]}setLineJoin(l){this.current.lineJoin=m[l]}setMiterLimit(l){this.current.miterLimit=l}setStrokeAlpha(l){this.current.strokeAlpha=l}setStrokeRGBColor(l,v,c){this.current.strokeColor=h.Util.makeHexColor(l,v,c)}setFillAlpha(l){this.current.fillAlpha=l}setFillRGBColor(l,v,c){this.current.fillColor=h.Util.makeHexColor(l,v,c),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(l){this.current.strokeColor=this._makeColorN_Pattern(l)}setFillColorN(l){this.current.fillColor=this._makeColorN_Pattern(l)}shadingFill(l){const{width:v,height:c}=this.viewport,P=h.Util.inverseTransform(this.transformMatrix),[R,X,D,E]=h.Util.getAxialAlignedBoundingBox([0,0,v,c],P),B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x",R),B.setAttributeNS(null,"y",X),B.setAttributeNS(null,"width",D-R),B.setAttributeNS(null,"height",E-X),B.setAttributeNS(null,"fill",this._makeShadingPattern(l)),this.current.fillAlpha<1&&B.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(B)}_makeColorN_Pattern(l){return l[0]==="TilingPattern"?this._makeTilingPattern(l):this._makeShadingPattern(l)}_makeTilingPattern(l){const v=l[1],c=l[2],P=l[3]||h.IDENTITY_MATRIX,[R,X,D,E]=l[4],B=l[5],oe=l[6],ae=l[7],ue=`shading${u++}`,[re,pe,H,W]=h.Util.normalizeRect([...h.Util.applyTransform([R,X],P),...h.Util.applyTransform([D,E],P)]),[ne,j]=h.Util.singularValueDecompose2dScale(P),s=B*ne,i=oe*j,p=this.svgFactory.createElement("svg:pattern");p.setAttributeNS(null,"id",ue),p.setAttributeNS(null,"patternUnits","userSpaceOnUse"),p.setAttributeNS(null,"width",s),p.setAttributeNS(null,"height",i),p.setAttributeNS(null,"x",`${re}`),p.setAttributeNS(null,"y",`${pe}`);const f=this.svg,C=this.transformMatrix,I=this.current.fillColor,z=this.current.strokeColor,Q=this.svgFactory.create(H-re,W-pe);if(this.svg=Q,this.transformMatrix=P,ae===2){const L=h.Util.makeHexColor(...v);this.current.fillColor=L,this.current.strokeColor=L}return this.executeOpTree(this.convertOpList(c)),this.svg=f,this.transformMatrix=C,this.current.fillColor=I,this.current.strokeColor=z,p.append(Q.childNodes[0]),this.defs.append(p),`url(#${ue})`}_makeShadingPattern(l){switch(typeof l=="string"&&(l=this.objs.get(l)),l[0]){case"RadialAxial":const v=`shading${u++}`,c=l[3];let P;switch(l[1]){case"axial":const R=l[4],X=l[5];P=this.svgFactory.createElement("svg:linearGradient"),P.setAttributeNS(null,"id",v),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"x1",R[0]),P.setAttributeNS(null,"y1",R[1]),P.setAttributeNS(null,"x2",X[0]),P.setAttributeNS(null,"y2",X[1]);break;case"radial":const D=l[4],E=l[5],B=l[6],oe=l[7];P=this.svgFactory.createElement("svg:radialGradient"),P.setAttributeNS(null,"id",v),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"cx",E[0]),P.setAttributeNS(null,"cy",E[1]),P.setAttributeNS(null,"r",oe),P.setAttributeNS(null,"fx",D[0]),P.setAttributeNS(null,"fy",D[1]),P.setAttributeNS(null,"fr",B);break;default:throw new Error(`Unknown RadialAxial type: ${l[1]}`)}for(const R of c){const X=this.svgFactory.createElement("svg:stop");X.setAttributeNS(null,"offset",R[0]),X.setAttributeNS(null,"stop-color",R[1]),P.append(X)}return this.defs.append(P),`url(#${v})`;case"Mesh":return(0,h.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${l[0]}`)}}setDash(l,v){this.current.dashArray=l,this.current.dashPhase=v}constructPath(l,v){const c=this.current;let P=c.x,R=c.y,X=[],D=0;for(const E of l)switch(E|0){case h.OPS.rectangle:P=v[D++],R=v[D++];const B=v[D++],oe=v[D++],ae=P+B,ue=R+oe;X.push("M",F(P),F(R),"L",F(ae),F(R),"L",F(ae),F(ue),"L",F(P),F(ue),"Z");break;case h.OPS.moveTo:P=v[D++],R=v[D++],X.push("M",F(P),F(R));break;case h.OPS.lineTo:P=v[D++],R=v[D++],X.push("L",F(P),F(R));break;case h.OPS.curveTo:P=v[D+4],R=v[D+5],X.push("C",F(v[D]),F(v[D+1]),F(v[D+2]),F(v[D+3]),F(P),F(R)),D+=6;break;case h.OPS.curveTo2:X.push("C",F(P),F(R),F(v[D]),F(v[D+1]),F(v[D+2]),F(v[D+3])),P=v[D+2],R=v[D+3],D+=4;break;case h.OPS.curveTo3:P=v[D+2],R=v[D+3],X.push("C",F(v[D]),F(v[D+1]),F(P),F(R),F(P),F(R)),D+=4;break;case h.OPS.closePath:X.push("Z");break}X=X.join(" "),c.path&&l.length>0&&l[0]!==h.OPS.rectangle&&l[0]!==h.OPS.moveTo?X=c.path.getAttributeNS(null,"d")+X:(c.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(c.path)),c.path.setAttributeNS(null,"d",X),c.path.setAttributeNS(null,"fill","none"),c.element=c.path,c.setCurrentPoint(P,R)}endPath(){const l=this.current;if(l.path=null,!this.pendingClip)return;if(!l.element){this.pendingClip=null;return}const v=`clippath${T++}`,c=this.svgFactory.createElement("svg:clipPath");c.setAttributeNS(null,"id",v),c.setAttributeNS(null,"transform",q(this.transformMatrix));const P=l.element.cloneNode(!0);if(this.pendingClip==="evenodd"?P.setAttributeNS(null,"clip-rule","evenodd"):P.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,c.append(P),this.defs.append(c),l.activeClipUrl){l.clipGroup=null;for(const R of this.extraStack)R.clipGroup=null;c.setAttributeNS(null,"clip-path",l.activeClipUrl)}l.activeClipUrl=`url(#${v})`,this.tgrp=null}clip(l){this.pendingClip=l}closePath(){const l=this.current;if(l.path){const v=`${l.path.getAttributeNS(null,"d")}Z`;l.path.setAttributeNS(null,"d",v)}}setLeading(l){this.current.leading=-l}setTextRise(l){this.current.textRise=l}setTextRenderingMode(l){this.current.textRenderingMode=l}setHScale(l){this.current.textHScale=l/100}setRenderingIntent(l){}setFlatness(l){}setGState(l){for(const[v,c]of l)switch(v){case"LW":this.setLineWidth(c);break;case"LC":this.setLineCap(c);break;case"LJ":this.setLineJoin(c);break;case"ML":this.setMiterLimit(c);break;case"D":this.setDash(c[0],c[1]);break;case"RI":this.setRenderingIntent(c);break;case"FL":this.setFlatness(c);break;case"Font":this.setFont(c);break;case"CA":this.setStrokeAlpha(c);break;case"ca":this.setFillAlpha(c);break;default:(0,h.warn)(`Unimplemented graphic state operator ${v}`);break}}fill(){const l=this.current;l.element&&(l.element.setAttributeNS(null,"fill",l.fillColor),l.element.setAttributeNS(null,"fill-opacity",l.fillAlpha),this.endPath())}stroke(){const l=this.current;l.element&&(this._setStrokeAttributes(l.element),l.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(l,v=1){const c=this.current;let P=c.dashArray;v!==1&&P.length>0&&(P=P.map(function(R){return v*R})),l.setAttributeNS(null,"stroke",c.strokeColor),l.setAttributeNS(null,"stroke-opacity",c.strokeAlpha),l.setAttributeNS(null,"stroke-miterlimit",F(c.miterLimit)),l.setAttributeNS(null,"stroke-linecap",c.lineCap),l.setAttributeNS(null,"stroke-linejoin",c.lineJoin),l.setAttributeNS(null,"stroke-width",F(v*c.lineWidth)+"px"),l.setAttributeNS(null,"stroke-dasharray",P.map(F).join(" ")),l.setAttributeNS(null,"stroke-dashoffset",F(v*c.dashPhase)+"px")}eoFill(){var l;(l=this.current.element)==null||l.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var l;(l=this.current.element)==null||l.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width","1px"),l.setAttributeNS(null,"height","1px"),l.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(l)}paintImageXObject(l){const v=this.getObject(l);if(!v){(0,h.warn)(`Dependent image with object ID ${l} is not ready yet`);return}this.paintInlineImageXObject(v)}paintInlineImageXObject(l,v){const c=l.width,P=l.height,R=S(l,this.forceDataSchema,!!v),X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x","0"),X.setAttributeNS(null,"y","0"),X.setAttributeNS(null,"width",F(c)),X.setAttributeNS(null,"height",F(P)),this.current.element=X,this.clip("nonzero");const D=this.svgFactory.createElement("svg:image");D.setAttributeNS(k,"xlink:href",R),D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y",F(-P)),D.setAttributeNS(null,"width",F(c)+"px"),D.setAttributeNS(null,"height",F(P)+"px"),D.setAttributeNS(null,"transform",`scale(${F(1/c)} ${F(-1/P)})`),v?v.append(D):this._ensureTransformGroup().append(D)}paintImageMaskXObject(l){const v=this.getObject(l.data,l);if(v.bitmap){(0,h.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const c=this.current,P=v.width,R=v.height,X=c.fillColor;c.maskId=`mask${o++}`;const D=this.svgFactory.createElement("svg:mask");D.setAttributeNS(null,"id",c.maskId);const E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y","0"),E.setAttributeNS(null,"width",F(P)),E.setAttributeNS(null,"height",F(R)),E.setAttributeNS(null,"fill",X),E.setAttributeNS(null,"mask",`url(#${c.maskId})`),this.defs.append(D),this._ensureTransformGroup().append(E),this.paintInlineImageXObject(v,D)}paintFormXObjectBegin(l,v){if(Array.isArray(l)&&l.length===6&&this.transform(l[0],l[1],l[2],l[3],l[4],l[5]),v){const c=v[2]-v[0],P=v[3]-v[1],R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x",v[0]),R.setAttributeNS(null,"y",v[1]),R.setAttributeNS(null,"width",F(c)),R.setAttributeNS(null,"height",F(P)),this.current.element=R,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(l){const v=this.svgFactory.create(l.width,l.height),c=this.svgFactory.createElement("svg:defs");v.append(c),this.defs=c;const P=this.svgFactory.createElement("svg:g");return P.setAttributeNS(null,"transform",q(l.transform)),v.append(P),this.svg=P,v}_ensureClipGroup(){if(!this.current.clipGroup){const l=this.svgFactory.createElement("svg:g");l.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(l),this.current.clipGroup=l}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",q(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=x},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(h){const y=[],_={items:y,styles:Object.create(null)};function k(g){var S;if(!g)return;let m=null;const a=g.name;if(a==="#text")m=g.value;else if(n.shouldBuildText(a))(S=g==null?void 0:g.attributes)!=null&&S.textContent?m=g.attributes.textContent:g.value&&(m=g.value);else return;if(m!==null&&y.push({str:m}),!!g.children)for(const A of g.children)k(A)}return k(h),_}static shouldBuildText(h){return!(h==="textarea"||h==="input"||h==="option"||h==="select")}}e.XfaText=n},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=q,e.updateTextLayer=T;var r=n(1),h=n(6);const y=1e5,_=30,k=.8,g=new Map;function m(o,u){let x;if(u&&r.FeatureTest.isOffscreenCanvasSupported)x=new OffscreenCanvas(o,o).getContext("2d",{alpha:!1});else{const b=document.createElement("canvas");b.width=b.height=o,x=b.getContext("2d",{alpha:!1})}return x}function a(o,u){const x=g.get(o);if(x)return x;const b=m(_,u);b.font=`${_}px ${o}`;const l=b.measureText("");let v=l.fontBoundingBoxAscent,c=Math.abs(l.fontBoundingBoxDescent);if(v){const R=v/(v+c);return g.set(o,R),b.canvas.width=b.canvas.height=0,R}b.strokeStyle="red",b.clearRect(0,0,_,_),b.strokeText("g",0,0);let P=b.getImageData(0,0,_,_).data;c=0;for(let R=P.length-1-3;R>=0;R-=4)if(P[R]>0){c=Math.ceil(R/4/_);break}b.clearRect(0,0,_,_),b.strokeText("A",0,_),P=b.getImageData(0,0,_,_).data,v=0;for(let R=0,X=P.length;R<X;R+=4)if(P[R]>0){v=_-Math.floor(R/4/_);break}if(b.canvas.width=b.canvas.height=0,v){const R=v/(v+c);return g.set(o,R),R}return g.set(o,k),k}function S(o,u,x){const b=document.createElement("span"),l={angle:0,canvasWidth:0,hasText:u.str!=="",hasEOL:u.hasEOL,fontSize:0};o._textDivs.push(b);const v=r.Util.transform(o._transform,u.transform);let c=Math.atan2(v[1],v[0]);const P=x[u.fontName];P.vertical&&(c+=Math.PI/2);const R=Math.hypot(v[2],v[3]),X=R*a(P.fontFamily,o._isOffscreenCanvasSupported);let D,E;c===0?(D=v[4],E=v[5]-X):(D=v[4]+X*Math.sin(c),E=v[5]-X*Math.cos(c));const B="calc(var(--scale-factor)*",oe=b.style;o._container===o._rootContainer?(oe.left=`${(100*D/o._pageWidth).toFixed(2)}%`,oe.top=`${(100*E/o._pageHeight).toFixed(2)}%`):(oe.left=`${B}${D.toFixed(2)}px)`,oe.top=`${B}${E.toFixed(2)}px)`),oe.fontSize=`${B}${R.toFixed(2)}px)`,oe.fontFamily=P.fontFamily,l.fontSize=R,b.setAttribute("role","presentation"),b.textContent=u.str,b.dir=u.dir,o._fontInspectorEnabled&&(b.dataset.fontName=u.fontName),c!==0&&(l.angle=c*(180/Math.PI));let ae=!1;if(u.str.length>1)ae=!0;else if(u.str!==" "&&u.transform[0]!==u.transform[3]){const ue=Math.abs(u.transform[0]),re=Math.abs(u.transform[3]);ue!==re&&Math.max(ue,re)/Math.min(ue,re)>1.5&&(ae=!0)}ae&&(l.canvasWidth=P.vertical?u.height:u.width),o._textDivProperties.set(b,l),o._isReadableStream&&o._layoutText(b)}function A(o){const{div:u,scale:x,properties:b,ctx:l,prevFontSize:v,prevFontFamily:c}=o,{style:P}=u;let R="";if(b.canvasWidth!==0&&b.hasText){const{fontFamily:X}=P,{canvasWidth:D,fontSize:E}=b;(v!==E||c!==X)&&(l.font=`${E*x}px ${X}`,o.prevFontSize=E,o.prevFontFamily=X);const{width:B}=l.measureText(u.textContent);B>0&&(R=`scaleX(${D*x/B})`)}b.angle!==0&&(R=`rotate(${b.angle}deg) ${R}`),R.length>0&&(P.transform=R)}function M(o){if(o._canceled)return;const u=o._textDivs,x=o._capability;if(u.length>y){x.resolve();return}if(!o._isReadableStream)for(const l of u)o._layoutText(l);x.resolve()}class F{constructor({textContentSource:u,container:x,viewport:b,textDivs:l,textDivProperties:v,textContentItemsStr:c,isOffscreenCanvasSupported:P}){var B;this._textContentSource=u,this._isReadableStream=u instanceof ReadableStream,this._container=this._rootContainer=x,this._textDivs=l||[],this._textContentItemsStr=c||[],this._isOffscreenCanvasSupported=P,this._fontInspectorEnabled=!!((B=globalThis.FontInspector)!=null&&B.enabled),this._reader=null,this._textDivProperties=v||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:b.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:m(0,P)};const{pageWidth:R,pageHeight:X,pageX:D,pageY:E}=b.rawDims;this._transform=[1,0,0,-1,-D,E+X],this._pageWidth=R,this._pageHeight=X,(0,h.setLayerDimensions)(x,b),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(u,x){for(const b of u){if(b.str===void 0){if(b.type==="beginMarkedContentProps"||b.type==="beginMarkedContent"){const l=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),b.id!==null&&this._container.setAttribute("id",`${b.id}`),l.append(this._container)}else b.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(b.str),S(this,b,x)}}_layoutText(u){const x=this._layoutTextParams.properties=this._textDivProperties.get(u);if(this._layoutTextParams.div=u,A(this._layoutTextParams),x.hasText&&this._container.append(u),x.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),this._container.append(b)}}_render(){const u=new r.PromiseCapability;let x=Object.create(null);if(this._isReadableStream){const b=()=>{this._reader.read().then(({value:l,done:v})=>{if(v){u.resolve();return}Object.assign(x,l.styles),this._processItems(l.items,x),b()},u.reject)};this._reader=this._textContentSource.getReader(),b()}else if(this._textContentSource){const{items:b,styles:l}=this._textContentSource;this._processItems(b,l),u.resolve()}else throw new Error('No "textContentSource" parameter specified.');u.promise.then(()=>{x=null,M(this)},this._capability.reject)}}e.TextLayerRenderTask=F;function q(o){!o.textContentSource&&(o.textContent||o.textContentStream)&&((0,h.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),o.textContentSource=o.textContent||o.textContentStream);const{container:u,viewport:x}=o,b=getComputedStyle(u),l=b.getPropertyValue("visibility"),v=parseFloat(b.getPropertyValue("--scale-factor"));l==="visible"&&(!v||Math.abs(v-x.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const c=new F(o);return c._render(),c}function T({container:o,viewport:u,textDivs:x,textDivProperties:b,isOffscreenCanvasSupported:l,mustRotate:v=!0,mustRescale:c=!0}){if(v&&(0,h.setLayerDimensions)(o,{rotation:u.rotation}),c){const P=m(0,l),X={prevFontSize:null,prevFontFamily:null,div:null,scale:u.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:P};for(const D of x)X.properties=b.get(D),X.div=D,A(X)}}},(t,e,n)=>{var a,S,A,M,F,q,T,o,u,x,b,Yt,Et,Zt,Jt;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var r=n(1),h=n(4),y=n(28),_=n(33),k=n(6),g=n(34);const R=class R{constructor({uiManager:D,pageIndex:E,div:B,accessibilityManager:oe,annotationLayer:ae,viewport:ue,l10n:re}){Ee(this,b);Ee(this,a);Ee(this,S,!1);Ee(this,A,null);Ee(this,M,this.pointerup.bind(this));Ee(this,F,this.pointerdown.bind(this));Ee(this,q,new Map);Ee(this,T,!1);Ee(this,o,!1);Ee(this,u,!1);Ee(this,x);const pe=[y.FreeTextEditor,_.InkEditor,g.StampEditor];if(!R._initialized){R._initialized=!0;for(const H of pe)H.initialize(re)}D.registerEditorTypes(pe),Re(this,x,D),this.pageIndex=E,this.div=B,Re(this,a,oe),Re(this,A,ae),this.viewport=ue,w(this,x).addLayer(this)}get isEmpty(){return w(this,q).size===0}updateToolbar(D){w(this,x).updateToolbar(D)}updateMode(D=w(this,x).getMode()){ve(this,b,Jt).call(this),D===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),D!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",D===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",D===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",D===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(D){if(!D&&w(this,x).getMode()!==r.AnnotationEditorType.INK)return;if(!D){for(const B of w(this,q).values())if(B.isEmpty()){B.setInBackground();return}}ve(this,b,Et).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(D){w(this,x).setEditingState(D)}addCommands(D){w(this,x).addCommands(D)}enable(){this.div.style.pointerEvents="auto";const D=new Set;for(const B of w(this,q).values())B.enableEditing(),B.annotationElementId&&D.add(B.annotationElementId);if(!w(this,A))return;const E=w(this,A).getEditableAnnotations();for(const B of E){if(B.hide(),w(this,x).isDeletedAnnotationElement(B.data.id)||D.has(B.data.id))continue;const oe=this.deserialize(B);oe&&(this.addOrRebuild(oe),oe.enableEditing())}}disable(){var E;Re(this,u,!0),this.div.style.pointerEvents="none";const D=new Set;for(const B of w(this,q).values()){if(B.disableEditing(),!B.annotationElementId||B.serialize()!==null){D.add(B.annotationElementId);continue}(E=this.getEditableAnnotation(B.annotationElementId))==null||E.show(),B.remove()}if(w(this,A)){const B=w(this,A).getEditableAnnotations();for(const oe of B){const{id:ae}=oe.data;D.has(ae)||w(this,x).isDeletedAnnotationElement(ae)||oe.show()}}ve(this,b,Jt).call(this),this.isEmpty&&(this.div.hidden=!0),Re(this,u,!1)}getEditableAnnotation(D){var E;return((E=w(this,A))==null?void 0:E.getEditableAnnotation(D))||null}setActiveEditor(D){w(this,x).getActive()!==D&&w(this,x).setActiveEditor(D)}enableClick(){this.div.addEventListener("pointerdown",w(this,F)),this.div.addEventListener("pointerup",w(this,M))}disableClick(){this.div.removeEventListener("pointerdown",w(this,F)),this.div.removeEventListener("pointerup",w(this,M))}attach(D){w(this,q).set(D.id,D);const{annotationElementId:E}=D;E&&w(this,x).isDeletedAnnotationElement(E)&&w(this,x).removeDeletedAnnotationElement(D)}detach(D){var E;w(this,q).delete(D.id),(E=w(this,a))==null||E.removePointerInTextLayer(D.contentDiv),!w(this,u)&&D.annotationElementId&&w(this,x).addDeletedAnnotationElement(D)}remove(D){this.detach(D),w(this,x).removeEditor(D),D.div.contains(document.activeElement)&&setTimeout(()=>{w(this,x).focusMainContainer()},0),D.div.remove(),D.isAttachedToDOM=!1,w(this,o)||this.addInkEditorIfNeeded(!1)}changeParent(D){var E;D.parent!==this&&(D.annotationElementId&&(w(this,x).addDeletedAnnotationElement(D.annotationElementId),h.AnnotationEditor.deleteAnnotationElement(D),D.annotationElementId=null),this.attach(D),(E=D.parent)==null||E.detach(D),D.setParent(this),D.div&&D.isAttachedToDOM&&(D.div.remove(),this.div.append(D.div)))}add(D){if(this.changeParent(D),w(this,x).addEditor(D),this.attach(D),!D.isAttachedToDOM){const E=D.render();this.div.append(E),D.isAttachedToDOM=!0}D.fixAndSetPosition(),D.onceAdded(),w(this,x).addToAnnotationStorage(D)}moveEditorInDOM(D){var B;if(!D.isAttachedToDOM)return;const{activeElement:E}=document;D.div.contains(E)&&(D._focusEventsAllowed=!1,setTimeout(()=>{D.div.contains(document.activeElement)?D._focusEventsAllowed=!0:(D.div.addEventListener("focusin",()=>{D._focusEventsAllowed=!0},{once:!0}),E.focus())},0)),D._structTreeParentId=(B=w(this,a))==null?void 0:B.moveElementInDOM(this.div,D.div,D.contentDiv,!0)}addOrRebuild(D){D.needsToBeRebuilt()?D.rebuild():this.add(D)}addUndoableEditor(D){const E=()=>D._uiManager.rebuild(D),B=()=>{D.remove()};this.addCommands({cmd:E,undo:B,mustExec:!1})}getNextId(){return w(this,x).getId()}pasteEditor(D,E){w(this,x).updateToolbar(D),w(this,x).updateMode(D);const{offsetX:B,offsetY:oe}=ve(this,b,Zt).call(this),ae=this.getNextId(),ue=ve(this,b,Yt).call(this,{parent:this,id:ae,x:B,y:oe,uiManager:w(this,x),isCentered:!0,...E});ue&&this.add(ue)}deserialize(D){switch(D.annotationType??D.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return y.FreeTextEditor.deserialize(D,this,w(this,x));case r.AnnotationEditorType.INK:return _.InkEditor.deserialize(D,this,w(this,x));case r.AnnotationEditorType.STAMP:return g.StampEditor.deserialize(D,this,w(this,x))}return null}addNewEditor(){ve(this,b,Et).call(this,ve(this,b,Zt).call(this),!0)}setSelected(D){w(this,x).setSelected(D)}toggleSelected(D){w(this,x).toggleSelected(D)}isSelected(D){return w(this,x).isSelected(D)}unselect(D){w(this,x).unselect(D)}pointerup(D){const{isMac:E}=r.FeatureTest.platform;if(!(D.button!==0||D.ctrlKey&&E)&&D.target===this.div&&w(this,T)){if(Re(this,T,!1),!w(this,S)){Re(this,S,!0);return}if(w(this,x).getMode()===r.AnnotationEditorType.STAMP){w(this,x).unselectAll();return}ve(this,b,Et).call(this,D,!1)}}pointerdown(D){if(w(this,T)){Re(this,T,!1);return}const{isMac:E}=r.FeatureTest.platform;if(D.button!==0||D.ctrlKey&&E||D.target!==this.div)return;Re(this,T,!0);const B=w(this,x).getActive();Re(this,S,!B||B.isEmpty())}findNewParent(D,E,B){const oe=w(this,x).findParent(E,B);return oe===null||oe===this?!1:(oe.changeParent(D),!0)}destroy(){var D,E;((D=w(this,x).getActive())==null?void 0:D.parent)===this&&(w(this,x).commitOrRemove(),w(this,x).setActiveEditor(null));for(const B of w(this,q).values())(E=w(this,a))==null||E.removePointerInTextLayer(B.contentDiv),B.setParent(null),B.isAttachedToDOM=!1,B.div.remove();this.div=null,w(this,q).clear(),w(this,x).removeLayer(this)}render({viewport:D}){this.viewport=D,(0,k.setLayerDimensions)(this.div,D);for(const E of w(this,x).getEditors(this.pageIndex))this.add(E);this.updateMode()}update({viewport:D}){w(this,x).commitOrRemove(),this.viewport=D,(0,k.setLayerDimensions)(this.div,{rotation:D.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:D,pageHeight:E}=this.viewport.rawDims;return[D,E]}};a=new WeakMap,S=new WeakMap,A=new WeakMap,M=new WeakMap,F=new WeakMap,q=new WeakMap,T=new WeakMap,o=new WeakMap,u=new WeakMap,x=new WeakMap,b=new WeakSet,Yt=function(D){switch(w(this,x).getMode()){case r.AnnotationEditorType.FREETEXT:return new y.FreeTextEditor(D);case r.AnnotationEditorType.INK:return new _.InkEditor(D);case r.AnnotationEditorType.STAMP:return new g.StampEditor(D)}return null},Et=function(D,E){const B=this.getNextId(),oe=ve(this,b,Yt).call(this,{parent:this,id:B,x:D.offsetX,y:D.offsetY,uiManager:w(this,x),isCentered:E});return oe&&this.add(oe),oe},Zt=function(){const{x:D,y:E,width:B,height:oe}=this.div.getBoundingClientRect(),ae=Math.max(0,D),ue=Math.max(0,E),re=Math.min(window.innerWidth,D+B),pe=Math.min(window.innerHeight,E+oe),H=(ae+re)/2-D,W=(ue+pe)/2-E,[ne,j]=this.viewport.rotation%180===0?[H,W]:[W,H];return{offsetX:ne,offsetY:j}},Jt=function(){Re(this,o,!0);for(const D of w(this,q).values())D.isEmpty()&&D.remove();Re(this,o,!1)},Ye(R,"_initialized",!1);let m=R;e.AnnotationEditorLayer=m},(t,e,n)=>{var g,m,a,S,A,M,F,q,T,o,Tr,Pr,Cr,gt,Qt,xr,er;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var r=n(1),h=n(5),y=n(4),_=n(29);const R=class R extends y.AnnotationEditor{constructor(E){super({...E,name:"freeTextEditor"});Ee(this,o);Ee(this,g,this.editorDivBlur.bind(this));Ee(this,m,this.editorDivFocus.bind(this));Ee(this,a,this.editorDivInput.bind(this));Ee(this,S,this.editorDivKeydown.bind(this));Ee(this,A);Ee(this,M,"");Ee(this,F,`${this.id}-editor`);Ee(this,q);Ee(this,T,null);Re(this,A,E.color||R._defaultColor||y.AnnotationEditor._defaultLineColor),Re(this,q,E.fontSize||R._defaultFontSize)}static get _keyboardManager(){const E=R.prototype,B=ue=>ue.isEmpty(),oe=h.AnnotationEditorUIManager.TRANSLATE_SMALL,ae=h.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new h.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],E.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],E.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],E._translateEmpty,{args:[-oe,0],checker:B}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],E._translateEmpty,{args:[-ae,0],checker:B}],[["ArrowRight","mac+ArrowRight"],E._translateEmpty,{args:[oe,0],checker:B}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],E._translateEmpty,{args:[ae,0],checker:B}],[["ArrowUp","mac+ArrowUp"],E._translateEmpty,{args:[0,-oe],checker:B}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],E._translateEmpty,{args:[0,-ae],checker:B}],[["ArrowDown","mac+ArrowDown"],E._translateEmpty,{args:[0,oe],checker:B}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],E._translateEmpty,{args:[0,ae],checker:B}]]))}static initialize(E){y.AnnotationEditor.initialize(E,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const B=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(B.getPropertyValue("--freetext-padding"))}static updateDefaultParams(E,B){switch(E){case r.AnnotationEditorParamsType.FREETEXT_SIZE:R._defaultFontSize=B;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:R._defaultColor=B;break}}updateParams(E,B){switch(E){case r.AnnotationEditorParamsType.FREETEXT_SIZE:ve(this,o,Tr).call(this,B);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:ve(this,o,Pr).call(this,B);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,R._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,R._defaultColor||y.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,w(this,q)],[r.AnnotationEditorParamsType.FREETEXT_COLOR,w(this,A)]]}_translateEmpty(E,B){this._uiManager.translateSelectedEditors(E,B,!0)}getInitialTranslation(){const E=this.parentScale;return[-R._internalPadding*E,-(R._internalPadding+w(this,q))*E]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",w(this,S)),this.editorDiv.addEventListener("focus",w(this,m)),this.editorDiv.addEventListener("blur",w(this,g)),this.editorDiv.addEventListener("input",w(this,a)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",w(this,F)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",w(this,S)),this.editorDiv.removeEventListener("focus",w(this,m)),this.editorDiv.removeEventListener("blur",w(this,g)),this.editorDiv.removeEventListener("input",w(this,a)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(E){this._focusEventsAllowed&&(super.focusin(E),E.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var E;if(this.width){ve(this,o,er).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(E=this._initialOptions)!=null&&E.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const E=w(this,M),B=Re(this,M,ve(this,o,Cr).call(this).trimEnd());if(E===B)return;const oe=ae=>{if(Re(this,M,ae),!ae){this.remove();return}ve(this,o,Qt).call(this),this._uiManager.rebuild(this),ve(this,o,gt).call(this)};this.addCommands({cmd:()=>{oe(B)},undo:()=>{oe(E)},mustExec:!1}),ve(this,o,gt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(E){this.enterInEditMode()}keydown(E){E.target===this.div&&E.key==="Enter"&&(this.enterInEditMode(),E.preventDefault())}editorDivKeydown(E){R._keyboardManager.exec(this,E)}editorDivFocus(E){this.isEditing=!0}editorDivBlur(E){this.isEditing=!1}editorDivInput(E){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let E,B;this.width&&(E=this.x,B=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",w(this,F)),this.enableEditing(),y.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(ae=>{var ue;return(ue=this.editorDiv)==null?void 0:ue.setAttribute("aria-label",ae)}),y.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(ae=>{var ue;return(ue=this.editorDiv)==null?void 0:ue.setAttribute("default-content",ae)}),this.editorDiv.contentEditable=!0;const{style:oe}=this.editorDiv;if(oe.fontSize=`calc(${w(this,q)}px * var(--scale-factor))`,oe.color=w(this,A),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,h.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ae,ue]=this.parentDimensions;if(this.annotationElementId){const{position:re}=w(this,T);let[pe,H]=this.getInitialTranslation();[pe,H]=this.pageTranslationToScreen(pe,H);const[W,ne]=this.pageDimensions,[j,s]=this.pageTranslation;let i,p;switch(this.rotation){case 0:i=E+(re[0]-j)/W,p=B+this.height-(re[1]-s)/ne;break;case 90:i=E+(re[0]-j)/W,p=B-(re[1]-s)/ne,[pe,H]=[H,-pe];break;case 180:i=E-this.width+(re[0]-j)/W,p=B-(re[1]-s)/ne,[pe,H]=[-pe,-H];break;case 270:i=E+(re[0]-j-this.height*ne)/W,p=B+(re[1]-s-this.width*W)/ne,[pe,H]=[-H,pe];break}this.setAt(i*ae,p*ue,pe,H)}else this.setAt(E*ae,B*ue,this.width*ae,this.height*ue);ve(this,o,Qt).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(E,B,oe){let ae=null;if(E instanceof _.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:re,fontColor:pe},rect:H,rotation:W,id:ne},textContent:j,textPosition:s,parent:{page:{pageNumber:i}}}=E;if(!j||j.length===0)return null;ae=E={annotationType:r.AnnotationEditorType.FREETEXT,color:Array.from(pe),fontSize:re,value:j.join(`
`),position:s,pageIndex:i-1,rect:H,rotation:W,id:ne,deleted:!1}}const ue=super.deserialize(E,B,oe);return Re(ue,q,E.fontSize),Re(ue,A,r.Util.makeHexColor(...E.color)),Re(ue,M,E.value),ue.annotationElementId=E.id||null,Re(ue,T,ae),ue}serialize(E=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const B=R._internalPadding*this.parentScale,oe=this.getRect(B,B),ae=y.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:w(this,A)),ue={annotationType:r.AnnotationEditorType.FREETEXT,color:ae,fontSize:w(this,q),value:w(this,M),pageIndex:this.pageIndex,rect:oe,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return E?ue:this.annotationElementId&&!ve(this,o,xr).call(this,ue)?null:(ue.id=this.annotationElementId,ue)}};g=new WeakMap,m=new WeakMap,a=new WeakMap,S=new WeakMap,A=new WeakMap,M=new WeakMap,F=new WeakMap,q=new WeakMap,T=new WeakMap,o=new WeakSet,Tr=function(E){const B=ae=>{this.editorDiv.style.fontSize=`calc(${ae}px * var(--scale-factor))`,this.translate(0,-(ae-w(this,q))*this.parentScale),Re(this,q,ae),ve(this,o,gt).call(this)},oe=w(this,q);this.addCommands({cmd:()=>{B(E)},undo:()=>{B(oe)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Pr=function(E){const B=w(this,A);this.addCommands({cmd:()=>{Re(this,A,this.editorDiv.style.color=E)},undo:()=>{Re(this,A,this.editorDiv.style.color=B)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Cr=function(){const E=this.editorDiv.getElementsByTagName("div");if(E.length===0)return this.editorDiv.innerText;const B=[];for(const oe of E)B.push(oe.innerText.replace(/\r\n?|\n/,""));return B.join(`
`)},gt=function(){const[E,B]=this.parentDimensions;let oe;if(this.isAttachedToDOM)oe=this.div.getBoundingClientRect();else{const{currentLayer:ae,div:ue}=this,re=ue.style.display;ue.style.display="hidden",ae.div.append(this.div),oe=ue.getBoundingClientRect(),ue.remove(),ue.style.display=re}this.rotation%180===this.parentRotation%180?(this.width=oe.width/E,this.height=oe.height/B):(this.width=oe.height/E,this.height=oe.width/B),this.fixAndSetPosition()},Qt=function(){if(this.editorDiv.replaceChildren(),!!w(this,M))for(const E of w(this,M).split(`
`)){const B=document.createElement("div");B.append(E?document.createTextNode(E):document.createElement("br")),this.editorDiv.append(B)}},xr=function(E){const{value:B,fontSize:oe,color:ae,rect:ue,pageIndex:re}=w(this,T);return E.value!==B||E.fontSize!==oe||E.rect.some((pe,H)=>Math.abs(pe-ue[H])>=1)||E.color.some((pe,H)=>pe!==ae[H])||E.pageIndex!==re},er=function(E=!1){if(!this.annotationElementId)return;if(ve(this,o,gt).call(this),!E&&(this.width===0||this.height===0)){setTimeout(()=>ve(this,o,er).call(this,!0),0);return}const B=R._internalPadding*this.parentScale;w(this,T).rect=this.getRect(B,B)},Ye(R,"_freeTextDefaultContent",""),Ye(R,"_internalPadding",0),Ye(R,"_defaultColor",null),Ye(R,"_defaultFontSize",10),Ye(R,"_type","freetext");let k=R;e.FreeTextEditor=k},(t,e,n)=>{var p,C,it,Or,Q,L,N,se,ge,Ae,he,de,K,$,me,_e,Ce,ke,te,J,Se,Te,kr,Rt,tr,rr,be,Fe,Le,ee,ie,O,we,nr,d,G,ce,U,Fr,ir;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var r=n(1),h=n(6),y=n(3),_=n(30),k=n(31),g=n(32);const m=1e3,a=9,S=new WeakSet;function A(Me){return{width:Me[2]-Me[0],height:Me[3]-Me[1]}}class M{static create(Z){switch(Z.data.annotationType){case r.AnnotationType.LINK:return new q(Z);case r.AnnotationType.TEXT:return new T(Z);case r.AnnotationType.WIDGET:switch(Z.data.fieldType){case"Tx":return new u(Z);case"Btn":return Z.data.radioButton?new l(Z):Z.data.checkBox?new b(Z):new v(Z);case"Ch":return new c(Z);case"Sig":return new x(Z)}return new o(Z);case r.AnnotationType.POPUP:return new P(Z);case r.AnnotationType.FREETEXT:return new X(Z);case r.AnnotationType.LINE:return new D(Z);case r.AnnotationType.SQUARE:return new E(Z);case r.AnnotationType.CIRCLE:return new B(Z);case r.AnnotationType.POLYLINE:return new oe(Z);case r.AnnotationType.CARET:return new ue(Z);case r.AnnotationType.INK:return new re(Z);case r.AnnotationType.POLYGON:return new ae(Z);case r.AnnotationType.HIGHLIGHT:return new pe(Z);case r.AnnotationType.UNDERLINE:return new H(Z);case r.AnnotationType.SQUIGGLY:return new W(Z);case r.AnnotationType.STRIKEOUT:return new ne(Z);case r.AnnotationType.STAMP:return new j(Z);case r.AnnotationType.FILEATTACHMENT:return new s(Z);default:return new F(Z)}}}const f=class f{constructor(Z,{isRenderable:Y=!1,ignoreBorder:fe=!1,createQuadrilaterals:xe=!1}={}){Ee(this,p,!1);this.isRenderable=Y,this.data=Z.data,this.layer=Z.layer,this.linkService=Z.linkService,this.downloadManager=Z.downloadManager,this.imageResourcesPath=Z.imageResourcesPath,this.renderForms=Z.renderForms,this.svgFactory=Z.svgFactory,this.annotationStorage=Z.annotationStorage,this.enableScripting=Z.enableScripting,this.hasJSActions=Z.hasJSActions,this._fieldObjects=Z.fieldObjects,this.parent=Z.parent,Y&&(this.container=this._createContainer(fe)),xe&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Z,contentsObj:Y,richText:fe}){return!!(Z!=null&&Z.str||Y!=null&&Y.str||fe!=null&&fe.str)}get hasPopupData(){return f._hasPopupData(this.data)}_createContainer(Z){const{data:Y,parent:{page:fe,viewport:xe}}=this,Pe=document.createElement("section");Pe.setAttribute("data-annotation-id",Y.id),this instanceof o||(Pe.tabIndex=m),Pe.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Pe.setAttribute("aria-haspopup","dialog"),Y.noRotate&&Pe.classList.add("norotate");const{pageWidth:Oe,pageHeight:Ie,pageX:He,pageY:We}=xe.rawDims;if(!Y.rect||this instanceof P){const{rotation:Ge}=Y;return!Y.hasOwnCanvas&&Ge!==0&&this.setRotation(Ge,Pe),Pe}const{width:Be,height:Ve}=A(Y.rect),je=r.Util.normalizeRect([Y.rect[0],fe.view[3]-Y.rect[1]+fe.view[1],Y.rect[2],fe.view[3]-Y.rect[3]+fe.view[1]]);if(!Z&&Y.borderStyle.width>0){Pe.style.borderWidth=`${Y.borderStyle.width}px`;const Ge=Y.borderStyle.horizontalCornerRadius,$e=Y.borderStyle.verticalCornerRadius;if(Ge>0||$e>0){const Ke=`calc(${Ge}px * var(--scale-factor)) / calc(${$e}px * var(--scale-factor))`;Pe.style.borderRadius=Ke}else if(this instanceof l){const Ke=`calc(${Be}px * var(--scale-factor)) / calc(${Ve}px * var(--scale-factor))`;Pe.style.borderRadius=Ke}switch(Y.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:Pe.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:Pe.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:Pe.style.borderBottomStyle="solid";break}const Xe=Y.borderColor||null;Xe?(Re(this,p,!0),Pe.style.borderColor=r.Util.makeHexColor(Xe[0]|0,Xe[1]|0,Xe[2]|0)):Pe.style.borderWidth=0}Pe.style.left=`${100*(je[0]-He)/Oe}%`,Pe.style.top=`${100*(je[1]-We)/Ie}%`;const{rotation:ze}=Y;return Y.hasOwnCanvas||ze===0?(Pe.style.width=`${100*Be/Oe}%`,Pe.style.height=`${100*Ve/Ie}%`):this.setRotation(ze,Pe),Pe}setRotation(Z,Y=this.container){if(!this.data.rect)return;const{pageWidth:fe,pageHeight:xe}=this.parent.viewport.rawDims,{width:Pe,height:Oe}=A(this.data.rect);let Ie,He;Z%180===0?(Ie=100*Pe/fe,He=100*Oe/xe):(Ie=100*Oe/fe,He=100*Pe/xe),Y.style.width=`${Ie}%`,Y.style.height=`${He}%`,Y.setAttribute("data-main-rotation",(360-Z)%360)}get _commonActions(){const Z=(Y,fe,xe)=>{const Pe=xe.detail[Y],Oe=Pe[0],Ie=Pe.slice(1);xe.target.style[fe]=_.ColorConverters[`${Oe}_HTML`](Ie),this.annotationStorage.setValue(this.data.id,{[fe]:_.ColorConverters[`${Oe}_rgb`](Ie)})};return(0,r.shadow)(this,"_commonActions",{display:Y=>{const{display:fe}=Y.detail,xe=fe%2===1;this.container.style.visibility=xe?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:xe,noPrint:fe===1||fe===2})},print:Y=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Y.detail.print})},hidden:Y=>{const{hidden:fe}=Y.detail;this.container.style.visibility=fe?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:fe,noView:fe})},focus:Y=>{setTimeout(()=>Y.target.focus({preventScroll:!1}),0)},userName:Y=>{Y.target.title=Y.detail.userName},readonly:Y=>{Y.target.disabled=Y.detail.readonly},required:Y=>{this._setRequired(Y.target,Y.detail.required)},bgColor:Y=>{Z("bgColor","backgroundColor",Y)},fillColor:Y=>{Z("fillColor","backgroundColor",Y)},fgColor:Y=>{Z("fgColor","color",Y)},textColor:Y=>{Z("textColor","color",Y)},borderColor:Y=>{Z("borderColor","borderColor",Y)},strokeColor:Y=>{Z("strokeColor","borderColor",Y)},rotation:Y=>{const fe=Y.detail.rotation;this.setRotation(fe),this.annotationStorage.setValue(this.data.id,{rotation:fe})}})}_dispatchEventFromSandbox(Z,Y){const fe=this._commonActions;for(const xe of Object.keys(Y.detail)){const Pe=Z[xe]||fe[xe];Pe==null||Pe(Y)}}_setDefaultPropertiesFromJS(Z){if(!this.enableScripting)return;const Y=this.annotationStorage.getRawValue(this.data.id);if(!Y)return;const fe=this._commonActions;for(const[xe,Pe]of Object.entries(Y)){const Oe=fe[xe];if(Oe){const Ie={detail:{[xe]:Pe},target:Z};Oe(Ie),delete Y[xe]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Z}=this.data;if(!Z)return;const[Y,fe,xe,Pe]=this.data.rect;if(Z.length===1){const[,{x:$e,y:Xe},{x:Ke,y:Je}]=Z[0];if(xe===$e&&Pe===Xe&&Y===Ke&&fe===Je)return}const{style:Oe}=this.container;let Ie;if(w(this,p)){const{borderColor:$e,borderWidth:Xe}=Oe;Oe.borderWidth=0,Ie=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${$e}" stroke-width="${Xe}">`],this.container.classList.add("hasBorder")}const He=xe-Y,We=Pe-fe,{svgFactory:Be}=this,Ve=Be.createElement("svg");Ve.classList.add("quadrilateralsContainer"),Ve.setAttribute("width",0),Ve.setAttribute("height",0);const je=Be.createElement("defs");Ve.append(je);const ze=Be.createElement("clipPath"),Ge=`clippath_${this.data.id}`;ze.setAttribute("id",Ge),ze.setAttribute("clipPathUnits","objectBoundingBox"),je.append(ze);for(const[,{x:$e,y:Xe},{x:Ke,y:Je}]of Z){const Ze=Be.createElement("rect"),et=(Ke-Y)/He,rt=(Pe-Xe)/We,nt=($e-Ke)/He,dr=(Xe-Je)/We;Ze.setAttribute("x",et),Ze.setAttribute("y",rt),Ze.setAttribute("width",nt),Ze.setAttribute("height",dr),ze.append(Ze),Ie==null||Ie.push(`<rect vector-effect="non-scaling-stroke" x="${et}" y="${rt}" width="${nt}" height="${dr}"/>`)}w(this,p)&&(Ie.push("</g></svg>')"),Oe.backgroundImage=Ie.join("")),this.container.append(Ve),this.container.style.clipPath=`url(#${Ge})`}_createPopup(){const{container:Z,data:Y}=this;Z.setAttribute("aria-haspopup","dialog");const fe=new P({data:{color:Y.color,titleObj:Y.titleObj,modificationDate:Y.modificationDate,contentsObj:Y.contentsObj,richText:Y.richText,parentRect:Y.rect,borderStyle:0,id:`popup_${Y.id}`,rotation:Y.rotation},parent:this.parent,elements:[this]});this.parent.div.append(fe.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Z,Y=null){const fe=[];if(this._fieldObjects){const xe=this._fieldObjects[Z];if(xe)for(const{page:Pe,id:Oe,exportValues:Ie}of xe){if(Pe===-1||Oe===Y)continue;const He=typeof Ie=="string"?Ie:null,We=document.querySelector(`[data-element-id="${Oe}"]`);if(We&&!S.has(We)){(0,r.warn)(`_getElementsByName - element not allowed: ${Oe}`);continue}fe.push({id:Oe,exportValue:He,domElement:We})}return fe}for(const xe of document.getElementsByName(Z)){const{exportValue:Pe}=xe,Oe=xe.getAttribute("data-element-id");Oe!==Y&&S.has(xe)&&fe.push({id:Oe,exportValue:Pe,domElement:xe})}return fe}show(){var Z;this.container&&(this.container.hidden=!1),(Z=this.popup)==null||Z.maybeShow()}hide(){var Z;this.container&&(this.container.hidden=!0),(Z=this.popup)==null||Z.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Z=this.getElementsToTriggerPopup();if(Array.isArray(Z))for(const Y of Z)Y.classList.add("highlightArea");else Z.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Z,data:{id:Y}}=this;this.container.addEventListener("dblclick",()=>{var fe;(fe=this.linkService.eventBus)==null||fe.dispatch("switchannotationeditormode",{source:this,mode:Z,editId:Y})})}};p=new WeakMap;let F=f;class q extends F{constructor(Y,fe=null){super(Y,{isRenderable:!0,ignoreBorder:!!(fe!=null&&fe.ignoreBorder),createQuadrilaterals:!0});Ee(this,C);this.isTooltipOnly=Y.data.isTooltipOnly}render(){const{data:Y,linkService:fe}=this,xe=document.createElement("a");xe.setAttribute("data-element-id",Y.id);let Pe=!1;return Y.url?(fe.addLinkAttributes(xe,Y.url,Y.newWindow),Pe=!0):Y.action?(this._bindNamedAction(xe,Y.action),Pe=!0):Y.attachment?(this._bindAttachment(xe,Y.attachment),Pe=!0):Y.setOCGState?(ve(this,C,Or).call(this,xe,Y.setOCGState),Pe=!0):Y.dest?(this._bindLink(xe,Y.dest),Pe=!0):(Y.actions&&(Y.actions.Action||Y.actions["Mouse Up"]||Y.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(xe,Y),Pe=!0),Y.resetForm?(this._bindResetFormAction(xe,Y.resetForm),Pe=!0):this.isTooltipOnly&&!Pe&&(this._bindLink(xe,""),Pe=!0)),this.container.classList.add("linkAnnotation"),Pe&&this.container.append(xe),this.container}_bindLink(Y,fe){Y.href=this.linkService.getDestinationHash(fe),Y.onclick=()=>(fe&&this.linkService.goToDestination(fe),!1),(fe||fe==="")&&ve(this,C,it).call(this)}_bindNamedAction(Y,fe){Y.href=this.linkService.getAnchorUrl(""),Y.onclick=()=>(this.linkService.executeNamedAction(fe),!1),ve(this,C,it).call(this)}_bindAttachment(Y,fe){Y.href=this.linkService.getAnchorUrl(""),Y.onclick=()=>{var xe;return(xe=this.downloadManager)==null||xe.openOrDownloadData(this.container,fe.content,fe.filename),!1},ve(this,C,it).call(this)}_bindJSAction(Y,fe){Y.href=this.linkService.getAnchorUrl("");const xe=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Pe of Object.keys(fe.actions)){const Oe=xe.get(Pe);Oe&&(Y[Oe]=()=>{var Ie;return(Ie=this.linkService.eventBus)==null||Ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:fe.id,name:Pe}}),!1})}Y.onclick||(Y.onclick=()=>!1),ve(this,C,it).call(this)}_bindResetFormAction(Y,fe){const xe=Y.onclick;if(xe||(Y.href=this.linkService.getAnchorUrl("")),ve(this,C,it).call(this),!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),xe||(Y.onclick=()=>!1);return}Y.onclick=()=>{var Ve;xe==null||xe();const{fields:Pe,refs:Oe,include:Ie}=fe,He=[];if(Pe.length!==0||Oe.length!==0){const je=new Set(Oe);for(const ze of Pe){const Ge=this._fieldObjects[ze]||[];for(const{id:$e}of Ge)je.add($e)}for(const ze of Object.values(this._fieldObjects))for(const Ge of ze)je.has(Ge.id)===Ie&&He.push(Ge)}else for(const je of Object.values(this._fieldObjects))He.push(...je);const We=this.annotationStorage,Be=[];for(const je of He){const{id:ze}=je;switch(Be.push(ze),je.type){case"text":{const $e=je.defaultValue||"";We.setValue(ze,{value:$e});break}case"checkbox":case"radiobutton":{const $e=je.defaultValue===je.exportValues;We.setValue(ze,{value:$e});break}case"combobox":case"listbox":{const $e=je.defaultValue||"";We.setValue(ze,{value:$e});break}default:continue}const Ge=document.querySelector(`[data-element-id="${ze}"]`);if(Ge){if(!S.has(Ge)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${ze}`);continue}}else continue;Ge.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Ve=this.linkService.eventBus)==null||Ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Be,name:"ResetForm"}})),!1}}}C=new WeakSet,it=function(){this.container.setAttribute("data-internal-link","")},Or=function(Y,fe){Y.href=this.linkService.getAnchorUrl(""),Y.onclick=()=>(this.linkService.executeSetOCGState(fe),!1),ve(this,C,it).call(this)};class T extends F{constructor(Z){super(Z,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Z=document.createElement("img");return Z.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Z.alt="[{{type}} Annotation]",Z.dataset.l10nId="text_annotation_type",Z.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Z),this.container}}class o extends F{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Z){var Y;this.data.hasOwnCanvas&&(((Y=Z.previousSibling)==null?void 0:Y.nodeName)==="CANVAS"&&(Z.previousSibling.hidden=!0),Z.hidden=!1)}_getKeyModifier(Z){const{isWin:Y,isMac:fe}=r.FeatureTest.platform;return Y&&Z.ctrlKey||fe&&Z.metaKey}_setEventListener(Z,Y,fe,xe,Pe){fe.includes("mouse")?Z.addEventListener(fe,Oe=>{var Ie;(Ie=this.linkService.eventBus)==null||Ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:xe,value:Pe(Oe),shift:Oe.shiftKey,modifier:this._getKeyModifier(Oe)}})}):Z.addEventListener(fe,Oe=>{var Ie;if(fe==="blur"){if(!Y.focused||!Oe.relatedTarget)return;Y.focused=!1}else if(fe==="focus"){if(Y.focused)return;Y.focused=!0}Pe&&((Ie=this.linkService.eventBus)==null||Ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:xe,value:Pe(Oe)}}))})}_setEventListeners(Z,Y,fe,xe){var Pe,Oe,Ie;for(const[He,We]of fe)(We==="Action"||(Pe=this.data.actions)!=null&&Pe[We])&&((We==="Focus"||We==="Blur")&&(Y||(Y={focused:!1})),this._setEventListener(Z,Y,He,We,xe),We==="Focus"&&!((Oe=this.data.actions)!=null&&Oe.Blur)?this._setEventListener(Z,Y,"blur","Blur",null):We==="Blur"&&!((Ie=this.data.actions)!=null&&Ie.Focus)&&this._setEventListener(Z,Y,"focus","Focus",null))}_setBackgroundColor(Z){const Y=this.data.backgroundColor||null;Z.style.backgroundColor=Y===null?"transparent":r.Util.makeHexColor(Y[0],Y[1],Y[2])}_setTextStyle(Z){const Y=["left","center","right"],{fontColor:fe}=this.data.defaultAppearanceData,xe=this.data.defaultAppearanceData.fontSize||a,Pe=Z.style;let Oe;const Ie=2,He=We=>Math.round(10*We)/10;if(this.data.multiLine){const We=Math.abs(this.data.rect[3]-this.data.rect[1]-Ie),Be=Math.round(We/(r.LINE_FACTOR*xe))||1,Ve=We/Be;Oe=Math.min(xe,He(Ve/r.LINE_FACTOR))}else{const We=Math.abs(this.data.rect[3]-this.data.rect[1]-Ie);Oe=Math.min(xe,He(We/r.LINE_FACTOR))}Pe.fontSize=`calc(${Oe}px * var(--scale-factor))`,Pe.color=r.Util.makeHexColor(fe[0],fe[1],fe[2]),this.data.textAlignment!==null&&(Pe.textAlign=Y[this.data.textAlignment])}_setRequired(Z,Y){Y?Z.setAttribute("required",!0):Z.removeAttribute("required"),Z.setAttribute("aria-required",Y)}}class u extends o{constructor(Z){const Y=Z.renderForms||!Z.data.hasAppearance&&!!Z.data.fieldValue;super(Z,{isRenderable:Y})}setPropertyOnSiblings(Z,Y,fe,xe){const Pe=this.annotationStorage;for(const Oe of this._getElementsByName(Z.name,Z.id))Oe.domElement&&(Oe.domElement[Y]=fe),Pe.setValue(Oe.id,{[xe]:fe})}render(){var xe,Pe;const Z=this.annotationStorage,Y=this.data.id;this.container.classList.add("textWidgetAnnotation");let fe=null;if(this.renderForms){const Oe=Z.getValue(Y,{value:this.data.fieldValue});let Ie=Oe.value||"";const He=Z.getValue(Y,{charLimit:this.data.maxLen}).charLimit;He&&Ie.length>He&&(Ie=Ie.slice(0,He));let We=Oe.formattedValue||((xe=this.data.textContent)==null?void 0:xe.join(`
`))||null;We&&this.data.comb&&(We=We.replaceAll(/\s+/g,""));const Be={userValue:Ie,formattedValue:We,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(fe=document.createElement("textarea"),fe.textContent=We??Ie,this.data.doNotScroll&&(fe.style.overflowY="hidden")):(fe=document.createElement("input"),fe.type="text",fe.setAttribute("value",We??Ie),this.data.doNotScroll&&(fe.style.overflowX="hidden")),this.data.hasOwnCanvas&&(fe.hidden=!0),S.add(fe),fe.setAttribute("data-element-id",Y),fe.disabled=this.data.readOnly,fe.name=this.data.fieldName,fe.tabIndex=m,this._setRequired(fe,this.data.required),He&&(fe.maxLength=He),fe.addEventListener("input",je=>{Z.setValue(Y,{value:je.target.value}),this.setPropertyOnSiblings(fe,"value",je.target.value,"value"),Be.formattedValue=null}),fe.addEventListener("resetform",je=>{const ze=this.data.defaultFieldValue??"";fe.value=Be.userValue=ze,Be.formattedValue=null});let Ve=je=>{const{formattedValue:ze}=Be;ze!=null&&(je.target.value=ze),je.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){fe.addEventListener("focus",ze=>{if(Be.focused)return;const{target:Ge}=ze;Be.userValue&&(Ge.value=Be.userValue),Be.lastCommittedValue=Ge.value,Be.commitKey=1,Be.focused=!0}),fe.addEventListener("updatefromsandbox",ze=>{this.showElementAndHideCanvas(ze.target);const Ge={value($e){Be.userValue=$e.detail.value??"",Z.setValue(Y,{value:Be.userValue.toString()}),$e.target.value=Be.userValue},formattedValue($e){const{formattedValue:Xe}=$e.detail;Be.formattedValue=Xe,Xe!=null&&$e.target!==document.activeElement&&($e.target.value=Xe),Z.setValue(Y,{formattedValue:Xe})},selRange($e){$e.target.setSelectionRange(...$e.detail.selRange)},charLimit:$e=>{var Ze;const{charLimit:Xe}=$e.detail,{target:Ke}=$e;if(Xe===0){Ke.removeAttribute("maxLength");return}Ke.setAttribute("maxLength",Xe);let Je=Be.userValue;!Je||Je.length<=Xe||(Je=Je.slice(0,Xe),Ke.value=Be.userValue=Je,Z.setValue(Y,{value:Je}),(Ze=this.linkService.eventBus)==null||Ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Y,name:"Keystroke",value:Je,willCommit:!0,commitKey:1,selStart:Ke.selectionStart,selEnd:Ke.selectionEnd}}))}};this._dispatchEventFromSandbox(Ge,ze)}),fe.addEventListener("keydown",ze=>{var Xe;Be.commitKey=1;let Ge=-1;if(ze.key==="Escape"?Ge=0:ze.key==="Enter"&&!this.data.multiLine?Ge=2:ze.key==="Tab"&&(Be.commitKey=3),Ge===-1)return;const{value:$e}=ze.target;Be.lastCommittedValue!==$e&&(Be.lastCommittedValue=$e,Be.userValue=$e,(Xe=this.linkService.eventBus)==null||Xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Y,name:"Keystroke",value:$e,willCommit:!0,commitKey:Ge,selStart:ze.target.selectionStart,selEnd:ze.target.selectionEnd}}))});const je=Ve;Ve=null,fe.addEventListener("blur",ze=>{var $e;if(!Be.focused||!ze.relatedTarget)return;Be.focused=!1;const{value:Ge}=ze.target;Be.userValue=Ge,Be.lastCommittedValue!==Ge&&(($e=this.linkService.eventBus)==null||$e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Y,name:"Keystroke",value:Ge,willCommit:!0,commitKey:Be.commitKey,selStart:ze.target.selectionStart,selEnd:ze.target.selectionEnd}})),je(ze)}),(Pe=this.data.actions)!=null&&Pe.Keystroke&&fe.addEventListener("beforeinput",ze=>{var rt;Be.lastCommittedValue=null;const{data:Ge,target:$e}=ze,{value:Xe,selectionStart:Ke,selectionEnd:Je}=$e;let Ze=Ke,et=Je;switch(ze.inputType){case"deleteWordBackward":{const nt=Xe.substring(0,Ke).match(/\w*[^\w]*$/);nt&&(Ze-=nt[0].length);break}case"deleteWordForward":{const nt=Xe.substring(Ke).match(/^[^\w]*\w*/);nt&&(et+=nt[0].length);break}case"deleteContentBackward":Ke===Je&&(Ze-=1);break;case"deleteContentForward":Ke===Je&&(et+=1);break}ze.preventDefault(),(rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Y,name:"Keystroke",value:Xe,change:Ge||"",willCommit:!1,selStart:Ze,selEnd:et}})}),this._setEventListeners(fe,Be,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ze=>ze.target.value)}if(Ve&&fe.addEventListener("blur",Ve),this.data.comb){const ze=(this.data.rect[2]-this.data.rect[0])/He;fe.classList.add("comb"),fe.style.letterSpacing=`calc(${ze}px * var(--scale-factor) - 1ch)`}}else fe=document.createElement("div"),fe.textContent=this.data.fieldValue,fe.style.verticalAlign="middle",fe.style.display="table-cell";return this._setTextStyle(fe),this._setBackgroundColor(fe),this._setDefaultPropertiesFromJS(fe),this.container.append(fe),this.container}}class x extends o{constructor(Z){super(Z,{isRenderable:!!Z.data.hasOwnCanvas})}}class b extends o{constructor(Z){super(Z,{isRenderable:Z.renderForms})}render(){const Z=this.annotationStorage,Y=this.data,fe=Y.id;let xe=Z.getValue(fe,{value:Y.exportValue===Y.fieldValue}).value;typeof xe=="string"&&(xe=xe!=="Off",Z.setValue(fe,{value:xe})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Pe=document.createElement("input");return S.add(Pe),Pe.setAttribute("data-element-id",fe),Pe.disabled=Y.readOnly,this._setRequired(Pe,this.data.required),Pe.type="checkbox",Pe.name=Y.fieldName,xe&&Pe.setAttribute("checked",!0),Pe.setAttribute("exportValue",Y.exportValue),Pe.tabIndex=m,Pe.addEventListener("change",Oe=>{const{name:Ie,checked:He}=Oe.target;for(const We of this._getElementsByName(Ie,fe)){const Be=He&&We.exportValue===Y.exportValue;We.domElement&&(We.domElement.checked=Be),Z.setValue(We.id,{value:Be})}Z.setValue(fe,{value:He})}),Pe.addEventListener("resetform",Oe=>{const Ie=Y.defaultFieldValue||"Off";Oe.target.checked=Ie===Y.exportValue}),this.enableScripting&&this.hasJSActions&&(Pe.addEventListener("updatefromsandbox",Oe=>{const Ie={value(He){He.target.checked=He.detail.value!=="Off",Z.setValue(fe,{value:He.target.checked})}};this._dispatchEventFromSandbox(Ie,Oe)}),this._setEventListeners(Pe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Oe=>Oe.target.checked)),this._setBackgroundColor(Pe),this._setDefaultPropertiesFromJS(Pe),this.container.append(Pe),this.container}}class l extends o{constructor(Z){super(Z,{isRenderable:Z.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Z=this.annotationStorage,Y=this.data,fe=Y.id;let xe=Z.getValue(fe,{value:Y.fieldValue===Y.buttonValue}).value;typeof xe=="string"&&(xe=xe!==Y.buttonValue,Z.setValue(fe,{value:xe}));const Pe=document.createElement("input");if(S.add(Pe),Pe.setAttribute("data-element-id",fe),Pe.disabled=Y.readOnly,this._setRequired(Pe,this.data.required),Pe.type="radio",Pe.name=Y.fieldName,xe&&Pe.setAttribute("checked",!0),Pe.tabIndex=m,Pe.addEventListener("change",Oe=>{const{name:Ie,checked:He}=Oe.target;for(const We of this._getElementsByName(Ie,fe))Z.setValue(We.id,{value:!1});Z.setValue(fe,{value:He})}),Pe.addEventListener("resetform",Oe=>{const Ie=Y.defaultFieldValue;Oe.target.checked=Ie!=null&&Ie===Y.buttonValue}),this.enableScripting&&this.hasJSActions){const Oe=Y.buttonValue;Pe.addEventListener("updatefromsandbox",Ie=>{const He={value:We=>{const Be=Oe===We.detail.value;for(const Ve of this._getElementsByName(We.target.name)){const je=Be&&Ve.id===fe;Ve.domElement&&(Ve.domElement.checked=je),Z.setValue(Ve.id,{value:je})}}};this._dispatchEventFromSandbox(He,Ie)}),this._setEventListeners(Pe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ie=>Ie.target.checked)}return this._setBackgroundColor(Pe),this._setDefaultPropertiesFromJS(Pe),this.container.append(Pe),this.container}}class v extends q{constructor(Z){super(Z,{ignoreBorder:Z.data.hasAppearance})}render(){const Z=super.render();Z.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Z.title=this.data.alternativeText);const Y=Z.lastChild;return this.enableScripting&&this.hasJSActions&&Y&&(this._setDefaultPropertiesFromJS(Y),Y.addEventListener("updatefromsandbox",fe=>{this._dispatchEventFromSandbox({},fe)})),Z}}class c extends o{constructor(Z){super(Z,{isRenderable:Z.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Z=this.annotationStorage,Y=this.data.id,fe=Z.getValue(Y,{value:this.data.fieldValue}),xe=document.createElement("select");S.add(xe),xe.setAttribute("data-element-id",Y),xe.disabled=this.data.readOnly,this._setRequired(xe,this.data.required),xe.name=this.data.fieldName,xe.tabIndex=m;let Pe=this.data.combo&&this.data.options.length>0;this.data.combo||(xe.size=this.data.options.length,this.data.multiSelect&&(xe.multiple=!0)),xe.addEventListener("resetform",Be=>{const Ve=this.data.defaultFieldValue;for(const je of xe.options)je.selected=je.value===Ve});for(const Be of this.data.options){const Ve=document.createElement("option");Ve.textContent=Be.displayValue,Ve.value=Be.exportValue,fe.value.includes(Be.exportValue)&&(Ve.setAttribute("selected",!0),Pe=!1),xe.append(Ve)}let Oe=null;if(Pe){const Be=document.createElement("option");Be.value=" ",Be.setAttribute("hidden",!0),Be.setAttribute("selected",!0),xe.prepend(Be),Oe=()=>{Be.remove(),xe.removeEventListener("input",Oe),Oe=null},xe.addEventListener("input",Oe)}const Ie=Be=>{const Ve=Be?"value":"textContent",{options:je,multiple:ze}=xe;return ze?Array.prototype.filter.call(je,Ge=>Ge.selected).map(Ge=>Ge[Ve]):je.selectedIndex===-1?null:je[je.selectedIndex][Ve]};let He=Ie(!1);const We=Be=>{const Ve=Be.target.options;return Array.prototype.map.call(Ve,je=>({displayValue:je.textContent,exportValue:je.value}))};return this.enableScripting&&this.hasJSActions?(xe.addEventListener("updatefromsandbox",Be=>{const Ve={value(je){Oe==null||Oe();const ze=je.detail.value,Ge=new Set(Array.isArray(ze)?ze:[ze]);for(const $e of xe.options)$e.selected=Ge.has($e.value);Z.setValue(Y,{value:Ie(!0)}),He=Ie(!1)},multipleSelection(je){xe.multiple=!0},remove(je){const ze=xe.options,Ge=je.detail.remove;ze[Ge].selected=!1,xe.remove(Ge),ze.length>0&&Array.prototype.findIndex.call(ze,Xe=>Xe.selected)===-1&&(ze[0].selected=!0),Z.setValue(Y,{value:Ie(!0),items:We(je)}),He=Ie(!1)},clear(je){for(;xe.length!==0;)xe.remove(0);Z.setValue(Y,{value:null,items:[]}),He=Ie(!1)},insert(je){const{index:ze,displayValue:Ge,exportValue:$e}=je.detail.insert,Xe=xe.children[ze],Ke=document.createElement("option");Ke.textContent=Ge,Ke.value=$e,Xe?Xe.before(Ke):xe.append(Ke),Z.setValue(Y,{value:Ie(!0),items:We(je)}),He=Ie(!1)},items(je){const{items:ze}=je.detail;for(;xe.length!==0;)xe.remove(0);for(const Ge of ze){const{displayValue:$e,exportValue:Xe}=Ge,Ke=document.createElement("option");Ke.textContent=$e,Ke.value=Xe,xe.append(Ke)}xe.options.length>0&&(xe.options[0].selected=!0),Z.setValue(Y,{value:Ie(!0),items:We(je)}),He=Ie(!1)},indices(je){const ze=new Set(je.detail.indices);for(const Ge of je.target.options)Ge.selected=ze.has(Ge.index);Z.setValue(Y,{value:Ie(!0)}),He=Ie(!1)},editable(je){je.target.disabled=!je.detail.editable}};this._dispatchEventFromSandbox(Ve,Be)}),xe.addEventListener("input",Be=>{var je;const Ve=Ie(!0);Z.setValue(Y,{value:Ve}),Be.preventDefault(),(je=this.linkService.eventBus)==null||je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Y,name:"Keystroke",value:He,changeEx:Ve,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(xe,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Be=>Be.target.value)):xe.addEventListener("input",function(Be){Z.setValue(Y,{value:Ie(!0)})}),this.data.combo&&this._setTextStyle(xe),this._setBackgroundColor(xe),this._setDefaultPropertiesFromJS(xe),this.container.append(xe),this.container}}class P extends F{constructor(Z){const{data:Y,elements:fe}=Z;super(Z,{isRenderable:F._hasPopupData(Y)}),this.elements=fe}render(){this.container.classList.add("popupAnnotation");const Z=new R({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Y=[];for(const fe of this.elements)fe.popup=Z,Y.push(fe.data.id),fe.addHighlightArea();return this.container.setAttribute("aria-controls",Y.map(fe=>`${r.AnnotationPrefix}${fe}`).join(",")),this.container}}class R{constructor({container:Z,color:Y,elements:fe,titleObj:xe,modificationDate:Pe,contentsObj:Oe,richText:Ie,parent:He,rect:We,parentRect:Be,open:Ve}){Ee(this,Te);Ee(this,Q,null);Ee(this,L,ve(this,Te,kr).bind(this));Ee(this,N,ve(this,Te,rr).bind(this));Ee(this,se,ve(this,Te,tr).bind(this));Ee(this,ge,ve(this,Te,Rt).bind(this));Ee(this,Ae,null);Ee(this,he,null);Ee(this,de,null);Ee(this,K,null);Ee(this,$,null);Ee(this,me,null);Ee(this,_e,!1);Ee(this,Ce,null);Ee(this,ke,null);Ee(this,te,null);Ee(this,J,null);Ee(this,Se,!1);var ze;Re(this,he,Z),Re(this,J,xe),Re(this,de,Oe),Re(this,te,Ie),Re(this,$,He),Re(this,Ae,Y),Re(this,ke,We),Re(this,me,Be),Re(this,K,fe);const je=h.PDFDateString.toDateObject(Pe);je&&Re(this,Q,He.l10n.get("annotation_date_string",{date:je.toLocaleDateString(),time:je.toLocaleTimeString()})),this.trigger=fe.flatMap(Ge=>Ge.getElementsToTriggerPopup());for(const Ge of this.trigger)Ge.addEventListener("click",w(this,ge)),Ge.addEventListener("mouseenter",w(this,se)),Ge.addEventListener("mouseleave",w(this,N)),Ge.classList.add("popupTriggerArea");for(const Ge of fe)(ze=Ge.container)==null||ze.addEventListener("keydown",w(this,L));w(this,he).hidden=!0,Ve&&ve(this,Te,Rt).call(this)}render(){if(w(this,Ce))return;const{page:{view:Z},viewport:{rawDims:{pageWidth:Y,pageHeight:fe,pageX:xe,pageY:Pe}}}=w(this,$),Oe=Re(this,Ce,document.createElement("div"));if(Oe.className="popup",w(this,Ae)){const Ze=Oe.style.outlineColor=r.Util.makeHexColor(...w(this,Ae));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Oe.style.backgroundColor=`color-mix(in srgb, ${Ze} 30%, white)`:Oe.style.backgroundColor=r.Util.makeHexColor(...w(this,Ae).map(rt=>Math.floor(.7*(255-rt)+rt)))}const Ie=document.createElement("span");Ie.className="header";const He=document.createElement("h1");if(Ie.append(He),{dir:He.dir,str:He.textContent}=w(this,J),Oe.append(Ie),w(this,Q)){const Ze=document.createElement("span");Ze.classList.add("popupDate"),w(this,Q).then(et=>{Ze.textContent=et}),Ie.append(Ze)}const We=w(this,de),Be=w(this,te);if(Be!=null&&Be.str&&(!(We!=null&&We.str)||We.str===Be.str))g.XfaLayer.render({xfaHtml:Be.html,intent:"richText",div:Oe}),Oe.lastChild.classList.add("richText","popupContent");else{const Ze=this._formatContents(We);Oe.append(Ze)}let Ve=!!w(this,me),je=Ve?w(this,me):w(this,ke);for(const Ze of w(this,K))if(!je||r.Util.intersect(Ze.data.rect,je)!==null){je=Ze.data.rect,Ve=!0;break}const ze=r.Util.normalizeRect([je[0],Z[3]-je[1]+Z[1],je[2],Z[3]-je[3]+Z[1]]),$e=Ve?je[2]-je[0]+5:0,Xe=ze[0]+$e,Ke=ze[1],{style:Je}=w(this,he);Je.left=`${100*(Xe-xe)/Y}%`,Je.top=`${100*(Ke-Pe)/fe}%`,w(this,he).append(Oe)}_formatContents({str:Z,dir:Y}){const fe=document.createElement("p");fe.classList.add("popupContent"),fe.dir=Y;const xe=Z.split(/(?:\r\n?|\n)/);for(let Pe=0,Oe=xe.length;Pe<Oe;++Pe){const Ie=xe[Pe];fe.append(document.createTextNode(Ie)),Pe<Oe-1&&fe.append(document.createElement("br"))}return fe}forceHide(){Re(this,Se,this.isVisible),w(this,Se)&&(w(this,he).hidden=!0)}maybeShow(){w(this,Se)&&(Re(this,Se,!1),w(this,he).hidden=!1)}get isVisible(){return w(this,he).hidden===!1}}Q=new WeakMap,L=new WeakMap,N=new WeakMap,se=new WeakMap,ge=new WeakMap,Ae=new WeakMap,he=new WeakMap,de=new WeakMap,K=new WeakMap,$=new WeakMap,me=new WeakMap,_e=new WeakMap,Ce=new WeakMap,ke=new WeakMap,te=new WeakMap,J=new WeakMap,Se=new WeakMap,Te=new WeakSet,kr=function(Z){Z.altKey||Z.shiftKey||Z.ctrlKey||Z.metaKey||(Z.key==="Enter"||Z.key==="Escape"&&w(this,_e))&&ve(this,Te,Rt).call(this)},Rt=function(){Re(this,_e,!w(this,_e)),w(this,_e)?(ve(this,Te,tr).call(this),w(this,he).addEventListener("click",w(this,ge)),w(this,he).addEventListener("keydown",w(this,L))):(ve(this,Te,rr).call(this),w(this,he).removeEventListener("click",w(this,ge)),w(this,he).removeEventListener("keydown",w(this,L)))},tr=function(){w(this,Ce)||this.render(),this.isVisible?w(this,_e)&&w(this,he).classList.add("focused"):(w(this,he).hidden=!1,w(this,he).style.zIndex=parseInt(w(this,he).style.zIndex)+1e3)},rr=function(){w(this,he).classList.remove("focused"),!(w(this,_e)||!this.isVisible)&&(w(this,he).hidden=!0,w(this,he).style.zIndex=parseInt(w(this,he).style.zIndex)-1e3)};class X extends F{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Z.data.textContent,this.textPosition=Z.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Z=document.createElement("div");Z.classList.add("annotationTextContent"),Z.setAttribute("role","comment");for(const Y of this.textContent){const fe=document.createElement("span");fe.textContent=Y,Z.append(fe)}this.container.append(Z)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=X;class D extends F{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0});Ee(this,be,null)}render(){this.container.classList.add("lineAnnotation");const Y=this.data,{width:fe,height:xe}=A(Y.rect),Pe=this.svgFactory.create(fe,xe,!0),Oe=Re(this,be,this.svgFactory.createElement("svg:line"));return Oe.setAttribute("x1",Y.rect[2]-Y.lineCoordinates[0]),Oe.setAttribute("y1",Y.rect[3]-Y.lineCoordinates[1]),Oe.setAttribute("x2",Y.rect[2]-Y.lineCoordinates[2]),Oe.setAttribute("y2",Y.rect[3]-Y.lineCoordinates[3]),Oe.setAttribute("stroke-width",Y.borderStyle.width||1),Oe.setAttribute("stroke","transparent"),Oe.setAttribute("fill","transparent"),Pe.append(Oe),this.container.append(Pe),!Y.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return w(this,be)}addHighlightArea(){this.container.classList.add("highlightArea")}}be=new WeakMap;class E extends F{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0});Ee(this,Fe,null)}render(){this.container.classList.add("squareAnnotation");const Y=this.data,{width:fe,height:xe}=A(Y.rect),Pe=this.svgFactory.create(fe,xe,!0),Oe=Y.borderStyle.width,Ie=Re(this,Fe,this.svgFactory.createElement("svg:rect"));return Ie.setAttribute("x",Oe/2),Ie.setAttribute("y",Oe/2),Ie.setAttribute("width",fe-Oe),Ie.setAttribute("height",xe-Oe),Ie.setAttribute("stroke-width",Oe||1),Ie.setAttribute("stroke","transparent"),Ie.setAttribute("fill","transparent"),Pe.append(Ie),this.container.append(Pe),!Y.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return w(this,Fe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fe=new WeakMap;class B extends F{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0});Ee(this,Le,null)}render(){this.container.classList.add("circleAnnotation");const Y=this.data,{width:fe,height:xe}=A(Y.rect),Pe=this.svgFactory.create(fe,xe,!0),Oe=Y.borderStyle.width,Ie=Re(this,Le,this.svgFactory.createElement("svg:ellipse"));return Ie.setAttribute("cx",fe/2),Ie.setAttribute("cy",xe/2),Ie.setAttribute("rx",fe/2-Oe/2),Ie.setAttribute("ry",xe/2-Oe/2),Ie.setAttribute("stroke-width",Oe||1),Ie.setAttribute("stroke","transparent"),Ie.setAttribute("fill","transparent"),Pe.append(Ie),this.container.append(Pe),!Y.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return w(this,Le)}addHighlightArea(){this.container.classList.add("highlightArea")}}Le=new WeakMap;class oe extends F{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0});Ee(this,ee,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Y=this.data,{width:fe,height:xe}=A(Y.rect),Pe=this.svgFactory.create(fe,xe,!0);let Oe=[];for(const He of Y.vertices){const We=He.x-Y.rect[0],Be=Y.rect[3]-He.y;Oe.push(We+","+Be)}Oe=Oe.join(" ");const Ie=Re(this,ee,this.svgFactory.createElement(this.svgElementName));return Ie.setAttribute("points",Oe),Ie.setAttribute("stroke-width",Y.borderStyle.width||1),Ie.setAttribute("stroke","transparent"),Ie.setAttribute("fill","transparent"),Pe.append(Ie),this.container.append(Pe),!Y.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return w(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap;class ae extends oe{constructor(Z){super(Z),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ue extends F{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class re extends F{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0});Ee(this,ie,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Y=this.data,{width:fe,height:xe}=A(Y.rect),Pe=this.svgFactory.create(fe,xe,!0);for(const Oe of Y.inkLists){let Ie=[];for(const We of Oe){const Be=We.x-Y.rect[0],Ve=Y.rect[3]-We.y;Ie.push(`${Be},${Ve}`)}Ie=Ie.join(" ");const He=this.svgFactory.createElement(this.svgElementName);w(this,ie).push(He),He.setAttribute("points",Ie),He.setAttribute("stroke-width",Y.borderStyle.width||1),He.setAttribute("stroke","transparent"),He.setAttribute("fill","transparent"),!Y.popupRef&&this.hasPopupData&&this._createPopup(),Pe.append(He)}return this.container.append(Pe),this.container}getElementsToTriggerPopup(){return w(this,ie)}addHighlightArea(){this.container.classList.add("highlightArea")}}ie=new WeakMap,e.InkAnnotationElement=re;class pe extends F{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class H extends F{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class W extends F{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ne extends F{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class j extends F{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=j;class s extends F{constructor(Y){var Pe;super(Y,{isRenderable:!0});Ee(this,we);Ee(this,O,null);const{filename:fe,content:xe}=this.data.file;this.filename=(0,h.getFilenameFromUrl)(fe,!0),this.content=xe,(Pe=this.linkService.eventBus)==null||Pe.dispatch("fileattachmentannotation",{source:this,filename:fe,content:xe})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Y,data:fe}=this;let xe;fe.hasAppearance||fe.fillAlpha===0?xe=document.createElement("div"):(xe=document.createElement("img"),xe.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(fe.name)?"paperclip":"pushpin"}.svg`,fe.fillAlpha&&fe.fillAlpha<1&&(xe.style=`filter: opacity(${Math.round(fe.fillAlpha*100)}%);`)),xe.addEventListener("dblclick",ve(this,we,nr).bind(this)),Re(this,O,xe);const{isMac:Pe}=r.FeatureTest.platform;return Y.addEventListener("keydown",Oe=>{Oe.key==="Enter"&&(Pe?Oe.metaKey:Oe.ctrlKey)&&ve(this,we,nr).call(this)}),!fe.popupRef&&this.hasPopupData?this._createPopup():xe.classList.add("popupTriggerArea"),Y.append(xe),Y}getElementsToTriggerPopup(){return w(this,O)}addHighlightArea(){this.container.classList.add("highlightArea")}}O=new WeakMap,we=new WeakSet,nr=function(){var Y;(Y=this.downloadManager)==null||Y.openOrDownloadData(this.container,this.content,this.filename)};class i{constructor({div:Z,accessibilityManager:Y,annotationCanvasMap:fe,l10n:xe,page:Pe,viewport:Oe}){Ee(this,U);Ee(this,d,null);Ee(this,G,null);Ee(this,ce,new Map);this.div=Z,Re(this,d,Y),Re(this,G,fe),this.l10n=xe,this.page=Pe,this.viewport=Oe,this.zIndex=0,this.l10n||(this.l10n=k.NullL10n)}async render(Z){const{annotations:Y}=Z,fe=this.div;(0,h.setLayerDimensions)(fe,this.viewport);const xe=new Map,Pe={data:null,layer:fe,linkService:Z.linkService,downloadManager:Z.downloadManager,imageResourcesPath:Z.imageResourcesPath||"",renderForms:Z.renderForms!==!1,svgFactory:new h.DOMSVGFactory,annotationStorage:Z.annotationStorage||new y.AnnotationStorage,enableScripting:Z.enableScripting===!0,hasJSActions:Z.hasJSActions,fieldObjects:Z.fieldObjects,parent:this,elements:null};for(const Oe of Y){if(Oe.noHTML)continue;const Ie=Oe.annotationType===r.AnnotationType.POPUP;if(Ie){const Be=xe.get(Oe.id);if(!Be)continue;Pe.elements=Be}else{const{width:Be,height:Ve}=A(Oe.rect);if(Be<=0||Ve<=0)continue}Pe.data=Oe;const He=M.create(Pe);if(!He.isRenderable)continue;if(!Ie&&Oe.popupRef){const Be=xe.get(Oe.popupRef);Be?Be.push(He):xe.set(Oe.popupRef,[He])}He.annotationEditorType>0&&w(this,ce).set(He.data.id,He);const We=He.render();Oe.hidden&&(We.style.visibility="hidden"),ve(this,U,Fr).call(this,We,Oe.id)}ve(this,U,ir).call(this),await this.l10n.translate(fe)}update({viewport:Z}){const Y=this.div;this.viewport=Z,(0,h.setLayerDimensions)(Y,{rotation:Z.rotation}),ve(this,U,ir).call(this),Y.hidden=!1}getEditableAnnotations(){return Array.from(w(this,ce).values())}getEditableAnnotation(Z){return w(this,ce).get(Z)}}d=new WeakMap,G=new WeakMap,ce=new WeakMap,U=new WeakSet,Fr=function(Z,Y){var xe;const fe=Z.firstChild||Z;fe.id=`${r.AnnotationPrefix}${Y}`,this.div.append(Z),(xe=w(this,d))==null||xe.moveElementInDOM(this.div,Z,fe,!1)},ir=function(){if(!w(this,G))return;const Z=this.div;for(const[Y,fe]of w(this,G)){const xe=Z.querySelector(`[data-annotation-id="${Y}"]`);if(!xe)continue;const{firstChild:Pe}=xe;Pe?Pe.nodeName==="CANVAS"?Pe.replaceWith(fe):Pe.before(fe):xe.append(fe)}w(this,G).clear()},e.AnnotationLayer=i},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function n(y){return Math.floor(Math.max(0,Math.min(1,y))*255).toString(16).padStart(2,"0")}function r(y){return Math.max(0,Math.min(255,255*y))}class h{static CMYK_G([_,k,g,m]){return["G",1-Math.min(1,.3*_+.59*g+.11*k+m)]}static G_CMYK([_]){return["CMYK",0,0,0,1-_]}static G_RGB([_]){return["RGB",_,_,_]}static G_rgb([_]){return _=r(_),[_,_,_]}static G_HTML([_]){const k=n(_);return`#${k}${k}${k}`}static RGB_G([_,k,g]){return["G",.3*_+.59*k+.11*g]}static RGB_rgb(_){return _.map(r)}static RGB_HTML(_){return`#${_.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([_,k,g,m]){return["RGB",1-Math.min(1,_+m),1-Math.min(1,g+m),1-Math.min(1,k+m)]}static CMYK_rgb([_,k,g,m]){return[r(1-Math.min(1,_+m)),r(1-Math.min(1,g+m)),r(1-Math.min(1,k+m))]}static CMYK_HTML(_){const k=this.CMYK_RGB(_).slice(1);return this.RGB_HTML(k)}static RGB_CMYK([_,k,g]){const m=1-_,a=1-k,S=1-g,A=Math.min(m,a,S);return["CMYK",m,a,S,A]}}e.ColorConverters=h},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=r;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function r(_,k){switch(_){case"find_match_count":_=`find_match_count[${k.total===1?"one":"other"}]`;break;case"find_match_count_limit":_=`find_match_count_limit[${k.limit===1?"one":"other"}]`;break}return n[_]||""}function h(_,k){return k?_.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(g,m)=>m in k?k[m]:"{{"+m+"}}"):_}const y={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(_,k=null,g=r(_,k)){return h(g,k)},async translate(_){}};e.NullL10n=y},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=n(25);class h{static setupStorage(_,k,g,m,a){const S=m.getValue(k,{value:null});switch(g.name){case"textarea":if(S.value!==null&&(_.textContent=S.value),a==="print")break;_.addEventListener("input",A=>{m.setValue(k,{value:A.target.value})});break;case"input":if(g.attributes.type==="radio"||g.attributes.type==="checkbox"){if(S.value===g.attributes.xfaOn?_.setAttribute("checked",!0):S.value===g.attributes.xfaOff&&_.removeAttribute("checked"),a==="print")break;_.addEventListener("change",A=>{m.setValue(k,{value:A.target.checked?A.target.getAttribute("xfaOn"):A.target.getAttribute("xfaOff")})})}else{if(S.value!==null&&_.setAttribute("value",S.value),a==="print")break;_.addEventListener("input",A=>{m.setValue(k,{value:A.target.value})})}break;case"select":if(S.value!==null){_.setAttribute("value",S.value);for(const A of g.children)A.attributes.value===S.value?A.attributes.selected=!0:A.attributes.hasOwnProperty("selected")&&delete A.attributes.selected}_.addEventListener("input",A=>{const M=A.target.options,F=M.selectedIndex===-1?"":M[M.selectedIndex].value;m.setValue(k,{value:F})});break}}static setAttributes({html:_,element:k,storage:g=null,intent:m,linkService:a}){const{attributes:S}=k,A=_ instanceof HTMLAnchorElement;S.type==="radio"&&(S.name=`${S.name}-${m}`);for(const[M,F]of Object.entries(S))if(F!=null)switch(M){case"class":F.length&&_.setAttribute(M,F.join(" "));break;case"dataId":break;case"id":_.setAttribute("data-element-id",F);break;case"style":Object.assign(_.style,F);break;case"textContent":_.textContent=F;break;default:(!A||M!=="href"&&M!=="newWindow")&&_.setAttribute(M,F)}A&&a.addLinkAttributes(_,S.href,S.newWindow),g&&S.dataId&&this.setupStorage(_,S.dataId,k,g)}static render(_){var q;const k=_.annotationStorage,g=_.linkService,m=_.xfaHtml,a=_.intent||"display",S=document.createElement(m.name);m.attributes&&this.setAttributes({html:S,element:m,intent:a,linkService:g});const A=[[m,-1,S]],M=_.div;if(M.append(S),_.viewport){const T=`matrix(${_.viewport.transform.join(",")})`;M.style.transform=T}a!=="richText"&&M.setAttribute("class","xfaLayer xfaFont");const F=[];for(;A.length>0;){const[T,o,u]=A.at(-1);if(o+1===T.children.length){A.pop();continue}const x=T.children[++A.at(-1)[1]];if(x===null)continue;const{name:b}=x;if(b==="#text"){const v=document.createTextNode(x.value);F.push(v),u.append(v);continue}const l=(q=x==null?void 0:x.attributes)!=null&&q.xmlns?document.createElementNS(x.attributes.xmlns,b):document.createElement(b);if(u.append(l),x.attributes&&this.setAttributes({html:l,element:x,storage:k,intent:a,linkService:g}),x.children&&x.children.length>0)A.push([x,-1,l]);else if(x.value){const v=document.createTextNode(x.value);r.XfaText.shouldBuildText(b)&&F.push(v),l.append(v)}}for(const T of M.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))T.setAttribute("readOnly",!0);return{textDivs:F}}static update(_){const k=`matrix(${_.viewport.transform.join(",")})`;_.div.style.transform=k,_.div.hidden=!1}}e.XfaLayer=h},(t,e,n)=>{var m,a,S,A,M,F,q,T,o,u,x,b,l,v,c,Mr,Ir,Dr,Lr,ar,Nr,sr,qr,Br,jr,Ur,Hr,tt,or,Tt,Pt,lt,lr,Ct,C,Wr,cr,zr,Gr,ur,xt,ct;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var r=n(1),h=n(4),y=n(29),_=n(6),k=n(5);const Ae=class Ae extends h.AnnotationEditor{constructor(K){super({...K,name:"inkEditor"});Ee(this,c);Ee(this,m,0);Ee(this,a,0);Ee(this,S,this.canvasPointermove.bind(this));Ee(this,A,this.canvasPointerleave.bind(this));Ee(this,M,this.canvasPointerup.bind(this));Ee(this,F,this.canvasPointerdown.bind(this));Ee(this,q,new Path2D);Ee(this,T,!1);Ee(this,o,!1);Ee(this,u,!1);Ee(this,x,null);Ee(this,b,0);Ee(this,l,0);Ee(this,v,null);this.color=K.color||null,this.thickness=K.thickness||null,this.opacity=K.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(K){h.AnnotationEditor.initialize(K,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(K,$){switch(K){case r.AnnotationEditorParamsType.INK_THICKNESS:Ae._defaultThickness=$;break;case r.AnnotationEditorParamsType.INK_COLOR:Ae._defaultColor=$;break;case r.AnnotationEditorParamsType.INK_OPACITY:Ae._defaultOpacity=$/100;break}}updateParams(K,$){switch(K){case r.AnnotationEditorParamsType.INK_THICKNESS:ve(this,c,Mr).call(this,$);break;case r.AnnotationEditorParamsType.INK_COLOR:ve(this,c,Ir).call(this,$);break;case r.AnnotationEditorParamsType.INK_OPACITY:ve(this,c,Dr).call(this,$);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,Ae._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,Ae._defaultColor||h.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ae._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ae._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||Ae._defaultColor||h.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ae._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(ve(this,c,Tt).call(this),ve(this,c,Pt).call(this)),this.isAttachedToDOM||(this.parent.add(this),ve(this,c,lt).call(this)),ve(this,c,ct).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,w(this,x).disconnect(),Re(this,x,null),super.remove())}setParent(K){!this.parent&&K?this._uiManager.removeShouldRescale(this):this.parent&&K===null&&this._uiManager.addShouldRescale(this),super.setParent(K)}onScaleChanging(){const[K,$]=this.parentDimensions,me=this.width*K,_e=this.height*$;this.setDimensions(me,_e)}enableEditMode(){w(this,T)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",w(this,F)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",w(this,F)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){w(this,T)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Re(this,T,!0),this.div.classList.add("disabled"),ve(this,c,ct).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(K){this._focusEventsAllowed&&(super.focusin(K),this.enableEditMode())}canvasPointerdown(K){K.button!==0||!this.isInEditMode()||w(this,T)||(this.setInForeground(),K.preventDefault(),K.type!=="mouse"&&this.div.focus(),ve(this,c,Nr).call(this,K.offsetX,K.offsetY))}canvasPointermove(K){K.preventDefault(),ve(this,c,sr).call(this,K.offsetX,K.offsetY)}canvasPointerup(K){K.preventDefault(),ve(this,c,or).call(this,K)}canvasPointerleave(K){ve(this,c,or).call(this,K)}get isResizable(){return!this.isEmpty()&&w(this,T)}render(){if(this.div)return this.div;let K,$;this.width&&(K=this.x,$=this.y),super.render(),h.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(te=>{var J;return(J=this.div)==null?void 0:J.setAttribute("aria-label",te)});const[me,_e,Ce,ke]=ve(this,c,Lr).call(this);if(this.setAt(me,_e,0,0),this.setDims(Ce,ke),ve(this,c,Tt).call(this),this.width){const[te,J]=this.parentDimensions;this.setAspectRatio(this.width*te,this.height*J),this.setAt(K*te,$*J,this.width*te,this.height*J),Re(this,u,!0),ve(this,c,lt).call(this),this.setDims(this.width*te,this.height*J),ve(this,c,tt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ve(this,c,Pt).call(this),this.div}setDimensions(K,$){const me=Math.round(K),_e=Math.round($);if(w(this,b)===me&&w(this,l)===_e)return;Re(this,b,me),Re(this,l,_e),this.canvas.style.visibility="hidden";const[Ce,ke]=this.parentDimensions;this.width=K/Ce,this.height=$/ke,this.fixAndSetPosition(),w(this,T)&&ve(this,c,lr).call(this,K,$),ve(this,c,lt).call(this),ve(this,c,tt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(K,$,me){var be,Fe,Le;if(K instanceof y.InkAnnotationElement)return null;const _e=super.deserialize(K,$,me);_e.thickness=K.thickness,_e.color=r.Util.makeHexColor(...K.color),_e.opacity=K.opacity;const[Ce,ke]=_e.pageDimensions,te=_e.width*Ce,J=_e.height*ke,Se=_e.parentScale,Te=K.thickness/2;Re(_e,T,!0),Re(_e,b,Math.round(te)),Re(_e,l,Math.round(J));const{paths:De,rect:Ne,rotation:Ue}=K;for(let{bezier:ee}of De){ee=ve(be=Ae,C,zr).call(be,ee,Ne,Ue);const ie=[];_e.paths.push(ie);let O=Se*(ee[0]-Te),we=Se*(ee[1]-Te);for(let d=2,G=ee.length;d<G;d+=6){const ce=Se*(ee[d]-Te),U=Se*(ee[d+1]-Te),le=Se*(ee[d+2]-Te),ye=Se*(ee[d+3]-Te),Me=Se*(ee[d+4]-Te),Z=Se*(ee[d+5]-Te);ie.push([[O,we],[ce,U],[le,ye],[Me,Z]]),O=Me,we=Z}const qe=ve(this,C,Wr).call(this,ie);_e.bezierPath2D.push(qe)}const V=ve(Fe=_e,c,ur).call(Fe);return Re(_e,a,Math.max(h.AnnotationEditor.MIN_SIZE,V[2]-V[0])),Re(_e,m,Math.max(h.AnnotationEditor.MIN_SIZE,V[3]-V[1])),ve(Le=_e,c,lr).call(Le,te,J),_e}serialize(){if(this.isEmpty())return null;const K=this.getRect(0,0),$=h.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:$,thickness:this.thickness,opacity:this.opacity,paths:ve(this,c,Gr).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,K),pageIndex:this.pageIndex,rect:K,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};m=new WeakMap,a=new WeakMap,S=new WeakMap,A=new WeakMap,M=new WeakMap,F=new WeakMap,q=new WeakMap,T=new WeakMap,o=new WeakMap,u=new WeakMap,x=new WeakMap,b=new WeakMap,l=new WeakMap,v=new WeakMap,c=new WeakSet,Mr=function(K){const $=this.thickness;this.addCommands({cmd:()=>{this.thickness=K,ve(this,c,ct).call(this)},undo:()=>{this.thickness=$,ve(this,c,ct).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Ir=function(K){const $=this.color;this.addCommands({cmd:()=>{this.color=K,ve(this,c,tt).call(this)},undo:()=>{this.color=$,ve(this,c,tt).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Dr=function(K){K/=100;const $=this.opacity;this.addCommands({cmd:()=>{this.opacity=K,ve(this,c,tt).call(this)},undo:()=>{this.opacity=$,ve(this,c,tt).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Lr=function(){const{parentRotation:K,parentDimensions:[$,me]}=this;switch(K){case 90:return[0,me,me,$];case 180:return[$,me,$,me];case 270:return[$,0,me,$];default:return[0,0,$,me]}},ar=function(){const{ctx:K,color:$,opacity:me,thickness:_e,parentScale:Ce,scaleFactor:ke}=this;K.lineWidth=_e*Ce/ke,K.lineCap="round",K.lineJoin="round",K.miterLimit=10,K.strokeStyle=`${$}${(0,k.opacityToHex)(me)}`},Nr=function(K,$){this.canvas.addEventListener("contextmenu",_.noContextMenu),this.canvas.addEventListener("pointerleave",w(this,A)),this.canvas.addEventListener("pointermove",w(this,S)),this.canvas.addEventListener("pointerup",w(this,M)),this.canvas.removeEventListener("pointerdown",w(this,F)),this.isEditing=!0,w(this,u)||(Re(this,u,!0),ve(this,c,lt).call(this),this.thickness||(this.thickness=Ae._defaultThickness),this.color||(this.color=Ae._defaultColor||h.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ae._defaultOpacity)),this.currentPath.push([K,$]),Re(this,o,!1),ve(this,c,ar).call(this),Re(this,v,()=>{ve(this,c,jr).call(this),w(this,v)&&window.requestAnimationFrame(w(this,v))}),window.requestAnimationFrame(w(this,v))},sr=function(K,$){const[me,_e]=this.currentPath.at(-1);if(this.currentPath.length>1&&K===me&&$===_e)return;const Ce=this.currentPath;let ke=w(this,q);if(Ce.push([K,$]),Re(this,o,!0),Ce.length<=2){ke.moveTo(...Ce[0]),ke.lineTo(K,$);return}Ce.length===3&&(Re(this,q,ke=new Path2D),ke.moveTo(...Ce[0])),ve(this,c,Ur).call(this,ke,...Ce.at(-3),...Ce.at(-2),K,$)},qr=function(){if(this.currentPath.length===0)return;const K=this.currentPath.at(-1);w(this,q).lineTo(...K)},Br=function(K,$){Re(this,v,null),K=Math.min(Math.max(K,0),this.canvas.width),$=Math.min(Math.max($,0),this.canvas.height),ve(this,c,sr).call(this,K,$),ve(this,c,qr).call(this);let me;if(this.currentPath.length!==1)me=ve(this,c,Hr).call(this);else{const J=[K,$];me=[[J,J.slice(),J.slice(),J]]}const _e=w(this,q),Ce=this.currentPath;this.currentPath=[],Re(this,q,new Path2D);const ke=()=>{this.allRawPaths.push(Ce),this.paths.push(me),this.bezierPath2D.push(_e),this.rebuild()},te=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ve(this,c,Tt).call(this),ve(this,c,Pt).call(this)),ve(this,c,ct).call(this))};this.addCommands({cmd:ke,undo:te,mustExec:!0})},jr=function(){if(!w(this,o))return;Re(this,o,!1);const K=Math.ceil(this.thickness*this.parentScale),$=this.currentPath.slice(-3),me=$.map(ke=>ke[0]),_e=$.map(ke=>ke[1]);Math.min(...me)-K,Math.max(...me)+K,Math.min(..._e)-K,Math.max(..._e)+K;const{ctx:Ce}=this;Ce.save(),Ce.clearRect(0,0,this.canvas.width,this.canvas.height);for(const ke of this.bezierPath2D)Ce.stroke(ke);Ce.stroke(w(this,q)),Ce.restore()},Ur=function(K,$,me,_e,Ce,ke,te){const J=($+_e)/2,Se=(me+Ce)/2,Te=(_e+ke)/2,De=(Ce+te)/2;K.bezierCurveTo(J+2*(_e-J)/3,Se+2*(Ce-Se)/3,Te+2*(_e-Te)/3,De+2*(Ce-De)/3,Te,De)},Hr=function(){const K=this.currentPath;if(K.length<=2)return[[K[0],K[0],K.at(-1),K.at(-1)]];const $=[];let me,[_e,Ce]=K[0];for(me=1;me<K.length-2;me++){const[Ne,Ue]=K[me],[V,be]=K[me+1],Fe=(Ne+V)/2,Le=(Ue+be)/2,ee=[_e+2*(Ne-_e)/3,Ce+2*(Ue-Ce)/3],ie=[Fe+2*(Ne-Fe)/3,Le+2*(Ue-Le)/3];$.push([[_e,Ce],ee,ie,[Fe,Le]]),[_e,Ce]=[Fe,Le]}const[ke,te]=K[me],[J,Se]=K[me+1],Te=[_e+2*(ke-_e)/3,Ce+2*(te-Ce)/3],De=[J+2*(ke-J)/3,Se+2*(te-Se)/3];return $.push([[_e,Ce],Te,De,[J,Se]]),$},tt=function(){if(this.isEmpty()){ve(this,c,Ct).call(this);return}ve(this,c,ar).call(this);const{canvas:K,ctx:$}=this;$.setTransform(1,0,0,1,0,0),$.clearRect(0,0,K.width,K.height),ve(this,c,Ct).call(this);for(const me of this.bezierPath2D)$.stroke(me)},or=function(K){this.canvas.removeEventListener("pointerleave",w(this,A)),this.canvas.removeEventListener("pointermove",w(this,S)),this.canvas.removeEventListener("pointerup",w(this,M)),this.canvas.addEventListener("pointerdown",w(this,F)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",_.noContextMenu)},10),ve(this,c,Br).call(this,K.offsetX,K.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Tt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",h.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(K=>{var $;return($=this.canvas)==null?void 0:$.setAttribute("aria-label",K)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Pt=function(){Re(this,x,new ResizeObserver(K=>{const $=K[0].contentRect;$.width&&$.height&&this.setDimensions($.width,$.height)})),w(this,x).observe(this.div)},lt=function(){if(!w(this,u))return;const[K,$]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*K),this.canvas.height=Math.ceil(this.height*$),ve(this,c,Ct).call(this)},lr=function(K,$){const me=ve(this,c,xt).call(this),_e=(K-me)/w(this,a),Ce=($-me)/w(this,m);this.scaleFactor=Math.min(_e,Ce)},Ct=function(){const K=ve(this,c,xt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+K,this.translationY*this.scaleFactor+K)},C=new WeakSet,Wr=function(K){const $=new Path2D;for(let me=0,_e=K.length;me<_e;me++){const[Ce,ke,te,J]=K[me];me===0&&$.moveTo(...Ce),$.bezierCurveTo(ke[0],ke[1],te[0],te[1],J[0],J[1])}return $},cr=function(K,$,me){const[_e,Ce,ke,te]=$;switch(me){case 0:for(let J=0,Se=K.length;J<Se;J+=2)K[J]+=_e,K[J+1]=te-K[J+1];break;case 90:for(let J=0,Se=K.length;J<Se;J+=2){const Te=K[J];K[J]=K[J+1]+_e,K[J+1]=Te+Ce}break;case 180:for(let J=0,Se=K.length;J<Se;J+=2)K[J]=ke-K[J],K[J+1]+=Ce;break;case 270:for(let J=0,Se=K.length;J<Se;J+=2){const Te=K[J];K[J]=ke-K[J+1],K[J+1]=te-Te}break;default:throw new Error("Invalid rotation")}return K},zr=function(K,$,me){const[_e,Ce,ke,te]=$;switch(me){case 0:for(let J=0,Se=K.length;J<Se;J+=2)K[J]-=_e,K[J+1]=te-K[J+1];break;case 90:for(let J=0,Se=K.length;J<Se;J+=2){const Te=K[J];K[J]=K[J+1]-Ce,K[J+1]=Te-_e}break;case 180:for(let J=0,Se=K.length;J<Se;J+=2)K[J]=ke-K[J],K[J+1]-=Ce;break;case 270:for(let J=0,Se=K.length;J<Se;J+=2){const Te=K[J];K[J]=te-K[J+1],K[J+1]=ke-Te}break;default:throw new Error("Invalid rotation")}return K},Gr=function(K,$,me,_e){var Se,Te;const Ce=[],ke=this.thickness/2,te=K*$+ke,J=K*me+ke;for(const De of this.paths){const Ne=[],Ue=[];for(let V=0,be=De.length;V<be;V++){const[Fe,Le,ee,ie]=De[V],O=K*Fe[0]+te,we=K*Fe[1]+J,qe=K*Le[0]+te,d=K*Le[1]+J,G=K*ee[0]+te,ce=K*ee[1]+J,U=K*ie[0]+te,le=K*ie[1]+J;V===0&&(Ne.push(O,we),Ue.push(O,we)),Ne.push(qe,d,G,ce,U,le),Ue.push(qe,d),V===be-1&&Ue.push(U,le)}Ce.push({bezier:ve(Se=Ae,C,cr).call(Se,Ne,_e,this.rotation),points:ve(Te=Ae,C,cr).call(Te,Ue,_e,this.rotation)})}return Ce},ur=function(){let K=1/0,$=-1/0,me=1/0,_e=-1/0;for(const Ce of this.paths)for(const[ke,te,J,Se]of Ce){const Te=r.Util.bezierBoundingBox(...ke,...te,...J,...Se);K=Math.min(K,Te[0]),me=Math.min(me,Te[1]),$=Math.max($,Te[2]),_e=Math.max(_e,Te[3])}return[K,me,$,_e]},xt=function(){return w(this,T)?Math.ceil(this.thickness*this.parentScale):0},ct=function(K=!1){if(this.isEmpty())return;if(!w(this,T)){ve(this,c,tt).call(this);return}const $=ve(this,c,ur).call(this),me=ve(this,c,xt).call(this);Re(this,a,Math.max(h.AnnotationEditor.MIN_SIZE,$[2]-$[0])),Re(this,m,Math.max(h.AnnotationEditor.MIN_SIZE,$[3]-$[1]));const _e=Math.ceil(me+w(this,a)*this.scaleFactor),Ce=Math.ceil(me+w(this,m)*this.scaleFactor),[ke,te]=this.parentDimensions;this.width=_e/ke,this.height=Ce/te,this.setAspectRatio(_e,Ce);const J=this.translationX,Se=this.translationY;this.translationX=-$[0],this.translationY=-$[1],ve(this,c,lt).call(this),ve(this,c,tt).call(this),Re(this,b,_e),Re(this,l,Ce),this.setDims(_e,Ce);const Te=K?me/this.scaleFactor/2:0;this.translate(J-this.translationX-Te,Se-this.translationY-Te)},Ee(Ae,C),Ye(Ae,"_defaultColor",null),Ye(Ae,"_defaultOpacity",1),Ye(Ae,"_defaultThickness",1),Ye(Ae,"_type","ink");let g=Ae;e.InkEditor=g},(t,e,n)=>{var g,m,a,S,A,M,F,q,T,o,u,mt,yt,Ot,hr,Vr,$r,fr,kt,Xr;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var r=n(1),h=n(4),y=n(6),_=n(29);const E=class E extends h.AnnotationEditor{constructor(ae){super({...ae,name:"stampEditor"});Ee(this,u);Ee(this,g,null);Ee(this,m,null);Ee(this,a,null);Ee(this,S,null);Ee(this,A,null);Ee(this,M,null);Ee(this,F,null);Ee(this,q,null);Ee(this,T,!1);Ee(this,o,!1);Re(this,S,ae.bitmapUrl),Re(this,A,ae.bitmapFile)}static initialize(ae){h.AnnotationEditor.initialize(ae)}static get supportedTypes(){const ae=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,r.shadow)(this,"supportedTypes",ae.map(ue=>`image/${ue}`))}static get supportedTypesStr(){return(0,r.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(ae){return this.supportedTypes.includes(ae)}static paste(ae,ue){ue.pasteEditor(r.AnnotationEditorType.STAMP,{bitmapFile:ae.getAsFile()})}remove(){var ae,ue;w(this,m)&&(Re(this,g,null),this._uiManager.imageManager.deleteId(w(this,m)),(ae=w(this,M))==null||ae.remove(),Re(this,M,null),(ue=w(this,F))==null||ue.disconnect(),Re(this,F,null)),super.remove()}rebuild(){if(!this.parent){w(this,m)&&ve(this,u,Ot).call(this);return}super.rebuild(),this.div!==null&&(w(this,m)&&ve(this,u,Ot).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(w(this,a)||w(this,g)||w(this,S)||w(this,A))}get isResizable(){return!0}render(){if(this.div)return this.div;let ae,ue;if(this.width&&(ae=this.x,ue=this.y),super.render(),this.div.hidden=!0,w(this,g)?ve(this,u,hr).call(this):ve(this,u,Ot).call(this),this.width){const[re,pe]=this.parentDimensions;this.setAt(ae*re,ue*pe,this.width*re,this.height*pe)}return this.div}static deserialize(ae,ue,re){if(ae instanceof _.StampAnnotationElement)return null;const pe=super.deserialize(ae,ue,re),{rect:H,bitmapUrl:W,bitmapId:ne,isSvg:j,accessibilityData:s}=ae;ne&&re.imageManager.isValidId(ne)?Re(pe,m,ne):Re(pe,S,W),Re(pe,T,j);const[i,p]=pe.pageDimensions;return pe.width=(H[2]-H[0])/i,pe.height=(H[3]-H[1])/p,s&&(pe.altTextData=s),pe}serialize(ae=!1,ue=null){if(this.isEmpty())return null;const re={annotationType:r.AnnotationEditorType.STAMP,bitmapId:w(this,m),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:w(this,T),structTreeParentId:this._structTreeParentId};if(ae)return re.bitmapUrl=ve(this,u,kt).call(this,!0),re.accessibilityData=this.altTextData,re;const{decorative:pe,altText:H}=this.altTextData;if(!pe&&H&&(re.accessibilityData={type:"Figure",alt:H}),ue===null)return re;ue.stamps||(ue.stamps=new Map);const W=w(this,T)?(re.rect[2]-re.rect[0])*(re.rect[3]-re.rect[1]):null;if(!ue.stamps.has(w(this,m)))ue.stamps.set(w(this,m),{area:W,serialized:re}),re.bitmap=ve(this,u,kt).call(this,!1);else if(w(this,T)){const ne=ue.stamps.get(w(this,m));W>ne.area&&(ne.area=W,ne.serialized.bitmap.close(),ne.serialized.bitmap=ve(this,u,kt).call(this,!1))}return re}};g=new WeakMap,m=new WeakMap,a=new WeakMap,S=new WeakMap,A=new WeakMap,M=new WeakMap,F=new WeakMap,q=new WeakMap,T=new WeakMap,o=new WeakMap,u=new WeakSet,mt=function(ae,ue=!1){if(!ae){this.remove();return}Re(this,g,ae.bitmap),ue||(Re(this,m,ae.id),Re(this,T,ae.isSvg)),ve(this,u,hr).call(this)},yt=function(){Re(this,a,null),this._uiManager.enableWaiting(!1),w(this,M)&&this.div.focus()},Ot=function(){if(w(this,m)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(w(this,m)).then(ue=>ve(this,u,mt).call(this,ue,!0)).finally(()=>ve(this,u,yt).call(this));return}if(w(this,S)){const ue=w(this,S);Re(this,S,null),this._uiManager.enableWaiting(!0),Re(this,a,this._uiManager.imageManager.getFromUrl(ue).then(re=>ve(this,u,mt).call(this,re)).finally(()=>ve(this,u,yt).call(this)));return}if(w(this,A)){const ue=w(this,A);Re(this,A,null),this._uiManager.enableWaiting(!0),Re(this,a,this._uiManager.imageManager.getFromFile(ue).then(re=>ve(this,u,mt).call(this,re)).finally(()=>ve(this,u,yt).call(this)));return}const ae=document.createElement("input");ae.type="file",ae.accept=E.supportedTypesStr,Re(this,a,new Promise(ue=>{ae.addEventListener("change",async()=>{if(!ae.files||ae.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const re=await this._uiManager.imageManager.getFromFile(ae.files[0]);ve(this,u,mt).call(this,re)}ue()}),ae.addEventListener("cancel",()=>{this.remove(),ue()})}).finally(()=>ve(this,u,yt).call(this))),ae.click()},hr=function(){const{div:ae}=this;let{width:ue,height:re}=w(this,g);const[pe,H]=this.pageDimensions,W=.75;if(this.width)ue=this.width*pe,re=this.height*H;else if(ue>W*pe||re>W*H){const i=Math.min(W*pe/ue,W*H/re);ue*=i,re*=i}const[ne,j]=this.parentDimensions;this.setDims(ue*ne/pe,re*j/H),this._uiManager.enableWaiting(!1);const s=Re(this,M,document.createElement("canvas"));ae.append(s),ae.hidden=!1,ve(this,u,fr).call(this,ue,re),ve(this,u,Xr).call(this),w(this,o)||(this.parent.addUndoableEditor(this),Re(this,o,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Vr=function(ae,ue){var W;const[re,pe]=this.parentDimensions;this.width=ae/re,this.height=ue/pe,this.setDims(ae,ue),(W=this._initialOptions)!=null&&W.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,w(this,q)!==null&&clearTimeout(w(this,q)),Re(this,q,setTimeout(()=>{Re(this,q,null),ve(this,u,fr).call(this,ae,ue)},200))},$r=function(ae,ue){const{width:re,height:pe}=w(this,g);let H=re,W=pe,ne=w(this,g);for(;H>2*ae||W>2*ue;){const j=H,s=W;H>2*ae&&(H=H>=16384?Math.floor(H/2)-1:Math.ceil(H/2)),W>2*ue&&(W=W>=16384?Math.floor(W/2)-1:Math.ceil(W/2));const i=new OffscreenCanvas(H,W);i.getContext("2d").drawImage(ne,0,0,j,s,0,0,H,W),ne=i.transferToImageBitmap()}return ne},fr=function(ae,ue){ae=Math.ceil(ae),ue=Math.ceil(ue);const re=w(this,M);if(!re||re.width===ae&&re.height===ue)return;re.width=ae,re.height=ue;const pe=w(this,T)?w(this,g):ve(this,u,$r).call(this,ae,ue),H=re.getContext("2d");H.filter=this._uiManager.hcmFilter,H.drawImage(pe,0,0,pe.width,pe.height,0,0,ae,ue)},kt=function(ae){if(ae){if(w(this,T)){const pe=this._uiManager.imageManager.getSvgUrl(w(this,m));if(pe)return pe}const ue=document.createElement("canvas");return{width:ue.width,height:ue.height}=w(this,g),ue.getContext("2d").drawImage(w(this,g),0,0),ue.toDataURL()}if(w(this,T)){const[ue,re]=this.pageDimensions,pe=Math.round(this.width*ue*y.PixelsPerInch.PDF_TO_CSS_UNITS),H=Math.round(this.height*re*y.PixelsPerInch.PDF_TO_CSS_UNITS),W=new OffscreenCanvas(pe,H);return W.getContext("2d").drawImage(w(this,g),0,0,w(this,g).width,w(this,g).height,0,0,pe,H),W.transferToImageBitmap()}return structuredClone(w(this,g))},Xr=function(){Re(this,F,new ResizeObserver(ae=>{const ue=ae[0].contentRect;ue.width&&ue.height&&ve(this,u,Vr).call(this,ue.width,ue.height)})),w(this,F).observe(this.div)},Ye(E,"_type","stamp");let k=E;e.StampEditor=k}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return y.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return _.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return k.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return g.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return m.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return h.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return h.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),h=__w_pdfjs_require__(26),y=__w_pdfjs_require__(27),_=__w_pdfjs_require__(5),k=__w_pdfjs_require__(29),g=__w_pdfjs_require__(14),m=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf_default=getDefaultExportFromCjs(pdfExports),pdf=_mergeNamespaces({__proto__:null,default:pdf_default},[pdfExports]);export{pdf as p};
