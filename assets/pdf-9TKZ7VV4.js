var Kr=Object.defineProperty;var pr=t=>{throw TypeError(t)};var Yr=(t,e,n)=>e in t?Kr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ye=(t,e,n)=>Yr(t,typeof e!="symbol"?e+"":e,n),Mt=(t,e,n)=>e.has(t)||pr("Cannot "+n);var A=(t,e,n)=>(Mt(t,e,"read from private field"),n?n.call(t):e.get(t)),Ee=(t,e,n)=>e.has(t)?pr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Re=(t,e,n,r)=>(Mt(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ve=(t,e,n)=>(Mt(t,e,"access private method"),n);var ut=(t,e,n,r)=>({set _(c){Re(t,e,c,n)},get _(){return A(t,e,r)}});import{g as getAugmentedNamespace,c as commonjsGlobal,a as getDefaultExportFromCjs,d as dist,p as process$1,B as Buffer,b as commonjsRequire}from"./index-DN0G8mN_.js";function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const c in r)if(c!=="default"&&!(c in t)){const m=Object.getOwnPropertyDescriptor(r,c);m&&Object.defineProperty(t,c,m.get?m:{enumerable:!0,get:()=>r[c]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var pdf$1={exports:{}},empty=null;const empty$1=Object.freeze(Object.defineProperty({__proto__:null,default:empty},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(empty$1),__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(__viteBrowserExternal$1);var punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */punycode$1.exports;(function(t,e){(function(n){var r=e&&!e.nodeType&&e,c=t&&!t.nodeType&&t,m=typeof commonjsGlobal=="object"&&commonjsGlobal;(m.global===m||m.window===m||m.self===m)&&(n=m);var _,k=2147483647,g=36,v=1,a=26,S=38,w=700,I=72,M=128,B="-",P=/^xn--/,o=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=g-v,l=Math.floor,y=String.fromCharCode,u;function T(W){throw new RangeError(x[W])}function R(W,ne){for(var j=W.length,s=[];j--;)s[j]=ne(W[j]);return s}function X(W,ne){var j=W.split("@"),s="";j.length>1&&(s=j[0]+"@",W=j[1]),W=W.replace(h,".");var i=W.split("."),p=R(i,ne).join(".");return s+p}function D(W){for(var ne=[],j=0,s=W.length,i,p;j<s;)i=W.charCodeAt(j++),i>=55296&&i<=56319&&j<s?(p=W.charCodeAt(j++),(p&64512)==56320?ne.push(((i&1023)<<10)+(p&1023)+65536):(ne.push(i),j--)):ne.push(i);return ne}function E(W){return R(W,function(ne){var j="";return ne>65535&&(ne-=65536,j+=y(ne>>>10&1023|55296),ne=56320|ne&1023),j+=y(ne),j}).join("")}function q(W){return W-48<10?W-22:W-65<26?W-65:W-97<26?W-97:g}function oe(W,ne){return W+22+75*(W<26)-((ne!=0)<<5)}function ae(W,ne,j){var s=0;for(W=j?l(W/w):W>>1,W+=l(W/ne);W>b*a>>1;s+=g)W=l(W/b);return l(s+(b+1)*W/(W+S))}function ue(W){var ne=[],j=W.length,s,i=0,p=M,f=I,C,F,z,Q,L,N,se,ge,Ae;for(C=W.lastIndexOf(B),C<0&&(C=0),F=0;F<C;++F)W.charCodeAt(F)>=128&&T("not-basic"),ne.push(W.charCodeAt(F));for(z=C>0?C+1:0;z<j;){for(Q=i,L=1,N=g;z>=j&&T("invalid-input"),se=q(W.charCodeAt(z++)),(se>=g||se>l((k-i)/L))&&T("overflow"),i+=se*L,ge=N<=f?v:N>=f+a?a:N-f,!(se<ge);N+=g)Ae=g-ge,L>l(k/Ae)&&T("overflow"),L*=Ae;s=ne.length+1,f=ae(i-Q,s,Q==0),l(i/s)>k-p&&T("overflow"),p+=l(i/s),i%=s,ne.splice(i++,0,p)}return E(ne)}function re(W){var ne,j,s,i,p,f,C,F,z,Q,L,N=[],se,ge,Ae,he;for(W=D(W),se=W.length,ne=M,j=0,p=I,f=0;f<se;++f)L=W[f],L<128&&N.push(y(L));for(s=i=N.length,i&&N.push(B);s<se;){for(C=k,f=0;f<se;++f)L=W[f],L>=ne&&L<C&&(C=L);for(ge=s+1,C-ne>l((k-j)/ge)&&T("overflow"),j+=(C-ne)*ge,ne=C,f=0;f<se;++f)if(L=W[f],L<ne&&++j>k&&T("overflow"),L==ne){for(F=j,z=g;Q=z<=p?v:z>=p+a?a:z-p,!(F<Q);z+=g)he=F-Q,Ae=g-Q,N.push(y(oe(Q+he%Ae,0))),F=l(he/Ae);N.push(y(oe(F,0))),p=ae(j,ge,s==i),j=0,++s}++j,++ne}return N.join("")}function pe(W){return X(W,function(ne){return P.test(ne)?ue(ne.slice(4).toLowerCase()):ne})}function H(W){return X(W,function(ne){return o.test(ne)?"xn--"+re(ne):ne})}if(_={version:"1.4.1",ucs2:{decode:D,encode:E},decode:ue,encode:re,toASCII:H,toUnicode:pe},r&&c)if(t.exports==r)c.exports=_;else for(u in _)_.hasOwnProperty(u)&&(r[u]=_[u]);else n.punycode=_})(commonjsGlobal)})(punycode$1,punycode$1.exports);var punycodeExports=punycode$1.exports;const require$$0$1=getDefaultExportFromCjs(punycodeExports);var type=TypeError,hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||!0)?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function addNumericSeparator(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||$test.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-$floor(-t):$floor(t);if(r!==t){var c=String(r),m=$slice.call(e,c.length+1);return $replace.call(c,n,"$&_")+"."+$replace.call($replace.call(m,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(e,n,"$&_")}var utilInspect=require$$1$1,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,quotes={__proto__:null,double:'"',single:"'"},quoteREs={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},objectInspect=function t(e,n,r,c){var m=n||{};if(has$3(m,"quoteStyle")&&!has$3(quotes,m.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(m,"maxStringLength")&&(typeof m.maxStringLength=="number"?m.maxStringLength<0&&m.maxStringLength!==1/0:m.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var _=has$3(m,"customInspect")?m.customInspect:!0;if(typeof _!="boolean"&&_!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(m,"indent")&&m.indent!==null&&m.indent!=="	"&&!(parseInt(m.indent,10)===m.indent&&m.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(m,"numericSeparator")&&typeof m.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var k=m.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return inspectString(e,m);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var g=String(e);return k?addNumericSeparator(e,g):g}if(typeof e=="bigint"){var v=String(e)+"n";return k?addNumericSeparator(e,v):v}var a=typeof m.depth>"u"?5:m.depth;if(typeof r>"u"&&(r=0),r>=a&&a>0&&typeof e=="object")return isArray$3(e)?"[Array]":"[Object]";var S=getIndent(m,r);if(typeof c>"u")c=[];else if(indexOf(c,e)>=0)return"[Circular]";function w(q,oe,ae){if(oe&&(c=$arrSlice.call(c),c.push(oe)),ae){var ue={depth:m.depth};return has$3(m,"quoteStyle")&&(ue.quoteStyle=m.quoteStyle),t(q,ue,r+1,c)}return t(q,m,r+1,c)}if(typeof e=="function"&&!isRegExp$1(e)){var I=nameOf(e),M=arrObjKeys(e,w);return"[Function"+(I?": "+I:" (anonymous)")+"]"+(M.length>0?" { "+$join.call(M,", ")+" }":"")}if(isSymbol(e)){var B=hasShammedSymbols?$replace.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(e);return typeof e=="object"&&!hasShammedSymbols?markBoxed(B):B}if(isElement(e)){for(var P="<"+$toLowerCase.call(String(e.nodeName)),o=e.attributes||[],h=0;h<o.length;h++)P+=" "+o[h].name+"="+wrapQuotes(quote(o[h].value),"double",m);return P+=">",e.childNodes&&e.childNodes.length&&(P+="..."),P+="</"+$toLowerCase.call(String(e.nodeName))+">",P}if(isArray$3(e)){if(e.length===0)return"[]";var x=arrObjKeys(e,w);return S&&!singleLineValues(x)?"["+indentedJoin(x,S)+"]":"[ "+$join.call(x,", ")+" ]"}if(isError(e)){var b=arrObjKeys(e,w);return!("cause"in Error.prototype)&&"cause"in e&&!isEnumerable.call(e,"cause")?"{ ["+String(e)+"] "+$join.call($concat.call("[cause]: "+w(e.cause),b),", ")+" }":b.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+$join.call(b,", ")+" }"}if(typeof e=="object"&&_){if(inspectSymbol&&typeof e[inspectSymbol]=="function"&&utilInspect)return utilInspect(e,{depth:a-r});if(_!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(isMap(e)){var l=[];return mapForEach&&mapForEach.call(e,function(q,oe){l.push(w(oe,e,!0)+" => "+w(q,e))}),collectionOf("Map",mapSize.call(e),l,S)}if(isSet(e)){var y=[];return setForEach&&setForEach.call(e,function(q){y.push(w(q,e))}),collectionOf("Set",setSize.call(e),y,S)}if(isWeakMap(e))return weakCollectionOf("WeakMap");if(isWeakSet(e))return weakCollectionOf("WeakSet");if(isWeakRef(e))return weakCollectionOf("WeakRef");if(isNumber(e))return markBoxed(w(Number(e)));if(isBigInt(e))return markBoxed(w(bigIntValueOf.call(e)));if(isBoolean(e))return markBoxed(booleanValueOf.call(e));if(isString(e))return markBoxed(w(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof commonjsGlobal<"u"&&e===commonjsGlobal)return"{ [object globalThis] }";if(!isDate(e)&&!isRegExp$1(e)){var u=arrObjKeys(e,w),T=gPO?gPO(e)===Object.prototype:e instanceof Object||e.constructor===Object,R=e instanceof Object?"":"null prototype",X=!T&&toStringTag&&Object(e)===e&&toStringTag in e?$slice.call(toStr$1(e),8,-1):R?"Object":"",D=T||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",E=D+(X||R?"["+$join.call($concat.call([],X||[],R||[]),": ")+"] ":"");return u.length===0?E+"{}":S?E+"{"+indentedJoin(u,S)+"}":E+"{ "+$join.call(u,", ")+" }"}return String(e)};function wrapQuotes(t,e,n){var r=n.quoteStyle||e,c=quotes[r];return c+t+c}function quote(t){return $replace.call(String(t),/"/g,"&quot;")}function canTrustToString(t){return!toStringTag||!(typeof t=="object"&&(toStringTag in t||typeof t[toStringTag]<"u"))}function isArray$3(t){return toStr$1(t)==="[object Array]"&&canTrustToString(t)}function isDate(t){return toStr$1(t)==="[object Date]"&&canTrustToString(t)}function isRegExp$1(t){return toStr$1(t)==="[object RegExp]"&&canTrustToString(t)}function isError(t){return toStr$1(t)==="[object Error]"&&canTrustToString(t)}function isString(t){return toStr$1(t)==="[object String]"&&canTrustToString(t)}function isNumber(t){return toStr$1(t)==="[object Number]"&&canTrustToString(t)}function isBoolean(t){return toStr$1(t)==="[object Boolean]"&&canTrustToString(t)}function isSymbol(t){if(hasShammedSymbols)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!symToString)return!1;try{return symToString.call(t),!0}catch{}return!1}function isBigInt(t){if(!t||typeof t!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(t),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(t){return t in this};function has$3(t,e){return hasOwn.call(t,e)}function toStr$1(t){return objectToString.call(t)}function nameOf(t){if(t.name)return t.name;var e=$match.call(functionToString.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function indexOf(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function isMap(t){if(!mapSize||!t||typeof t!="object")return!1;try{mapSize.call(t);try{setSize.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function isWeakMap(t){if(!weakMapHas||!t||typeof t!="object")return!1;try{weakMapHas.call(t,weakMapHas);try{weakSetHas.call(t,weakSetHas)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function isWeakRef(t){if(!weakRefDeref||!t||typeof t!="object")return!1;try{return weakRefDeref.call(t),!0}catch{}return!1}function isSet(t){if(!setSize||!t||typeof t!="object")return!1;try{setSize.call(t);try{mapSize.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function isWeakSet(t){if(!weakSetHas||!t||typeof t!="object")return!1;try{weakSetHas.call(t,weakSetHas);try{weakMapHas.call(t,weakMapHas)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function isElement(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function inspectString(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return inspectString($slice.call(t,0,e.maxStringLength),e)+r}var c=quoteREs[e.quoteStyle||"single"];c.lastIndex=0;var m=$replace.call($replace.call(t,c,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(m,"single",e)}function lowbyte(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+$toUpperCase.call(e.toString(16))}function markBoxed(t){return"Object("+t+")"}function weakCollectionOf(t){return t+" { ? }"}function collectionOf(t,e,n,r){var c=r?indentedJoin(n,r):$join.call(n,", ");return t+" ("+e+") {"+c+"}"}function singleLineValues(t){for(var e=0;e<t.length;e++)if(indexOf(t[e],`
`)>=0)return!1;return!0}function getIndent(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=$join.call(Array(t.indent+1)," ");else return null;return{base:n,prev:$join.call(Array(e+1),n)}}function indentedJoin(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+$join.call(t,","+n)+`
`+e.prev}function arrObjKeys(t,e){var n=isArray$3(t),r=[];if(n){r.length=t.length;for(var c=0;c<t.length;c++)r[c]=has$3(t,c)?e(t[c],t):""}var m=typeof gOPS=="function"?gOPS(t):[],_;if(hasShammedSymbols){_={};for(var k=0;k<m.length;k++)_["$"+m[k]]=m[k]}for(var g in t)has$3(t,g)&&(n&&String(Number(g))===g&&g<t.length||hasShammedSymbols&&_["$"+g]instanceof Symbol||($test.call(/[^\w$]/,g)?r.push(e(g,t)+": "+e(t[g],t)):r.push(g+": "+e(t[g],t))));if(typeof gOPS=="function")for(var v=0;v<m.length;v++)isEnumerable.call(t,m[v])&&r.push("["+e(m[v])+"]: "+e(t[m[v]],t));return r}var inspect$3=objectInspect,$TypeError$4=type,listGetNode=function(t,e,n){for(var r=t,c;(c=r.next)!=null;r=c)if(c.key===e)return r.next=c.next,n||(c.next=t.next,t.next=c),c},listGet=function(t,e){if(t){var n=listGetNode(t,e);return n&&n.value}},listSet=function(t,e,n){var r=listGetNode(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},listHas=function(t,e){return t?!!listGetNode(t,e):!1},listDelete=function(t,e){if(t)return listGetNode(t,e,!0)},sideChannelList=function(){var e,n={assert:function(r){if(!n.has(r))throw new $TypeError$4("Side channel does not contain "+inspect$3(r))},delete:function(r){var c=e&&e.next,m=listDelete(e,r);return m&&c&&c===m&&(e=void 0),!!m},get:function(r){return listGet(e,r)},has:function(r){return listHas(e,r)},set:function(r,c){e||(e={next:void 0}),listSet(e,r,c)}};return n},esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs=Math.abs),abs}var floor,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor=Math.floor),floor}var max$1,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max$1=Math.max),max$1}var min,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min=Math.min),min}var pow,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow=Math.pow),pow}var round,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round=Math.round),round}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(e){return e!==e}),_isNaN}var sign,hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign;hasRequiredSign=1;var t=require_isNaN();return sign=function(n){return t(n)||n===0?n:n<0?-1:1},sign}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var t=requireGOPD();if(t)try{t([],"length")}catch{t=null}return gopd=t,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return esDefineProperty=t,esDefineProperty}var shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var c=42;e[n]=c;for(var m in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var _=Object.getOwnPropertySymbols(e);if(_.length!==1||_[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var k=Object.getOwnPropertyDescriptor(e,n);if(k.value!==c||k.enumerable!==!0)return!1}return!0}),shams$1}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var t=typeof Symbol<"u"&&Symbol,e=requireShams$1();return hasSymbols=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var t=requireEsObjectAtoms();return Object_getPrototypeOf=t.getPrototypeOf||null,Object_getPrototypeOf}var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr=Object.prototype.toString,max=Math.max,funcType="[object Function]",concatty=function(e,n){for(var r=[],c=0;c<e.length;c+=1)r[c]=e[c];for(var m=0;m<n.length;m+=1)r[m+e.length]=n[m];return r},slicy=function(e,n){for(var r=[],c=n,m=0;c<e.length;c+=1,m+=1)r[m]=e[c];return r},joiny=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n},implementation$5=function(e){var n=this;if(typeof n!="function"||toStr.apply(n)!==funcType)throw new TypeError(ERROR_MESSAGE+n);for(var r=slicy(arguments,1),c,m=function(){if(this instanceof c){var a=n.apply(this,concatty(r,arguments));return Object(a)===a?a:this}return n.apply(e,concatty(r,arguments))},_=max(0,n.length-r.length),k=[],g=0;g<_;g++)k[g]="$"+g;if(c=Function("binder","return function ("+joiny(k,",")+"){ return binder.apply(this,arguments); }")(m),n.prototype){var v=function(){};v.prototype=n.prototype,c.prototype=new v,v.prototype=null}return c},implementation$4=implementation$5,functionBind=Function.prototype.bind||implementation$4,functionCall=Function.prototype.call,functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply,bind$1=functionBind,$apply=requireFunctionApply(),$call$1=functionCall,$reflectApply=reflectApply,actualApply=$reflectApply||bind$1.call($call$1,$apply),bind=functionBind,$TypeError$3=type,$call=functionCall,$actualApply=actualApply,callBindApplyHelpers=function(e){if(e.length<1||typeof e[0]!="function")throw new $TypeError$3("a function is required");return $actualApply(bind,$call,e)},get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var t=callBindApplyHelpers,e=requireGopd(),n;try{n=[].__proto__===Array.prototype}catch(_){if(!_||typeof _!="object"||!("code"in _)||_.code!=="ERR_PROTO_ACCESS")throw _}var r=!!n&&e&&e(Object.prototype,"__proto__"),c=Object,m=c.getPrototypeOf;return get=r&&typeof r.get=="function"?t([r.get]):typeof m=="function"?function(k){return m(k==null?k:c(k))}:!1,get}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var t=requireReflect_getPrototypeOf(),e=requireObject_getPrototypeOf(),n=requireGet();return getProto=t?function(c){return t(c)}:e?function(c){if(!c||typeof c!="object"&&typeof c!="function")throw new TypeError("getProto: not an object");return e(c)}:n?function(c){return n(c)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=functionBind;return hasown=n.call(t,e),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var t,e=requireEsObjectAtoms(),n=requireEsErrors(),r=require_eval(),c=requireRange(),m=requireRef(),_=requireSyntax(),k=type,g=requireUri(),v=requireAbs(),a=requireFloor(),S=requireMax(),w=requireMin(),I=requirePow(),M=requireRound(),B=requireSign(),P=Function,o=function(z){try{return P('"use strict"; return ('+z+").constructor;")()}catch{}},h=requireGopd(),x=requireEsDefineProperty(),b=function(){throw new k},l=h?function(){try{return arguments.callee,b}catch{try{return h(arguments,"callee").get}catch{return b}}}():b,y=requireHasSymbols()(),u=requireGetProto(),T=requireObject_getPrototypeOf(),R=requireReflect_getPrototypeOf(),X=requireFunctionApply(),D=functionCall,E={},q=typeof Uint8Array>"u"||!u?t:u(Uint8Array),oe={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":y&&u?u([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":E,"%AsyncGenerator%":E,"%AsyncGeneratorFunction%":E,"%AsyncIteratorPrototype%":E,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":P,"%GeneratorFunction%":E,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y&&u?u(u([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!y||!u?t:u(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":h,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":c,"%ReferenceError%":m,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!y||!u?t:u(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y&&u?u(""[Symbol.iterator]()):t,"%Symbol%":y?Symbol:t,"%SyntaxError%":_,"%ThrowTypeError%":l,"%TypedArray%":q,"%TypeError%":k,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":g,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":D,"%Function.prototype.apply%":X,"%Object.defineProperty%":x,"%Object.getPrototypeOf%":T,"%Math.abs%":v,"%Math.floor%":a,"%Math.max%":S,"%Math.min%":w,"%Math.pow%":I,"%Math.round%":M,"%Math.sign%":B,"%Reflect.getPrototypeOf%":R};if(u)try{null.error}catch(z){var ae=u(u(z));oe["%Error.prototype%"]=ae}var ue=function z(Q){var L;if(Q==="%AsyncFunction%")L=o("async function () {}");else if(Q==="%GeneratorFunction%")L=o("function* () {}");else if(Q==="%AsyncGeneratorFunction%")L=o("async function* () {}");else if(Q==="%AsyncGenerator%"){var N=z("%AsyncGeneratorFunction%");N&&(L=N.prototype)}else if(Q==="%AsyncIteratorPrototype%"){var se=z("%AsyncGenerator%");se&&u&&(L=u(se.prototype))}return oe[Q]=L,L},re={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pe=functionBind,H=requireHasown(),W=pe.call(D,Array.prototype.concat),ne=pe.call(X,Array.prototype.splice),j=pe.call(D,String.prototype.replace),s=pe.call(D,String.prototype.slice),i=pe.call(D,RegExp.prototype.exec),p=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,f=/\\(\\)?/g,C=function(Q){var L=s(Q,0,1),N=s(Q,-1);if(L==="%"&&N!=="%")throw new _("invalid intrinsic syntax, expected closing `%`");if(N==="%"&&L!=="%")throw new _("invalid intrinsic syntax, expected opening `%`");var se=[];return j(Q,p,function(ge,Ae,he,de){se[se.length]=he?j(de,f,"$1"):Ae||ge}),se},F=function(Q,L){var N=Q,se;if(H(re,N)&&(se=re[N],N="%"+se[0]+"%"),H(oe,N)){var ge=oe[N];if(ge===E&&(ge=ue(N)),typeof ge>"u"&&!L)throw new k("intrinsic "+Q+" exists, but is not available. Please file an issue!");return{alias:se,name:N,value:ge}}throw new _("intrinsic "+Q+" does not exist!")};return getIntrinsic=function(Q,L){if(typeof Q!="string"||Q.length===0)throw new k("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof L!="boolean")throw new k('"allowMissing" argument must be a boolean');if(i(/^%?[^%]*%?$/,Q)===null)throw new _("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var N=C(Q),se=N.length>0?N[0]:"",ge=F("%"+se+"%",L),Ae=ge.name,he=ge.value,de=!1,K=ge.alias;K&&(se=K[0],ne(N,W([0,1],K)));for(var V=1,me=!0;V<N.length;V+=1){var _e=N[V],Ce=s(_e,0,1),ke=s(_e,-1);if((Ce==='"'||Ce==="'"||Ce==="`"||ke==='"'||ke==="'"||ke==="`")&&Ce!==ke)throw new _("property names with quotes must have matching quotes");if((_e==="constructor"||!me)&&(de=!0),se+="."+_e,Ae="%"+se+"%",H(oe,Ae))he=oe[Ae];else if(he!=null){if(!(_e in he)){if(!L)throw new k("base intrinsic for "+Q+" exists, but the property is not available.");return}if(h&&V+1>=N.length){var te=h(he,_e);me=!!te,me&&"get"in te&&!("originalValue"in te.get)?he=te.get:he=he[_e]}else me=H(he,_e),he=he[_e];me&&!de&&(oe[Ae]=he)}}return he},getIntrinsic}var GetIntrinsic$2=requireGetIntrinsic(),callBindBasic=callBindApplyHelpers,$indexOf=callBindBasic([GetIntrinsic$2("%String.prototype.indexOf%")]),callBound$3=function(e,n){var r=GetIntrinsic$2(e,!!n);return typeof r=="function"&&$indexOf(e,".prototype.")>-1?callBindBasic([r]):r},GetIntrinsic$1=requireGetIntrinsic(),callBound$2=callBound$3,inspect$2=objectInspect,$TypeError$2=type,$Map=GetIntrinsic$1("%Map%",!0),$mapGet=callBound$2("Map.prototype.get",!0),$mapSet=callBound$2("Map.prototype.set",!0),$mapHas=callBound$2("Map.prototype.has",!0),$mapDelete=callBound$2("Map.prototype.delete",!0),$mapSize=callBound$2("Map.prototype.size",!0),sideChannelMap=!!$Map&&function(){var e,n={assert:function(r){if(!n.has(r))throw new $TypeError$2("Side channel does not contain "+inspect$2(r))},delete:function(r){if(e){var c=$mapDelete(e,r);return $mapSize(e)===0&&(e=void 0),c}return!1},get:function(r){if(e)return $mapGet(e,r)},has:function(r){return e?$mapHas(e,r):!1},set:function(r,c){e||(e=new $Map),$mapSet(e,r,c)}};return n},GetIntrinsic=requireGetIntrinsic(),callBound$1=callBound$3,inspect$1=objectInspect,getSideChannelMap$1=sideChannelMap,$TypeError$1=type,$WeakMap=GetIntrinsic("%WeakMap%",!0),$weakMapGet=callBound$1("WeakMap.prototype.get",!0),$weakMapSet=callBound$1("WeakMap.prototype.set",!0),$weakMapHas=callBound$1("WeakMap.prototype.has",!0),$weakMapDelete=callBound$1("WeakMap.prototype.delete",!0),sideChannelWeakmap=$WeakMap?function(){var e,n,r={assert:function(c){if(!r.has(c))throw new $TypeError$1("Side channel does not contain "+inspect$1(c))},delete:function(c){if($WeakMap&&c&&(typeof c=="object"||typeof c=="function")){if(e)return $weakMapDelete(e,c)}else if(getSideChannelMap$1&&n)return n.delete(c);return!1},get:function(c){return $WeakMap&&c&&(typeof c=="object"||typeof c=="function")&&e?$weakMapGet(e,c):n&&n.get(c)},has:function(c){return $WeakMap&&c&&(typeof c=="object"||typeof c=="function")&&e?$weakMapHas(e,c):!!n&&n.has(c)},set:function(c,m){$WeakMap&&c&&(typeof c=="object"||typeof c=="function")?(e||(e=new $WeakMap),$weakMapSet(e,c,m)):getSideChannelMap$1&&(n||(n=getSideChannelMap$1()),n.set(c,m))}};return r}:getSideChannelMap$1,$TypeError=type,inspect=objectInspect,getSideChannelList=sideChannelList,getSideChannelMap=sideChannelMap,getSideChannelWeakMap=sideChannelWeakmap,makeChannel=getSideChannelWeakMap||getSideChannelMap||getSideChannelList,sideChannel=function(){var e,n={assert:function(r){if(!n.has(r))throw new $TypeError("Side channel does not contain "+inspect(r))},delete:function(r){return!!e&&e.delete(r)},get:function(r){return e&&e.get(r)},has:function(r){return!!e&&e.has(r)},set:function(r,c){e||(e=makeChannel()),e.set(r,c)}};return n},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$3={default:Format.RFC3986,formatters:{RFC1738:function(t){return replace.call(t,percentTwenties,"+")},RFC3986:function(t){return String(t)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$2=formats$3,getSideChannel$1=sideChannel,has$2=Object.prototype.hasOwnProperty,isArray$2=Array.isArray,overflowChannel=getSideChannel$1(),markOverflow=function(e,n){return overflowChannel.set(e,n),e},isOverflow=function(e){return overflowChannel.has(e)},getMaxIndex=function(e){return overflowChannel.get(e)},setMaxIndex=function(e,n){overflowChannel.set(e,n)},hexTable=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),compactQueue=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(isArray$2(r)){for(var c=[],m=0;m<r.length;++m)typeof r[m]<"u"&&c.push(r[m]);n.obj[n.prop]=c}}},arrayToObject=function(e,n){for(var r=n&&n.plainObjects?{__proto__:null}:{},c=0;c<e.length;++c)typeof e[c]<"u"&&(r[c]=e[c]);return r},merge=function t(e,n,r){if(!n)return e;if(typeof n!="object"&&typeof n!="function"){if(isArray$2(e))e.push(n);else if(e&&typeof e=="object")if(isOverflow(e)){var c=getMaxIndex(e)+1;e[c]=n,setMaxIndex(e,c)}else(r&&(r.plainObjects||r.allowPrototypes)||!has$2.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object"){if(isOverflow(n)){for(var m=Object.keys(n),_=r&&r.plainObjects?{__proto__:null,0:e}:{0:e},k=0;k<m.length;k++){var g=parseInt(m[k],10);_[g+1]=n[m[k]]}return markOverflow(_,getMaxIndex(n)+1)}return[e].concat(n)}var v=e;return isArray$2(e)&&!isArray$2(n)&&(v=arrayToObject(e,r)),isArray$2(e)&&isArray$2(n)?(n.forEach(function(a,S){if(has$2.call(e,S)){var w=e[S];w&&typeof w=="object"&&a&&typeof a=="object"?e[S]=t(w,a,r):e.push(a)}else e[S]=a}),e):Object.keys(n).reduce(function(a,S){var w=n[S];return has$2.call(a,S)?a[S]=t(a[S],w,r):a[S]=w,a},v)},assign=function(e,n){return Object.keys(n).reduce(function(r,c){return r[c]=n[c],r},e)},decode=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},limit=1024,encode=function(e,n,r,c,m){if(e.length===0)return e;var _=e;if(typeof e=="symbol"?_=Symbol.prototype.toString.call(e):typeof e!="string"&&(_=String(e)),r==="iso-8859-1")return escape(_).replace(/%u[0-9a-f]{4}/gi,function(I){return"%26%23"+parseInt(I.slice(2),16)+"%3B"});for(var k="",g=0;g<_.length;g+=limit){for(var v=_.length>=limit?_.slice(g,g+limit):_,a=[],S=0;S<v.length;++S){var w=v.charCodeAt(S);if(w===45||w===46||w===95||w===126||w>=48&&w<=57||w>=65&&w<=90||w>=97&&w<=122||m===formats$2.RFC1738&&(w===40||w===41)){a[a.length]=v.charAt(S);continue}if(w<128){a[a.length]=hexTable[w];continue}if(w<2048){a[a.length]=hexTable[192|w>>6]+hexTable[128|w&63];continue}if(w<55296||w>=57344){a[a.length]=hexTable[224|w>>12]+hexTable[128|w>>6&63]+hexTable[128|w&63];continue}S+=1,w=65536+((w&1023)<<10|v.charCodeAt(S)&1023),a[a.length]=hexTable[240|w>>18]+hexTable[128|w>>12&63]+hexTable[128|w>>6&63]+hexTable[128|w&63]}k+=a.join("")}return k},compact=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],c=0;c<n.length;++c)for(var m=n[c],_=m.obj[m.prop],k=Object.keys(_),g=0;g<k.length;++g){var v=k[g],a=_[v];typeof a=="object"&&a!==null&&r.indexOf(a)===-1&&(n.push({obj:_,prop:v}),r.push(a))}return compactQueue(n),e},isRegExp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},isBuffer=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},combine=function(e,n,r,c){if(isOverflow(e)){var m=getMaxIndex(e)+1;return e[m]=n,setMaxIndex(e,m),e}var _=[].concat(e,n);return _.length>r?markOverflow(arrayToObject(_,{plainObjects:c}),_.length-1):_},maybeMap=function(e,n){if(isArray$2(e)){for(var r=[],c=0;c<e.length;c+=1)r.push(n(e[c]));return r}return n(e)},utils$2={arrayToObject,assign,combine,compact,decode,encode,isBuffer,isOverflow,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$1=utils$2,formats$1=formats$3,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},isArray$1=Array.isArray,push=Array.prototype.push,pushToArray=function(t,e){push.apply(t,isArray$1(e)?e:[e])},toISO=Date.prototype.toISOString,defaultFormat=formats$1.default,defaults$1={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:utils$1.encode,encodeValuesOnly:!1,filter:void 0,format:defaultFormat,formatter:formats$1.formatters[defaultFormat],indices:!1,serializeDate:function(e){return toISO.call(e)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},sentinel={},stringify$1=function t(e,n,r,c,m,_,k,g,v,a,S,w,I,M,B,P,o,h){for(var x=e,b=h,l=0,y=!1;(b=b.get(sentinel))!==void 0&&!y;){var u=b.get(e);if(l+=1,typeof u<"u"){if(u===l)throw new RangeError("Cyclic object value");y=!0}typeof b.get(sentinel)>"u"&&(l=0)}if(typeof a=="function"?x=a(n,x):x instanceof Date?x=I(x):r==="comma"&&isArray$1(x)&&(x=utils$1.maybeMap(x,function(W){return W instanceof Date?I(W):W})),x===null){if(_)return v&&!P?v(n,defaults$1.encoder,o,"key",M):n;x=""}if(isNonNullishPrimitive(x)||utils$1.isBuffer(x)){if(v){var T=P?n:v(n,defaults$1.encoder,o,"key",M);return[B(T)+"="+B(v(x,defaults$1.encoder,o,"value",M))]}return[B(n)+"="+B(String(x))]}var R=[];if(typeof x>"u")return R;var X;if(r==="comma"&&isArray$1(x))P&&v&&(x=utils$1.maybeMap(x,v)),X=[{value:x.length>0?x.join(",")||null:void 0}];else if(isArray$1(a))X=a;else{var D=Object.keys(x);X=S?D.sort(S):D}var E=g?String(n).replace(/\./g,"%2E"):String(n),q=c&&isArray$1(x)&&x.length===1?E+"[]":E;if(m&&isArray$1(x)&&x.length===0)return q+"[]";for(var oe=0;oe<X.length;++oe){var ae=X[oe],ue=typeof ae=="object"&&ae&&typeof ae.value<"u"?ae.value:x[ae];if(!(k&&ue===null)){var re=w&&g?String(ae).replace(/\./g,"%2E"):String(ae),pe=isArray$1(x)?typeof r=="function"?r(q,re):q:q+(w?"."+re:"["+re+"]");h.set(e,l);var H=getSideChannel();H.set(sentinel,h),pushToArray(R,t(ue,pe,r,c,m,_,k,g,r==="comma"&&P&&isArray$1(x)?null:v,a,S,w,I,M,B,P,o,H))}}return R},normalizeStringifyOptions=function(e){if(!e)return defaults$1;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||defaults$1.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=formats$1.default;if(typeof e.format<"u"){if(!has$1.call(formats$1.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var c=formats$1.formatters[r],m=defaults$1.filter;(typeof e.filter=="function"||isArray$1(e.filter))&&(m=e.filter);var _;if(e.arrayFormat in arrayPrefixGenerators?_=e.arrayFormat:"indices"in e?_=e.indices?"indices":"repeat":_=defaults$1.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var k=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:defaults$1.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:k,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:defaults$1.allowEmptyArrays,arrayFormat:_,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:defaults$1.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?defaults$1.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:defaults$1.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:defaults$1.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:defaults$1.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:m,format:r,formatter:c,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:defaults$1.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:defaults$1.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:defaults$1.strictNullHandling}},stringify_1=function(t,e){var n=t,r=normalizeStringifyOptions(e),c,m;typeof r.filter=="function"?(m=r.filter,n=m("",n)):isArray$1(r.filter)&&(m=r.filter,c=m);var _=[];if(typeof n!="object"||n===null)return"";var k=arrayPrefixGenerators[r.arrayFormat],g=k==="comma"&&r.commaRoundTrip;c||(c=Object.keys(n)),r.sort&&c.sort(r.sort);for(var v=getSideChannel(),a=0;a<c.length;++a){var S=c[a],w=n[S];r.skipNulls&&w===null||pushToArray(_,stringify$1(w,S,k,g,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,v))}var I=_.join(r.delimiter),M=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?M+="utf8=%26%2310003%3B&":M+="utf8=%E2%9C%93&"),I.length>0?M+I:""},utils=utils$2,has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:utils.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},interpretNumericEntities=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},parseArrayValue=function(t,e,n){if(t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&n>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return t},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(e,n){var r={__proto__:null},c=n.ignoreQueryPrefix?e.replace(/^\?/,""):e;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var m=n.parameterLimit===1/0?void 0:n.parameterLimit,_=c.split(n.delimiter,n.throwOnLimitExceeded?m+1:m);if(n.throwOnLimitExceeded&&_.length>m)throw new RangeError("Parameter limit exceeded. Only "+m+" parameter"+(m===1?"":"s")+" allowed.");var k=-1,g,v=n.charset;if(n.charsetSentinel)for(g=0;g<_.length;++g)_[g].indexOf("utf8=")===0&&(_[g]===charsetSentinel?v="utf-8":_[g]===isoSentinel&&(v="iso-8859-1"),k=g,g=_.length);for(g=0;g<_.length;++g)if(g!==k){var a=_[g],S=a.indexOf("]="),w=S===-1?a.indexOf("="):S+1,I,M;if(w===-1?(I=n.decoder(a,defaults.decoder,v,"key"),M=n.strictNullHandling?null:""):(I=n.decoder(a.slice(0,w),defaults.decoder,v,"key"),I!==null&&(M=utils.maybeMap(parseArrayValue(a.slice(w+1),n,isArray(r[I])?r[I].length:0),function(P){return n.decoder(P,defaults.decoder,v,"value")}))),M&&n.interpretNumericEntities&&v==="iso-8859-1"&&(M=interpretNumericEntities(String(M))),a.indexOf("[]=")>-1&&(M=isArray(M)?[M]:M),I!==null){var B=has.call(r,I);B&&n.duplicates==="combine"?r[I]=utils.combine(r[I],M,n.arrayLimit,n.plainObjects):(!B||n.duplicates==="last")&&(r[I]=M)}}return r},parseObject=function(t,e,n,r){var c=0;if(t.length>0&&t[t.length-1]==="[]"){var m=t.slice(0,-1).join("");c=Array.isArray(e)&&e[m]?e[m].length:0}for(var _=r?e:parseArrayValue(e,n,c),k=t.length-1;k>=0;--k){var g,v=t[k];if(v==="[]"&&n.parseArrays)utils.isOverflow(_)?g=_:g=n.allowEmptyArrays&&(_===""||n.strictNullHandling&&_===null)?[]:utils.combine([],_,n.arrayLimit,n.plainObjects);else{g=n.plainObjects?{__proto__:null}:{};var a=v.charAt(0)==="["&&v.charAt(v.length-1)==="]"?v.slice(1,-1):v,S=n.decodeDotInKeys?a.replace(/%2E/g,"."):a,w=parseInt(S,10);!n.parseArrays&&S===""?g={0:_}:!isNaN(w)&&v!==S&&String(w)===S&&w>=0&&n.parseArrays&&w<=n.arrayLimit?(g=[],g[w]=_):S!=="__proto__"&&(g[S]=_)}_=g}return _},splitKeyIntoSegments=function(e,n){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e;if(n.depth<=0)return!n.plainObjects&&has.call(Object.prototype,r)&&!n.allowPrototypes?void 0:[r];var c=/(\[[^[\]]*])/,m=/(\[[^[\]]*])/g,_=c.exec(r),k=_?r.slice(0,_.index):r,g=[];if(k){if(!n.plainObjects&&has.call(Object.prototype,k)&&!n.allowPrototypes)return;g.push(k)}for(var v=0;(_=m.exec(r))!==null&&v<n.depth;){v+=1;var a=_[1].slice(1,-1);if(!n.plainObjects&&has.call(Object.prototype,a)&&!n.allowPrototypes)return;g.push(_[1])}if(_){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");g.push("["+r.slice(_.index)+"]")}return g},parseKeys=function(e,n,r,c){if(e){var m=splitKeyIntoSegments(e,r);if(m)return parseObject(m,n,r,c)}},normalizeParseOptions=function(e){if(!e)return defaults;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var n=typeof e.charset>"u"?defaults.charset:e.charset,r=typeof e.duplicates>"u"?defaults.duplicates:e.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var c=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:defaults.allowDots:!!e.allowDots;return{allowDots:c,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:defaults.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:defaults.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:defaults.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:defaults.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:defaults.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:defaults.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:defaults.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:defaults.decoder,delimiter:typeof e.delimiter=="string"||utils.isRegExp(e.delimiter)?e.delimiter:defaults.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:defaults.depth,duplicates:r,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:defaults.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:defaults.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:defaults.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:defaults.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},parse$2=function(t,e){var n=normalizeParseOptions(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?{__proto__:null}:{};for(var r=typeof t=="string"?parseValues(t,n):t,c=n.plainObjects?{__proto__:null}:{},m=Object.keys(r),_=0;_<m.length;++_){var k=m[_],g=parseKeys(k,r[k],n,typeof t=="string");c=utils.merge(c,g,n)}return n.allowSparse===!0?c:utils.compact(c)},stringify=stringify_1,parse$1=parse$2,formats=formats$3,lib$1={formats,parse:parse$1,stringify};const require$$1=getDefaultExportFromCjs(lib$1);var punycode=require$$0$1;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require$$1;function urlParse(t,e,n){if(t&&typeof t=="object"&&t instanceof Url)return t;var r=new Url;return r.parse(t,e,n),r}Url.prototype.parse=function(t,e,n){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),c=r!==-1&&r<t.indexOf("#")?"?":"#",m=t.split(c),_=/\\/g;m[0]=m[0].replace(_,"/"),t=m.join(c);var k=t;if(k=k.trim(),!n&&t.split("#").length===1){var g=simplePathPattern.exec(k);if(g)return this.path=k,this.href=k,this.pathname=g[1],g[2]?(this.search=g[2],e?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var v=protocolPattern.exec(k);if(v){v=v[0];var a=v.toLowerCase();this.protocol=a,k=k.substr(v.length)}if(n||v||k.match(/^\/\/[^@/]+@[^@/]+/)){var S=k.substr(0,2)==="//";S&&!(v&&hostlessProtocol[v])&&(k=k.substr(2),this.slashes=!0)}if(!hostlessProtocol[v]&&(S||v&&!slashedProtocol[v])){for(var w=-1,I=0;I<hostEndingChars.length;I++){var M=k.indexOf(hostEndingChars[I]);M!==-1&&(w===-1||M<w)&&(w=M)}var B,P;w===-1?P=k.lastIndexOf("@"):P=k.lastIndexOf("@",w),P!==-1&&(B=k.slice(0,P),k=k.slice(P+1),this.auth=decodeURIComponent(B)),w=-1;for(var I=0;I<nonHostChars.length;I++){var M=k.indexOf(nonHostChars[I]);M!==-1&&(w===-1||M<w)&&(w=M)}w===-1&&(w=k.length),this.host=k.slice(0,w),k=k.slice(w),this.parseHost(),this.hostname=this.hostname||"";var o=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!o)for(var h=this.hostname.split(/\./),I=0,x=h.length;I<x;I++){var b=h[I];if(b&&!b.match(hostnamePartPattern)){for(var l="",y=0,u=b.length;y<u;y++)b.charCodeAt(y)>127?l+="x":l+=b[y];if(!l.match(hostnamePartPattern)){var T=h.slice(0,I),R=h.slice(I+1),X=b.match(hostnamePartStart);X&&(T.push(X[1]),R.unshift(X[2])),R.length&&(k="/"+R.join(".")+k),this.hostname=T.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),o||(this.hostname=punycode.toASCII(this.hostname));var D=this.port?":"+this.port:"",E=this.hostname||"";this.host=E+D,this.href+=this.host,o&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),k[0]!=="/"&&(k="/"+k))}if(!unsafeProtocol[a])for(var I=0,x=autoEscape.length;I<x;I++){var q=autoEscape[I];if(k.indexOf(q)!==-1){var oe=encodeURIComponent(q);oe===q&&(oe=escape(q)),k=k.split(q).join(oe)}}var ae=k.indexOf("#");ae!==-1&&(this.hash=k.substr(ae),k=k.slice(0,ae));var ue=k.indexOf("?");if(ue!==-1?(this.search=k.substr(ue),this.query=k.substr(ue+1),e&&(this.query=querystring.parse(this.query)),k=k.slice(0,ue)):e&&(this.search="",this.query={}),k&&(this.pathname=k),slashedProtocol[a]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",re=this.search||"";this.path=D+re}return this.href=this.format(),this};function urlFormat(t){return typeof t=="string"&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}Url.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",c=!1,m="";this.host?c=t+this.host:this.hostname&&(c=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(c+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(m=querystring.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var _=this.search||m&&"?"+m||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||slashedProtocol[e])&&c!==!1?(c="//"+(c||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):c||(c=""),r&&r.charAt(0)!=="#"&&(r="#"+r),_&&_.charAt(0)!=="?"&&(_="?"+_),n=n.replace(/[?#]/g,function(k){return encodeURIComponent(k)}),_=_.replace("#","%23"),e+c+n+_+r};function urlResolve(t,e){return urlParse(t,!1,!0).resolve(e)}Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()};function urlResolveObject(t,e){return t?urlParse(t,!1,!0).resolveObject(e):e}Url.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Url;e.parse(t,!1,!0),t=e}for(var n=new Url,r=Object.keys(this),c=0;c<r.length;c++){var m=r[c];n[m]=this[m]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var _=Object.keys(t),k=0;k<_.length;k++){var g=_[k];g!=="protocol"&&(n[g]=t[g])}return slashedProtocol[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!slashedProtocol[t.protocol]){for(var v=Object.keys(t),a=0;a<v.length;a++){var S=v[a];n[S]=t[S]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!hostlessProtocol[t.protocol]){for(var x=(t.pathname||"").split("/");x.length&&!(t.host=x.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),x[0]!==""&&x.unshift(""),x.length<2&&x.unshift(""),n.pathname=x.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var w=n.pathname||"",I=n.search||"";n.path=w+I}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var M=n.pathname&&n.pathname.charAt(0)==="/",B=t.host||t.pathname&&t.pathname.charAt(0)==="/",P=B||M||n.host&&t.pathname,o=P,h=n.pathname&&n.pathname.split("/")||[],x=t.pathname&&t.pathname.split("/")||[],b=n.protocol&&!slashedProtocol[n.protocol];if(b&&(n.hostname="",n.port=null,n.host&&(h[0]===""?h[0]=n.host:h.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(x[0]===""?x[0]=t.host:x.unshift(t.host)),t.host=null),P=P&&(x[0]===""||h[0]==="")),B)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,h=x;else if(x.length)h||(h=[]),h.pop(),h=h.concat(x),n.search=t.search,n.query=t.query;else if(t.search!=null){if(b){n.host=h.shift(),n.hostname=n.host;var l=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;l&&(n.auth=l.shift(),n.hostname=l.shift(),n.host=n.hostname)}return n.search=t.search,n.query=t.query,(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!h.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var y=h.slice(-1)[0],u=(n.host||t.host||h.length>1)&&(y==="."||y==="..")||y==="",T=0,R=h.length;R>=0;R--)y=h[R],y==="."?h.splice(R,1):y===".."?(h.splice(R,1),T++):T&&(h.splice(R,1),T--);if(!P&&!o)for(;T--;T)h.unshift("..");P&&h[0]!==""&&(!h[0]||h[0].charAt(0)!=="/")&&h.unshift(""),u&&h.join("/").substr(-1)!=="/"&&h.push("");var X=h[0]===""||h[0]&&h[0].charAt(0)==="/";if(b){n.hostname=X?"":h.length?h.shift():"",n.host=n.hostname;var l=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;l&&(n.auth=l.shift(),n.hostname=l.shift(),n.host=n.hostname)}return P=P||n.host&&h.length,P&&!X&&h.unshift(""),h.length>0?n.pathname=h.join("/"):(n.pathname=null,n.path=null),(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};Url.prototype.parseHost=function(){var t=this.host,e=portPattern.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var parse=urlParse,resolve$1=urlResolve,resolveObject=urlResolveObject,format=urlFormat,Url_1=Url;function normalizeArray(t,e){for(var n=0,r=t.length-1;r>=0;r--){var c=t[r];c==="."?t.splice(r,1):c===".."?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function resolve(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var r=n>=0?arguments[n]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;t=r+"/"+t,e=r.charAt(0)==="/"}return t=normalizeArray(filter(t.split("/"),function(c){return!!c}),!e).join("/"),(e?"/":"")+t||"."}function filter(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var _globalThis=function(t){function e(){var r=this||self;return delete t.prototype.__magic__,r}if(typeof globalThis=="object")return globalThis;if(this)return e();t.defineProperty(t.prototype,"__magic__",{configurable:!0,get:e});var n=__magic__;return n}(Object),formatImport=format,parseImport=parse,resolveImport=resolve$1,UrlImport=Url_1,URL$1=_globalThis.URL,URLSearchParams=_globalThis.URLSearchParams,percentRegEx=/%/g,backslashRegEx=/\\/g,newlineRegEx=/\n/g,carriageReturnRegEx=/\r/g,tabRegEx=/\t/g,CHAR_FORWARD_SLASH=47;function isURLInstance(t){var e=t??null;return!!(e!==null&&(e!=null&&e.href)&&(e!=null&&e.origin))}function getPathFromURLPosix(t){if(t.hostname!=="")throw new TypeError('File URL host must be "localhost" or empty on browser');for(var e=t.pathname,n=0;n<e.length;n++)if(e[n]==="%"){var r=e.codePointAt(n+2)|32;if(e[n+1]==="2"&&r===102)throw new TypeError("File URL path must not include encoded / characters")}return decodeURIComponent(e)}function encodePathChars(t){return t.includes("%")&&(t=t.replace(percentRegEx,"%25")),t.includes("\\")&&(t=t.replace(backslashRegEx,"%5C")),t.includes(`
`)&&(t=t.replace(newlineRegEx,"%0A")),t.includes("\r")&&(t=t.replace(carriageReturnRegEx,"%0D")),t.includes("	")&&(t=t.replace(tabRegEx,"%09")),t}var domainToASCII=function(e){if(typeof e>"u")throw new TypeError('The "domain" argument must be specified');return new URL$1("http://"+e).hostname},domainToUnicode=function(e){if(typeof e>"u")throw new TypeError('The "domain" argument must be specified');return new URL$1("http://"+e).hostname},pathToFileURL=function(e){var n=new URL$1("file://"),r=resolve(e),c=e.charCodeAt(e.length-1);return c===CHAR_FORWARD_SLASH&&r[r.length-1]!=="/"&&(r+="/"),n.pathname=encodePathChars(r),n},fileURLToPath=function(e){if(!isURLInstance(e)&&typeof e!="string")throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof e+" ("+e+")");var n=new URL$1(e);if(n.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return getPathFromURLPosix(n)},formatImportWithOverloads=function(e,n){var r,c,m,_;if(n===void 0&&(n={}),!(e instanceof URL$1))return formatImport(e);if(typeof n!="object"||n===null)throw new TypeError('The "options" argument must be of type object.');var k=(r=n.auth)!=null?r:!0,g=(c=n.fragment)!=null?c:!0,v=(m=n.search)!=null?m:!0;(_=n.unicode)!=null;var a=new URL$1(e.toString());return k||(a.username="",a.password=""),g||(a.hash=""),v||(a.search=""),a.toString()},api={format:formatImportWithOverloads,parse:parseImport,resolve:resolveImport,resolveObject,Url:UrlImport,URL:URL$1,URLSearchParams,domainToASCII,domainToUnicode,pathToFileURL,fileURLToPath};const url=Object.freeze(Object.defineProperty({__proto__:null,URL:URL$1,URLSearchParams,Url:UrlImport,default:api,domainToASCII,domainToUnicode,fileURLToPath,format:formatImportWithOverloads,parse:parseImport,pathToFileURL,resolve:resolveImport,resolveObject},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(url);var streamHttp={},request={exports:{}},capability={},hasRequiredCapability;function requireCapability(){return hasRequiredCapability||(hasRequiredCapability=1,function(t){t.fetch=c(commonjsGlobal.fetch)&&c(commonjsGlobal.ReadableStream),t.writableStream=c(commonjsGlobal.WritableStream),t.abortController=c(commonjsGlobal.AbortController);var e;function n(){if(e!==void 0)return e;if(commonjsGlobal.XMLHttpRequest){e=new commonjsGlobal.XMLHttpRequest;try{e.open("GET",commonjsGlobal.XDomainRequest?"/":"https://example.com")}catch{e=null}}else e=null;return e}function r(m){var _=n();if(!_)return!1;try{return _.responseType=m,_.responseType===m}catch{}return!1}t.arraybuffer=t.fetch||r("arraybuffer"),t.msstream=!t.fetch&&r("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&r("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||(n()?c(n().overrideMimeType):!1);function c(m){return typeof m=="function"}e=null}(capability)),capability}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}}),inherits_browser.exports}var response={},readableBrowser={exports:{}},events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(l,y,u){return Function.prototype.apply.call(l,y,u)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:n=function(l){return Object.getOwnPropertyNames(l)};function r(b){console&&console.warn&&console.warn(b)}var c=Number.isNaN||function(l){return l!==l};function m(){m.init.call(this)}events.exports=m,events.exports.once=o,m.EventEmitter=m,m.prototype._events=void 0,m.prototype._eventsCount=0,m.prototype._maxListeners=void 0;var _=10;function k(b){if(typeof b!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof b)}Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(b){if(typeof b!="number"||b<0||c(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");_=b}}),m.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},m.prototype.setMaxListeners=function(l){if(typeof l!="number"||l<0||c(l))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");return this._maxListeners=l,this};function g(b){return b._maxListeners===void 0?m.defaultMaxListeners:b._maxListeners}m.prototype.getMaxListeners=function(){return g(this)},m.prototype.emit=function(l){for(var y=[],u=1;u<arguments.length;u++)y.push(arguments[u]);var T=l==="error",R=this._events;if(R!==void 0)T=T&&R.error===void 0;else if(!T)return!1;if(T){var X;if(y.length>0&&(X=y[0]),X instanceof Error)throw X;var D=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw D.context=X,D}var E=R[l];if(E===void 0)return!1;if(typeof E=="function")e(E,this,y);else for(var q=E.length,oe=M(E,q),u=0;u<q;++u)e(oe[u],this,y);return!0};function v(b,l,y,u){var T,R,X;if(k(y),R=b._events,R===void 0?(R=b._events=Object.create(null),b._eventsCount=0):(R.newListener!==void 0&&(b.emit("newListener",l,y.listener?y.listener:y),R=b._events),X=R[l]),X===void 0)X=R[l]=y,++b._eventsCount;else if(typeof X=="function"?X=R[l]=u?[y,X]:[X,y]:u?X.unshift(y):X.push(y),T=g(b),T>0&&X.length>T&&!X.warned){X.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+X.length+" "+String(l)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=b,D.type=l,D.count=X.length,r(D)}return b}m.prototype.addListener=function(l,y){return v(this,l,y,!1)},m.prototype.on=m.prototype.addListener,m.prototype.prependListener=function(l,y){return v(this,l,y,!0)};function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(b,l,y){var u={fired:!1,wrapFn:void 0,target:b,type:l,listener:y},T=a.bind(u);return T.listener=y,u.wrapFn=T,T}m.prototype.once=function(l,y){return k(y),this.on(l,S(this,l,y)),this},m.prototype.prependOnceListener=function(l,y){return k(y),this.prependListener(l,S(this,l,y)),this},m.prototype.removeListener=function(l,y){var u,T,R,X,D;if(k(y),T=this._events,T===void 0)return this;if(u=T[l],u===void 0)return this;if(u===y||u.listener===y)--this._eventsCount===0?this._events=Object.create(null):(delete T[l],T.removeListener&&this.emit("removeListener",l,u.listener||y));else if(typeof u!="function"){for(R=-1,X=u.length-1;X>=0;X--)if(u[X]===y||u[X].listener===y){D=u[X].listener,R=X;break}if(R<0)return this;R===0?u.shift():B(u,R),u.length===1&&(T[l]=u[0]),T.removeListener!==void 0&&this.emit("removeListener",l,D||y)}return this},m.prototype.off=m.prototype.removeListener,m.prototype.removeAllListeners=function(l){var y,u,T;if(u=this._events,u===void 0)return this;if(u.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):u[l]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete u[l]),this;if(arguments.length===0){var R=Object.keys(u),X;for(T=0;T<R.length;++T)X=R[T],X!=="removeListener"&&this.removeAllListeners(X);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(y=u[l],typeof y=="function")this.removeListener(l,y);else if(y!==void 0)for(T=y.length-1;T>=0;T--)this.removeListener(l,y[T]);return this};function w(b,l,y){var u=b._events;if(u===void 0)return[];var T=u[l];return T===void 0?[]:typeof T=="function"?y?[T.listener||T]:[T]:y?P(T):M(T,T.length)}m.prototype.listeners=function(l){return w(this,l,!0)},m.prototype.rawListeners=function(l){return w(this,l,!1)},m.listenerCount=function(b,l){return typeof b.listenerCount=="function"?b.listenerCount(l):I.call(b,l)},m.prototype.listenerCount=I;function I(b){var l=this._events;if(l!==void 0){var y=l[b];if(typeof y=="function")return 1;if(y!==void 0)return y.length}return 0}m.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function M(b,l){for(var y=new Array(l),u=0;u<l;++u)y[u]=b[u];return y}function B(b,l){for(;l+1<b.length;l++)b[l]=b[l+1];b.pop()}function P(b){for(var l=new Array(b.length),y=0;y<l.length;++y)l[y]=b[y].listener||b[y];return l}function o(b,l){return new Promise(function(y,u){function T(X){b.removeListener(l,R),u(X)}function R(){typeof b.removeListener=="function"&&b.removeListener("error",T),y([].slice.call(arguments))}x(b,l,R,{once:!0}),l!=="error"&&h(b,T,{once:!0})})}function h(b,l,y){typeof b.on=="function"&&x(b,"error",l,y)}function x(b,l,y,u){if(typeof b.on=="function")u.once?b.once(l,y):b.on(l,y);else if(typeof b.addEventListener=="function")b.addEventListener(l,function T(R){u.once&&b.removeEventListener(l,T),y(R)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof b)}return events.exports}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}const require$$0=getAugmentedNamespace(dist);var util={},types={},shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var t=requireShams$1();return shams=function(){return t()&&!!Symbol.toStringTag},shams}var isArguments$1,hasRequiredIsArguments$1;function requireIsArguments$1(){if(hasRequiredIsArguments$1)return isArguments$1;hasRequiredIsArguments$1=1;var t=requireShams()(),e=callBound$3,n=e("Object.prototype.toString"),r=function(k){return t&&k&&typeof k=="object"&&Symbol.toStringTag in k?!1:n(k)==="[object Arguments]"},c=function(k){return r(k)?!0:k!==null&&typeof k=="object"&&"length"in k&&typeof k.length=="number"&&k.length>=0&&n(k)!=="[object Array]"&&"callee"in k&&n(k.callee)==="[object Function]"},m=function(){return r(arguments)}();return r.isLegacyArguments=c,isArguments$1=m?r:c,isArguments$1}var isRegex,hasRequiredIsRegex;function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var t=callBound$3,e=requireShams()(),n=requireHasown(),r=requireGopd(),c;if(e){var m=t("RegExp.prototype.exec"),_={},k=function(){throw _},g={toString:k,valueOf:k};typeof Symbol.toPrimitive=="symbol"&&(g[Symbol.toPrimitive]=k),c=function(w){if(!w||typeof w!="object")return!1;var I=r(w,"lastIndex"),M=I&&n(I,"value");if(!M)return!1;try{m(w,g)}catch(B){return B===_}}}else{var v=t("Object.prototype.toString"),a="[object RegExp]";c=function(w){return!w||typeof w!="object"&&typeof w!="function"?!1:v(w)===a}}return isRegex=c,isRegex}var safeRegexTest,hasRequiredSafeRegexTest;function requireSafeRegexTest(){if(hasRequiredSafeRegexTest)return safeRegexTest;hasRequiredSafeRegexTest=1;var t=callBound$3,e=requireIsRegex(),n=t("RegExp.prototype.exec"),r=type;return safeRegexTest=function(m){if(!e(m))throw new r("`regex` must be a RegExp");return function(k){return n(m,k)!==null}},safeRegexTest}var generatorFunction,hasRequiredGeneratorFunction;function requireGeneratorFunction(){if(hasRequiredGeneratorFunction)return generatorFunction;hasRequiredGeneratorFunction=1;const t=(function*(){}).constructor;return generatorFunction=()=>t,generatorFunction}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var t=callBound$3,e=requireSafeRegexTest(),n=e(/^\s*(?:function)?\*/),r=requireShams()(),c=requireGetProto(),m=t("Object.prototype.toString"),_=t("Function.prototype.toString"),k=requireGeneratorFunction();return isGeneratorFunction=function(v){if(typeof v!="function")return!1;if(n(_(v)))return!0;if(!r){var a=m(v);return a==="[object GeneratorFunction]"}if(!c)return!1;var S=k();return S&&c(v)===S.prototype},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(h){h!==r&&(e=null)}else e=null;var c=/^\s*class\b/,m=function(x){try{var b=t.call(x);return c.test(b)}catch{return!1}},_=function(x){try{return m(x)?!1:(t.call(x),!0)}catch{return!1}},k=Object.prototype.toString,g="[object Object]",v="[object Function]",a="[object GeneratorFunction]",S="[object HTMLAllCollection]",w="[object HTML document.all class]",I="[object HTMLCollection]",M=typeof Symbol=="function"&&!!Symbol.toStringTag,B=!(0 in[,]),P=function(){return!1};if(typeof document=="object"){var o=document.all;k.call(o)===k.call(document.all)&&(P=function(x){if((B||!x)&&(typeof x>"u"||typeof x=="object"))try{var b=k.call(x);return(b===S||b===w||b===I||b===g)&&x("")==null}catch{}return!1})}return isCallable=e?function(x){if(P(x))return!0;if(!x||typeof x!="function"&&typeof x!="object")return!1;try{e(x,null,n)}catch(b){if(b!==r)return!1}return!m(x)&&_(x)}:function(x){if(P(x))return!0;if(!x||typeof x!="function"&&typeof x!="object")return!1;if(M)return _(x);if(m(x))return!1;var b=k.call(x);return b!==v&&b!==a&&!/^\[object HTML/.test(b)?!1:_(x)},isCallable}var forEach,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach;hasRequiredForEach=1;var t=requireIsCallable(),e=Object.prototype.toString,n=Object.prototype.hasOwnProperty,r=function(g,v,a){for(var S=0,w=g.length;S<w;S++)n.call(g,S)&&(a==null?v(g[S],S,g):v.call(a,g[S],S,g))},c=function(g,v,a){for(var S=0,w=g.length;S<w;S++)a==null?v(g.charAt(S),S,g):v.call(a,g.charAt(S),S,g)},m=function(g,v,a){for(var S in g)n.call(g,S)&&(a==null?v(g[S],S,g):v.call(a,g[S],S,g))};function _(k){return e.call(k)==="[object Array]"}return forEach=function(g,v,a){if(!t(v))throw new TypeError("iterator must be a function");var S;arguments.length>=3&&(S=a),_(g)?r(g,v,S):typeof g=="string"?c(g,v,S):m(g,v,S)},forEach}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var t=requirePossibleTypedArrayNames(),e=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var r=[],c=0;c<t.length;c++)typeof e[t[c]]=="function"&&(r[r.length]=t[c]);return r},availableTypedArrays}var callBind={exports:{}},defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var t=requireEsDefineProperty(),e=requireSyntax(),n=type,r=requireGopd();return defineDataProperty=function(m,_,k){if(!m||typeof m!="object"&&typeof m!="function")throw new n("`obj` must be an object or a function`");if(typeof _!="string"&&typeof _!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var g=arguments.length>3?arguments[3]:null,v=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,S=arguments.length>6?arguments[6]:!1,w=!!r&&r(m,_);if(t)t(m,_,{configurable:a===null&&w?w.configurable:!a,enumerable:g===null&&w?w.enumerable:!g,value:k,writable:v===null&&w?w.writable:!v});else if(S||!g&&!v&&!a)m[_]=k;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var t=requireEsDefineProperty(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=e,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var t=requireGetIntrinsic(),e=requireDefineDataProperty(),n=requireHasPropertyDescriptors()(),r=requireGopd(),c=type,m=t("%Math.floor%");return setFunctionLength=function(k,g){if(typeof k!="function")throw new c("`fn` is not a function");if(typeof g!="number"||g<0||g>4294967295||m(g)!==g)throw new c("`length` must be a positive 32-bit integer");var v=arguments.length>2&&!!arguments[2],a=!0,S=!0;if("length"in k&&r){var w=r(k,"length");w&&!w.configurable&&(a=!1),w&&!w.writable&&(S=!1)}return(a||S||!v)&&(n?e(k,"length",g,!0,!0):e(k,"length",g)),k},setFunctionLength}var applyBind,hasRequiredApplyBind;function requireApplyBind(){if(hasRequiredApplyBind)return applyBind;hasRequiredApplyBind=1;var t=functionBind,e=requireFunctionApply(),n=actualApply;return applyBind=function(){return n(t,e,arguments)},applyBind}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(t){var e=requireSetFunctionLength(),n=requireEsDefineProperty(),r=callBindApplyHelpers,c=requireApplyBind();t.exports=function(_){var k=r(arguments),g=_.length-(arguments.length-1);return e(k,1+(g>0?g:0),!0)},n?n(t.exports,"apply",{value:c}):t.exports.apply=c}(callBind)),callBind.exports}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var t=requireForEach(),e=requireAvailableTypedArrays(),n=requireCallBind(),r=callBound$3,c=requireGopd(),m=requireGetProto(),_=r("Object.prototype.toString"),k=requireShams()(),g=typeof globalThis>"u"?commonjsGlobal:globalThis,v=e(),a=r("String.prototype.slice"),S=r("Array.prototype.indexOf",!0)||function(P,o){for(var h=0;h<P.length;h+=1)if(P[h]===o)return h;return-1},w={__proto__:null};k&&c&&m?t(v,function(B){var P=new g[B];if(Symbol.toStringTag in P&&m){var o=m(P),h=c(o,Symbol.toStringTag);if(!h&&o){var x=m(o);h=c(x,Symbol.toStringTag)}if(h&&h.get){var b=n(h.get);w["$"+B]=b}}}):t(v,function(B){var P=new g[B],o=P.slice||P.set;if(o){var h=n(o);w["$"+B]=h}});var I=function(P){var o=!1;return t(w,function(h,x){if(!o)try{"$"+h(P)===x&&(o=a(x,1))}catch{}}),o},M=function(P){var o=!1;return t(w,function(h,x){if(!o)try{h(P),o=a(x,1)}catch{}}),o};return whichTypedArray=function(P){if(!P||typeof P!="object")return!1;if(!k){var o=a(_(P),8,-1);return S(v,o)>-1?o:o!=="Object"?!1:M(P)}return c?I(P):null},whichTypedArray}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var t=requireWhichTypedArray();return isTypedArray=function(n){return!!t(n)},isTypedArray}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(t){var e=requireIsArguments$1(),n=requireIsGeneratorFunction(),r=requireWhichTypedArray(),c=requireIsTypedArray();function m(V){return V.call.bind(V)}var _=typeof BigInt<"u",k=typeof Symbol<"u",g=m(Object.prototype.toString),v=m(Number.prototype.valueOf),a=m(String.prototype.valueOf),S=m(Boolean.prototype.valueOf);if(_)var w=m(BigInt.prototype.valueOf);if(k)var I=m(Symbol.prototype.valueOf);function M(V,me){if(typeof V!="object")return!1;try{return me(V),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=n,t.isTypedArray=c;function B(V){return typeof Promise<"u"&&V instanceof Promise||V!==null&&typeof V=="object"&&typeof V.then=="function"&&typeof V.catch=="function"}t.isPromise=B;function P(V){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(V):c(V)||s(V)}t.isArrayBufferView=P;function o(V){return r(V)==="Uint8Array"}t.isUint8Array=o;function h(V){return r(V)==="Uint8ClampedArray"}t.isUint8ClampedArray=h;function x(V){return r(V)==="Uint16Array"}t.isUint16Array=x;function b(V){return r(V)==="Uint32Array"}t.isUint32Array=b;function l(V){return r(V)==="Int8Array"}t.isInt8Array=l;function y(V){return r(V)==="Int16Array"}t.isInt16Array=y;function u(V){return r(V)==="Int32Array"}t.isInt32Array=u;function T(V){return r(V)==="Float32Array"}t.isFloat32Array=T;function R(V){return r(V)==="Float64Array"}t.isFloat64Array=R;function X(V){return r(V)==="BigInt64Array"}t.isBigInt64Array=X;function D(V){return r(V)==="BigUint64Array"}t.isBigUint64Array=D;function E(V){return g(V)==="[object Map]"}E.working=typeof Map<"u"&&E(new Map);function q(V){return typeof Map>"u"?!1:E.working?E(V):V instanceof Map}t.isMap=q;function oe(V){return g(V)==="[object Set]"}oe.working=typeof Set<"u"&&oe(new Set);function ae(V){return typeof Set>"u"?!1:oe.working?oe(V):V instanceof Set}t.isSet=ae;function ue(V){return g(V)==="[object WeakMap]"}ue.working=typeof WeakMap<"u"&&ue(new WeakMap);function re(V){return typeof WeakMap>"u"?!1:ue.working?ue(V):V instanceof WeakMap}t.isWeakMap=re;function pe(V){return g(V)==="[object WeakSet]"}pe.working=typeof WeakSet<"u"&&pe(new WeakSet);function H(V){return pe(V)}t.isWeakSet=H;function W(V){return g(V)==="[object ArrayBuffer]"}W.working=typeof ArrayBuffer<"u"&&W(new ArrayBuffer);function ne(V){return typeof ArrayBuffer>"u"?!1:W.working?W(V):V instanceof ArrayBuffer}t.isArrayBuffer=ne;function j(V){return g(V)==="[object DataView]"}j.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&j(new DataView(new ArrayBuffer(1),0,1));function s(V){return typeof DataView>"u"?!1:j.working?j(V):V instanceof DataView}t.isDataView=s;var i=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function p(V){return g(V)==="[object SharedArrayBuffer]"}function f(V){return typeof i>"u"?!1:(typeof p.working>"u"&&(p.working=p(new i)),p.working?p(V):V instanceof i)}t.isSharedArrayBuffer=f;function C(V){return g(V)==="[object AsyncFunction]"}t.isAsyncFunction=C;function F(V){return g(V)==="[object Map Iterator]"}t.isMapIterator=F;function z(V){return g(V)==="[object Set Iterator]"}t.isSetIterator=z;function Q(V){return g(V)==="[object Generator]"}t.isGeneratorObject=Q;function L(V){return g(V)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=L;function N(V){return M(V,v)}t.isNumberObject=N;function se(V){return M(V,a)}t.isStringObject=se;function ge(V){return M(V,S)}t.isBooleanObject=ge;function Ae(V){return _&&M(V,w)}t.isBigIntObject=Ae;function he(V){return k&&M(V,I)}t.isSymbolObject=he;function de(V){return N(V)||se(V)||ge(V)||Ae(V)||he(V)}t.isBoxedPrimitive=de;function K(V){return typeof Uint8Array<"u"&&(ne(V)||f(V))}t.isAnyArrayBuffer=K,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(V){Object.defineProperty(t,V,{enumerable:!1,value:function(){throw new Error(V+" is not supported in userland")}})})}(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),isBufferBrowser}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(t){var e={},n=Object.getOwnPropertyDescriptors||function(i){for(var p=Object.keys(i),f={},C=0;C<p.length;C++)f[p[C]]=Object.getOwnPropertyDescriptor(i,p[C]);return f},r=/%[sdj%]/g;t.format=function(s){if(!y(s)){for(var i=[],p=0;p<arguments.length;p++)i.push(k(arguments[p]));return i.join(" ")}for(var p=1,f=arguments,C=f.length,F=String(s).replace(r,function(Q){if(Q==="%%")return"%";if(p>=C)return Q;switch(Q){case"%s":return String(f[p++]);case"%d":return Number(f[p++]);case"%j":try{return JSON.stringify(f[p++])}catch{return"[Circular]"}default:return Q}}),z=f[p];p<C;z=f[++p])x(z)||!X(z)?F+=" "+z:F+=" "+k(z);return F},t.deprecate=function(s,i){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return s;if(typeof process$1>"u")return function(){return t.deprecate(s,i).apply(this,arguments)};var p=!1;function f(){if(!p){if(process$1.throwDeprecation)throw new Error(i);process$1.traceDeprecation?console.trace(i):console.error(i),p=!0}return s.apply(this,arguments)}return f};var c={},m=/^$/;if(e.NODE_DEBUG){var _=e.NODE_DEBUG;_=_.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),m=new RegExp("^"+_+"$","i")}t.debuglog=function(s){if(s=s.toUpperCase(),!c[s])if(m.test(s)){var i=process$1.pid;c[s]=function(){var p=t.format.apply(t,arguments);console.error("%s %d: %s",s,i,p)}}else c[s]=function(){};return c[s]};function k(s,i){var p={seen:[],stylize:v};return arguments.length>=3&&(p.depth=arguments[2]),arguments.length>=4&&(p.colors=arguments[3]),h(i)?p.showHidden=i:i&&t._extend(p,i),T(p.showHidden)&&(p.showHidden=!1),T(p.depth)&&(p.depth=2),T(p.colors)&&(p.colors=!1),T(p.customInspect)&&(p.customInspect=!0),p.colors&&(p.stylize=g),S(p,s,p.depth)}t.inspect=k,k.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},k.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function g(s,i){var p=k.styles[i];return p?"\x1B["+k.colors[p][0]+"m"+s+"\x1B["+k.colors[p][1]+"m":s}function v(s,i){return s}function a(s){var i={};return s.forEach(function(p,f){i[p]=!0}),i}function S(s,i,p){if(s.customInspect&&i&&q(i.inspect)&&i.inspect!==t.inspect&&!(i.constructor&&i.constructor.prototype===i)){var f=i.inspect(p,s);return y(f)||(f=S(s,f,p)),f}var C=w(s,i);if(C)return C;var F=Object.keys(i),z=a(F);if(s.showHidden&&(F=Object.getOwnPropertyNames(i)),E(i)&&(F.indexOf("message")>=0||F.indexOf("description")>=0))return I(i);if(F.length===0){if(q(i)){var Q=i.name?": "+i.name:"";return s.stylize("[Function"+Q+"]","special")}if(R(i))return s.stylize(RegExp.prototype.toString.call(i),"regexp");if(D(i))return s.stylize(Date.prototype.toString.call(i),"date");if(E(i))return I(i)}var L="",N=!1,se=["{","}"];if(o(i)&&(N=!0,se=["[","]"]),q(i)){var ge=i.name?": "+i.name:"";L=" [Function"+ge+"]"}if(R(i)&&(L=" "+RegExp.prototype.toString.call(i)),D(i)&&(L=" "+Date.prototype.toUTCString.call(i)),E(i)&&(L=" "+I(i)),F.length===0&&(!N||i.length==0))return se[0]+L+se[1];if(p<0)return R(i)?s.stylize(RegExp.prototype.toString.call(i),"regexp"):s.stylize("[Object]","special");s.seen.push(i);var Ae;return N?Ae=M(s,i,p,z,F):Ae=F.map(function(he){return B(s,i,p,z,he,N)}),s.seen.pop(),P(Ae,L,se)}function w(s,i){if(T(i))return s.stylize("undefined","undefined");if(y(i)){var p="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return s.stylize(p,"string")}if(l(i))return s.stylize(""+i,"number");if(h(i))return s.stylize(""+i,"boolean");if(x(i))return s.stylize("null","null")}function I(s){return"["+Error.prototype.toString.call(s)+"]"}function M(s,i,p,f,C){for(var F=[],z=0,Q=i.length;z<Q;++z)H(i,String(z))?F.push(B(s,i,p,f,String(z),!0)):F.push("");return C.forEach(function(L){L.match(/^\d+$/)||F.push(B(s,i,p,f,L,!0))}),F}function B(s,i,p,f,C,F){var z,Q,L;if(L=Object.getOwnPropertyDescriptor(i,C)||{value:i[C]},L.get?L.set?Q=s.stylize("[Getter/Setter]","special"):Q=s.stylize("[Getter]","special"):L.set&&(Q=s.stylize("[Setter]","special")),H(f,C)||(z="["+C+"]"),Q||(s.seen.indexOf(L.value)<0?(x(p)?Q=S(s,L.value,null):Q=S(s,L.value,p-1),Q.indexOf(`
`)>-1&&(F?Q=Q.split(`
`).map(function(N){return"  "+N}).join(`
`).slice(2):Q=`
`+Q.split(`
`).map(function(N){return"   "+N}).join(`
`))):Q=s.stylize("[Circular]","special")),T(z)){if(F&&C.match(/^\d+$/))return Q;z=JSON.stringify(""+C),z.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(z=z.slice(1,-1),z=s.stylize(z,"name")):(z=z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),z=s.stylize(z,"string"))}return z+": "+Q}function P(s,i,p){var f=s.reduce(function(C,F){return F.indexOf(`
`)>=0,C+F.replace(/\u001b\[\d\d?m/g,"").length+1},0);return f>60?p[0]+(i===""?"":i+`
 `)+" "+s.join(`,
  `)+" "+p[1]:p[0]+i+" "+s.join(", ")+" "+p[1]}t.types=requireTypes();function o(s){return Array.isArray(s)}t.isArray=o;function h(s){return typeof s=="boolean"}t.isBoolean=h;function x(s){return s===null}t.isNull=x;function b(s){return s==null}t.isNullOrUndefined=b;function l(s){return typeof s=="number"}t.isNumber=l;function y(s){return typeof s=="string"}t.isString=y;function u(s){return typeof s=="symbol"}t.isSymbol=u;function T(s){return s===void 0}t.isUndefined=T;function R(s){return X(s)&&ae(s)==="[object RegExp]"}t.isRegExp=R,t.types.isRegExp=R;function X(s){return typeof s=="object"&&s!==null}t.isObject=X;function D(s){return X(s)&&ae(s)==="[object Date]"}t.isDate=D,t.types.isDate=D;function E(s){return X(s)&&(ae(s)==="[object Error]"||s instanceof Error)}t.isError=E,t.types.isNativeError=E;function q(s){return typeof s=="function"}t.isFunction=q;function oe(s){return s===null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||typeof s=="symbol"||typeof s>"u"}t.isPrimitive=oe,t.isBuffer=requireIsBufferBrowser();function ae(s){return Object.prototype.toString.call(s)}function ue(s){return s<10?"0"+s.toString(10):s.toString(10)}var re=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function pe(){var s=new Date,i=[ue(s.getHours()),ue(s.getMinutes()),ue(s.getSeconds())].join(":");return[s.getDate(),re[s.getMonth()],i].join(" ")}t.log=function(){console.log("%s - %s",pe(),t.format.apply(t,arguments))},t.inherits=requireInherits_browser(),t._extend=function(s,i){if(!i||!X(i))return s;for(var p=Object.keys(i),f=p.length;f--;)s[p[f]]=i[p[f]];return s};function H(s,i){return Object.prototype.hasOwnProperty.call(s,i)}var W=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(i){if(typeof i!="function")throw new TypeError('The "original" argument must be of type Function');if(W&&i[W]){var p=i[W];if(typeof p!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(p,W,{value:p,enumerable:!1,writable:!1,configurable:!0}),p}function p(){for(var f,C,F=new Promise(function(L,N){f=L,C=N}),z=[],Q=0;Q<arguments.length;Q++)z.push(arguments[Q]);z.push(function(L,N){L?C(L):f(N)});try{i.apply(this,z)}catch(L){C(L)}return F}return Object.setPrototypeOf(p,Object.getPrototypeOf(i)),W&&Object.defineProperty(p,W,{value:p,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(p,n(i))},t.promisify.custom=W;function ne(s,i){if(!s){var p=new Error("Promise was rejected with a falsy value");p.reason=s,s=p}return i(s)}function j(s){if(typeof s!="function")throw new TypeError('The "original" argument must be of type Function');function i(){for(var p=[],f=0;f<arguments.length;f++)p.push(arguments[f]);var C=p.pop();if(typeof C!="function")throw new TypeError("The last argument must be of type Function");var F=this,z=function(){return C.apply(F,arguments)};s.apply(this,p).then(function(Q){process$1.nextTick(z.bind(null,null,Q))},function(Q){process$1.nextTick(ne.bind(null,Q,z))})}return Object.setPrototypeOf(i,Object.getPrototypeOf(s)),Object.defineProperties(i,n(s)),i}t.callbackify=j}(util)),util}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function t(M,B){var P=Object.keys(M);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(M);B&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(M,h).enumerable})),P.push.apply(P,o)}return P}function e(M){for(var B=1;B<arguments.length;B++){var P=arguments[B]!=null?arguments[B]:{};B%2?t(Object(P),!0).forEach(function(o){n(M,o,P[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(P)):t(Object(P)).forEach(function(o){Object.defineProperty(M,o,Object.getOwnPropertyDescriptor(P,o))})}return M}function n(M,B,P){return B=_(B),B in M?Object.defineProperty(M,B,{value:P,enumerable:!0,configurable:!0,writable:!0}):M[B]=P,M}function r(M,B){if(!(M instanceof B))throw new TypeError("Cannot call a class as a function")}function c(M,B){for(var P=0;P<B.length;P++){var o=B[P];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(M,_(o.key),o)}}function m(M,B,P){return B&&c(M.prototype,B),Object.defineProperty(M,"prototype",{writable:!1}),M}function _(M){var B=k(M,"string");return typeof B=="symbol"?B:String(B)}function k(M,B){if(typeof M!="object"||M===null)return M;var P=M[Symbol.toPrimitive];if(P!==void 0){var o=P.call(M,B);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(M)}var g=require$$0,v=g.Buffer,a=requireUtil(),S=a.inspect,w=S&&S.custom||"inspect";function I(M,B,P){v.prototype.copy.call(M,B,P)}return buffer_list=function(){function M(){r(this,M),this.head=null,this.tail=null,this.length=0}return m(M,[{key:"push",value:function(P){var o={data:P,next:null};this.length>0?this.tail.next=o:this.head=o,this.tail=o,++this.length}},{key:"unshift",value:function(P){var o={data:P,next:this.head};this.length===0&&(this.tail=o),this.head=o,++this.length}},{key:"shift",value:function(){if(this.length!==0){var P=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,P}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(P){if(this.length===0)return"";for(var o=this.head,h=""+o.data;o=o.next;)h+=P+o.data;return h}},{key:"concat",value:function(P){if(this.length===0)return v.alloc(0);for(var o=v.allocUnsafe(P>>>0),h=this.head,x=0;h;)I(h.data,o,x),x+=h.data.length,h=h.next;return o}},{key:"consume",value:function(P,o){var h;return P<this.head.data.length?(h=this.head.data.slice(0,P),this.head.data=this.head.data.slice(P)):P===this.head.data.length?h=this.shift():h=o?this._getString(P):this._getBuffer(P),h}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(P){var o=this.head,h=1,x=o.data;for(P-=x.length;o=o.next;){var b=o.data,l=P>b.length?b.length:P;if(l===b.length?x+=b:x+=b.slice(0,P),P-=l,P===0){l===b.length?(++h,o.next?this.head=o.next:this.head=this.tail=null):(this.head=o,o.data=b.slice(l));break}++h}return this.length-=h,x}},{key:"_getBuffer",value:function(P){var o=v.allocUnsafe(P),h=this.head,x=1;for(h.data.copy(o),P-=h.data.length;h=h.next;){var b=h.data,l=P>b.length?b.length:P;if(b.copy(o,o.length-P,0,l),P-=l,P===0){l===b.length?(++x,h.next?this.head=h.next:this.head=this.tail=null):(this.head=h,h.data=b.slice(l));break}++x}return this.length-=x,o}},{key:w,value:function(P,o){return S(this,e(e({},o),{},{depth:0,customInspect:!1}))}}]),M}(),buffer_list}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;function t(_,k){var g=this,v=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return v||a?(k?k(_):_&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(c,this,_)):process$1.nextTick(c,this,_)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(_||null,function(S){!k&&S?g._writableState?g._writableState.errorEmitted?process$1.nextTick(n,g):(g._writableState.errorEmitted=!0,process$1.nextTick(e,g,S)):process$1.nextTick(e,g,S):k?(process$1.nextTick(n,g),k(S)):process$1.nextTick(n,g)}),this)}function e(_,k){c(_,k),n(_)}function n(_){_._writableState&&!_._writableState.emitClose||_._readableState&&!_._readableState.emitClose||_.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function c(_,k){_.emit("error",k)}function m(_,k){var g=_._readableState,v=_._writableState;g&&g.autoDestroy||v&&v.autoDestroy?_.destroy(k):_.emit("error",k)}return destroy_1={destroy:t,undestroy:r,errorOrDestroy:m},destroy_1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function t(k,g){k.prototype=Object.create(g.prototype),k.prototype.constructor=k,k.__proto__=g}var e={};function n(k,g,v){v||(v=Error);function a(w,I,M){return typeof g=="string"?g:g(w,I,M)}var S=function(w){t(I,w);function I(M,B,P){return w.call(this,a(M,B,P))||this}return I}(v);S.prototype.name=v.name,S.prototype.code=k,e[k]=S}function r(k,g){if(Array.isArray(k)){var v=k.length;return k=k.map(function(a){return String(a)}),v>2?"one of ".concat(g," ").concat(k.slice(0,v-1).join(", "),", or ")+k[v-1]:v===2?"one of ".concat(g," ").concat(k[0]," or ").concat(k[1]):"of ".concat(g," ").concat(k[0])}else return"of ".concat(g," ").concat(String(k))}function c(k,g,v){return k.substr(0,g.length)===g}function m(k,g,v){return(v===void 0||v>k.length)&&(v=k.length),k.substring(v-g.length,v)===g}function _(k,g,v){return typeof v!="number"&&(v=0),v+g.length>k.length?!1:k.indexOf(g,v)!==-1}return n("ERR_INVALID_OPT_VALUE",function(k,g){return'The value "'+g+'" is invalid for option "'+k+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(k,g,v){var a;typeof g=="string"&&c(g,"not ")?(a="must not be",g=g.replace(/^not /,"")):a="must be";var S;if(m(k," argument"))S="The ".concat(k," ").concat(a," ").concat(r(g,"type"));else{var w=_(k,".")?"property":"argument";S='The "'.concat(k,'" ').concat(w," ").concat(a," ").concat(r(g,"type"))}return S+=". Received type ".concat(typeof v),S},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var t=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function e(r,c,m){return r.highWaterMark!=null?r.highWaterMark:c?r[m]:null}function n(r,c,m,_){var k=e(c,_,m);if(k!=null){if(!(isFinite(k)&&Math.floor(k)===k)||k<0){var g=_?m:"highWaterMark";throw new t(g,k)}return Math.floor(k)}return r.objectMode?16:16*1024}return state={getHighWaterMark:n},state}var browser$1,hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$1;hasRequiredBrowser$1=1,browser$1=t;function t(n,r){if(e("noDeprecation"))return n;var c=!1;function m(){if(!c){if(e("throwDeprecation"))throw new Error(r);e("traceDeprecation")?console.trace(r):console.warn(r),c=!0}return n.apply(this,arguments)}return m}function e(n){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var r=commonjsGlobal.localStorage[n];return r==null?!1:String(r).toLowerCase()==="true"}return browser$1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=T;function t(f){var C=this;this.next=null,this.entry=null,this.finish=function(){p(C,f)}}var e;T.WritableState=y;var n={deprecate:requireBrowser$1()},r=requireStreamBrowser(),c=require$$0.Buffer,m=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function _(f){return c.from(f)}function k(f){return c.isBuffer(f)||f instanceof m}var g=requireDestroy(),v=requireState(),a=v.getHighWaterMark,S=requireErrorsBrowser().codes,w=S.ERR_INVALID_ARG_TYPE,I=S.ERR_METHOD_NOT_IMPLEMENTED,M=S.ERR_MULTIPLE_CALLBACK,B=S.ERR_STREAM_CANNOT_PIPE,P=S.ERR_STREAM_DESTROYED,o=S.ERR_STREAM_NULL_VALUES,h=S.ERR_STREAM_WRITE_AFTER_END,x=S.ERR_UNKNOWN_ENCODING,b=g.errorOrDestroy;requireInherits_browser()(T,r);function l(){}function y(f,C,F){e=e||require_stream_duplex(),f=f||{},typeof F!="boolean"&&(F=C instanceof e),this.objectMode=!!f.objectMode,F&&(this.objectMode=this.objectMode||!!f.writableObjectMode),this.highWaterMark=a(this,f,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var z=f.decodeStrings===!1;this.decodeStrings=!z,this.defaultEncoding=f.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Q){ue(C,Q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=f.emitClose!==!1,this.autoDestroy=!!f.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}y.prototype.getBuffer=function(){for(var C=this.bufferedRequest,F=[];C;)F.push(C),C=C.next;return F},function(){try{Object.defineProperty(y.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var u;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(C){return u.call(this,C)?!0:this!==T?!1:C&&C._writableState instanceof y}})):u=function(C){return C instanceof this};function T(f){e=e||require_stream_duplex();var C=this instanceof e;if(!C&&!u.call(T,this))return new T(f);this._writableState=new y(f,this,C),this.writable=!0,f&&(typeof f.write=="function"&&(this._write=f.write),typeof f.writev=="function"&&(this._writev=f.writev),typeof f.destroy=="function"&&(this._destroy=f.destroy),typeof f.final=="function"&&(this._final=f.final)),r.call(this)}T.prototype.pipe=function(){b(this,new B)};function R(f,C){var F=new h;b(f,F),process$1.nextTick(C,F)}function X(f,C,F,z){var Q;return F===null?Q=new o:typeof F!="string"&&!C.objectMode&&(Q=new w("chunk",["string","Buffer"],F)),Q?(b(f,Q),process$1.nextTick(z,Q),!1):!0}T.prototype.write=function(f,C,F){var z=this._writableState,Q=!1,L=!z.objectMode&&k(f);return L&&!c.isBuffer(f)&&(f=_(f)),typeof C=="function"&&(F=C,C=null),L?C="buffer":C||(C=z.defaultEncoding),typeof F!="function"&&(F=l),z.ending?R(this,F):(L||X(this,z,f,F))&&(z.pendingcb++,Q=E(this,z,L,f,C,F)),Q},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var f=this._writableState;f.corked&&(f.corked--,!f.writing&&!f.corked&&!f.bufferProcessing&&f.bufferedRequest&&H(this,f))},T.prototype.setDefaultEncoding=function(C){if(typeof C=="string"&&(C=C.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((C+"").toLowerCase())>-1))throw new x(C);return this._writableState.defaultEncoding=C,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function D(f,C,F){return!f.objectMode&&f.decodeStrings!==!1&&typeof C=="string"&&(C=c.from(C,F)),C}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function E(f,C,F,z,Q,L){if(!F){var N=D(C,z,Q);z!==N&&(F=!0,Q="buffer",z=N)}var se=C.objectMode?1:z.length;C.length+=se;var ge=C.length<C.highWaterMark;if(ge||(C.needDrain=!0),C.writing||C.corked){var Ae=C.lastBufferedRequest;C.lastBufferedRequest={chunk:z,encoding:Q,isBuf:F,callback:L,next:null},Ae?Ae.next=C.lastBufferedRequest:C.bufferedRequest=C.lastBufferedRequest,C.bufferedRequestCount+=1}else q(f,C,!1,se,z,Q,L);return ge}function q(f,C,F,z,Q,L,N){C.writelen=z,C.writecb=N,C.writing=!0,C.sync=!0,C.destroyed?C.onwrite(new P("write")):F?f._writev(Q,C.onwrite):f._write(Q,L,C.onwrite),C.sync=!1}function oe(f,C,F,z,Q){--C.pendingcb,F?(process$1.nextTick(Q,z),process$1.nextTick(s,f,C),f._writableState.errorEmitted=!0,b(f,z)):(Q(z),f._writableState.errorEmitted=!0,b(f,z),s(f,C))}function ae(f){f.writing=!1,f.writecb=null,f.length-=f.writelen,f.writelen=0}function ue(f,C){var F=f._writableState,z=F.sync,Q=F.writecb;if(typeof Q!="function")throw new M;if(ae(F),C)oe(f,F,z,C,Q);else{var L=W(F)||f.destroyed;!L&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&H(f,F),z?process$1.nextTick(re,f,F,L,Q):re(f,F,L,Q)}}function re(f,C,F,z){F||pe(f,C),C.pendingcb--,z(),s(f,C)}function pe(f,C){C.length===0&&C.needDrain&&(C.needDrain=!1,f.emit("drain"))}function H(f,C){C.bufferProcessing=!0;var F=C.bufferedRequest;if(f._writev&&F&&F.next){var z=C.bufferedRequestCount,Q=new Array(z),L=C.corkedRequestsFree;L.entry=F;for(var N=0,se=!0;F;)Q[N]=F,F.isBuf||(se=!1),F=F.next,N+=1;Q.allBuffers=se,q(f,C,!0,C.length,Q,"",L.finish),C.pendingcb++,C.lastBufferedRequest=null,L.next?(C.corkedRequestsFree=L.next,L.next=null):C.corkedRequestsFree=new t(C),C.bufferedRequestCount=0}else{for(;F;){var ge=F.chunk,Ae=F.encoding,he=F.callback,de=C.objectMode?1:ge.length;if(q(f,C,!1,de,ge,Ae,he),F=F.next,C.bufferedRequestCount--,C.writing)break}F===null&&(C.lastBufferedRequest=null)}C.bufferedRequest=F,C.bufferProcessing=!1}T.prototype._write=function(f,C,F){F(new I("_write()"))},T.prototype._writev=null,T.prototype.end=function(f,C,F){var z=this._writableState;return typeof f=="function"?(F=f,f=null,C=null):typeof C=="function"&&(F=C,C=null),f!=null&&this.write(f,C),z.corked&&(z.corked=1,this.uncork()),z.ending||i(this,z,F),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function W(f){return f.ending&&f.length===0&&f.bufferedRequest===null&&!f.finished&&!f.writing}function ne(f,C){f._final(function(F){C.pendingcb--,F&&b(f,F),C.prefinished=!0,f.emit("prefinish"),s(f,C)})}function j(f,C){!C.prefinished&&!C.finalCalled&&(typeof f._final=="function"&&!C.destroyed?(C.pendingcb++,C.finalCalled=!0,process$1.nextTick(ne,f,C)):(C.prefinished=!0,f.emit("prefinish")))}function s(f,C){var F=W(C);if(F&&(j(f,C),C.pendingcb===0&&(C.finished=!0,f.emit("finish"),C.autoDestroy))){var z=f._readableState;(!z||z.autoDestroy&&z.endEmitted)&&f.destroy()}return F}function i(f,C,F){C.ending=!0,s(f,C),F&&(C.finished?process$1.nextTick(F):f.once("finish",F)),C.ended=!0,f.writable=!1}function p(f,C,F){var z=f.entry;for(f.entry=null;z;){var Q=z.callback;C.pendingcb--,Q(F),z=z.next}C.corkedRequestsFree.next=f}return Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(C){this._writableState&&(this._writableState.destroyed=C)}}),T.prototype.destroy=g.destroy,T.prototype._undestroy=g.undestroy,T.prototype._destroy=function(f,C){C(f)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var t=Object.keys||function(v){var a=[];for(var S in v)a.push(S);return a};_stream_duplex=_;var e=require_stream_readable(),n=require_stream_writable();requireInherits_browser()(_,e);for(var r=t(n.prototype),c=0;c<r.length;c++){var m=r[c];_.prototype[m]||(_.prototype[m]=n.prototype[m])}function _(v){if(!(this instanceof _))return new _(v);e.call(this,v),n.call(this,v),this.allowHalfOpen=!0,v&&(v.readable===!1&&(this.readable=!1),v.writable===!1&&(this.writable=!1),v.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",k)))}Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function k(){this._writableState.ended||process$1.nextTick(g,this)}function g(v){v.end()}return Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),_stream_duplex}var string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(t,e){var n=require$$0,r=n.Buffer;function c(_,k){for(var g in _)k[g]=_[g]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(c(n,e),e.Buffer=m);function m(_,k,g){return r(_,k,g)}m.prototype=Object.create(r.prototype),c(r,m),m.from=function(_,k,g){if(typeof _=="number")throw new TypeError("Argument must not be a number");return r(_,k,g)},m.alloc=function(_,k,g){if(typeof _!="number")throw new TypeError("Argument must be a number");var v=r(_);return k!==void 0?typeof g=="string"?v.fill(k,g):v.fill(k):v.fill(0),v},m.allocUnsafe=function(_){if(typeof _!="number")throw new TypeError("Argument must be a number");return r(_)},m.allocUnsafeSlow=function(_){if(typeof _!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(_)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var t=requireSafeBuffer().Buffer,e=t.isEncoding||function(o){switch(o=""+o,o&&o.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(o){if(!o)return"utf8";for(var h;;)switch(o){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return o;default:if(h)return;o=(""+o).toLowerCase(),h=!0}}function r(o){var h=n(o);if(typeof h!="string"&&(t.isEncoding===e||!e(o)))throw new Error("Unknown encoding: "+o);return h||o}string_decoder.StringDecoder=c;function c(o){this.encoding=r(o);var h;switch(this.encoding){case"utf16le":this.text=S,this.end=w,h=4;break;case"utf8":this.fillLast=g,h=4;break;case"base64":this.text=I,this.end=M,h=3;break;default:this.write=B,this.end=P;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(h)}c.prototype.write=function(o){if(o.length===0)return"";var h,x;if(this.lastNeed){if(h=this.fillLast(o),h===void 0)return"";x=this.lastNeed,this.lastNeed=0}else x=0;return x<o.length?h?h+this.text(o,x):this.text(o,x):h||""},c.prototype.end=a,c.prototype.text=v,c.prototype.fillLast=function(o){if(this.lastNeed<=o.length)return o.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);o.copy(this.lastChar,this.lastTotal-this.lastNeed,0,o.length),this.lastNeed-=o.length};function m(o){return o<=127?0:o>>5===6?2:o>>4===14?3:o>>3===30?4:o>>6===2?-1:-2}function _(o,h,x){var b=h.length-1;if(b<x)return 0;var l=m(h[b]);return l>=0?(l>0&&(o.lastNeed=l-1),l):--b<x||l===-2?0:(l=m(h[b]),l>=0?(l>0&&(o.lastNeed=l-2),l):--b<x||l===-2?0:(l=m(h[b]),l>=0?(l>0&&(l===2?l=0:o.lastNeed=l-3),l):0))}function k(o,h,x){if((h[0]&192)!==128)return o.lastNeed=0,"";if(o.lastNeed>1&&h.length>1){if((h[1]&192)!==128)return o.lastNeed=1,"";if(o.lastNeed>2&&h.length>2&&(h[2]&192)!==128)return o.lastNeed=2,""}}function g(o){var h=this.lastTotal-this.lastNeed,x=k(this,o);if(x!==void 0)return x;if(this.lastNeed<=o.length)return o.copy(this.lastChar,h,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);o.copy(this.lastChar,h,0,o.length),this.lastNeed-=o.length}function v(o,h){var x=_(this,o,h);if(!this.lastNeed)return o.toString("utf8",h);this.lastTotal=x;var b=o.length-(x-this.lastNeed);return o.copy(this.lastChar,0,b),o.toString("utf8",h,b)}function a(o){var h=o&&o.length?this.write(o):"";return this.lastNeed?h+"":h}function S(o,h){if((o.length-h)%2===0){var x=o.toString("utf16le",h);if(x){var b=x.charCodeAt(x.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=o[o.length-2],this.lastChar[1]=o[o.length-1],x.slice(0,-1)}return x}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=o[o.length-1],o.toString("utf16le",h,o.length-1)}function w(o){var h=o&&o.length?this.write(o):"";if(this.lastNeed){var x=this.lastTotal-this.lastNeed;return h+this.lastChar.toString("utf16le",0,x)}return h}function I(o,h){var x=(o.length-h)%3;return x===0?o.toString("base64",h):(this.lastNeed=3-x,this.lastTotal=3,x===1?this.lastChar[0]=o[o.length-1]:(this.lastChar[0]=o[o.length-2],this.lastChar[1]=o[o.length-1]),o.toString("base64",h,o.length-x))}function M(o){var h=o&&o.length?this.write(o):"";return this.lastNeed?h+this.lastChar.toString("base64",0,3-this.lastNeed):h}function B(o){return o.toString(this.encoding)}function P(o){return o&&o.length?this.write(o):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var t=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function e(m){var _=!1;return function(){if(!_){_=!0;for(var k=arguments.length,g=new Array(k),v=0;v<k;v++)g[v]=arguments[v];m.apply(this,g)}}}function n(){}function r(m){return m.setHeader&&typeof m.abort=="function"}function c(m,_,k){if(typeof _=="function")return c(m,null,_);_||(_={}),k=e(k||n);var g=_.readable||_.readable!==!1&&m.readable,v=_.writable||_.writable!==!1&&m.writable,a=function(){m.writable||w()},S=m._writableState&&m._writableState.finished,w=function(){v=!1,S=!0,g||k.call(m)},I=m._readableState&&m._readableState.endEmitted,M=function(){g=!1,I=!0,v||k.call(m)},B=function(x){k.call(m,x)},P=function(){var x;if(g&&!I)return(!m._readableState||!m._readableState.ended)&&(x=new t),k.call(m,x);if(v&&!S)return(!m._writableState||!m._writableState.ended)&&(x=new t),k.call(m,x)},o=function(){m.req.on("finish",w)};return r(m)?(m.on("complete",w),m.on("abort",P),m.req?o():m.on("request",o)):v&&!m._writableState&&(m.on("end",a),m.on("close",a)),m.on("end",M),m.on("finish",w),_.error!==!1&&m.on("error",B),m.on("close",P),function(){m.removeListener("complete",w),m.removeListener("abort",P),m.removeListener("request",o),m.req&&m.req.removeListener("finish",w),m.removeListener("end",a),m.removeListener("close",a),m.removeListener("finish",w),m.removeListener("end",M),m.removeListener("error",B),m.removeListener("close",P)}}return endOfStream=c,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var t;function e(x,b,l){return b=n(b),b in x?Object.defineProperty(x,b,{value:l,enumerable:!0,configurable:!0,writable:!0}):x[b]=l,x}function n(x){var b=r(x,"string");return typeof b=="symbol"?b:String(b)}function r(x,b){if(typeof x!="object"||x===null)return x;var l=x[Symbol.toPrimitive];if(l!==void 0){var y=l.call(x,b);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(x)}var c=requireEndOfStream(),m=Symbol("lastResolve"),_=Symbol("lastReject"),k=Symbol("error"),g=Symbol("ended"),v=Symbol("lastPromise"),a=Symbol("handlePromise"),S=Symbol("stream");function w(x,b){return{value:x,done:b}}function I(x){var b=x[m];if(b!==null){var l=x[S].read();l!==null&&(x[v]=null,x[m]=null,x[_]=null,b(w(l,!1)))}}function M(x){process$1.nextTick(I,x)}function B(x,b){return function(l,y){x.then(function(){if(b[g]){l(w(void 0,!0));return}b[a](l,y)},y)}}var P=Object.getPrototypeOf(function(){}),o=Object.setPrototypeOf((t={get stream(){return this[S]},next:function(){var b=this,l=this[k];if(l!==null)return Promise.reject(l);if(this[g])return Promise.resolve(w(void 0,!0));if(this[S].destroyed)return new Promise(function(R,X){process$1.nextTick(function(){b[k]?X(b[k]):R(w(void 0,!0))})});var y=this[v],u;if(y)u=new Promise(B(y,this));else{var T=this[S].read();if(T!==null)return Promise.resolve(w(T,!1));u=new Promise(this[a])}return this[v]=u,u}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var b=this;return new Promise(function(l,y){b[S].destroy(null,function(u){if(u){y(u);return}l(w(void 0,!0))})})}),t),P),h=function(b){var l,y=Object.create(o,(l={},e(l,S,{value:b,writable:!0}),e(l,m,{value:null,writable:!0}),e(l,_,{value:null,writable:!0}),e(l,k,{value:null,writable:!0}),e(l,g,{value:b._readableState.endEmitted,writable:!0}),e(l,a,{value:function(T,R){var X=y[S].read();X?(y[v]=null,y[m]=null,y[_]=null,T(w(X,!1))):(y[m]=T,y[_]=R)},writable:!0}),l));return y[v]=null,c(b,function(u){if(u&&u.code!=="ERR_STREAM_PREMATURE_CLOSE"){var T=y[_];T!==null&&(y[v]=null,y[m]=null,y[_]=null,T(u)),y[k]=u;return}var R=y[m];R!==null&&(y[v]=null,y[m]=null,y[_]=null,R(w(void 0,!0))),y[g]=!0}),b.on("readable",M.bind(null,y)),y};return async_iterator=h,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=R;var t;R.ReadableState=T,requireEvents().EventEmitter;var e=function(N,se){return N.listeners(se).length},n=requireStreamBrowser(),r=require$$0.Buffer,c=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function m(L){return r.from(L)}function _(L){return r.isBuffer(L)||L instanceof c}var k=requireUtil(),g;k&&k.debuglog?g=k.debuglog("stream"):g=function(){};var v=requireBuffer_list(),a=requireDestroy(),S=requireState(),w=S.getHighWaterMark,I=requireErrorsBrowser().codes,M=I.ERR_INVALID_ARG_TYPE,B=I.ERR_STREAM_PUSH_AFTER_EOF,P=I.ERR_METHOD_NOT_IMPLEMENTED,o=I.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,h,x,b;requireInherits_browser()(R,n);var l=a.errorOrDestroy,y=["error","close","destroy","pause","resume"];function u(L,N,se){if(typeof L.prependListener=="function")return L.prependListener(N,se);!L._events||!L._events[N]?L.on(N,se):Array.isArray(L._events[N])?L._events[N].unshift(se):L._events[N]=[se,L._events[N]]}function T(L,N,se){t=t||require_stream_duplex(),L=L||{},typeof se!="boolean"&&(se=N instanceof t),this.objectMode=!!L.objectMode,se&&(this.objectMode=this.objectMode||!!L.readableObjectMode),this.highWaterMark=w(this,L,"readableHighWaterMark",se),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=L.emitClose!==!1,this.autoDestroy=!!L.autoDestroy,this.destroyed=!1,this.defaultEncoding=L.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,L.encoding&&(h||(h=requireString_decoder().StringDecoder),this.decoder=new h(L.encoding),this.encoding=L.encoding)}function R(L){if(t=t||require_stream_duplex(),!(this instanceof R))return new R(L);var N=this instanceof t;this._readableState=new T(L,this,N),this.readable=!0,L&&(typeof L.read=="function"&&(this._read=L.read),typeof L.destroy=="function"&&(this._destroy=L.destroy)),n.call(this)}Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(N){this._readableState&&(this._readableState.destroyed=N)}}),R.prototype.destroy=a.destroy,R.prototype._undestroy=a.undestroy,R.prototype._destroy=function(L,N){N(L)},R.prototype.push=function(L,N){var se=this._readableState,ge;return se.objectMode?ge=!0:typeof L=="string"&&(N=N||se.defaultEncoding,N!==se.encoding&&(L=r.from(L,N),N=""),ge=!0),X(this,L,N,!1,ge)},R.prototype.unshift=function(L){return X(this,L,null,!0,!1)};function X(L,N,se,ge,Ae){g("readableAddChunk",N);var he=L._readableState;if(N===null)he.reading=!1,ue(L,he);else{var de;if(Ae||(de=E(he,N)),de)l(L,de);else if(he.objectMode||N&&N.length>0)if(typeof N!="string"&&!he.objectMode&&Object.getPrototypeOf(N)!==r.prototype&&(N=m(N)),ge)he.endEmitted?l(L,new o):D(L,he,N,!0);else if(he.ended)l(L,new B);else{if(he.destroyed)return!1;he.reading=!1,he.decoder&&!se?(N=he.decoder.write(N),he.objectMode||N.length!==0?D(L,he,N,!1):H(L,he)):D(L,he,N,!1)}else ge||(he.reading=!1,H(L,he))}return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function D(L,N,se,ge){N.flowing&&N.length===0&&!N.sync?(N.awaitDrain=0,L.emit("data",se)):(N.length+=N.objectMode?1:se.length,ge?N.buffer.unshift(se):N.buffer.push(se),N.needReadable&&re(L)),H(L,N)}function E(L,N){var se;return!_(N)&&typeof N!="string"&&N!==void 0&&!L.objectMode&&(se=new M("chunk",["string","Buffer","Uint8Array"],N)),se}R.prototype.isPaused=function(){return this._readableState.flowing===!1},R.prototype.setEncoding=function(L){h||(h=requireString_decoder().StringDecoder);var N=new h(L);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;for(var se=this._readableState.buffer.head,ge="";se!==null;)ge+=N.write(se.data),se=se.next;return this._readableState.buffer.clear(),ge!==""&&this._readableState.buffer.push(ge),this._readableState.length=ge.length,this};var q=1073741824;function oe(L){return L>=q?L=q:(L--,L|=L>>>1,L|=L>>>2,L|=L>>>4,L|=L>>>8,L|=L>>>16,L++),L}function ae(L,N){return L<=0||N.length===0&&N.ended?0:N.objectMode?1:L!==L?N.flowing&&N.length?N.buffer.head.data.length:N.length:(L>N.highWaterMark&&(N.highWaterMark=oe(L)),L<=N.length?L:N.ended?N.length:(N.needReadable=!0,0))}R.prototype.read=function(L){g("read",L),L=parseInt(L,10);var N=this._readableState,se=L;if(L!==0&&(N.emittedReadable=!1),L===0&&N.needReadable&&((N.highWaterMark!==0?N.length>=N.highWaterMark:N.length>0)||N.ended))return g("read: emitReadable",N.length,N.ended),N.length===0&&N.ended?F(this):re(this),null;if(L=ae(L,N),L===0&&N.ended)return N.length===0&&F(this),null;var ge=N.needReadable;g("need readable",ge),(N.length===0||N.length-L<N.highWaterMark)&&(ge=!0,g("length less than watermark",ge)),N.ended||N.reading?(ge=!1,g("reading or ended",ge)):ge&&(g("do read"),N.reading=!0,N.sync=!0,N.length===0&&(N.needReadable=!0),this._read(N.highWaterMark),N.sync=!1,N.reading||(L=ae(se,N)));var Ae;return L>0?Ae=C(L,N):Ae=null,Ae===null?(N.needReadable=N.length<=N.highWaterMark,L=0):(N.length-=L,N.awaitDrain=0),N.length===0&&(N.ended||(N.needReadable=!0),se!==L&&N.ended&&F(this)),Ae!==null&&this.emit("data",Ae),Ae};function ue(L,N){if(g("onEofChunk"),!N.ended){if(N.decoder){var se=N.decoder.end();se&&se.length&&(N.buffer.push(se),N.length+=N.objectMode?1:se.length)}N.ended=!0,N.sync?re(L):(N.needReadable=!1,N.emittedReadable||(N.emittedReadable=!0,pe(L)))}}function re(L){var N=L._readableState;g("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(g("emitReadable",N.flowing),N.emittedReadable=!0,process$1.nextTick(pe,L))}function pe(L){var N=L._readableState;g("emitReadable_",N.destroyed,N.length,N.ended),!N.destroyed&&(N.length||N.ended)&&(L.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,f(L)}function H(L,N){N.readingMore||(N.readingMore=!0,process$1.nextTick(W,L,N))}function W(L,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&N.length===0);){var se=N.length;if(g("maybeReadMore read 0"),L.read(0),se===N.length)break}N.readingMore=!1}R.prototype._read=function(L){l(this,new P("_read()"))},R.prototype.pipe=function(L,N){var se=this,ge=this._readableState;switch(ge.pipesCount){case 0:ge.pipes=L;break;case 1:ge.pipes=[ge.pipes,L];break;default:ge.pipes.push(L);break}ge.pipesCount+=1,g("pipe count=%d opts=%j",ge.pipesCount,N);var Ae=(!N||N.end!==!1)&&L!==process$1.stdout&&L!==process$1.stderr,he=Ae?K:Se;ge.endEmitted?process$1.nextTick(he):se.once("end",he),L.on("unpipe",de);function de(Te,De){g("onunpipe"),Te===se&&De&&De.hasUnpiped===!1&&(De.hasUnpiped=!0,_e())}function K(){g("onend"),L.end()}var V=ne(se);L.on("drain",V);var me=!1;function _e(){g("cleanup"),L.removeListener("close",te),L.removeListener("finish",J),L.removeListener("drain",V),L.removeListener("error",ke),L.removeListener("unpipe",de),se.removeListener("end",K),se.removeListener("end",Se),se.removeListener("data",Ce),me=!0,ge.awaitDrain&&(!L._writableState||L._writableState.needDrain)&&V()}se.on("data",Ce);function Ce(Te){g("ondata");var De=L.write(Te);g("dest.write",De),De===!1&&((ge.pipesCount===1&&ge.pipes===L||ge.pipesCount>1&&Q(ge.pipes,L)!==-1)&&!me&&(g("false write response, pause",ge.awaitDrain),ge.awaitDrain++),se.pause())}function ke(Te){g("onerror",Te),Se(),L.removeListener("error",ke),e(L,"error")===0&&l(L,Te)}u(L,"error",ke);function te(){L.removeListener("finish",J),Se()}L.once("close",te);function J(){g("onfinish"),L.removeListener("close",te),Se()}L.once("finish",J);function Se(){g("unpipe"),se.unpipe(L)}return L.emit("pipe",se),ge.flowing||(g("pipe resume"),se.resume()),L};function ne(L){return function(){var se=L._readableState;g("pipeOnDrain",se.awaitDrain),se.awaitDrain&&se.awaitDrain--,se.awaitDrain===0&&e(L,"data")&&(se.flowing=!0,f(L))}}R.prototype.unpipe=function(L){var N=this._readableState,se={hasUnpiped:!1};if(N.pipesCount===0)return this;if(N.pipesCount===1)return L&&L!==N.pipes?this:(L||(L=N.pipes),N.pipes=null,N.pipesCount=0,N.flowing=!1,L&&L.emit("unpipe",this,se),this);if(!L){var ge=N.pipes,Ae=N.pipesCount;N.pipes=null,N.pipesCount=0,N.flowing=!1;for(var he=0;he<Ae;he++)ge[he].emit("unpipe",this,{hasUnpiped:!1});return this}var de=Q(N.pipes,L);return de===-1?this:(N.pipes.splice(de,1),N.pipesCount-=1,N.pipesCount===1&&(N.pipes=N.pipes[0]),L.emit("unpipe",this,se),this)},R.prototype.on=function(L,N){var se=n.prototype.on.call(this,L,N),ge=this._readableState;return L==="data"?(ge.readableListening=this.listenerCount("readable")>0,ge.flowing!==!1&&this.resume()):L==="readable"&&!ge.endEmitted&&!ge.readableListening&&(ge.readableListening=ge.needReadable=!0,ge.flowing=!1,ge.emittedReadable=!1,g("on readable",ge.length,ge.reading),ge.length?re(this):ge.reading||process$1.nextTick(s,this)),se},R.prototype.addListener=R.prototype.on,R.prototype.removeListener=function(L,N){var se=n.prototype.removeListener.call(this,L,N);return L==="readable"&&process$1.nextTick(j,this),se},R.prototype.removeAllListeners=function(L){var N=n.prototype.removeAllListeners.apply(this,arguments);return(L==="readable"||L===void 0)&&process$1.nextTick(j,this),N};function j(L){var N=L._readableState;N.readableListening=L.listenerCount("readable")>0,N.resumeScheduled&&!N.paused?N.flowing=!0:L.listenerCount("data")>0&&L.resume()}function s(L){g("readable nexttick read 0"),L.read(0)}R.prototype.resume=function(){var L=this._readableState;return L.flowing||(g("resume"),L.flowing=!L.readableListening,i(this,L)),L.paused=!1,this};function i(L,N){N.resumeScheduled||(N.resumeScheduled=!0,process$1.nextTick(p,L,N))}function p(L,N){g("resume",N.reading),N.reading||L.read(0),N.resumeScheduled=!1,L.emit("resume"),f(L),N.flowing&&!N.reading&&L.read(0)}R.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function f(L){var N=L._readableState;for(g("flow",N.flowing);N.flowing&&L.read()!==null;);}R.prototype.wrap=function(L){var N=this,se=this._readableState,ge=!1;L.on("end",function(){if(g("wrapped end"),se.decoder&&!se.ended){var de=se.decoder.end();de&&de.length&&N.push(de)}N.push(null)}),L.on("data",function(de){if(g("wrapped data"),se.decoder&&(de=se.decoder.write(de)),!(se.objectMode&&de==null)&&!(!se.objectMode&&(!de||!de.length))){var K=N.push(de);K||(ge=!0,L.pause())}});for(var Ae in L)this[Ae]===void 0&&typeof L[Ae]=="function"&&(this[Ae]=function(K){return function(){return L[K].apply(L,arguments)}}(Ae));for(var he=0;he<y.length;he++)L.on(y[he],this.emit.bind(this,y[he]));return this._read=function(de){g("wrapped _read",de),ge&&(ge=!1,L.resume())},this},typeof Symbol=="function"&&(R.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=requireAsync_iterator()),x(this)}),Object.defineProperty(R.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(R.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(R.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(N){this._readableState&&(this._readableState.flowing=N)}}),R._fromList=C,Object.defineProperty(R.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function C(L,N){if(N.length===0)return null;var se;return N.objectMode?se=N.buffer.shift():!L||L>=N.length?(N.decoder?se=N.buffer.join(""):N.buffer.length===1?se=N.buffer.first():se=N.buffer.concat(N.length),N.buffer.clear()):se=N.buffer.consume(L,N.decoder),se}function F(L){var N=L._readableState;g("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,process$1.nextTick(z,N,L))}function z(L,N){if(g("endReadableNT",L.endEmitted,L.length),!L.endEmitted&&L.length===0&&(L.endEmitted=!0,N.readable=!1,N.emit("end"),L.autoDestroy)){var se=N._writableState;(!se||se.autoDestroy&&se.finished)&&N.destroy()}}typeof Symbol=="function"&&(R.from=function(L,N){return b===void 0&&(b=requireFromBrowser()),b(R,L,N)});function Q(L,N){for(var se=0,ge=L.length;se<ge;se++)if(L[se]===N)return se;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=k;var t=requireErrorsBrowser().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,n=t.ERR_MULTIPLE_CALLBACK,r=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,c=t.ERR_TRANSFORM_WITH_LENGTH_0,m=require_stream_duplex();requireInherits_browser()(k,m);function _(a,S){var w=this._transformState;w.transforming=!1;var I=w.writecb;if(I===null)return this.emit("error",new n);w.writechunk=null,w.writecb=null,S!=null&&this.push(S),I(a);var M=this._readableState;M.reading=!1,(M.needReadable||M.length<M.highWaterMark)&&this._read(M.highWaterMark)}function k(a){if(!(this instanceof k))return new k(a);m.call(this,a),this._transformState={afterTransform:_.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&(typeof a.transform=="function"&&(this._transform=a.transform),typeof a.flush=="function"&&(this._flush=a.flush)),this.on("prefinish",g)}function g(){var a=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(S,w){v(a,S,w)}):v(this,null,null)}k.prototype.push=function(a,S){return this._transformState.needTransform=!1,m.prototype.push.call(this,a,S)},k.prototype._transform=function(a,S,w){w(new e("_transform()"))},k.prototype._write=function(a,S,w){var I=this._transformState;if(I.writecb=w,I.writechunk=a,I.writeencoding=S,!I.transforming){var M=this._readableState;(I.needTransform||M.needReadable||M.length<M.highWaterMark)&&this._read(M.highWaterMark)}},k.prototype._read=function(a){var S=this._transformState;S.writechunk!==null&&!S.transforming?(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform)):S.needTransform=!0},k.prototype._destroy=function(a,S){m.prototype._destroy.call(this,a,function(w){S(w)})};function v(a,S,w){if(S)return a.emit("error",S);if(w!=null&&a.push(w),a._writableState.length)throw new c;if(a._transformState.transforming)throw new r;return a.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=e;var t=require_stream_transform();requireInherits_browser()(e,t);function e(n){if(!(this instanceof e))return new e(n);t.call(this,n)}return e.prototype._transform=function(n,r,c){c(null,n)},_stream_passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var t;function e(w){var I=!1;return function(){I||(I=!0,w.apply(void 0,arguments))}}var n=requireErrorsBrowser().codes,r=n.ERR_MISSING_ARGS,c=n.ERR_STREAM_DESTROYED;function m(w){if(w)throw w}function _(w){return w.setHeader&&typeof w.abort=="function"}function k(w,I,M,B){B=e(B);var P=!1;w.on("close",function(){P=!0}),t===void 0&&(t=requireEndOfStream()),t(w,{readable:I,writable:M},function(h){if(h)return B(h);P=!0,B()});var o=!1;return function(h){if(!P&&!o){if(o=!0,_(w))return w.abort();if(typeof w.destroy=="function")return w.destroy();B(h||new c("pipe"))}}}function g(w){w()}function v(w,I){return w.pipe(I)}function a(w){return!w.length||typeof w[w.length-1]!="function"?m:w.pop()}function S(){for(var w=arguments.length,I=new Array(w),M=0;M<w;M++)I[M]=arguments[M];var B=a(I);if(Array.isArray(I[0])&&(I=I[0]),I.length<2)throw new r("streams");var P,o=I.map(function(h,x){var b=x<I.length-1,l=x>0;return k(h,b,l,function(y){P||(P=y),y&&o.forEach(g),!b&&(o.forEach(g),B(P))})});return I.reduce(v)}return pipeline_1=S,pipeline_1}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(t,e){e=t.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=require_stream_transform(),e.PassThrough=require_stream_passthrough(),e.finished=requireEndOfStream(),e.pipeline=requirePipeline()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var hasRequiredResponse;function requireResponse(){if(hasRequiredResponse)return response;hasRequiredResponse=1;var t=requireCapability(),e=requireInherits_browser(),n=requireReadableBrowser(),r=response.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=response.IncomingMessage=function(m,_,k,g){var v=this;if(n.Readable.call(v),v._mode=k,v.headers={},v.rawHeaders=[],v.trailers={},v.rawTrailers=[],v.on("end",function(){process$1.nextTick(function(){v.emit("close")})}),k==="fetch"){let B=function(){S.read().then(function(P){if(!v._destroyed){if(g(P.done),P.done){v.push(null);return}v.push(Buffer.from(P.value)),B()}}).catch(function(P){g(!0),v._destroyed||v.emit("error",P)})};if(v._fetchResponse=_,v.url=_.url,v.statusCode=_.status,v.statusMessage=_.statusText,_.headers.forEach(function(P,o){v.headers[o.toLowerCase()]=P,v.rawHeaders.push(o,P)}),t.writableStream){var a=new WritableStream({write:function(P){return g(!1),new Promise(function(o,h){v._destroyed?h():v.push(Buffer.from(P))?o():v._resumeFetch=o})},close:function(){g(!0),v._destroyed||v.push(null)},abort:function(P){g(!0),v._destroyed||v.emit("error",P)}});try{_.body.pipeTo(a).catch(function(P){g(!0),v._destroyed||v.emit("error",P)});return}catch{}}var S=_.body.getReader();B()}else{v._xhr=m,v._pos=0,v.url=m.responseURL,v.statusCode=m.status,v.statusMessage=m.statusText;var w=m.getAllResponseHeaders().split(/\r?\n/);if(w.forEach(function(B){var P=B.match(/^([^:]+):\s*(.*)/);if(P){var o=P[1].toLowerCase();o==="set-cookie"?(v.headers[o]===void 0&&(v.headers[o]=[]),v.headers[o].push(P[2])):v.headers[o]!==void 0?v.headers[o]+=", "+P[2]:v.headers[o]=P[2],v.rawHeaders.push(P[1],P[2])}}),v._charset="x-user-defined",!t.overrideMimeType){var I=v.rawHeaders["mime-type"];if(I){var M=I.match(/;\s*charset=([^;])(;|$)/);M&&(v._charset=M[1].toLowerCase())}v._charset||(v._charset="utf-8")}}};return e(c,n.Readable),c.prototype._read=function(){var m=this,_=m._resumeFetch;_&&(m._resumeFetch=null,_())},c.prototype._onXHRProgress=function(m){var _=this,k=_._xhr,g=null;switch(_._mode){case"text":if(g=k.responseText,g.length>_._pos){var v=g.substr(_._pos);if(_._charset==="x-user-defined"){for(var a=Buffer.alloc(v.length),S=0;S<v.length;S++)a[S]=v.charCodeAt(S)&255;_.push(a)}else _.push(v,_._charset);_._pos=g.length}break;case"arraybuffer":if(k.readyState!==r.DONE||!k.response)break;g=k.response,_.push(Buffer.from(new Uint8Array(g)));break;case"moz-chunked-arraybuffer":if(g=k.response,k.readyState!==r.LOADING||!g)break;_.push(Buffer.from(new Uint8Array(g)));break;case"ms-stream":if(g=k.response,k.readyState!==r.LOADING)break;var w=new commonjsGlobal.MSStreamReader;w.onprogress=function(){w.result.byteLength>_._pos&&(_.push(Buffer.from(new Uint8Array(w.result.slice(_._pos)))),_._pos=w.result.byteLength)},w.onload=function(){m(!0),_.push(null)},w.readAsArrayBuffer(g);break}_._xhr.readyState===r.DONE&&_._mode!=="ms-stream"&&(m(!0),_.push(null))},response}var hasRequiredRequest;function requireRequest(){if(hasRequiredRequest)return request.exports;hasRequiredRequest=1;var t=requireCapability(),e=requireInherits_browser(),n=requireResponse(),r=requireReadableBrowser(),c=n.IncomingMessage,m=n.readyStates;function _(a,S){return t.fetch&&S?"fetch":t.mozchunkedarraybuffer?"moz-chunked-arraybuffer":t.msstream?"ms-stream":t.arraybuffer&&a?"arraybuffer":"text"}var k=request.exports=function(a){var S=this;r.Writable.call(S),S._opts=a,S._body=[],S._headers={},a.auth&&S.setHeader("Authorization","Basic "+Buffer.from(a.auth).toString("base64")),Object.keys(a.headers).forEach(function(M){S.setHeader(M,a.headers[M])});var w,I=!0;if(a.mode==="disable-fetch"||"requestTimeout"in a&&!t.abortController)I=!1,w=!0;else if(a.mode==="prefer-streaming")w=!1;else if(a.mode==="allow-wrong-content-type")w=!t.overrideMimeType;else if(!a.mode||a.mode==="default"||a.mode==="prefer-fast")w=!0;else throw new Error("Invalid value for opts.mode");S._mode=_(w,I),S._fetchTimer=null,S._socketTimeout=null,S._socketTimer=null,S.on("finish",function(){S._onFinish()})};e(k,r.Writable),k.prototype.setHeader=function(a,S){var w=this,I=a.toLowerCase();v.indexOf(I)===-1&&(w._headers[I]={name:a,value:S})},k.prototype.getHeader=function(a){var S=this._headers[a.toLowerCase()];return S?S.value:null},k.prototype.removeHeader=function(a){var S=this;delete S._headers[a.toLowerCase()]},k.prototype._onFinish=function(){var a=this;if(!a._destroyed){var S=a._opts;"timeout"in S&&S.timeout!==0&&a.setTimeout(S.timeout);var w=a._headers,I=null;S.method!=="GET"&&S.method!=="HEAD"&&(I=new Blob(a._body,{type:(w["content-type"]||{}).value||""}));var M=[];if(Object.keys(w).forEach(function(h){var x=w[h].name,b=w[h].value;Array.isArray(b)?b.forEach(function(l){M.push([x,l])}):M.push([x,b])}),a._mode==="fetch"){var B=null;if(t.abortController){var P=new AbortController;B=P.signal,a._fetchAbortController=P,"requestTimeout"in S&&S.requestTimeout!==0&&(a._fetchTimer=commonjsGlobal.setTimeout(function(){a.emit("requestTimeout"),a._fetchAbortController&&a._fetchAbortController.abort()},S.requestTimeout))}commonjsGlobal.fetch(a._opts.url,{method:a._opts.method,headers:M,body:I||void 0,mode:"cors",credentials:S.withCredentials?"include":"same-origin",signal:B}).then(function(h){a._fetchResponse=h,a._resetTimers(!1),a._connect()},function(h){a._resetTimers(!0),a._destroyed||a.emit("error",h)})}else{var o=a._xhr=new commonjsGlobal.XMLHttpRequest;try{o.open(a._opts.method,a._opts.url,!0)}catch(h){process$1.nextTick(function(){a.emit("error",h)});return}"responseType"in o&&(o.responseType=a._mode),"withCredentials"in o&&(o.withCredentials=!!S.withCredentials),a._mode==="text"&&"overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in S&&(o.timeout=S.requestTimeout,o.ontimeout=function(){a.emit("requestTimeout")}),M.forEach(function(h){o.setRequestHeader(h[0],h[1])}),a._response=null,o.onreadystatechange=function(){switch(o.readyState){case m.LOADING:case m.DONE:a._onXHRProgress();break}},a._mode==="moz-chunked-arraybuffer"&&(o.onprogress=function(){a._onXHRProgress()}),o.onerror=function(){a._destroyed||(a._resetTimers(!0),a.emit("error",new Error("XHR error")))};try{o.send(I)}catch(h){process$1.nextTick(function(){a.emit("error",h)});return}}}};function g(a){try{var S=a.status;return S!==null&&S!==0}catch{return!1}}k.prototype._onXHRProgress=function(){var a=this;a._resetTimers(!1),!(!g(a._xhr)||a._destroyed)&&(a._response||a._connect(),a._response._onXHRProgress(a._resetTimers.bind(a)))},k.prototype._connect=function(){var a=this;a._destroyed||(a._response=new c(a._xhr,a._fetchResponse,a._mode,a._resetTimers.bind(a)),a._response.on("error",function(S){a.emit("error",S)}),a.emit("response",a._response))},k.prototype._write=function(a,S,w){var I=this;I._body.push(a),w()},k.prototype._resetTimers=function(a){var S=this;commonjsGlobal.clearTimeout(S._socketTimer),S._socketTimer=null,a?(commonjsGlobal.clearTimeout(S._fetchTimer),S._fetchTimer=null):S._socketTimeout&&(S._socketTimer=commonjsGlobal.setTimeout(function(){S.emit("timeout")},S._socketTimeout))},k.prototype.abort=k.prototype.destroy=function(a){var S=this;S._destroyed=!0,S._resetTimers(!0),S._response&&(S._response._destroyed=!0),S._xhr?S._xhr.abort():S._fetchAbortController&&S._fetchAbortController.abort(),a&&S.emit("error",a)},k.prototype.end=function(a,S,w){var I=this;typeof a=="function"&&(w=a,a=void 0),r.Writable.prototype.end.call(I,a,S,w)},k.prototype.setTimeout=function(a,S){var w=this;S&&w.once("timeout",S),w._socketTimeout=a,w._resetTimers(!1)},k.prototype.flushHeaders=function(){},k.prototype.setNoDelay=function(){},k.prototype.setSocketKeepAlive=function(){};var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"];return request.exports}var immutable,hasRequiredImmutable;function requireImmutable(){if(hasRequiredImmutable)return immutable;hasRequiredImmutable=1,immutable=e;var t=Object.prototype.hasOwnProperty;function e(){for(var n={},r=0;r<arguments.length;r++){var c=arguments[r];for(var m in c)t.call(c,m)&&(n[m]=c[m])}return n}return immutable}var browser,hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,browser={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}),browser}var hasRequiredStreamHttp;function requireStreamHttp(){return hasRequiredStreamHttp||(hasRequiredStreamHttp=1,function(t){var e=requireRequest(),n=requireResponse(),r=requireImmutable(),c=requireBrowser(),m=require$$2,_=t;_.request=function(k,g){typeof k=="string"?k=m.parse(k):k=r(k);var v=commonjsGlobal.location.protocol.search(/^https?:$/)===-1?"http:":"",a=k.protocol||v,S=k.hostname||k.host,w=k.port,I=k.path||"/";S&&S.indexOf(":")!==-1&&(S="["+S+"]"),k.url=(S?a+"//"+S:"")+(w?":"+w:"")+I,k.method=(k.method||"GET").toUpperCase(),k.headers=k.headers||{};var M=new e(k);return g&&M.on("response",g),M},_.get=function(g,v){var a=_.request(g,v);return a.end(),a},_.ClientRequest=e,_.IncomingMessage=n.IncomingMessage,_.Agent=function(){},_.Agent.defaultMaxSockets=4,_.globalAgent=new _.Agent,_.STATUS_CODES=c,_.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}(streamHttp)),streamHttp}var httpsBrowserify={exports:{}},hasRequiredHttpsBrowserify;function requireHttpsBrowserify(){return hasRequiredHttpsBrowserify||(hasRequiredHttpsBrowserify=1,function(t){var e=requireStreamHttp(),n=require$$2,r=t.exports;for(var c in e)e.hasOwnProperty(c)&&(r[c]=e[c]);r.request=function(_,k){return _=m(_),e.request.call(this,_,k)},r.get=function(_,k){return _=m(_),e.get.call(this,_,k)};function m(_){if(typeof _=="string"&&(_=n.parse(_)),_.protocol||(_.protocol="https:"),_.protocol!=="https:")throw new Error('Protocol "'+_.protocol+'" not supported. Expected "https:"');return _}}(httpsBrowserify)),httpsBrowserify.exports}var lib={},streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=n;var t=requireEvents().EventEmitter,e=requireInherits_browser();e(n,t),n.Readable=require_stream_readable(),n.Writable=require_stream_writable(),n.Duplex=require_stream_duplex(),n.Transform=require_stream_transform(),n.PassThrough=require_stream_passthrough(),n.finished=requireEndOfStream(),n.pipeline=requirePipeline(),n.Stream=n;function n(){t.call(this)}return n.prototype.pipe=function(r,c){var m=this;function _(I){r.writable&&r.write(I)===!1&&m.pause&&m.pause()}m.on("data",_);function k(){m.readable&&m.resume&&m.resume()}r.on("drain",k),!r._isStdio&&(!c||c.end!==!1)&&(m.on("end",v),m.on("close",a));var g=!1;function v(){g||(g=!0,r.end())}function a(){g||(g=!0,typeof r.destroy=="function"&&r.destroy())}function S(I){if(w(),t.listenerCount(this,"error")===0)throw I}m.on("error",S),r.on("error",S);function w(){m.removeListener("data",_),r.removeListener("drain",k),m.removeListener("end",v),m.removeListener("close",a),m.removeListener("error",S),r.removeListener("error",S),m.removeListener("end",w),m.removeListener("close",w),r.removeListener("close",w)}return m.on("end",w),m.on("close",w),r.on("close",w),r.emit("pipe",m),r},streamBrowserify}var binding={},assert={exports:{}},errors={},hasRequiredErrors;function requireErrors(){if(hasRequiredErrors)return errors;hasRequiredErrors=1;function t(h){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},t(h)}function e(h,x,b){return Object.defineProperty(h,"prototype",{writable:!1}),h}function n(h,x){if(!(h instanceof x))throw new TypeError("Cannot call a class as a function")}function r(h,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(x&&x.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),x&&c(h,x)}function c(h,x){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,y){return l.__proto__=y,l},c(h,x)}function m(h){var x=g();return function(){var l=v(h),y;if(x){var u=v(this).constructor;y=Reflect.construct(l,arguments,u)}else y=l.apply(this,arguments);return _(this,y)}}function _(h,x){if(x&&(t(x)==="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k(h)}function k(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v(h){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)},v(h)}var a={},S,w;function I(h,x,b){b||(b=Error);function l(u,T,R){return typeof x=="string"?x:x(u,T,R)}var y=function(u){r(R,u);var T=m(R);function R(X,D,E){var q;return n(this,R),q=T.call(this,l(X,D,E)),q.code=h,q}return e(R)}(b);a[h]=y}function M(h,x){if(Array.isArray(h)){var b=h.length;return h=h.map(function(l){return String(l)}),b>2?"one of ".concat(x," ").concat(h.slice(0,b-1).join(", "),", or ")+h[b-1]:b===2?"one of ".concat(x," ").concat(h[0]," or ").concat(h[1]):"of ".concat(x," ").concat(h[0])}else return"of ".concat(x," ").concat(String(h))}function B(h,x,b){return h.substr(0,x.length)===x}function P(h,x,b){return(b===void 0||b>h.length)&&(b=h.length),h.substring(b-x.length,b)===x}function o(h,x,b){return typeof b!="number"&&(b=0),b+x.length>h.length?!1:h.indexOf(x,b)!==-1}return I("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),I("ERR_INVALID_ARG_TYPE",function(h,x,b){S===void 0&&(S=requireAssert()),S(typeof h=="string","'name' must be a string");var l;typeof x=="string"&&B(x,"not ")?(l="must not be",x=x.replace(/^not /,"")):l="must be";var y;if(P(h," argument"))y="The ".concat(h," ").concat(l," ").concat(M(x,"type"));else{var u=o(h,".")?"property":"argument";y='The "'.concat(h,'" ').concat(u," ").concat(l," ").concat(M(x,"type"))}return y+=". Received type ".concat(t(b)),y},TypeError),I("ERR_INVALID_ARG_VALUE",function(h,x){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";w===void 0&&(w=requireUtil());var l=w.inspect(x);return l.length>128&&(l="".concat(l.slice(0,128),"...")),"The argument '".concat(h,"' ").concat(b,". Received ").concat(l)},TypeError),I("ERR_INVALID_RETURN_VALUE",function(h,x,b){var l;return b&&b.constructor&&b.constructor.name?l="instance of ".concat(b.constructor.name):l="type ".concat(t(b)),"Expected ".concat(h,' to be returned from the "').concat(x,'"')+" function but got ".concat(l,".")},TypeError),I("ERR_MISSING_ARGS",function(){for(var h=arguments.length,x=new Array(h),b=0;b<h;b++)x[b]=arguments[b];S===void 0&&(S=requireAssert()),S(x.length>0,"At least one arg needs to be specified");var l="The ",y=x.length;switch(x=x.map(function(u){return'"'.concat(u,'"')}),y){case 1:l+="".concat(x[0]," argument");break;case 2:l+="".concat(x[0]," and ").concat(x[1]," arguments");break;default:l+=x.slice(0,y-1).join(", "),l+=", and ".concat(x[y-1]," arguments");break}return"".concat(l," must be specified")},TypeError),errors.codes=a,errors}var assertion_error,hasRequiredAssertion_error;function requireAssertion_error(){if(hasRequiredAssertion_error)return assertion_error;hasRequiredAssertion_error=1;function t(H,W){var ne=Object.keys(H);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(H);W&&(j=j.filter(function(s){return Object.getOwnPropertyDescriptor(H,s).enumerable})),ne.push.apply(ne,j)}return ne}function e(H){for(var W=1;W<arguments.length;W++){var ne=arguments[W]!=null?arguments[W]:{};W%2?t(Object(ne),!0).forEach(function(j){n(H,j,ne[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(ne)):t(Object(ne)).forEach(function(j){Object.defineProperty(H,j,Object.getOwnPropertyDescriptor(ne,j))})}return H}function n(H,W,ne){return W=_(W),W in H?Object.defineProperty(H,W,{value:ne,enumerable:!0,configurable:!0,writable:!0}):H[W]=ne,H}function r(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")}function c(H,W){for(var ne=0;ne<W.length;ne++){var j=W[ne];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(H,_(j.key),j)}}function m(H,W,ne){return W&&c(H.prototype,W),Object.defineProperty(H,"prototype",{writable:!1}),H}function _(H){var W=k(H,"string");return h(W)==="symbol"?W:String(W)}function k(H,W){if(h(H)!=="object"||H===null)return H;var ne=H[Symbol.toPrimitive];if(ne!==void 0){var j=ne.call(H,W);if(h(j)!=="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(H)}function g(H,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(W&&W.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),Object.defineProperty(H,"prototype",{writable:!1}),W&&P(H,W)}function v(H){var W=M();return function(){var j=o(H),s;if(W){var i=o(this).constructor;s=Reflect.construct(j,arguments,i)}else s=j.apply(this,arguments);return a(this,s)}}function a(H,W){if(W&&(h(W)==="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S(H)}function S(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function w(H){var W=typeof Map=="function"?new Map:void 0;return w=function(j){if(j===null||!B(j))return j;if(typeof j!="function")throw new TypeError("Super expression must either be null or a function");if(typeof W<"u"){if(W.has(j))return W.get(j);W.set(j,s)}function s(){return I(j,arguments,o(this).constructor)}return s.prototype=Object.create(j.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),P(s,j)},w(H)}function I(H,W,ne){return M()?I=Reflect.construct.bind():I=function(s,i,p){var f=[null];f.push.apply(f,i);var C=Function.bind.apply(s,f),F=new C;return p&&P(F,p.prototype),F},I.apply(null,arguments)}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function B(H){return Function.toString.call(H).indexOf("[native code]")!==-1}function P(H,W){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(j,s){return j.__proto__=s,j},P(H,W)}function o(H){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},o(H)}function h(H){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},h(H)}var x=requireUtil(),b=x.inspect,l=requireErrors(),y=l.codes.ERR_INVALID_ARG_TYPE;function u(H,W,ne){return(ne===void 0||ne>H.length)&&(ne=H.length),H.substring(ne-W.length,ne)===W}function T(H,W){if(W=Math.floor(W),H.length==0||W==0)return"";var ne=H.length*W;for(W=Math.floor(Math.log(W)/Math.log(2));W;)H+=H,W--;return H+=H.substring(0,ne-H.length),H}var R="",X="",D="",E="",q={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},oe=10;function ae(H){var W=Object.keys(H),ne=Object.create(Object.getPrototypeOf(H));return W.forEach(function(j){ne[j]=H[j]}),Object.defineProperty(ne,"message",{value:H.message}),ne}function ue(H){return b(H,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function re(H,W,ne){var j="",s="",i=0,p="",f=!1,C=ue(H),F=C.split(`
`),z=ue(W).split(`
`),Q=0,L="";if(ne==="strictEqual"&&h(H)==="object"&&h(W)==="object"&&H!==null&&W!==null&&(ne="strictEqualObject"),F.length===1&&z.length===1&&F[0]!==z[0]){var N=F[0].length+z[0].length;if(N<=oe){if((h(H)!=="object"||H===null)&&(h(W)!=="object"||W===null)&&(H!==0||W!==0))return"".concat(q[ne],`

`)+"".concat(F[0]," !== ").concat(z[0],`
`)}else if(ne!=="strictEqualObject"){var se=process$1.stderr&&process$1.stderr.isTTY?process$1.stderr.columns:80;if(N<se){for(;F[0][Q]===z[0][Q];)Q++;Q>2&&(L=`
  `.concat(T(" ",Q),"^"),Q=0)}}}for(var ge=F[F.length-1],Ae=z[z.length-1];ge===Ae&&(Q++<2?p=`
  `.concat(ge).concat(p):j=ge,F.pop(),z.pop(),!(F.length===0||z.length===0));)ge=F[F.length-1],Ae=z[z.length-1];var he=Math.max(F.length,z.length);if(he===0){var de=C.split(`
`);if(de.length>30)for(de[26]="".concat(R,"...").concat(E);de.length>27;)de.pop();return"".concat(q.notIdentical,`

`).concat(de.join(`
`),`
`)}Q>3&&(p=`
`.concat(R,"...").concat(E).concat(p),f=!0),j!==""&&(p=`
  `.concat(j).concat(p),j="");var K=0,V=q[ne]+`
`.concat(X,"+ actual").concat(E," ").concat(D,"- expected").concat(E),me=" ".concat(R,"...").concat(E," Lines skipped");for(Q=0;Q<he;Q++){var _e=Q-i;if(F.length<Q+1)_e>1&&Q>2&&(_e>4?(s+=`
`.concat(R,"...").concat(E),f=!0):_e>3&&(s+=`
  `.concat(z[Q-2]),K++),s+=`
  `.concat(z[Q-1]),K++),i=Q,j+=`
`.concat(D,"-").concat(E," ").concat(z[Q]),K++;else if(z.length<Q+1)_e>1&&Q>2&&(_e>4?(s+=`
`.concat(R,"...").concat(E),f=!0):_e>3&&(s+=`
  `.concat(F[Q-2]),K++),s+=`
  `.concat(F[Q-1]),K++),i=Q,s+=`
`.concat(X,"+").concat(E," ").concat(F[Q]),K++;else{var Ce=z[Q],ke=F[Q],te=ke!==Ce&&(!u(ke,",")||ke.slice(0,-1)!==Ce);te&&u(Ce,",")&&Ce.slice(0,-1)===ke&&(te=!1,ke+=","),te?(_e>1&&Q>2&&(_e>4?(s+=`
`.concat(R,"...").concat(E),f=!0):_e>3&&(s+=`
  `.concat(F[Q-2]),K++),s+=`
  `.concat(F[Q-1]),K++),i=Q,s+=`
`.concat(X,"+").concat(E," ").concat(ke),j+=`
`.concat(D,"-").concat(E," ").concat(Ce),K+=2):(s+=j,j="",(_e===1||Q===0)&&(s+=`
  `.concat(ke),K++))}if(K>20&&Q<he-2)return"".concat(V).concat(me,`
`).concat(s,`
`).concat(R,"...").concat(E).concat(j,`
`)+"".concat(R,"...").concat(E)}return"".concat(V).concat(f?me:"",`
`).concat(s).concat(j).concat(p).concat(L)}var pe=function(H,W){g(j,H);var ne=v(j);function j(s){var i;if(r(this,j),h(s)!=="object"||s===null)throw new y("options","Object",s);var p=s.message,f=s.operator,C=s.stackStartFn,F=s.actual,z=s.expected,Q=Error.stackTraceLimit;if(Error.stackTraceLimit=0,p!=null)i=ne.call(this,String(p));else if(process$1.stderr&&process$1.stderr.isTTY&&(process$1.stderr&&process$1.stderr.getColorDepth&&process$1.stderr.getColorDepth()!==1?(R="\x1B[34m",X="\x1B[32m",E="\x1B[39m",D="\x1B[31m"):(R="",X="",E="",D="")),h(F)==="object"&&F!==null&&h(z)==="object"&&z!==null&&"stack"in F&&F instanceof Error&&"stack"in z&&z instanceof Error&&(F=ae(F),z=ae(z)),f==="deepStrictEqual"||f==="strictEqual")i=ne.call(this,re(F,z,f));else if(f==="notDeepStrictEqual"||f==="notStrictEqual"){var L=q[f],N=ue(F).split(`
`);if(f==="notStrictEqual"&&h(F)==="object"&&F!==null&&(L=q.notStrictEqualObject),N.length>30)for(N[26]="".concat(R,"...").concat(E);N.length>27;)N.pop();N.length===1?i=ne.call(this,"".concat(L," ").concat(N[0])):i=ne.call(this,"".concat(L,`

`).concat(N.join(`
`),`
`))}else{var se=ue(F),ge="",Ae=q[f];f==="notDeepEqual"||f==="notEqual"?(se="".concat(q[f],`

`).concat(se),se.length>1024&&(se="".concat(se.slice(0,1021),"..."))):(ge="".concat(ue(z)),se.length>512&&(se="".concat(se.slice(0,509),"...")),ge.length>512&&(ge="".concat(ge.slice(0,509),"...")),f==="deepEqual"||f==="equal"?se="".concat(Ae,`

`).concat(se,`

should equal

`):ge=" ".concat(f," ").concat(ge)),i=ne.call(this,"".concat(se).concat(ge))}return Error.stackTraceLimit=Q,i.generatedMessage=!p,Object.defineProperty(S(i),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),i.code="ERR_ASSERTION",i.actual=F,i.expected=z,i.operator=f,Error.captureStackTrace&&Error.captureStackTrace(S(i),C),i.stack,i.name="AssertionError",a(i)}return m(j,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:W,value:function(i,p){return b(this,e(e({},p),{},{customInspect:!1,depth:0}))}}]),j}(w(Error),b.custom);return assertion_error=pe,assertion_error}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var t=Object.prototype.toString;return isArguments=function(n){var r=t.call(n),c=r==="[object Arguments]";return c||(c=r!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&t.call(n.callee)==="[object Function]"),c},isArguments}var implementation$3,hasRequiredImplementation$3;function requireImplementation$3(){if(hasRequiredImplementation$3)return implementation$3;hasRequiredImplementation$3=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=requireIsArguments(),c=Object.prototype.propertyIsEnumerable,m=!c.call({toString:null},"toString"),_=c.call(function(){},"prototype"),k=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],g=function(w){var I=w.constructor;return I&&I.prototype===w},v={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},a=function(){if(typeof window>"u")return!1;for(var w in window)try{if(!v["$"+w]&&e.call(window,w)&&window[w]!==null&&typeof window[w]=="object")try{g(window[w])}catch{return!0}}catch{return!0}return!1}(),S=function(w){if(typeof window>"u"||!a)return g(w);try{return g(w)}catch{return!1}};t=function(I){var M=I!==null&&typeof I=="object",B=n.call(I)==="[object Function]",P=r(I),o=M&&n.call(I)==="[object String]",h=[];if(!M&&!B&&!P)throw new TypeError("Object.keys called on a non-object");var x=_&&B;if(o&&I.length>0&&!e.call(I,0))for(var b=0;b<I.length;++b)h.push(String(b));if(P&&I.length>0)for(var l=0;l<I.length;++l)h.push(String(l));else for(var y in I)!(x&&y==="prototype")&&e.call(I,y)&&h.push(String(y));if(m)for(var u=S(I),T=0;T<k.length;++T)!(u&&k[T]==="constructor")&&e.call(I,k[T])&&h.push(k[T]);return h}}return implementation$3=t,implementation$3}var objectKeys,hasRequiredObjectKeys;function requireObjectKeys(){if(hasRequiredObjectKeys)return objectKeys;hasRequiredObjectKeys=1;var t=Array.prototype.slice,e=requireIsArguments(),n=Object.keys,r=n?function(_){return n(_)}:requireImplementation$3(),c=Object.keys;return r.shim=function(){if(Object.keys){var _=function(){var k=Object.keys(arguments);return k&&k.length===arguments.length}(1,2);_||(Object.keys=function(g){return e(g)?c(t.call(g)):c(g)})}else Object.keys=r;return Object.keys||r},objectKeys=r,objectKeys}var implementation$2,hasRequiredImplementation$2;function requireImplementation$2(){if(hasRequiredImplementation$2)return implementation$2;hasRequiredImplementation$2=1;var t=requireObjectKeys(),e=requireShams$1()(),n=callBound$3,r=requireEsObjectAtoms(),c=n("Array.prototype.push"),m=n("Object.prototype.propertyIsEnumerable"),_=e?r.getOwnPropertySymbols:null;return implementation$2=function(g,v){if(g==null)throw new TypeError("target must be an object");var a=r(g);if(arguments.length===1)return a;for(var S=1;S<arguments.length;++S){var w=r(arguments[S]),I=t(w),M=e&&(r.getOwnPropertySymbols||_);if(M)for(var B=M(w),P=0;P<B.length;++P){var o=B[P];m(w,o)&&c(I,o)}for(var h=0;h<I.length;++h){var x=I[h];if(m(w,x)){var b=w[x];a[x]=b}}}return a},implementation$2}var polyfill$2,hasRequiredPolyfill$2;function requirePolyfill$2(){if(hasRequiredPolyfill$2)return polyfill$2;hasRequiredPolyfill$2=1;var t=requireImplementation$2(),e=function(){if(!Object.assign)return!1;for(var r="abcdefghijklmnopqrst",c=r.split(""),m={},_=0;_<c.length;++_)m[c[_]]=c[_];var k=Object.assign({},m),g="";for(var v in k)g+=v;return r!==g},n=function(){if(!Object.assign||!Object.preventExtensions)return!1;var r=Object.preventExtensions({1:2});try{Object.assign(r,"xy")}catch{return r[1]==="y"}return!1};return polyfill$2=function(){return!Object.assign||e()||n()?t:Object.assign},polyfill$2}var implementation$1,hasRequiredImplementation$1;function requireImplementation$1(){if(hasRequiredImplementation$1)return implementation$1;hasRequiredImplementation$1=1;var t=function(e){return e!==e};return implementation$1=function(n,r){return n===0&&r===0?1/n===1/r:!!(n===r||t(n)&&t(r))},implementation$1}var polyfill$1,hasRequiredPolyfill$1;function requirePolyfill$1(){if(hasRequiredPolyfill$1)return polyfill$1;hasRequiredPolyfill$1=1;var t=requireImplementation$1();return polyfill$1=function(){return typeof Object.is=="function"?Object.is:t},polyfill$1}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var t=requireGetIntrinsic(),e=requireCallBind(),n=e(t("String.prototype.indexOf"));return callBound=function(c,m){var _=t(c,!!m);return typeof _=="function"&&n(c,".prototype.")>-1?e(_):_},callBound}var defineProperties_1,hasRequiredDefineProperties;function requireDefineProperties(){if(hasRequiredDefineProperties)return defineProperties_1;hasRequiredDefineProperties=1;var t=requireObjectKeys(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",n=Object.prototype.toString,r=Array.prototype.concat,c=requireDefineDataProperty(),m=function(v){return typeof v=="function"&&n.call(v)==="[object Function]"},_=requireHasPropertyDescriptors()(),k=function(v,a,S,w){if(a in v){if(w===!0){if(v[a]===S)return}else if(!m(w)||!w())return}_?c(v,a,S,!0):c(v,a,S)},g=function(v,a){var S=arguments.length>2?arguments[2]:{},w=t(a);e&&(w=r.call(w,Object.getOwnPropertySymbols(a)));for(var I=0;I<w.length;I+=1)k(v,w[I],a[w[I]],S[w[I]])};return g.supportsDescriptors=!!_,defineProperties_1=g,defineProperties_1}var shim$1,hasRequiredShim$1;function requireShim$1(){if(hasRequiredShim$1)return shim$1;hasRequiredShim$1=1;var t=requirePolyfill$1(),e=requireDefineProperties();return shim$1=function(){var r=t();return e(Object,{is:r},{is:function(){return Object.is!==r}}),r},shim$1}var objectIs,hasRequiredObjectIs;function requireObjectIs(){if(hasRequiredObjectIs)return objectIs;hasRequiredObjectIs=1;var t=requireDefineProperties(),e=requireCallBind(),n=requireImplementation$1(),r=requirePolyfill$1(),c=requireShim$1(),m=e(r(),Object);return t(m,{getPolyfill:r,implementation:n,shim:c}),objectIs=m,objectIs}var implementation,hasRequiredImplementation;function requireImplementation(){return hasRequiredImplementation||(hasRequiredImplementation=1,implementation=function(e){return e!==e}),implementation}var polyfill,hasRequiredPolyfill;function requirePolyfill(){if(hasRequiredPolyfill)return polyfill;hasRequiredPolyfill=1;var t=requireImplementation();return polyfill=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:t},polyfill}var shim,hasRequiredShim;function requireShim(){if(hasRequiredShim)return shim;hasRequiredShim=1;var t=requireDefineProperties(),e=requirePolyfill();return shim=function(){var r=e();return t(Number,{isNaN:r},{isNaN:function(){return Number.isNaN!==r}}),r},shim}var isNan,hasRequiredIsNan;function requireIsNan(){if(hasRequiredIsNan)return isNan;hasRequiredIsNan=1;var t=requireCallBind(),e=requireDefineProperties(),n=requireImplementation(),r=requirePolyfill(),c=requireShim(),m=t(r(),Number);return e(m,{getPolyfill:r,implementation:n,shim:c}),isNan=m,isNan}var comparisons,hasRequiredComparisons;function requireComparisons(){if(hasRequiredComparisons)return comparisons;hasRequiredComparisons=1;function t(te,J){return m(te)||c(te,J)||n(te,J)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n(te,J){if(te){if(typeof te=="string")return r(te,J);var Se=Object.prototype.toString.call(te).slice(8,-1);if(Se==="Object"&&te.constructor&&(Se=te.constructor.name),Se==="Map"||Se==="Set")return Array.from(te);if(Se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Se))return r(te,J)}}function r(te,J){(J==null||J>te.length)&&(J=te.length);for(var Se=0,Te=new Array(J);Se<J;Se++)Te[Se]=te[Se];return Te}function c(te,J){var Se=te==null?null:typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(Se!=null){var Te,De,Ne,Ue,$=[],be=!0,Me=!1;try{if(Ne=(Se=Se.call(te)).next,J!==0)for(;!(be=(Te=Ne.call(Se)).done)&&($.push(Te.value),$.length!==J);be=!0);}catch(Le){Me=!0,De=Le}finally{try{if(!be&&Se.return!=null&&(Ue=Se.return(),Object(Ue)!==Ue))return}finally{if(Me)throw De}}return $}}function m(te){if(Array.isArray(te))return te}function _(te){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},_(te)}var k=/a/g.flags!==void 0,g=function(J){var Se=[];return J.forEach(function(Te){return Se.push(Te)}),Se},v=function(J){var Se=[];return J.forEach(function(Te,De){return Se.push([De,Te])}),Se},a=Object.is?Object.is:requireObjectIs(),S=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},w=Number.isNaN?Number.isNaN:requireIsNan();function I(te){return te.call.bind(te)}var M=I(Object.prototype.hasOwnProperty),B=I(Object.prototype.propertyIsEnumerable),P=I(Object.prototype.toString),o=requireUtil().types,h=o.isAnyArrayBuffer,x=o.isArrayBufferView,b=o.isDate,l=o.isMap,y=o.isRegExp,u=o.isSet,T=o.isNativeError,R=o.isBoxedPrimitive,X=o.isNumberObject,D=o.isStringObject,E=o.isBooleanObject,q=o.isBigIntObject,oe=o.isSymbolObject,ae=o.isFloat32Array,ue=o.isFloat64Array;function re(te){if(te.length===0||te.length>10)return!0;for(var J=0;J<te.length;J++){var Se=te.charCodeAt(J);if(Se<48||Se>57)return!0}return te.length===10&&te>=Math.pow(2,32)}function pe(te){return Object.keys(te).filter(re).concat(S(te).filter(Object.prototype.propertyIsEnumerable.bind(te)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function H(te,J){if(te===J)return 0;for(var Se=te.length,Te=J.length,De=0,Ne=Math.min(Se,Te);De<Ne;++De)if(te[De]!==J[De]){Se=te[De],Te=J[De];break}return Se<Te?-1:Te<Se?1:0}var W=!0,ne=!1,j=0,s=1,i=2,p=3;function f(te,J){return k?te.source===J.source&&te.flags===J.flags:RegExp.prototype.toString.call(te)===RegExp.prototype.toString.call(J)}function C(te,J){if(te.byteLength!==J.byteLength)return!1;for(var Se=0;Se<te.byteLength;Se++)if(te[Se]!==J[Se])return!1;return!0}function F(te,J){return te.byteLength!==J.byteLength?!1:H(new Uint8Array(te.buffer,te.byteOffset,te.byteLength),new Uint8Array(J.buffer,J.byteOffset,J.byteLength))===0}function z(te,J){return te.byteLength===J.byteLength&&H(new Uint8Array(te),new Uint8Array(J))===0}function Q(te,J){return X(te)?X(J)&&a(Number.prototype.valueOf.call(te),Number.prototype.valueOf.call(J)):D(te)?D(J)&&String.prototype.valueOf.call(te)===String.prototype.valueOf.call(J):E(te)?E(J)&&Boolean.prototype.valueOf.call(te)===Boolean.prototype.valueOf.call(J):q(te)?q(J)&&BigInt.prototype.valueOf.call(te)===BigInt.prototype.valueOf.call(J):oe(J)&&Symbol.prototype.valueOf.call(te)===Symbol.prototype.valueOf.call(J)}function L(te,J,Se,Te){if(te===J)return te!==0?!0:Se?a(te,J):!0;if(Se){if(_(te)!=="object")return typeof te=="number"&&w(te)&&w(J);if(_(J)!=="object"||te===null||J===null||Object.getPrototypeOf(te)!==Object.getPrototypeOf(J))return!1}else{if(te===null||_(te)!=="object")return J===null||_(J)!=="object"?te==J:!1;if(J===null||_(J)!=="object")return!1}var De=P(te),Ne=P(J);if(De!==Ne)return!1;if(Array.isArray(te)){if(te.length!==J.length)return!1;var Ue=pe(te),$=pe(J);return Ue.length!==$.length?!1:se(te,J,Se,Te,s,Ue)}if(De==="[object Object]"&&(!l(te)&&l(J)||!u(te)&&u(J)))return!1;if(b(te)){if(!b(J)||Date.prototype.getTime.call(te)!==Date.prototype.getTime.call(J))return!1}else if(y(te)){if(!y(J)||!f(te,J))return!1}else if(T(te)||te instanceof Error){if(te.message!==J.message||te.name!==J.name)return!1}else if(x(te)){if(!Se&&(ae(te)||ue(te))){if(!C(te,J))return!1}else if(!F(te,J))return!1;var be=pe(te),Me=pe(J);return be.length!==Me.length?!1:se(te,J,Se,Te,j,be)}else{if(u(te))return!u(J)||te.size!==J.size?!1:se(te,J,Se,Te,i);if(l(te))return!l(J)||te.size!==J.size?!1:se(te,J,Se,Te,p);if(h(te)){if(!z(te,J))return!1}else if(R(te)&&!Q(te,J))return!1}return se(te,J,Se,Te,j)}function N(te,J){return J.filter(function(Se){return B(te,Se)})}function se(te,J,Se,Te,De,Ne){if(arguments.length===5){Ne=Object.keys(te);var Ue=Object.keys(J);if(Ne.length!==Ue.length)return!1}for(var $=0;$<Ne.length;$++)if(!M(J,Ne[$]))return!1;if(Se&&arguments.length===5){var be=S(te);if(be.length!==0){var Me=0;for($=0;$<be.length;$++){var Le=be[$];if(B(te,Le)){if(!B(J,Le))return!1;Ne.push(Le),Me++}else if(B(J,Le))return!1}var ee=S(J);if(be.length!==ee.length&&N(J,ee).length!==Me)return!1}else{var ie=S(J);if(ie.length!==0&&N(J,ie).length!==0)return!1}}if(Ne.length===0&&(De===j||De===s&&te.length===0||te.size===0))return!0;if(Te===void 0)Te={val1:new Map,val2:new Map,position:0};else{var O=Te.val1.get(te);if(O!==void 0){var we=Te.val2.get(J);if(we!==void 0)return O===we}Te.position++}Te.val1.set(te,Te.position),Te.val2.set(J,Te.position);var qe=_e(te,J,Se,Ne,Te,De);return Te.val1.delete(te),Te.val2.delete(J),qe}function ge(te,J,Se,Te){for(var De=g(te),Ne=0;Ne<De.length;Ne++){var Ue=De[Ne];if(L(J,Ue,Se,Te))return te.delete(Ue),!0}return!1}function Ae(te){switch(_(te)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":te=+te;case"number":if(w(te))return!1}return!0}function he(te,J,Se){var Te=Ae(Se);return Te??(J.has(Te)&&!te.has(Te))}function de(te,J,Se,Te,De){var Ne=Ae(Se);if(Ne!=null)return Ne;var Ue=J.get(Ne);return Ue===void 0&&!J.has(Ne)||!L(Te,Ue,!1,De)?!1:!te.has(Ne)&&L(Te,Ue,!1,De)}function K(te,J,Se,Te){for(var De=null,Ne=g(te),Ue=0;Ue<Ne.length;Ue++){var $=Ne[Ue];if(_($)==="object"&&$!==null)De===null&&(De=new Set),De.add($);else if(!J.has($)){if(Se||!he(te,J,$))return!1;De===null&&(De=new Set),De.add($)}}if(De!==null){for(var be=g(J),Me=0;Me<be.length;Me++){var Le=be[Me];if(_(Le)==="object"&&Le!==null){if(!ge(De,Le,Se,Te))return!1}else if(!Se&&!te.has(Le)&&!ge(De,Le,Se,Te))return!1}return De.size===0}return!0}function V(te,J,Se,Te,De,Ne){for(var Ue=g(te),$=0;$<Ue.length;$++){var be=Ue[$];if(L(Se,be,De,Ne)&&L(Te,J.get(be),De,Ne))return te.delete(be),!0}return!1}function me(te,J,Se,Te){for(var De=null,Ne=v(te),Ue=0;Ue<Ne.length;Ue++){var $=t(Ne[Ue],2),be=$[0],Me=$[1];if(_(be)==="object"&&be!==null)De===null&&(De=new Set),De.add(be);else{var Le=J.get(be);if(Le===void 0&&!J.has(be)||!L(Me,Le,Se,Te)){if(Se||!de(te,J,be,Me,Te))return!1;De===null&&(De=new Set),De.add(be)}}}if(De!==null){for(var ee=v(J),ie=0;ie<ee.length;ie++){var O=t(ee[ie],2),we=O[0],qe=O[1];if(_(we)==="object"&&we!==null){if(!V(De,te,we,qe,Se,Te))return!1}else if(!Se&&(!te.has(we)||!L(te.get(we),qe,!1,Te))&&!V(De,te,we,qe,!1,Te))return!1}return De.size===0}return!0}function _e(te,J,Se,Te,De,Ne){var Ue=0;if(Ne===i){if(!K(te,J,Se,De))return!1}else if(Ne===p){if(!me(te,J,Se,De))return!1}else if(Ne===s)for(;Ue<te.length;Ue++)if(M(te,Ue)){if(!M(J,Ue)||!L(te[Ue],J[Ue],Se,De))return!1}else{if(M(J,Ue))return!1;for(var $=Object.keys(te);Ue<$.length;Ue++){var be=$[Ue];if(!M(J,be)||!L(te[be],J[be],Se,De))return!1}return $.length===Object.keys(J).length}for(Ue=0;Ue<Te.length;Ue++){var Me=Te[Ue];if(!L(te[Me],J[Me],Se,De))return!1}return!0}function Ce(te,J){return L(te,J,ne)}function ke(te,J){return L(te,J,W)}return comparisons={isDeepEqual:Ce,isDeepStrictEqual:ke},comparisons}var hasRequiredAssert;function requireAssert(){if(hasRequiredAssert)return assert.exports;hasRequiredAssert=1;function t(i){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},t(i)}function e(i,p,f){return Object.defineProperty(i,"prototype",{writable:!1}),i}function n(i,p){if(!(i instanceof p))throw new TypeError("Cannot call a class as a function")}var r=requireErrors(),c=r.codes,m=c.ERR_AMBIGUOUS_ARGUMENT,_=c.ERR_INVALID_ARG_TYPE,k=c.ERR_INVALID_ARG_VALUE,g=c.ERR_INVALID_RETURN_VALUE,v=c.ERR_MISSING_ARGS,a=requireAssertion_error(),S=requireUtil(),w=S.inspect,I=requireUtil().types,M=I.isPromise,B=I.isRegExp,P=requirePolyfill$2()(),o=requirePolyfill$1()(),h=requireCallBound()("RegExp.prototype.test"),x,b;function l(){var i=requireComparisons();x=i.isDeepEqual,b=i.isDeepStrictEqual}var y=!1,u=assert.exports=E,T={};function R(i){throw i.message instanceof Error?i.message:new a(i)}function X(i,p,f,C,F){var z=arguments.length,Q;if(z===0)Q="Failed";else if(z===1)f=i,i=void 0;else{if(y===!1){y=!0;var L=process$1.emitWarning?process$1.emitWarning:console.warn.bind(console);L("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}z===2&&(C="!=")}if(f instanceof Error)throw f;var N={actual:i,expected:p,operator:C===void 0?"fail":C,stackStartFn:F||X};f!==void 0&&(N.message=f);var se=new a(N);throw Q&&(se.message=Q,se.generatedMessage=!0),se}u.fail=X,u.AssertionError=a;function D(i,p,f,C){if(!f){var F=!1;if(p===0)F=!0,C="No value argument passed to `assert.ok()`";else if(C instanceof Error)throw C;var z=new a({actual:f,expected:!0,message:C,operator:"==",stackStartFn:i});throw z.generatedMessage=F,z}}function E(){for(var i=arguments.length,p=new Array(i),f=0;f<i;f++)p[f]=arguments[f];D.apply(void 0,[E,p.length].concat(p))}u.ok=E,u.equal=function i(p,f,C){if(arguments.length<2)throw new v("actual","expected");p!=f&&R({actual:p,expected:f,message:C,operator:"==",stackStartFn:i})},u.notEqual=function i(p,f,C){if(arguments.length<2)throw new v("actual","expected");p==f&&R({actual:p,expected:f,message:C,operator:"!=",stackStartFn:i})},u.deepEqual=function i(p,f,C){if(arguments.length<2)throw new v("actual","expected");x===void 0&&l(),x(p,f)||R({actual:p,expected:f,message:C,operator:"deepEqual",stackStartFn:i})},u.notDeepEqual=function i(p,f,C){if(arguments.length<2)throw new v("actual","expected");x===void 0&&l(),x(p,f)&&R({actual:p,expected:f,message:C,operator:"notDeepEqual",stackStartFn:i})},u.deepStrictEqual=function i(p,f,C){if(arguments.length<2)throw new v("actual","expected");x===void 0&&l(),b(p,f)||R({actual:p,expected:f,message:C,operator:"deepStrictEqual",stackStartFn:i})},u.notDeepStrictEqual=q;function q(i,p,f){if(arguments.length<2)throw new v("actual","expected");x===void 0&&l(),b(i,p)&&R({actual:i,expected:p,message:f,operator:"notDeepStrictEqual",stackStartFn:q})}u.strictEqual=function i(p,f,C){if(arguments.length<2)throw new v("actual","expected");o(p,f)||R({actual:p,expected:f,message:C,operator:"strictEqual",stackStartFn:i})},u.notStrictEqual=function i(p,f,C){if(arguments.length<2)throw new v("actual","expected");o(p,f)&&R({actual:p,expected:f,message:C,operator:"notStrictEqual",stackStartFn:i})};var oe=e(function i(p,f,C){var F=this;n(this,i),f.forEach(function(z){z in p&&(C!==void 0&&typeof C[z]=="string"&&B(p[z])&&h(p[z],C[z])?F[z]=C[z]:F[z]=p[z])})});function ae(i,p,f,C,F,z){if(!(f in i)||!b(i[f],p[f])){if(!C){var Q=new oe(i,F),L=new oe(p,F,i),N=new a({actual:Q,expected:L,operator:"deepStrictEqual",stackStartFn:z});throw N.actual=i,N.expected=p,N.operator=z.name,N}R({actual:i,expected:p,message:C,operator:z.name,stackStartFn:z})}}function ue(i,p,f,C){if(typeof p!="function"){if(B(p))return h(p,i);if(arguments.length===2)throw new _("expected",["Function","RegExp"],p);if(t(i)!=="object"||i===null){var F=new a({actual:i,expected:p,message:f,operator:"deepStrictEqual",stackStartFn:C});throw F.operator=C.name,F}var z=Object.keys(p);if(p instanceof Error)z.push("name","message");else if(z.length===0)throw new k("error",p,"may not be an empty object");return x===void 0&&l(),z.forEach(function(Q){typeof i[Q]=="string"&&B(p[Q])&&h(p[Q],i[Q])||ae(i,p,Q,f,z,C)}),!0}return p.prototype!==void 0&&i instanceof p?!0:Error.isPrototypeOf(p)?!1:p.call({},i)===!0}function re(i){if(typeof i!="function")throw new _("fn","Function",i);try{i()}catch(p){return p}return T}function pe(i){return M(i)||i!==null&&t(i)==="object"&&typeof i.then=="function"&&typeof i.catch=="function"}function H(i){return Promise.resolve().then(function(){var p;if(typeof i=="function"){if(p=i(),!pe(p))throw new g("instance of Promise","promiseFn",p)}else if(pe(i))p=i;else throw new _("promiseFn",["Function","Promise"],i);return Promise.resolve().then(function(){return p}).then(function(){return T}).catch(function(f){return f})})}function W(i,p,f,C){if(typeof f=="string"){if(arguments.length===4)throw new _("error",["Object","Error","Function","RegExp"],f);if(t(p)==="object"&&p!==null){if(p.message===f)throw new m("error/message",'The error message "'.concat(p.message,'" is identical to the message.'))}else if(p===f)throw new m("error/message",'The error "'.concat(p,'" is identical to the message.'));C=f,f=void 0}else if(f!=null&&t(f)!=="object"&&typeof f!="function")throw new _("error",["Object","Error","Function","RegExp"],f);if(p===T){var F="";f&&f.name&&(F+=" (".concat(f.name,")")),F+=C?": ".concat(C):".";var z=i.name==="rejects"?"rejection":"exception";R({actual:void 0,expected:f,operator:i.name,message:"Missing expected ".concat(z).concat(F),stackStartFn:i})}if(f&&!ue(p,f,C,i))throw p}function ne(i,p,f,C){if(p!==T){if(typeof f=="string"&&(C=f,f=void 0),!f||ue(p,f)){var F=C?": ".concat(C):".",z=i.name==="doesNotReject"?"rejection":"exception";R({actual:p,expected:f,operator:i.name,message:"Got unwanted ".concat(z).concat(F,`
`)+'Actual message: "'.concat(p&&p.message,'"'),stackStartFn:i})}throw p}}u.throws=function i(p){for(var f=arguments.length,C=new Array(f>1?f-1:0),F=1;F<f;F++)C[F-1]=arguments[F];W.apply(void 0,[i,re(p)].concat(C))},u.rejects=function i(p){for(var f=arguments.length,C=new Array(f>1?f-1:0),F=1;F<f;F++)C[F-1]=arguments[F];return H(p).then(function(z){return W.apply(void 0,[i,z].concat(C))})},u.doesNotThrow=function i(p){for(var f=arguments.length,C=new Array(f>1?f-1:0),F=1;F<f;F++)C[F-1]=arguments[F];ne.apply(void 0,[i,re(p)].concat(C))},u.doesNotReject=function i(p){for(var f=arguments.length,C=new Array(f>1?f-1:0),F=1;F<f;F++)C[F-1]=arguments[F];return H(p).then(function(z){return ne.apply(void 0,[i,z].concat(C))})},u.ifError=function i(p){if(p!=null){var f="ifError got unwanted exception: ";t(p)==="object"&&typeof p.message=="string"?p.message.length===0&&p.constructor?f+=p.constructor.name:f+=p.message:f+=w(p);var C=new a({actual:p,expected:null,operator:"ifError",message:f,stackStartFn:i}),F=p.stack;if(typeof F=="string"){var z=F.split(`
`);z.shift();for(var Q=C.stack.split(`
`),L=0;L<z.length;L++){var N=Q.indexOf(z[L]);if(N!==-1){Q=Q.slice(0,N);break}}C.stack="".concat(Q.join(`
`),`
`).concat(z.join(`
`))}throw C}};function j(i,p,f,C,F){if(!B(p))throw new _("regexp","RegExp",p);var z=F==="match";if(typeof i!="string"||h(p,i)!==z){if(f instanceof Error)throw f;var Q=!f;f=f||(typeof i!="string"?'The "string" argument must be of type string. Received type '+"".concat(t(i)," (").concat(w(i),")"):(z?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(w(p),`. Input:

`).concat(w(i),`
`));var L=new a({actual:i,expected:p,message:f,operator:F,stackStartFn:C});throw L.generatedMessage=Q,L}}u.match=function i(p,f,C){j(p,f,C,i,"match")},u.doesNotMatch=function i(p,f,C){j(p,f,C,i,"doesNotMatch")};function s(){for(var i=arguments.length,p=new Array(i),f=0;f<i;f++)p[f]=arguments[f];D.apply(void 0,[s,p.length].concat(p))}return u.strict=P(s,u,{equal:u.strictEqual,deepEqual:u.deepStrictEqual,notEqual:u.notStrictEqual,notDeepEqual:u.notDeepStrictEqual}),u.strict.strict=u.strict,assert.exports}var zstream,hasRequiredZstream;function requireZstream(){if(hasRequiredZstream)return zstream;hasRequiredZstream=1;function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return zstream=t,zstream}var deflate={},common={},hasRequiredCommon;function requireCommon(){return hasRequiredCommon||(hasRequiredCommon=1,function(t){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(m,_){return Object.prototype.hasOwnProperty.call(m,_)}t.assign=function(m){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var k=_.shift();if(k){if(typeof k!="object")throw new TypeError(k+"must be non-object");for(var g in k)n(k,g)&&(m[g]=k[g])}}return m},t.shrinkBuf=function(m,_){return m.length===_?m:m.subarray?m.subarray(0,_):(m.length=_,m)};var r={arraySet:function(m,_,k,g,v){if(_.subarray&&m.subarray){m.set(_.subarray(k,k+g),v);return}for(var a=0;a<g;a++)m[v+a]=_[k+a]},flattenChunks:function(m){var _,k,g,v,a,S;for(g=0,_=0,k=m.length;_<k;_++)g+=m[_].length;for(S=new Uint8Array(g),v=0,_=0,k=m.length;_<k;_++)a=m[_],S.set(a,v),v+=a.length;return S}},c={arraySet:function(m,_,k,g,v){for(var a=0;a<g;a++)m[v+a]=_[k+a]},flattenChunks:function(m){return[].concat.apply([],m)}};t.setTyped=function(m){m?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,c))},t.setTyped(e)}(common)),common}var trees={},hasRequiredTrees;function requireTrees(){if(hasRequiredTrees)return trees;hasRequiredTrees=1;var t=requireCommon(),e=4,n=0,r=1,c=2;function m($){for(var be=$.length;--be>=0;)$[be]=0}var _=0,k=1,g=2,v=3,a=258,S=29,w=256,I=w+1+S,M=30,B=19,P=2*I+1,o=15,h=16,x=7,b=256,l=16,y=17,u=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],X=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=512,q=new Array((I+2)*2);m(q);var oe=new Array(M*2);m(oe);var ae=new Array(E);m(ae);var ue=new Array(a-v+1);m(ue);var re=new Array(S);m(re);var pe=new Array(M);m(pe);function H($,be,Me,Le,ee){this.static_tree=$,this.extra_bits=be,this.extra_base=Me,this.elems=Le,this.max_length=ee,this.has_stree=$&&$.length}var W,ne,j;function s($,be){this.dyn_tree=$,this.max_code=0,this.stat_desc=be}function i($){return $<256?ae[$]:ae[256+($>>>7)]}function p($,be){$.pending_buf[$.pending++]=be&255,$.pending_buf[$.pending++]=be>>>8&255}function f($,be,Me){$.bi_valid>h-Me?($.bi_buf|=be<<$.bi_valid&65535,p($,$.bi_buf),$.bi_buf=be>>h-$.bi_valid,$.bi_valid+=Me-h):($.bi_buf|=be<<$.bi_valid&65535,$.bi_valid+=Me)}function C($,be,Me){f($,Me[be*2],Me[be*2+1])}function F($,be){var Me=0;do Me|=$&1,$>>>=1,Me<<=1;while(--be>0);return Me>>>1}function z($){$.bi_valid===16?(p($,$.bi_buf),$.bi_buf=0,$.bi_valid=0):$.bi_valid>=8&&($.pending_buf[$.pending++]=$.bi_buf&255,$.bi_buf>>=8,$.bi_valid-=8)}function Q($,be){var Me=be.dyn_tree,Le=be.max_code,ee=be.stat_desc.static_tree,ie=be.stat_desc.has_stree,O=be.stat_desc.extra_bits,we=be.stat_desc.extra_base,qe=be.stat_desc.max_length,d,G,ce,U,le,ye,Ie=0;for(U=0;U<=o;U++)$.bl_count[U]=0;for(Me[$.heap[$.heap_max]*2+1]=0,d=$.heap_max+1;d<P;d++)G=$.heap[d],U=Me[Me[G*2+1]*2+1]+1,U>qe&&(U=qe,Ie++),Me[G*2+1]=U,!(G>Le)&&($.bl_count[U]++,le=0,G>=we&&(le=O[G-we]),ye=Me[G*2],$.opt_len+=ye*(U+le),ie&&($.static_len+=ye*(ee[G*2+1]+le)));if(Ie!==0){do{for(U=qe-1;$.bl_count[U]===0;)U--;$.bl_count[U]--,$.bl_count[U+1]+=2,$.bl_count[qe]--,Ie-=2}while(Ie>0);for(U=qe;U!==0;U--)for(G=$.bl_count[U];G!==0;)ce=$.heap[--d],!(ce>Le)&&(Me[ce*2+1]!==U&&($.opt_len+=(U-Me[ce*2+1])*Me[ce*2],Me[ce*2+1]=U),G--)}}function L($,be,Me){var Le=new Array(o+1),ee=0,ie,O;for(ie=1;ie<=o;ie++)Le[ie]=ee=ee+Me[ie-1]<<1;for(O=0;O<=be;O++){var we=$[O*2+1];we!==0&&($[O*2]=F(Le[we]++,we))}}function N(){var $,be,Me,Le,ee,ie=new Array(o+1);for(Me=0,Le=0;Le<S-1;Le++)for(re[Le]=Me,$=0;$<1<<T[Le];$++)ue[Me++]=Le;for(ue[Me-1]=Le,ee=0,Le=0;Le<16;Le++)for(pe[Le]=ee,$=0;$<1<<R[Le];$++)ae[ee++]=Le;for(ee>>=7;Le<M;Le++)for(pe[Le]=ee<<7,$=0;$<1<<R[Le]-7;$++)ae[256+ee++]=Le;for(be=0;be<=o;be++)ie[be]=0;for($=0;$<=143;)q[$*2+1]=8,$++,ie[8]++;for(;$<=255;)q[$*2+1]=9,$++,ie[9]++;for(;$<=279;)q[$*2+1]=7,$++,ie[7]++;for(;$<=287;)q[$*2+1]=8,$++,ie[8]++;for(L(q,I+1,ie),$=0;$<M;$++)oe[$*2+1]=5,oe[$*2]=F($,5);W=new H(q,T,w+1,I,o),ne=new H(oe,R,0,M,o),j=new H(new Array(0),X,0,B,x)}function se($){var be;for(be=0;be<I;be++)$.dyn_ltree[be*2]=0;for(be=0;be<M;be++)$.dyn_dtree[be*2]=0;for(be=0;be<B;be++)$.bl_tree[be*2]=0;$.dyn_ltree[b*2]=1,$.opt_len=$.static_len=0,$.last_lit=$.matches=0}function ge($){$.bi_valid>8?p($,$.bi_buf):$.bi_valid>0&&($.pending_buf[$.pending++]=$.bi_buf),$.bi_buf=0,$.bi_valid=0}function Ae($,be,Me,Le){ge($),p($,Me),p($,~Me),t.arraySet($.pending_buf,$.window,be,Me,$.pending),$.pending+=Me}function he($,be,Me,Le){var ee=be*2,ie=Me*2;return $[ee]<$[ie]||$[ee]===$[ie]&&Le[be]<=Le[Me]}function de($,be,Me){for(var Le=$.heap[Me],ee=Me<<1;ee<=$.heap_len&&(ee<$.heap_len&&he(be,$.heap[ee+1],$.heap[ee],$.depth)&&ee++,!he(be,Le,$.heap[ee],$.depth));)$.heap[Me]=$.heap[ee],Me=ee,ee<<=1;$.heap[Me]=Le}function K($,be,Me){var Le,ee,ie=0,O,we;if($.last_lit!==0)do Le=$.pending_buf[$.d_buf+ie*2]<<8|$.pending_buf[$.d_buf+ie*2+1],ee=$.pending_buf[$.l_buf+ie],ie++,Le===0?C($,ee,be):(O=ue[ee],C($,O+w+1,be),we=T[O],we!==0&&(ee-=re[O],f($,ee,we)),Le--,O=i(Le),C($,O,Me),we=R[O],we!==0&&(Le-=pe[O],f($,Le,we)));while(ie<$.last_lit);C($,b,be)}function V($,be){var Me=be.dyn_tree,Le=be.stat_desc.static_tree,ee=be.stat_desc.has_stree,ie=be.stat_desc.elems,O,we,qe=-1,d;for($.heap_len=0,$.heap_max=P,O=0;O<ie;O++)Me[O*2]!==0?($.heap[++$.heap_len]=qe=O,$.depth[O]=0):Me[O*2+1]=0;for(;$.heap_len<2;)d=$.heap[++$.heap_len]=qe<2?++qe:0,Me[d*2]=1,$.depth[d]=0,$.opt_len--,ee&&($.static_len-=Le[d*2+1]);for(be.max_code=qe,O=$.heap_len>>1;O>=1;O--)de($,Me,O);d=ie;do O=$.heap[1],$.heap[1]=$.heap[$.heap_len--],de($,Me,1),we=$.heap[1],$.heap[--$.heap_max]=O,$.heap[--$.heap_max]=we,Me[d*2]=Me[O*2]+Me[we*2],$.depth[d]=($.depth[O]>=$.depth[we]?$.depth[O]:$.depth[we])+1,Me[O*2+1]=Me[we*2+1]=d,$.heap[1]=d++,de($,Me,1);while($.heap_len>=2);$.heap[--$.heap_max]=$.heap[1],Q($,be),L(Me,qe,$.bl_count)}function me($,be,Me){var Le,ee=-1,ie,O=be[0*2+1],we=0,qe=7,d=4;for(O===0&&(qe=138,d=3),be[(Me+1)*2+1]=65535,Le=0;Le<=Me;Le++)ie=O,O=be[(Le+1)*2+1],!(++we<qe&&ie===O)&&(we<d?$.bl_tree[ie*2]+=we:ie!==0?(ie!==ee&&$.bl_tree[ie*2]++,$.bl_tree[l*2]++):we<=10?$.bl_tree[y*2]++:$.bl_tree[u*2]++,we=0,ee=ie,O===0?(qe=138,d=3):ie===O?(qe=6,d=3):(qe=7,d=4))}function _e($,be,Me){var Le,ee=-1,ie,O=be[0*2+1],we=0,qe=7,d=4;for(O===0&&(qe=138,d=3),Le=0;Le<=Me;Le++)if(ie=O,O=be[(Le+1)*2+1],!(++we<qe&&ie===O)){if(we<d)do C($,ie,$.bl_tree);while(--we!==0);else ie!==0?(ie!==ee&&(C($,ie,$.bl_tree),we--),C($,l,$.bl_tree),f($,we-3,2)):we<=10?(C($,y,$.bl_tree),f($,we-3,3)):(C($,u,$.bl_tree),f($,we-11,7));we=0,ee=ie,O===0?(qe=138,d=3):ie===O?(qe=6,d=3):(qe=7,d=4)}}function Ce($){var be;for(me($,$.dyn_ltree,$.l_desc.max_code),me($,$.dyn_dtree,$.d_desc.max_code),V($,$.bl_desc),be=B-1;be>=3&&$.bl_tree[D[be]*2+1]===0;be--);return $.opt_len+=3*(be+1)+5+5+4,be}function ke($,be,Me,Le){var ee;for(f($,be-257,5),f($,Me-1,5),f($,Le-4,4),ee=0;ee<Le;ee++)f($,$.bl_tree[D[ee]*2+1],3);_e($,$.dyn_ltree,be-1),_e($,$.dyn_dtree,Me-1)}function te($){var be=4093624447,Me;for(Me=0;Me<=31;Me++,be>>>=1)if(be&1&&$.dyn_ltree[Me*2]!==0)return n;if($.dyn_ltree[9*2]!==0||$.dyn_ltree[10*2]!==0||$.dyn_ltree[13*2]!==0)return r;for(Me=32;Me<w;Me++)if($.dyn_ltree[Me*2]!==0)return r;return n}var J=!1;function Se($){J||(N(),J=!0),$.l_desc=new s($.dyn_ltree,W),$.d_desc=new s($.dyn_dtree,ne),$.bl_desc=new s($.bl_tree,j),$.bi_buf=0,$.bi_valid=0,se($)}function Te($,be,Me,Le){f($,(_<<1)+(Le?1:0),3),Ae($,be,Me)}function De($){f($,k<<1,3),C($,b,q),z($)}function Ne($,be,Me,Le){var ee,ie,O=0;$.level>0?($.strm.data_type===c&&($.strm.data_type=te($)),V($,$.l_desc),V($,$.d_desc),O=Ce($),ee=$.opt_len+3+7>>>3,ie=$.static_len+3+7>>>3,ie<=ee&&(ee=ie)):ee=ie=Me+5,Me+4<=ee&&be!==-1?Te($,be,Me,Le):$.strategy===e||ie===ee?(f($,(k<<1)+(Le?1:0),3),K($,q,oe)):(f($,(g<<1)+(Le?1:0),3),ke($,$.l_desc.max_code+1,$.d_desc.max_code+1,O+1),K($,$.dyn_ltree,$.dyn_dtree)),se($),Le&&ge($)}function Ue($,be,Me){return $.pending_buf[$.d_buf+$.last_lit*2]=be>>>8&255,$.pending_buf[$.d_buf+$.last_lit*2+1]=be&255,$.pending_buf[$.l_buf+$.last_lit]=Me&255,$.last_lit++,be===0?$.dyn_ltree[Me*2]++:($.matches++,be--,$.dyn_ltree[(ue[Me]+w+1)*2]++,$.dyn_dtree[i(be)*2]++),$.last_lit===$.lit_bufsize-1}return trees._tr_init=Se,trees._tr_stored_block=Te,trees._tr_flush_block=Ne,trees._tr_tally=Ue,trees._tr_align=De,trees}var adler32_1,hasRequiredAdler32;function requireAdler32(){if(hasRequiredAdler32)return adler32_1;hasRequiredAdler32=1;function t(e,n,r,c){for(var m=e&65535|0,_=e>>>16&65535|0,k=0;r!==0;){k=r>2e3?2e3:r,r-=k;do m=m+n[c++]|0,_=_+m|0;while(--k);m%=65521,_%=65521}return m|_<<16|0}return adler32_1=t,adler32_1}var crc32_1,hasRequiredCrc32;function requireCrc32(){if(hasRequiredCrc32)return crc32_1;hasRequiredCrc32=1;function t(){for(var r,c=[],m=0;m<256;m++){r=m;for(var _=0;_<8;_++)r=r&1?3988292384^r>>>1:r>>>1;c[m]=r}return c}var e=t();function n(r,c,m,_){var k=e,g=_+m;r^=-1;for(var v=_;v<g;v++)r=r>>>8^k[(r^c[v])&255];return r^-1}return crc32_1=n,crc32_1}var messages,hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),messages}var hasRequiredDeflate;function requireDeflate(){if(hasRequiredDeflate)return deflate;hasRequiredDeflate=1;var t=requireCommon(),e=requireTrees(),n=requireAdler32(),r=requireCrc32(),c=requireMessages(),m=0,_=1,k=3,g=4,v=5,a=0,S=1,w=-2,I=-3,M=-5,B=-1,P=1,o=2,h=3,x=4,b=0,l=2,y=8,u=9,T=15,R=8,X=29,D=256,E=D+1+X,q=30,oe=19,ae=2*E+1,ue=15,re=3,pe=258,H=pe+re+1,W=32,ne=42,j=69,s=73,i=91,p=103,f=113,C=666,F=1,z=2,Q=3,L=4,N=3;function se(d,G){return d.msg=c[G],G}function ge(d){return(d<<1)-(d>4?9:0)}function Ae(d){for(var G=d.length;--G>=0;)d[G]=0}function he(d){var G=d.state,ce=G.pending;ce>d.avail_out&&(ce=d.avail_out),ce!==0&&(t.arraySet(d.output,G.pending_buf,G.pending_out,ce,d.next_out),d.next_out+=ce,G.pending_out+=ce,d.total_out+=ce,d.avail_out-=ce,G.pending-=ce,G.pending===0&&(G.pending_out=0))}function de(d,G){e._tr_flush_block(d,d.block_start>=0?d.block_start:-1,d.strstart-d.block_start,G),d.block_start=d.strstart,he(d.strm)}function K(d,G){d.pending_buf[d.pending++]=G}function V(d,G){d.pending_buf[d.pending++]=G>>>8&255,d.pending_buf[d.pending++]=G&255}function me(d,G,ce,U){var le=d.avail_in;return le>U&&(le=U),le===0?0:(d.avail_in-=le,t.arraySet(G,d.input,d.next_in,le,ce),d.state.wrap===1?d.adler=n(d.adler,G,le,ce):d.state.wrap===2&&(d.adler=r(d.adler,G,le,ce)),d.next_in+=le,d.total_in+=le,le)}function _e(d,G){var ce=d.max_chain_length,U=d.strstart,le,ye,Ie=d.prev_length,Z=d.nice_match,Y=d.strstart>d.w_size-H?d.strstart-(d.w_size-H):0,fe=d.window,xe=d.w_mask,Pe=d.prev,Oe=d.strstart+pe,Fe=fe[U+Ie-1],He=fe[U+Ie];d.prev_length>=d.good_match&&(ce>>=2),Z>d.lookahead&&(Z=d.lookahead);do if(le=G,!(fe[le+Ie]!==He||fe[le+Ie-1]!==Fe||fe[le]!==fe[U]||fe[++le]!==fe[U+1])){U+=2,le++;do;while(fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&fe[++U]===fe[++le]&&U<Oe);if(ye=pe-(Oe-U),U=Oe-pe,ye>Ie){if(d.match_start=G,Ie=ye,ye>=Z)break;Fe=fe[U+Ie-1],He=fe[U+Ie]}}while((G=Pe[G&xe])>Y&&--ce!==0);return Ie<=d.lookahead?Ie:d.lookahead}function Ce(d){var G=d.w_size,ce,U,le,ye,Ie;do{if(ye=d.window_size-d.lookahead-d.strstart,d.strstart>=G+(G-H)){t.arraySet(d.window,d.window,G,G,0),d.match_start-=G,d.strstart-=G,d.block_start-=G,U=d.hash_size,ce=U;do le=d.head[--ce],d.head[ce]=le>=G?le-G:0;while(--U);U=G,ce=U;do le=d.prev[--ce],d.prev[ce]=le>=G?le-G:0;while(--U);ye+=G}if(d.strm.avail_in===0)break;if(U=me(d.strm,d.window,d.strstart+d.lookahead,ye),d.lookahead+=U,d.lookahead+d.insert>=re)for(Ie=d.strstart-d.insert,d.ins_h=d.window[Ie],d.ins_h=(d.ins_h<<d.hash_shift^d.window[Ie+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[Ie+re-1])&d.hash_mask,d.prev[Ie&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=Ie,Ie++,d.insert--,!(d.lookahead+d.insert<re)););}while(d.lookahead<H&&d.strm.avail_in!==0)}function ke(d,G){var ce=65535;for(ce>d.pending_buf_size-5&&(ce=d.pending_buf_size-5);;){if(d.lookahead<=1){if(Ce(d),d.lookahead===0&&G===m)return F;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var U=d.block_start+ce;if((d.strstart===0||d.strstart>=U)&&(d.lookahead=d.strstart-U,d.strstart=U,de(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-H&&(de(d,!1),d.strm.avail_out===0))return F}return d.insert=0,G===g?(de(d,!0),d.strm.avail_out===0?Q:L):(d.strstart>d.block_start&&(de(d,!1),d.strm.avail_out===0),F)}function te(d,G){for(var ce,U;;){if(d.lookahead<H){if(Ce(d),d.lookahead<H&&G===m)return F;if(d.lookahead===0)break}if(ce=0,d.lookahead>=re&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+re-1])&d.hash_mask,ce=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),ce!==0&&d.strstart-ce<=d.w_size-H&&(d.match_length=_e(d,ce)),d.match_length>=re)if(U=e._tr_tally(d,d.strstart-d.match_start,d.match_length-re),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=re){d.match_length--;do d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+re-1])&d.hash_mask,ce=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart;while(--d.match_length!==0);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else U=e._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(U&&(de(d,!1),d.strm.avail_out===0))return F}return d.insert=d.strstart<re-1?d.strstart:re-1,G===g?(de(d,!0),d.strm.avail_out===0?Q:L):d.last_lit&&(de(d,!1),d.strm.avail_out===0)?F:z}function J(d,G){for(var ce,U,le;;){if(d.lookahead<H){if(Ce(d),d.lookahead<H&&G===m)return F;if(d.lookahead===0)break}if(ce=0,d.lookahead>=re&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+re-1])&d.hash_mask,ce=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=re-1,ce!==0&&d.prev_length<d.max_lazy_match&&d.strstart-ce<=d.w_size-H&&(d.match_length=_e(d,ce),d.match_length<=5&&(d.strategy===P||d.match_length===re&&d.strstart-d.match_start>4096)&&(d.match_length=re-1)),d.prev_length>=re&&d.match_length<=d.prev_length){le=d.strstart+d.lookahead-re,U=e._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-re),d.lookahead-=d.prev_length-1,d.prev_length-=2;do++d.strstart<=le&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+re-1])&d.hash_mask,ce=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart);while(--d.prev_length!==0);if(d.match_available=0,d.match_length=re-1,d.strstart++,U&&(de(d,!1),d.strm.avail_out===0))return F}else if(d.match_available){if(U=e._tr_tally(d,0,d.window[d.strstart-1]),U&&de(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return F}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(U=e._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<re-1?d.strstart:re-1,G===g?(de(d,!0),d.strm.avail_out===0?Q:L):d.last_lit&&(de(d,!1),d.strm.avail_out===0)?F:z}function Se(d,G){for(var ce,U,le,ye,Ie=d.window;;){if(d.lookahead<=pe){if(Ce(d),d.lookahead<=pe&&G===m)return F;if(d.lookahead===0)break}if(d.match_length=0,d.lookahead>=re&&d.strstart>0&&(le=d.strstart-1,U=Ie[le],U===Ie[++le]&&U===Ie[++le]&&U===Ie[++le])){ye=d.strstart+pe;do;while(U===Ie[++le]&&U===Ie[++le]&&U===Ie[++le]&&U===Ie[++le]&&U===Ie[++le]&&U===Ie[++le]&&U===Ie[++le]&&U===Ie[++le]&&le<ye);d.match_length=pe-(ye-le),d.match_length>d.lookahead&&(d.match_length=d.lookahead)}if(d.match_length>=re?(ce=e._tr_tally(d,1,d.match_length-re),d.lookahead-=d.match_length,d.strstart+=d.match_length,d.match_length=0):(ce=e._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++),ce&&(de(d,!1),d.strm.avail_out===0))return F}return d.insert=0,G===g?(de(d,!0),d.strm.avail_out===0?Q:L):d.last_lit&&(de(d,!1),d.strm.avail_out===0)?F:z}function Te(d,G){for(var ce;;){if(d.lookahead===0&&(Ce(d),d.lookahead===0)){if(G===m)return F;break}if(d.match_length=0,ce=e._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++,ce&&(de(d,!1),d.strm.avail_out===0))return F}return d.insert=0,G===g?(de(d,!0),d.strm.avail_out===0?Q:L):d.last_lit&&(de(d,!1),d.strm.avail_out===0)?F:z}function De(d,G,ce,U,le){this.good_length=d,this.max_lazy=G,this.nice_length=ce,this.max_chain=U,this.func=le}var Ne;Ne=[new De(0,0,0,0,ke),new De(4,4,8,4,te),new De(4,5,16,8,te),new De(4,6,32,32,te),new De(4,4,16,16,J),new De(8,16,32,32,J),new De(8,16,128,128,J),new De(8,32,128,256,J),new De(32,128,258,1024,J),new De(32,258,258,4096,J)];function Ue(d){d.window_size=2*d.w_size,Ae(d.head),d.max_lazy_match=Ne[d.level].max_lazy,d.good_match=Ne[d.level].good_length,d.nice_match=Ne[d.level].nice_length,d.max_chain_length=Ne[d.level].max_chain,d.strstart=0,d.block_start=0,d.lookahead=0,d.insert=0,d.match_length=d.prev_length=re-1,d.match_available=0,d.ins_h=0}function $(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new t.Buf16(ae*2),this.dyn_dtree=new t.Buf16((2*q+1)*2),this.bl_tree=new t.Buf16((2*oe+1)*2),Ae(this.dyn_ltree),Ae(this.dyn_dtree),Ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new t.Buf16(ue+1),this.heap=new t.Buf16(2*E+1),Ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new t.Buf16(2*E+1),Ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function be(d){var G;return!d||!d.state?se(d,w):(d.total_in=d.total_out=0,d.data_type=l,G=d.state,G.pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?ne:f,d.adler=G.wrap===2?0:1,G.last_flush=m,e._tr_init(G),a)}function Me(d){var G=be(d);return G===a&&Ue(d.state),G}function Le(d,G){return!d||!d.state||d.state.wrap!==2?w:(d.state.gzhead=G,a)}function ee(d,G,ce,U,le,ye){if(!d)return w;var Ie=1;if(G===B&&(G=6),U<0?(Ie=0,U=-U):U>15&&(Ie=2,U-=16),le<1||le>u||ce!==y||U<8||U>15||G<0||G>9||ye<0||ye>x)return se(d,w);U===8&&(U=9);var Z=new $;return d.state=Z,Z.strm=d,Z.wrap=Ie,Z.gzhead=null,Z.w_bits=U,Z.w_size=1<<Z.w_bits,Z.w_mask=Z.w_size-1,Z.hash_bits=le+7,Z.hash_size=1<<Z.hash_bits,Z.hash_mask=Z.hash_size-1,Z.hash_shift=~~((Z.hash_bits+re-1)/re),Z.window=new t.Buf8(Z.w_size*2),Z.head=new t.Buf16(Z.hash_size),Z.prev=new t.Buf16(Z.w_size),Z.lit_bufsize=1<<le+6,Z.pending_buf_size=Z.lit_bufsize*4,Z.pending_buf=new t.Buf8(Z.pending_buf_size),Z.d_buf=1*Z.lit_bufsize,Z.l_buf=3*Z.lit_bufsize,Z.level=G,Z.strategy=ye,Z.method=ce,Me(d)}function ie(d,G){return ee(d,G,y,T,R,b)}function O(d,G){var ce,U,le,ye;if(!d||!d.state||G>v||G<0)return d?se(d,w):w;if(U=d.state,!d.output||!d.input&&d.avail_in!==0||U.status===C&&G!==g)return se(d,d.avail_out===0?M:w);if(U.strm=d,ce=U.last_flush,U.last_flush=G,U.status===ne)if(U.wrap===2)d.adler=0,K(U,31),K(U,139),K(U,8),U.gzhead?(K(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),K(U,U.gzhead.time&255),K(U,U.gzhead.time>>8&255),K(U,U.gzhead.time>>16&255),K(U,U.gzhead.time>>24&255),K(U,U.level===9?2:U.strategy>=o||U.level<2?4:0),K(U,U.gzhead.os&255),U.gzhead.extra&&U.gzhead.extra.length&&(K(U,U.gzhead.extra.length&255),K(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(d.adler=r(d.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=j):(K(U,0),K(U,0),K(U,0),K(U,0),K(U,0),K(U,U.level===9?2:U.strategy>=o||U.level<2?4:0),K(U,N),U.status=f);else{var Ie=y+(U.w_bits-8<<4)<<8,Z=-1;U.strategy>=o||U.level<2?Z=0:U.level<6?Z=1:U.level===6?Z=2:Z=3,Ie|=Z<<6,U.strstart!==0&&(Ie|=W),Ie+=31-Ie%31,U.status=f,V(U,Ie),U.strstart!==0&&(V(U,d.adler>>>16),V(U,d.adler&65535)),d.adler=1}if(U.status===j)if(U.gzhead.extra){for(le=U.pending;U.gzindex<(U.gzhead.extra.length&65535)&&!(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>le&&(d.adler=r(d.adler,U.pending_buf,U.pending-le,le)),he(d),le=U.pending,U.pending===U.pending_buf_size));)K(U,U.gzhead.extra[U.gzindex]&255),U.gzindex++;U.gzhead.hcrc&&U.pending>le&&(d.adler=r(d.adler,U.pending_buf,U.pending-le,le)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=s)}else U.status=s;if(U.status===s)if(U.gzhead.name){le=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>le&&(d.adler=r(d.adler,U.pending_buf,U.pending-le,le)),he(d),le=U.pending,U.pending===U.pending_buf_size)){ye=1;break}U.gzindex<U.gzhead.name.length?ye=U.gzhead.name.charCodeAt(U.gzindex++)&255:ye=0,K(U,ye)}while(ye!==0);U.gzhead.hcrc&&U.pending>le&&(d.adler=r(d.adler,U.pending_buf,U.pending-le,le)),ye===0&&(U.gzindex=0,U.status=i)}else U.status=i;if(U.status===i)if(U.gzhead.comment){le=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>le&&(d.adler=r(d.adler,U.pending_buf,U.pending-le,le)),he(d),le=U.pending,U.pending===U.pending_buf_size)){ye=1;break}U.gzindex<U.gzhead.comment.length?ye=U.gzhead.comment.charCodeAt(U.gzindex++)&255:ye=0,K(U,ye)}while(ye!==0);U.gzhead.hcrc&&U.pending>le&&(d.adler=r(d.adler,U.pending_buf,U.pending-le,le)),ye===0&&(U.status=p)}else U.status=p;if(U.status===p&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&he(d),U.pending+2<=U.pending_buf_size&&(K(U,d.adler&255),K(U,d.adler>>8&255),d.adler=0,U.status=f)):U.status=f),U.pending!==0){if(he(d),d.avail_out===0)return U.last_flush=-1,a}else if(d.avail_in===0&&ge(G)<=ge(ce)&&G!==g)return se(d,M);if(U.status===C&&d.avail_in!==0)return se(d,M);if(d.avail_in!==0||U.lookahead!==0||G!==m&&U.status!==C){var Y=U.strategy===o?Te(U,G):U.strategy===h?Se(U,G):Ne[U.level].func(U,G);if((Y===Q||Y===L)&&(U.status=C),Y===F||Y===Q)return d.avail_out===0&&(U.last_flush=-1),a;if(Y===z&&(G===_?e._tr_align(U):G!==v&&(e._tr_stored_block(U,0,0,!1),G===k&&(Ae(U.head),U.lookahead===0&&(U.strstart=0,U.block_start=0,U.insert=0))),he(d),d.avail_out===0))return U.last_flush=-1,a}return G!==g?a:U.wrap<=0?S:(U.wrap===2?(K(U,d.adler&255),K(U,d.adler>>8&255),K(U,d.adler>>16&255),K(U,d.adler>>24&255),K(U,d.total_in&255),K(U,d.total_in>>8&255),K(U,d.total_in>>16&255),K(U,d.total_in>>24&255)):(V(U,d.adler>>>16),V(U,d.adler&65535)),he(d),U.wrap>0&&(U.wrap=-U.wrap),U.pending!==0?a:S)}function we(d){var G;return!d||!d.state?w:(G=d.state.status,G!==ne&&G!==j&&G!==s&&G!==i&&G!==p&&G!==f&&G!==C?se(d,w):(d.state=null,G===f?se(d,I):a))}function qe(d,G){var ce=G.length,U,le,ye,Ie,Z,Y,fe,xe;if(!d||!d.state||(U=d.state,Ie=U.wrap,Ie===2||Ie===1&&U.status!==ne||U.lookahead))return w;for(Ie===1&&(d.adler=n(d.adler,G,ce,0)),U.wrap=0,ce>=U.w_size&&(Ie===0&&(Ae(U.head),U.strstart=0,U.block_start=0,U.insert=0),xe=new t.Buf8(U.w_size),t.arraySet(xe,G,ce-U.w_size,U.w_size,0),G=xe,ce=U.w_size),Z=d.avail_in,Y=d.next_in,fe=d.input,d.avail_in=ce,d.next_in=0,d.input=G,Ce(U);U.lookahead>=re;){le=U.strstart,ye=U.lookahead-(re-1);do U.ins_h=(U.ins_h<<U.hash_shift^U.window[le+re-1])&U.hash_mask,U.prev[le&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=le,le++;while(--ye);U.strstart=le,U.lookahead=re-1,Ce(U)}return U.strstart+=U.lookahead,U.block_start=U.strstart,U.insert=U.lookahead,U.lookahead=0,U.match_length=U.prev_length=re-1,U.match_available=0,d.next_in=Y,d.input=fe,d.avail_in=Z,U.wrap=Ie,a}return deflate.deflateInit=ie,deflate.deflateInit2=ee,deflate.deflateReset=Me,deflate.deflateResetKeep=be,deflate.deflateSetHeader=Le,deflate.deflate=O,deflate.deflateEnd=we,deflate.deflateSetDictionary=qe,deflate.deflateInfo="pako deflate (from Nodeca project)",deflate}var inflate={},inffast,hasRequiredInffast;function requireInffast(){if(hasRequiredInffast)return inffast;hasRequiredInffast=1;var t=30,e=12;return inffast=function(r,c){var m,_,k,g,v,a,S,w,I,M,B,P,o,h,x,b,l,y,u,T,R,X,D,E,q;m=r.state,_=r.next_in,E=r.input,k=_+(r.avail_in-5),g=r.next_out,q=r.output,v=g-(c-r.avail_out),a=g+(r.avail_out-257),S=m.dmax,w=m.wsize,I=m.whave,M=m.wnext,B=m.window,P=m.hold,o=m.bits,h=m.lencode,x=m.distcode,b=(1<<m.lenbits)-1,l=(1<<m.distbits)-1;e:do{o<15&&(P+=E[_++]<<o,o+=8,P+=E[_++]<<o,o+=8),y=h[P&b];t:for(;;){if(u=y>>>24,P>>>=u,o-=u,u=y>>>16&255,u===0)q[g++]=y&65535;else if(u&16){T=y&65535,u&=15,u&&(o<u&&(P+=E[_++]<<o,o+=8),T+=P&(1<<u)-1,P>>>=u,o-=u),o<15&&(P+=E[_++]<<o,o+=8,P+=E[_++]<<o,o+=8),y=x[P&l];r:for(;;){if(u=y>>>24,P>>>=u,o-=u,u=y>>>16&255,u&16){if(R=y&65535,u&=15,o<u&&(P+=E[_++]<<o,o+=8,o<u&&(P+=E[_++]<<o,o+=8)),R+=P&(1<<u)-1,R>S){r.msg="invalid distance too far back",m.mode=t;break e}if(P>>>=u,o-=u,u=g-v,R>u){if(u=R-u,u>I&&m.sane){r.msg="invalid distance too far back",m.mode=t;break e}if(X=0,D=B,M===0){if(X+=w-u,u<T){T-=u;do q[g++]=B[X++];while(--u);X=g-R,D=q}}else if(M<u){if(X+=w+M-u,u-=M,u<T){T-=u;do q[g++]=B[X++];while(--u);if(X=0,M<T){u=M,T-=u;do q[g++]=B[X++];while(--u);X=g-R,D=q}}}else if(X+=M-u,u<T){T-=u;do q[g++]=B[X++];while(--u);X=g-R,D=q}for(;T>2;)q[g++]=D[X++],q[g++]=D[X++],q[g++]=D[X++],T-=3;T&&(q[g++]=D[X++],T>1&&(q[g++]=D[X++]))}else{X=g-R;do q[g++]=q[X++],q[g++]=q[X++],q[g++]=q[X++],T-=3;while(T>2);T&&(q[g++]=q[X++],T>1&&(q[g++]=q[X++]))}}else if(u&64){r.msg="invalid distance code",m.mode=t;break e}else{y=x[(y&65535)+(P&(1<<u)-1)];continue r}break}}else if(u&64)if(u&32){m.mode=e;break e}else{r.msg="invalid literal/length code",m.mode=t;break e}else{y=h[(y&65535)+(P&(1<<u)-1)];continue t}break}}while(_<k&&g<a);T=o>>3,_-=T,o-=T<<3,P&=(1<<o)-1,r.next_in=_,r.next_out=g,r.avail_in=_<k?5+(k-_):5-(_-k),r.avail_out=g<a?257+(a-g):257-(g-a),m.hold=P,m.bits=o},inffast}var inftrees,hasRequiredInftrees;function requireInftrees(){if(hasRequiredInftrees)return inftrees;hasRequiredInftrees=1;var t=requireCommon(),e=15,n=852,r=592,c=0,m=1,_=2,k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return inftrees=function(w,I,M,B,P,o,h,x){var b=x.bits,l=0,y=0,u=0,T=0,R=0,X=0,D=0,E=0,q=0,oe=0,ae,ue,re,pe,H,W=null,ne=0,j,s=new t.Buf16(e+1),i=new t.Buf16(e+1),p=null,f=0,C,F,z;for(l=0;l<=e;l++)s[l]=0;for(y=0;y<B;y++)s[I[M+y]]++;for(R=b,T=e;T>=1&&s[T]===0;T--);if(R>T&&(R=T),T===0)return P[o++]=1<<24|64<<16|0,P[o++]=1<<24|64<<16|0,x.bits=1,0;for(u=1;u<T&&s[u]===0;u++);for(R<u&&(R=u),E=1,l=1;l<=e;l++)if(E<<=1,E-=s[l],E<0)return-1;if(E>0&&(w===c||T!==1))return-1;for(i[1]=0,l=1;l<e;l++)i[l+1]=i[l]+s[l];for(y=0;y<B;y++)I[M+y]!==0&&(h[i[I[M+y]]++]=y);if(w===c?(W=p=h,j=19):w===m?(W=k,ne-=257,p=g,f-=257,j=256):(W=v,p=a,j=-1),oe=0,y=0,l=u,H=o,X=R,D=0,re=-1,q=1<<R,pe=q-1,w===m&&q>n||w===_&&q>r)return 1;for(;;){C=l-D,h[y]<j?(F=0,z=h[y]):h[y]>j?(F=p[f+h[y]],z=W[ne+h[y]]):(F=96,z=0),ae=1<<l-D,ue=1<<X,u=ue;do ue-=ae,P[H+(oe>>D)+ue]=C<<24|F<<16|z|0;while(ue!==0);for(ae=1<<l-1;oe&ae;)ae>>=1;if(ae!==0?(oe&=ae-1,oe+=ae):oe=0,y++,--s[l]===0){if(l===T)break;l=I[M+h[y]]}if(l>R&&(oe&pe)!==re){for(D===0&&(D=R),H+=u,X=l-D,E=1<<X;X+D<T&&(E-=s[X+D],!(E<=0));)X++,E<<=1;if(q+=1<<X,w===m&&q>n||w===_&&q>r)return 1;re=oe&pe,P[re]=R<<24|X<<16|H-o|0}}return oe!==0&&(P[H+oe]=l-D<<24|64<<16|0),x.bits=R,0},inftrees}var hasRequiredInflate;function requireInflate(){if(hasRequiredInflate)return inflate;hasRequiredInflate=1;var t=requireCommon(),e=requireAdler32(),n=requireCrc32(),r=requireInffast(),c=requireInftrees(),m=0,_=1,k=2,g=4,v=5,a=6,S=0,w=1,I=2,M=-2,B=-3,P=-4,o=-5,h=8,x=1,b=2,l=3,y=4,u=5,T=6,R=7,X=8,D=9,E=10,q=11,oe=12,ae=13,ue=14,re=15,pe=16,H=17,W=18,ne=19,j=20,s=21,i=22,p=23,f=24,C=25,F=26,z=27,Q=28,L=29,N=30,se=31,ge=32,Ae=852,he=592,de=15,K=de;function V(ee){return(ee>>>24&255)+(ee>>>8&65280)+((ee&65280)<<8)+((ee&255)<<24)}function me(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _e(ee){var ie;return!ee||!ee.state?M:(ie=ee.state,ee.total_in=ee.total_out=ie.total=0,ee.msg="",ie.wrap&&(ee.adler=ie.wrap&1),ie.mode=x,ie.last=0,ie.havedict=0,ie.dmax=32768,ie.head=null,ie.hold=0,ie.bits=0,ie.lencode=ie.lendyn=new t.Buf32(Ae),ie.distcode=ie.distdyn=new t.Buf32(he),ie.sane=1,ie.back=-1,S)}function Ce(ee){var ie;return!ee||!ee.state?M:(ie=ee.state,ie.wsize=0,ie.whave=0,ie.wnext=0,_e(ee))}function ke(ee,ie){var O,we;return!ee||!ee.state||(we=ee.state,ie<0?(O=0,ie=-ie):(O=(ie>>4)+1,ie<48&&(ie&=15)),ie&&(ie<8||ie>15))?M:(we.window!==null&&we.wbits!==ie&&(we.window=null),we.wrap=O,we.wbits=ie,Ce(ee))}function te(ee,ie){var O,we;return ee?(we=new me,ee.state=we,we.window=null,O=ke(ee,ie),O!==S&&(ee.state=null),O):M}function J(ee){return te(ee,K)}var Se=!0,Te,De;function Ne(ee){if(Se){var ie;for(Te=new t.Buf32(512),De=new t.Buf32(32),ie=0;ie<144;)ee.lens[ie++]=8;for(;ie<256;)ee.lens[ie++]=9;for(;ie<280;)ee.lens[ie++]=7;for(;ie<288;)ee.lens[ie++]=8;for(c(_,ee.lens,0,288,Te,0,ee.work,{bits:9}),ie=0;ie<32;)ee.lens[ie++]=5;c(k,ee.lens,0,32,De,0,ee.work,{bits:5}),Se=!1}ee.lencode=Te,ee.lenbits=9,ee.distcode=De,ee.distbits=5}function Ue(ee,ie,O,we){var qe,d=ee.state;return d.window===null&&(d.wsize=1<<d.wbits,d.wnext=0,d.whave=0,d.window=new t.Buf8(d.wsize)),we>=d.wsize?(t.arraySet(d.window,ie,O-d.wsize,d.wsize,0),d.wnext=0,d.whave=d.wsize):(qe=d.wsize-d.wnext,qe>we&&(qe=we),t.arraySet(d.window,ie,O-we,qe,d.wnext),we-=qe,we?(t.arraySet(d.window,ie,O-we,we,0),d.wnext=we,d.whave=d.wsize):(d.wnext+=qe,d.wnext===d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=qe))),0}function $(ee,ie){var O,we,qe,d,G,ce,U,le,ye,Ie,Z,Y,fe,xe,Pe=0,Oe,Fe,He,We,Be,$e,je,ze,Ge=new t.Buf8(4),Ve,Xe,Ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ee||!ee.state||!ee.output||!ee.input&&ee.avail_in!==0)return M;O=ee.state,O.mode===oe&&(O.mode=ae),G=ee.next_out,qe=ee.output,U=ee.avail_out,d=ee.next_in,we=ee.input,ce=ee.avail_in,le=O.hold,ye=O.bits,Ie=ce,Z=U,ze=S;e:for(;;)switch(O.mode){case x:if(O.wrap===0){O.mode=ae;break}for(;ye<16;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(O.wrap&2&&le===35615){O.check=0,Ge[0]=le&255,Ge[1]=le>>>8&255,O.check=n(O.check,Ge,2,0),le=0,ye=0,O.mode=b;break}if(O.flags=0,O.head&&(O.head.done=!1),!(O.wrap&1)||(((le&255)<<8)+(le>>8))%31){ee.msg="incorrect header check",O.mode=N;break}if((le&15)!==h){ee.msg="unknown compression method",O.mode=N;break}if(le>>>=4,ye-=4,je=(le&15)+8,O.wbits===0)O.wbits=je;else if(je>O.wbits){ee.msg="invalid window size",O.mode=N;break}O.dmax=1<<je,ee.adler=O.check=1,O.mode=le&512?E:oe,le=0,ye=0;break;case b:for(;ye<16;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(O.flags=le,(O.flags&255)!==h){ee.msg="unknown compression method",O.mode=N;break}if(O.flags&57344){ee.msg="unknown header flags set",O.mode=N;break}O.head&&(O.head.text=le>>8&1),O.flags&512&&(Ge[0]=le&255,Ge[1]=le>>>8&255,O.check=n(O.check,Ge,2,0)),le=0,ye=0,O.mode=l;case l:for(;ye<32;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}O.head&&(O.head.time=le),O.flags&512&&(Ge[0]=le&255,Ge[1]=le>>>8&255,Ge[2]=le>>>16&255,Ge[3]=le>>>24&255,O.check=n(O.check,Ge,4,0)),le=0,ye=0,O.mode=y;case y:for(;ye<16;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}O.head&&(O.head.xflags=le&255,O.head.os=le>>8),O.flags&512&&(Ge[0]=le&255,Ge[1]=le>>>8&255,O.check=n(O.check,Ge,2,0)),le=0,ye=0,O.mode=u;case u:if(O.flags&1024){for(;ye<16;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}O.length=le,O.head&&(O.head.extra_len=le),O.flags&512&&(Ge[0]=le&255,Ge[1]=le>>>8&255,O.check=n(O.check,Ge,2,0)),le=0,ye=0}else O.head&&(O.head.extra=null);O.mode=T;case T:if(O.flags&1024&&(Y=O.length,Y>ce&&(Y=ce),Y&&(O.head&&(je=O.head.extra_len-O.length,O.head.extra||(O.head.extra=new Array(O.head.extra_len)),t.arraySet(O.head.extra,we,d,Y,je)),O.flags&512&&(O.check=n(O.check,we,Y,d)),ce-=Y,d+=Y,O.length-=Y),O.length))break e;O.length=0,O.mode=R;case R:if(O.flags&2048){if(ce===0)break e;Y=0;do je=we[d+Y++],O.head&&je&&O.length<65536&&(O.head.name+=String.fromCharCode(je));while(je&&Y<ce);if(O.flags&512&&(O.check=n(O.check,we,Y,d)),ce-=Y,d+=Y,je)break e}else O.head&&(O.head.name=null);O.length=0,O.mode=X;case X:if(O.flags&4096){if(ce===0)break e;Y=0;do je=we[d+Y++],O.head&&je&&O.length<65536&&(O.head.comment+=String.fromCharCode(je));while(je&&Y<ce);if(O.flags&512&&(O.check=n(O.check,we,Y,d)),ce-=Y,d+=Y,je)break e}else O.head&&(O.head.comment=null);O.mode=D;case D:if(O.flags&512){for(;ye<16;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(le!==(O.check&65535)){ee.msg="header crc mismatch",O.mode=N;break}le=0,ye=0}O.head&&(O.head.hcrc=O.flags>>9&1,O.head.done=!0),ee.adler=O.check=0,O.mode=oe;break;case E:for(;ye<32;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}ee.adler=O.check=V(le),le=0,ye=0,O.mode=q;case q:if(O.havedict===0)return ee.next_out=G,ee.avail_out=U,ee.next_in=d,ee.avail_in=ce,O.hold=le,O.bits=ye,I;ee.adler=O.check=1,O.mode=oe;case oe:if(ie===v||ie===a)break e;case ae:if(O.last){le>>>=ye&7,ye-=ye&7,O.mode=z;break}for(;ye<3;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}switch(O.last=le&1,le>>>=1,ye-=1,le&3){case 0:O.mode=ue;break;case 1:if(Ne(O),O.mode=j,ie===a){le>>>=2,ye-=2;break e}break;case 2:O.mode=H;break;case 3:ee.msg="invalid block type",O.mode=N}le>>>=2,ye-=2;break;case ue:for(le>>>=ye&7,ye-=ye&7;ye<32;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if((le&65535)!==(le>>>16^65535)){ee.msg="invalid stored block lengths",O.mode=N;break}if(O.length=le&65535,le=0,ye=0,O.mode=re,ie===a)break e;case re:O.mode=pe;case pe:if(Y=O.length,Y){if(Y>ce&&(Y=ce),Y>U&&(Y=U),Y===0)break e;t.arraySet(qe,we,d,Y,G),ce-=Y,d+=Y,U-=Y,G+=Y,O.length-=Y;break}O.mode=oe;break;case H:for(;ye<14;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(O.nlen=(le&31)+257,le>>>=5,ye-=5,O.ndist=(le&31)+1,le>>>=5,ye-=5,O.ncode=(le&15)+4,le>>>=4,ye-=4,O.nlen>286||O.ndist>30){ee.msg="too many length or distance symbols",O.mode=N;break}O.have=0,O.mode=W;case W:for(;O.have<O.ncode;){for(;ye<3;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}O.lens[Ke[O.have++]]=le&7,le>>>=3,ye-=3}for(;O.have<19;)O.lens[Ke[O.have++]]=0;if(O.lencode=O.lendyn,O.lenbits=7,Ve={bits:O.lenbits},ze=c(m,O.lens,0,19,O.lencode,0,O.work,Ve),O.lenbits=Ve.bits,ze){ee.msg="invalid code lengths set",O.mode=N;break}O.have=0,O.mode=ne;case ne:for(;O.have<O.nlen+O.ndist;){for(;Pe=O.lencode[le&(1<<O.lenbits)-1],Oe=Pe>>>24,Fe=Pe>>>16&255,He=Pe&65535,!(Oe<=ye);){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(He<16)le>>>=Oe,ye-=Oe,O.lens[O.have++]=He;else{if(He===16){for(Xe=Oe+2;ye<Xe;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(le>>>=Oe,ye-=Oe,O.have===0){ee.msg="invalid bit length repeat",O.mode=N;break}je=O.lens[O.have-1],Y=3+(le&3),le>>>=2,ye-=2}else if(He===17){for(Xe=Oe+3;ye<Xe;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}le>>>=Oe,ye-=Oe,je=0,Y=3+(le&7),le>>>=3,ye-=3}else{for(Xe=Oe+7;ye<Xe;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}le>>>=Oe,ye-=Oe,je=0,Y=11+(le&127),le>>>=7,ye-=7}if(O.have+Y>O.nlen+O.ndist){ee.msg="invalid bit length repeat",O.mode=N;break}for(;Y--;)O.lens[O.have++]=je}}if(O.mode===N)break;if(O.lens[256]===0){ee.msg="invalid code -- missing end-of-block",O.mode=N;break}if(O.lenbits=9,Ve={bits:O.lenbits},ze=c(_,O.lens,0,O.nlen,O.lencode,0,O.work,Ve),O.lenbits=Ve.bits,ze){ee.msg="invalid literal/lengths set",O.mode=N;break}if(O.distbits=6,O.distcode=O.distdyn,Ve={bits:O.distbits},ze=c(k,O.lens,O.nlen,O.ndist,O.distcode,0,O.work,Ve),O.distbits=Ve.bits,ze){ee.msg="invalid distances set",O.mode=N;break}if(O.mode=j,ie===a)break e;case j:O.mode=s;case s:if(ce>=6&&U>=258){ee.next_out=G,ee.avail_out=U,ee.next_in=d,ee.avail_in=ce,O.hold=le,O.bits=ye,r(ee,Z),G=ee.next_out,qe=ee.output,U=ee.avail_out,d=ee.next_in,we=ee.input,ce=ee.avail_in,le=O.hold,ye=O.bits,O.mode===oe&&(O.back=-1);break}for(O.back=0;Pe=O.lencode[le&(1<<O.lenbits)-1],Oe=Pe>>>24,Fe=Pe>>>16&255,He=Pe&65535,!(Oe<=ye);){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(Fe&&!(Fe&240)){for(We=Oe,Be=Fe,$e=He;Pe=O.lencode[$e+((le&(1<<We+Be)-1)>>We)],Oe=Pe>>>24,Fe=Pe>>>16&255,He=Pe&65535,!(We+Oe<=ye);){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}le>>>=We,ye-=We,O.back+=We}if(le>>>=Oe,ye-=Oe,O.back+=Oe,O.length=He,Fe===0){O.mode=F;break}if(Fe&32){O.back=-1,O.mode=oe;break}if(Fe&64){ee.msg="invalid literal/length code",O.mode=N;break}O.extra=Fe&15,O.mode=i;case i:if(O.extra){for(Xe=O.extra;ye<Xe;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}O.length+=le&(1<<O.extra)-1,le>>>=O.extra,ye-=O.extra,O.back+=O.extra}O.was=O.length,O.mode=p;case p:for(;Pe=O.distcode[le&(1<<O.distbits)-1],Oe=Pe>>>24,Fe=Pe>>>16&255,He=Pe&65535,!(Oe<=ye);){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(!(Fe&240)){for(We=Oe,Be=Fe,$e=He;Pe=O.distcode[$e+((le&(1<<We+Be)-1)>>We)],Oe=Pe>>>24,Fe=Pe>>>16&255,He=Pe&65535,!(We+Oe<=ye);){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}le>>>=We,ye-=We,O.back+=We}if(le>>>=Oe,ye-=Oe,O.back+=Oe,Fe&64){ee.msg="invalid distance code",O.mode=N;break}O.offset=He,O.extra=Fe&15,O.mode=f;case f:if(O.extra){for(Xe=O.extra;ye<Xe;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}O.offset+=le&(1<<O.extra)-1,le>>>=O.extra,ye-=O.extra,O.back+=O.extra}if(O.offset>O.dmax){ee.msg="invalid distance too far back",O.mode=N;break}O.mode=C;case C:if(U===0)break e;if(Y=Z-U,O.offset>Y){if(Y=O.offset-Y,Y>O.whave&&O.sane){ee.msg="invalid distance too far back",O.mode=N;break}Y>O.wnext?(Y-=O.wnext,fe=O.wsize-Y):fe=O.wnext-Y,Y>O.length&&(Y=O.length),xe=O.window}else xe=qe,fe=G-O.offset,Y=O.length;Y>U&&(Y=U),U-=Y,O.length-=Y;do qe[G++]=xe[fe++];while(--Y);O.length===0&&(O.mode=s);break;case F:if(U===0)break e;qe[G++]=O.length,U--,O.mode=s;break;case z:if(O.wrap){for(;ye<32;){if(ce===0)break e;ce--,le|=we[d++]<<ye,ye+=8}if(Z-=U,ee.total_out+=Z,O.total+=Z,Z&&(ee.adler=O.check=O.flags?n(O.check,qe,Z,G-Z):e(O.check,qe,Z,G-Z)),Z=U,(O.flags?le:V(le))!==O.check){ee.msg="incorrect data check",O.mode=N;break}le=0,ye=0}O.mode=Q;case Q:if(O.wrap&&O.flags){for(;ye<32;){if(ce===0)break e;ce--,le+=we[d++]<<ye,ye+=8}if(le!==(O.total&4294967295)){ee.msg="incorrect length check",O.mode=N;break}le=0,ye=0}O.mode=L;case L:ze=w;break e;case N:ze=B;break e;case se:return P;case ge:default:return M}return ee.next_out=G,ee.avail_out=U,ee.next_in=d,ee.avail_in=ce,O.hold=le,O.bits=ye,(O.wsize||Z!==ee.avail_out&&O.mode<N&&(O.mode<z||ie!==g))&&Ue(ee,ee.output,ee.next_out,Z-ee.avail_out),Ie-=ee.avail_in,Z-=ee.avail_out,ee.total_in+=Ie,ee.total_out+=Z,O.total+=Z,O.wrap&&Z&&(ee.adler=O.check=O.flags?n(O.check,qe,Z,ee.next_out-Z):e(O.check,qe,Z,ee.next_out-Z)),ee.data_type=O.bits+(O.last?64:0)+(O.mode===oe?128:0)+(O.mode===j||O.mode===re?256:0),(Ie===0&&Z===0||ie===g)&&ze===S&&(ze=o),ze}function be(ee){if(!ee||!ee.state)return M;var ie=ee.state;return ie.window&&(ie.window=null),ee.state=null,S}function Me(ee,ie){var O;return!ee||!ee.state||(O=ee.state,!(O.wrap&2))?M:(O.head=ie,ie.done=!1,S)}function Le(ee,ie){var O=ie.length,we,qe,d;return!ee||!ee.state||(we=ee.state,we.wrap!==0&&we.mode!==q)?M:we.mode===q&&(qe=1,qe=e(qe,ie,O,0),qe!==we.check)?B:(d=Ue(ee,ie,O,O),d?(we.mode=se,P):(we.havedict=1,S))}return inflate.inflateReset=Ce,inflate.inflateReset2=ke,inflate.inflateResetKeep=_e,inflate.inflateInit=J,inflate.inflateInit2=te,inflate.inflate=$,inflate.inflateEnd=be,inflate.inflateGetHeader=Me,inflate.inflateSetDictionary=Le,inflate.inflateInfo="pako inflate (from Nodeca project)",inflate}var constants,hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),constants}var hasRequiredBinding;function requireBinding(){return hasRequiredBinding||(hasRequiredBinding=1,function(t){var e=requireAssert(),n=requireZstream(),r=requireDeflate(),c=requireInflate(),m=requireConstants();for(var _ in m)t[_]=m[_];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;var k=31,g=139;function v(a){if(typeof a!="number"||a<t.DEFLATE||a>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=a,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}v.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,e(this.init_done,"close before init"),e(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?r.deflateEnd(this.strm):(this.mode===t.INFLATE||this.mode===t.GUNZIP||this.mode===t.INFLATERAW||this.mode===t.UNZIP)&&c.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null},v.prototype.write=function(a,S,w,I,M,B,P){return this._write(!0,a,S,w,I,M,B,P)},v.prototype.writeSync=function(a,S,w,I,M,B,P){return this._write(!1,a,S,w,I,M,B,P)},v.prototype._write=function(a,S,w,I,M,B,P,o){if(e.equal(arguments.length,8),e(this.init_done,"write before init"),e(this.mode!==t.NONE,"already finalized"),e.equal(!1,this.write_in_progress,"write already in progress"),e.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,e.equal(!1,S===void 0,"must provide flush value"),this.write_in_progress=!0,S!==t.Z_NO_FLUSH&&S!==t.Z_PARTIAL_FLUSH&&S!==t.Z_SYNC_FLUSH&&S!==t.Z_FULL_FLUSH&&S!==t.Z_FINISH&&S!==t.Z_BLOCK)throw new Error("Invalid flush value");if(w==null&&(w=Buffer.alloc(0),M=0,I=0),this.strm.avail_in=M,this.strm.input=w,this.strm.next_in=I,this.strm.avail_out=o,this.strm.output=B,this.strm.next_out=P,this.flush=S,!a)return this._process(),this._checkError()?this._afterSync():void 0;var h=this;return process$1.nextTick(function(){h._process(),h._after()}),this},v.prototype._afterSync=function(){var a=this.strm.avail_out,S=this.strm.avail_in;return this.write_in_progress=!1,[S,a]},v.prototype._process=function(){var a=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=r.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(a=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(a===null)break;if(this.strm.input[a]===k){if(this.gzip_id_bytes_read=1,a++,this.strm.avail_in===1)break}else{this.mode=t.INFLATE;break}case 1:if(a===null)break;this.strm.input[a]===g?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=c.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=c.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=c.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=c.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},v.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},v.prototype._after=function(){if(this._checkError()){var a=this.strm.avail_out,S=this.strm.avail_in;this.write_in_progress=!1,this.callback(S,a),this.pending_close&&this.close()}},v.prototype._error=function(a){this.strm.msg&&(a=this.strm.msg),this.onerror(a,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},v.prototype.init=function(a,S,w,I,M){e(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),e(a>=8&&a<=15,"invalid windowBits"),e(S>=-1&&S<=9,"invalid compression level"),e(w>=1&&w<=9,"invalid memlevel"),e(I===t.Z_FILTERED||I===t.Z_HUFFMAN_ONLY||I===t.Z_RLE||I===t.Z_FIXED||I===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(S,a,w,I,M),this._setDictionary()},v.prototype.params=function(){throw new Error("deflateParams Not supported")},v.prototype.reset=function(){this._reset(),this._setDictionary()},v.prototype._init=function(a,S,w,I,M){switch(this.level=a,this.windowBits=S,this.memLevel=w,this.strategy=I,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,(this.mode===t.GZIP||this.mode===t.GUNZIP)&&(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),(this.mode===t.DEFLATERAW||this.mode===t.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new n,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=r.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=c.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=M,this.write_in_progress=!1,this.init_done=!0},v.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=r.deflateSetDictionary(this.strm,this.dictionary);break}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},v.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=r.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=c.inflateReset(this.strm);break}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=v}(binding)),binding}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,function(t){var e=require$$0.Buffer,n=requireStreamBrowserify().Transform,r=requireBinding(),c=requireUtil(),m=requireAssert().ok,_=require$$0.kMaxLength,k="Cannot create final Buffer. It would be larger than 0x"+_.toString(16)+" bytes";r.Z_MIN_WINDOWBITS=8,r.Z_MAX_WINDOWBITS=15,r.Z_DEFAULT_WINDOWBITS=15,r.Z_MIN_CHUNK=64,r.Z_MAX_CHUNK=1/0,r.Z_DEFAULT_CHUNK=16*1024,r.Z_MIN_MEMLEVEL=1,r.Z_MAX_MEMLEVEL=9,r.Z_DEFAULT_MEMLEVEL=8,r.Z_MIN_LEVEL=-1,r.Z_MAX_LEVEL=9,r.Z_DEFAULT_LEVEL=r.Z_DEFAULT_COMPRESSION;for(var g=Object.keys(r),v=0;v<g.length;v++){var a=g[v];a.match(/^Z/)&&Object.defineProperty(t,a,{enumerable:!0,value:r[a],writable:!1})}for(var S={Z_OK:r.Z_OK,Z_STREAM_END:r.Z_STREAM_END,Z_NEED_DICT:r.Z_NEED_DICT,Z_ERRNO:r.Z_ERRNO,Z_STREAM_ERROR:r.Z_STREAM_ERROR,Z_DATA_ERROR:r.Z_DATA_ERROR,Z_MEM_ERROR:r.Z_MEM_ERROR,Z_BUF_ERROR:r.Z_BUF_ERROR,Z_VERSION_ERROR:r.Z_VERSION_ERROR},w=Object.keys(S),I=0;I<w.length;I++){var M=w[I];S[S[M]]=M}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(S),writable:!1}),t.Deflate=o,t.Inflate=h,t.Gzip=x,t.Gunzip=b,t.DeflateRaw=l,t.InflateRaw=y,t.Unzip=u,t.createDeflate=function(E){return new o(E)},t.createInflate=function(E){return new h(E)},t.createDeflateRaw=function(E){return new l(E)},t.createInflateRaw=function(E){return new y(E)},t.createGzip=function(E){return new x(E)},t.createGunzip=function(E){return new b(E)},t.createUnzip=function(E){return new u(E)},t.deflate=function(E,q,oe){return typeof q=="function"&&(oe=q,q={}),B(new o(q),E,oe)},t.deflateSync=function(E,q){return P(new o(q),E)},t.gzip=function(E,q,oe){return typeof q=="function"&&(oe=q,q={}),B(new x(q),E,oe)},t.gzipSync=function(E,q){return P(new x(q),E)},t.deflateRaw=function(E,q,oe){return typeof q=="function"&&(oe=q,q={}),B(new l(q),E,oe)},t.deflateRawSync=function(E,q){return P(new l(q),E)},t.unzip=function(E,q,oe){return typeof q=="function"&&(oe=q,q={}),B(new u(q),E,oe)},t.unzipSync=function(E,q){return P(new u(q),E)},t.inflate=function(E,q,oe){return typeof q=="function"&&(oe=q,q={}),B(new h(q),E,oe)},t.inflateSync=function(E,q){return P(new h(q),E)},t.gunzip=function(E,q,oe){return typeof q=="function"&&(oe=q,q={}),B(new b(q),E,oe)},t.gunzipSync=function(E,q){return P(new b(q),E)},t.inflateRaw=function(E,q,oe){return typeof q=="function"&&(oe=q,q={}),B(new y(q),E,oe)},t.inflateRawSync=function(E,q){return P(new y(q),E)};function B(E,q,oe){var ae=[],ue=0;E.on("error",pe),E.on("end",H),E.end(q),re();function re(){for(var W;(W=E.read())!==null;)ae.push(W),ue+=W.length;E.once("readable",re)}function pe(W){E.removeListener("end",H),E.removeListener("readable",re),oe(W)}function H(){var W,ne=null;ue>=_?ne=new RangeError(k):W=e.concat(ae,ue),ae=[],E.close(),oe(ne,W)}}function P(E,q){if(typeof q=="string"&&(q=e.from(q)),!e.isBuffer(q))throw new TypeError("Not a string or buffer");var oe=E._finishFlushFlag;return E._processChunk(q,oe)}function o(E){if(!(this instanceof o))return new o(E);R.call(this,E,r.DEFLATE)}function h(E){if(!(this instanceof h))return new h(E);R.call(this,E,r.INFLATE)}function x(E){if(!(this instanceof x))return new x(E);R.call(this,E,r.GZIP)}function b(E){if(!(this instanceof b))return new b(E);R.call(this,E,r.GUNZIP)}function l(E){if(!(this instanceof l))return new l(E);R.call(this,E,r.DEFLATERAW)}function y(E){if(!(this instanceof y))return new y(E);R.call(this,E,r.INFLATERAW)}function u(E){if(!(this instanceof u))return new u(E);R.call(this,E,r.UNZIP)}function T(E){return E===r.Z_NO_FLUSH||E===r.Z_PARTIAL_FLUSH||E===r.Z_SYNC_FLUSH||E===r.Z_FULL_FLUSH||E===r.Z_FINISH||E===r.Z_BLOCK}function R(E,q){var oe=this;if(this._opts=E=E||{},this._chunkSize=E.chunkSize||t.Z_DEFAULT_CHUNK,n.call(this,E),E.flush&&!T(E.flush))throw new Error("Invalid flush flag: "+E.flush);if(E.finishFlush&&!T(E.finishFlush))throw new Error("Invalid flush flag: "+E.finishFlush);if(this._flushFlag=E.flush||r.Z_NO_FLUSH,this._finishFlushFlag=typeof E.finishFlush<"u"?E.finishFlush:r.Z_FINISH,E.chunkSize&&(E.chunkSize<t.Z_MIN_CHUNK||E.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+E.chunkSize);if(E.windowBits&&(E.windowBits<t.Z_MIN_WINDOWBITS||E.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+E.windowBits);if(E.level&&(E.level<t.Z_MIN_LEVEL||E.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+E.level);if(E.memLevel&&(E.memLevel<t.Z_MIN_MEMLEVEL||E.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+E.memLevel);if(E.strategy&&E.strategy!=t.Z_FILTERED&&E.strategy!=t.Z_HUFFMAN_ONLY&&E.strategy!=t.Z_RLE&&E.strategy!=t.Z_FIXED&&E.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+E.strategy);if(E.dictionary&&!e.isBuffer(E.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new r.Zlib(q);var ae=this;this._hadError=!1,this._handle.onerror=function(pe,H){X(ae),ae._hadError=!0;var W=new Error(pe);W.errno=H,W.code=t.codes[H],ae.emit("error",W)};var ue=t.Z_DEFAULT_COMPRESSION;typeof E.level=="number"&&(ue=E.level);var re=t.Z_DEFAULT_STRATEGY;typeof E.strategy=="number"&&(re=E.strategy),this._handle.init(E.windowBits||t.Z_DEFAULT_WINDOWBITS,ue,E.memLevel||t.Z_DEFAULT_MEMLEVEL,re,E.dictionary),this._buffer=e.allocUnsafe(this._chunkSize),this._offset=0,this._level=ue,this._strategy=re,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!oe._handle},configurable:!0,enumerable:!0})}c.inherits(R,n),R.prototype.params=function(E,q,oe){if(E<t.Z_MIN_LEVEL||E>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+E);if(q!=t.Z_FILTERED&&q!=t.Z_HUFFMAN_ONLY&&q!=t.Z_RLE&&q!=t.Z_FIXED&&q!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+q);if(this._level!==E||this._strategy!==q){var ae=this;this.flush(r.Z_SYNC_FLUSH,function(){m(ae._handle,"zlib binding closed"),ae._handle.params(E,q),ae._hadError||(ae._level=E,ae._strategy=q,oe&&oe())})}else process$1.nextTick(oe)},R.prototype.reset=function(){return m(this._handle,"zlib binding closed"),this._handle.reset()},R.prototype._flush=function(E){this._transform(e.alloc(0),"",E)},R.prototype.flush=function(E,q){var oe=this,ae=this._writableState;(typeof E=="function"||E===void 0&&!q)&&(q=E,E=r.Z_FULL_FLUSH),ae.ended?q&&process$1.nextTick(q):ae.ending?q&&this.once("end",q):ae.needDrain?q&&this.once("drain",function(){return oe.flush(E,q)}):(this._flushFlag=E,this.write(e.alloc(0),"",q))},R.prototype.close=function(E){X(this,E),process$1.nextTick(D,this)};function X(E,q){q&&process$1.nextTick(q),E._handle&&(E._handle.close(),E._handle=null)}function D(E){E.emit("close")}R.prototype._transform=function(E,q,oe){var ae,ue=this._writableState,re=ue.ending||ue.ended,pe=re&&(!E||ue.length===E.length);if(E!==null&&!e.isBuffer(E))return oe(new Error("invalid input"));if(!this._handle)return oe(new Error("zlib binding closed"));pe?ae=this._finishFlushFlag:(ae=this._flushFlag,E.length>=ue.length&&(this._flushFlag=this._opts.flush||r.Z_NO_FLUSH)),this._processChunk(E,ae,oe)},R.prototype._processChunk=function(E,q,oe){var ae=E&&E.length,ue=this._chunkSize-this._offset,re=0,pe=this,H=typeof oe=="function";if(!H){var W=[],ne=0,j;this.on("error",function(C){j=C}),m(this._handle,"zlib binding closed");do var s=this._handle.writeSync(q,E,re,ae,this._buffer,this._offset,ue);while(!this._hadError&&f(s[0],s[1]));if(this._hadError)throw j;if(ne>=_)throw X(this),new RangeError(k);var i=e.concat(W,ne);return X(this),i}m(this._handle,"zlib binding closed");var p=this._handle.write(q,E,re,ae,this._buffer,this._offset,ue);p.buffer=E,p.callback=f;function f(C,F){if(this&&(this.buffer=null,this.callback=null),!pe._hadError){var z=ue-F;if(m(z>=0,"have should not go down"),z>0){var Q=pe._buffer.slice(pe._offset,pe._offset+z);pe._offset+=z,H?pe.push(Q):(W.push(Q),ne+=Q.length)}if((F===0||pe._offset>=pe._chunkSize)&&(ue=pe._chunkSize,pe._offset=0,pe._buffer=e.allocUnsafe(pe._chunkSize)),F===0){if(re+=ae-C,ae=C,!H)return!0;var L=pe._handle.write(q,E,re,ae,pe._buffer,pe._offset,pe._chunkSize);L.callback=f,L.buffer=E;return}if(!H)return!1;oe()}}},c.inherits(o,R),c.inherits(h,R),c.inherits(x,R),c.inherits(b,R),c.inherits(l,R),c.inherits(y,R),c.inherits(u,R)}(lib)),lib}(function(module,exports$1){(function(e,n){module.exports=e.pdfjsLib=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e)=>{var Le;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=H,e.bytesToString=L,e.createValidAbsoluteUrl=ne,e.getModificationDate=Te,e.getUuid=be,e.getVerbosityLevel=ae,e.info=ue,e.isArrayBuffer=J,e.isArrayEqual=Se,e.isNodeJS=void 0,e.normalizeUnicode=$,e.objectFromMap=Ae,e.objectSize=ge,e.setVerbosityLevel=oe,e.shadow=j,e.string32=se,e.stringToBytes=N,e.stringToPDFString=Ce,e.stringToUTF8String=ke,e.unreachable=pe,e.utf8StringToString=te,e.warn=re;const n=typeof process$1=="object"&&process$1+""=="[object process]"&&!process$1.versions.nw&&!(process$1.versions.electron&&process$1.type&&process$1.type!=="browser");e.isNodeJS=n;const r=[1,0,0,1,0,0];e.IDENTITY_MATRIX=r;const c=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=c;const m=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=m;const _=1.35;e.LINE_FACTOR=_;const k=.35;e.LINE_DESCENT_FACTOR=k;const g=k/_;e.BASELINE_FACTOR=g;const v={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=v;const a={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=a;const S="pdfjs_internal_editor_";e.AnnotationEditorPrefix=S;const w={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=w;const I={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=I;const M={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=M;const B={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=B;const P={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=P;const o={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=o;const h={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=h;const x={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=x;const b={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=b;const l={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=l;const y={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=y;const u={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=u;const T={O:"PageOpen",C:"PageClose"};e.PageActionEventType=T;const R={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=R;const X={NONE:0,BINARY:1};e.CMapCompressionType=X;const D={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=D;const E={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=E;let q=R.WARNINGS;function oe(ee){Number.isInteger(ee)&&(q=ee)}function ae(){return q}function ue(ee){q>=R.INFOS&&console.log(`Info: ${ee}`)}function re(ee){q>=R.WARNINGS&&console.log(`Warning: ${ee}`)}function pe(ee){throw new Error(ee)}function H(ee,ie){ee||pe(ie)}function W(ee){switch(ee==null?void 0:ee.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ne(ee,ie=null,O=null){if(!ee)return null;try{if(O&&typeof ee=="string"){if(O.addDefaultProtocol&&ee.startsWith("www.")){const qe=ee.match(/\./g);(qe==null?void 0:qe.length)>=2&&(ee=`http://${ee}`)}if(O.tryConvertEncoding)try{ee=ke(ee)}catch{}}const we=ie?new URL(ee,ie):new URL(ee);if(W(we))return we}catch{}return null}function j(ee,ie,O,we=!1){return Object.defineProperty(ee,ie,{value:O,enumerable:!we,configurable:!0,writable:!1}),O}const s=function(){function ie(O,we){this.constructor===ie&&pe("Cannot initialize BaseException."),this.message=O,this.name=we}return ie.prototype=new Error,ie.constructor=ie,ie}();e.BaseException=s;class i extends s{constructor(ie,O){super(ie,"PasswordException"),this.code=O}}e.PasswordException=i;class p extends s{constructor(ie,O){super(ie,"UnknownErrorException"),this.details=O}}e.UnknownErrorException=p;class f extends s{constructor(ie){super(ie,"InvalidPDFException")}}e.InvalidPDFException=f;class C extends s{constructor(ie){super(ie,"MissingPDFException")}}e.MissingPDFException=C;class F extends s{constructor(ie,O){super(ie,"UnexpectedResponseException"),this.status=O}}e.UnexpectedResponseException=F;class z extends s{constructor(ie){super(ie,"FormatError")}}e.FormatError=z;class Q extends s{constructor(ie){super(ie,"AbortException")}}e.AbortException=Q;function L(ee){(typeof ee!="object"||(ee==null?void 0:ee.length)===void 0)&&pe("Invalid argument for bytesToString");const ie=ee.length,O=8192;if(ie<O)return String.fromCharCode.apply(null,ee);const we=[];for(let qe=0;qe<ie;qe+=O){const d=Math.min(qe+O,ie),G=ee.subarray(qe,d);we.push(String.fromCharCode.apply(null,G))}return we.join("")}function N(ee){typeof ee!="string"&&pe("Invalid argument for stringToBytes");const ie=ee.length,O=new Uint8Array(ie);for(let we=0;we<ie;++we)O[we]=ee.charCodeAt(we)&255;return O}function se(ee){return String.fromCharCode(ee>>24&255,ee>>16&255,ee>>8&255,ee&255)}function ge(ee){return Object.keys(ee).length}function Ae(ee){const ie=Object.create(null);for(const[O,we]of ee)ie[O]=we;return ie}function he(){const ee=new Uint8Array(4);return ee[0]=1,new Uint32Array(ee.buffer,0,1)[0]===1}function de(){try{return new Function(""),!0}catch{return!1}}class K{static get isLittleEndian(){return j(this,"isLittleEndian",he())}static get isEvalSupported(){return j(this,"isEvalSupported",de())}static get isOffscreenCanvasSupported(){return j(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?j(this,"platform",{isWin:!1,isMac:!1}):j(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var ie,O;return j(this,"isCSSRoundSupported",(O=(ie=globalThis.CSS)==null?void 0:ie.supports)==null?void 0:O.call(ie,"width: round(1.5px, 1px)"))}}e.FeatureTest=K;const V=[...Array(256).keys()].map(ee=>ee.toString(16).padStart(2,"0"));class me{static makeHexColor(ie,O,we){return`#${V[ie]}${V[O]}${V[we]}`}static scaleMinMax(ie,O){let we;ie[0]?(ie[0]<0&&(we=O[0],O[0]=O[1],O[1]=we),O[0]*=ie[0],O[1]*=ie[0],ie[3]<0&&(we=O[2],O[2]=O[3],O[3]=we),O[2]*=ie[3],O[3]*=ie[3]):(we=O[0],O[0]=O[2],O[2]=we,we=O[1],O[1]=O[3],O[3]=we,ie[1]<0&&(we=O[2],O[2]=O[3],O[3]=we),O[2]*=ie[1],O[3]*=ie[1],ie[2]<0&&(we=O[0],O[0]=O[1],O[1]=we),O[0]*=ie[2],O[1]*=ie[2]),O[0]+=ie[4],O[1]+=ie[4],O[2]+=ie[5],O[3]+=ie[5]}static transform(ie,O){return[ie[0]*O[0]+ie[2]*O[1],ie[1]*O[0]+ie[3]*O[1],ie[0]*O[2]+ie[2]*O[3],ie[1]*O[2]+ie[3]*O[3],ie[0]*O[4]+ie[2]*O[5]+ie[4],ie[1]*O[4]+ie[3]*O[5]+ie[5]]}static applyTransform(ie,O){const we=ie[0]*O[0]+ie[1]*O[2]+O[4],qe=ie[0]*O[1]+ie[1]*O[3]+O[5];return[we,qe]}static applyInverseTransform(ie,O){const we=O[0]*O[3]-O[1]*O[2],qe=(ie[0]*O[3]-ie[1]*O[2]+O[2]*O[5]-O[4]*O[3])/we,d=(-ie[0]*O[1]+ie[1]*O[0]+O[4]*O[1]-O[5]*O[0])/we;return[qe,d]}static getAxialAlignedBoundingBox(ie,O){const we=this.applyTransform(ie,O),qe=this.applyTransform(ie.slice(2,4),O),d=this.applyTransform([ie[0],ie[3]],O),G=this.applyTransform([ie[2],ie[1]],O);return[Math.min(we[0],qe[0],d[0],G[0]),Math.min(we[1],qe[1],d[1],G[1]),Math.max(we[0],qe[0],d[0],G[0]),Math.max(we[1],qe[1],d[1],G[1])]}static inverseTransform(ie){const O=ie[0]*ie[3]-ie[1]*ie[2];return[ie[3]/O,-ie[1]/O,-ie[2]/O,ie[0]/O,(ie[2]*ie[5]-ie[4]*ie[3])/O,(ie[4]*ie[1]-ie[5]*ie[0])/O]}static singularValueDecompose2dScale(ie){const O=[ie[0],ie[2],ie[1],ie[3]],we=ie[0]*O[0]+ie[1]*O[2],qe=ie[0]*O[1]+ie[1]*O[3],d=ie[2]*O[0]+ie[3]*O[2],G=ie[2]*O[1]+ie[3]*O[3],ce=(we+G)/2,U=Math.sqrt((we+G)**2-4*(we*G-d*qe))/2,le=ce+U||1,ye=ce-U||1;return[Math.sqrt(le),Math.sqrt(ye)]}static normalizeRect(ie){const O=ie.slice(0);return ie[0]>ie[2]&&(O[0]=ie[2],O[2]=ie[0]),ie[1]>ie[3]&&(O[1]=ie[3],O[3]=ie[1]),O}static intersect(ie,O){const we=Math.max(Math.min(ie[0],ie[2]),Math.min(O[0],O[2])),qe=Math.min(Math.max(ie[0],ie[2]),Math.max(O[0],O[2]));if(we>qe)return null;const d=Math.max(Math.min(ie[1],ie[3]),Math.min(O[1],O[3])),G=Math.min(Math.max(ie[1],ie[3]),Math.max(O[1],O[3]));return d>G?null:[we,d,qe,G]}static bezierBoundingBox(ie,O,we,qe,d,G,ce,U){const le=[],ye=[[],[]];let Ie,Z,Y,fe,xe,Pe,Oe,Fe;for(let $e=0;$e<2;++$e){if($e===0?(Z=6*ie-12*we+6*d,Ie=-3*ie+9*we-9*d+3*ce,Y=3*we-3*ie):(Z=6*O-12*qe+6*G,Ie=-3*O+9*qe-9*G+3*U,Y=3*qe-3*O),Math.abs(Ie)<1e-12){if(Math.abs(Z)<1e-12)continue;fe=-Y/Z,0<fe&&fe<1&&le.push(fe);continue}Oe=Z*Z-4*Y*Ie,Fe=Math.sqrt(Oe),!(Oe<0)&&(xe=(-Z+Fe)/(2*Ie),0<xe&&xe<1&&le.push(xe),Pe=(-Z-Fe)/(2*Ie),0<Pe&&Pe<1&&le.push(Pe))}let He=le.length,We;const Be=He;for(;He--;)fe=le[He],We=1-fe,ye[0][He]=We*We*We*ie+3*We*We*fe*we+3*We*fe*fe*d+fe*fe*fe*ce,ye[1][He]=We*We*We*O+3*We*We*fe*qe+3*We*fe*fe*G+fe*fe*fe*U;return ye[0][Be]=ie,ye[1][Be]=O,ye[0][Be+1]=ce,ye[1][Be+1]=U,ye[0].length=ye[1].length=Be+2,[Math.min(...ye[0]),Math.min(...ye[1]),Math.max(...ye[0]),Math.max(...ye[1])]}}e.Util=me;const _e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ce(ee){if(ee[0]>=""){let O;if(ee[0]===""&&ee[1]===""?O="utf-16be":ee[0]===""&&ee[1]===""?O="utf-16le":ee[0]===""&&ee[1]===""&&ee[2]===""&&(O="utf-8"),O)try{const we=new TextDecoder(O,{fatal:!0}),qe=N(ee);return we.decode(qe)}catch(we){re(`stringToPDFString: "${we}".`)}}const ie=[];for(let O=0,we=ee.length;O<we;O++){const qe=_e[ee.charCodeAt(O)];ie.push(qe?String.fromCharCode(qe):ee.charAt(O))}return ie.join("")}function ke(ee){return decodeURIComponent(escape(ee))}function te(ee){return unescape(encodeURIComponent(ee))}function J(ee){return typeof ee=="object"&&(ee==null?void 0:ee.byteLength)!==void 0}function Se(ee,ie){if(ee.length!==ie.length)return!1;for(let O=0,we=ee.length;O<we;O++)if(ee[O]!==ie[O])return!1;return!0}function Te(ee=new Date){return[ee.getUTCFullYear().toString(),(ee.getUTCMonth()+1).toString().padStart(2,"0"),ee.getUTCDate().toString().padStart(2,"0"),ee.getUTCHours().toString().padStart(2,"0"),ee.getUTCMinutes().toString().padStart(2,"0"),ee.getUTCSeconds().toString().padStart(2,"0")].join("")}class De{constructor(){Ee(this,Le,!1);this.promise=new Promise((ie,O)=>{this.resolve=we=>{Re(this,Le,!0),ie(we)},this.reject=we=>{Re(this,Le,!0),O(we)}})}get settled(){return A(this,Le)}}Le=new WeakMap,e.PromiseCapability=De;let Ne=null,Ue=null;function $(ee){return Ne||(Ne=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ue=new Map([["","t"]])),ee.replaceAll(Ne,(ie,O,we)=>O?O.normalize("NFKC"):Ue.get(we))}function be(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ee=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ee);else for(let ie=0;ie<32;ie++)ee[ie]=Math.floor(Math.random()*255);return L(ee)}const Me="pdfjs_internal_id_";e.AnnotationPrefix=Me},(__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{var t,n,r,c,at,_t,k,g,v,a,S,w,I,M,B,vt,o,h,It,b,l;Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(u){if(typeof u=="string"||u instanceof URL?u={url:u}:(0,_util.isArrayBuffer)(u)&&(u={data:u}),typeof u!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!u.url&&!u.data&&!u.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const T=new PDFDocumentLoadingTask,{docId:R}=T,X=u.url?getUrlProp(u.url):null,D=u.data?getDataProp(u.data):null,E=u.httpHeaders||null,q=u.withCredentials===!0,oe=u.password??null,ae=u.range instanceof PDFDataRangeTransport?u.range:null,ue=Number.isInteger(u.rangeChunkSize)&&u.rangeChunkSize>0?u.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let re=u.worker instanceof PDFWorker?u.worker:null;const pe=u.verbosity,H=typeof u.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(u.docBaseUrl)?u.docBaseUrl:null,W=typeof u.cMapUrl=="string"?u.cMapUrl:null,ne=u.cMapPacked!==!1,j=u.CMapReaderFactory||DefaultCMapReaderFactory,s=typeof u.standardFontDataUrl=="string"?u.standardFontDataUrl:null,i=u.StandardFontDataFactory||DefaultStandardFontDataFactory,p=u.stopAtErrors!==!0,f=Number.isInteger(u.maxImageSize)&&u.maxImageSize>-1?u.maxImageSize:-1,C=u.isEvalSupported!==!1,F=typeof u.isOffscreenCanvasSupported=="boolean"?u.isOffscreenCanvasSupported:!_util.isNodeJS,z=Number.isInteger(u.canvasMaxAreaInBytes)?u.canvasMaxAreaInBytes:-1,Q=typeof u.disableFontFace=="boolean"?u.disableFontFace:_util.isNodeJS,L=u.fontExtraProperties===!0,N=u.enableXfa===!0,se=u.ownerDocument||globalThis.document,ge=u.disableRange===!0,Ae=u.disableStream===!0,he=u.disableAutoFetch===!0,de=u.pdfBug===!0,K=ae?ae.length:u.length??NaN,V=typeof u.useSystemFonts=="boolean"?u.useSystemFonts:!_util.isNodeJS&&!Q,me=typeof u.useWorkerFetch=="boolean"?u.useWorkerFetch:j===_display_utils.DOMCMapReaderFactory&&i===_display_utils.DOMStandardFontDataFactory&&W&&s&&(0,_display_utils.isValidFetchUrl)(W,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(s,document.baseURI),_e=u.canvasFactory||new DefaultCanvasFactory({ownerDocument:se}),Ce=u.filterFactory||new DefaultFilterFactory({docId:R,ownerDocument:se}),ke=null;(0,_util.setVerbosityLevel)(pe);const te={canvasFactory:_e,filterFactory:Ce};if(me||(te.cMapReaderFactory=new j({baseUrl:W,isCompressed:ne}),te.standardFontDataFactory=new i({baseUrl:s})),!re){const Te={verbosity:pe,port:_worker_options.GlobalWorkerOptions.workerPort};re=Te.port?PDFWorker.fromPort(Te):new PDFWorker(Te),T._worker=re}const J={docId:R,apiVersion:"3.11.174",data:D,password:oe,disableAutoFetch:he,rangeChunkSize:ue,length:K,docBaseUrl:H,enableXfa:N,evaluatorOptions:{maxImageSize:f,disableFontFace:Q,ignoreErrors:p,isEvalSupported:C,isOffscreenCanvasSupported:F,canvasMaxAreaInBytes:z,fontExtraProperties:L,useSystemFonts:V,cMapUrl:me?W:null,standardFontDataUrl:me?s:null}},Se={ignoreErrors:p,isEvalSupported:C,disableFontFace:Q,fontExtraProperties:L,enableXfa:N,ownerDocument:se,disableAutoFetch:he,pdfBug:de,styleElement:ke};return re.promise.then(function(){if(T.destroyed)throw new Error("Loading aborted");const Te=_fetchDocument(re,J),De=new Promise(function(Ne){let Ue;ae?Ue=new _transport_stream.PDFDataTransportStream({length:K,initialData:ae.initialData,progressiveDone:ae.progressiveDone,contentDispositionFilename:ae.contentDispositionFilename,disableRange:ge,disableStream:Ae},ae):D||(Ue=(be=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(be):(0,_display_utils.isValidFetchUrl)(be.url)?new _displayFetch_stream.PDFFetchStream(be):new _displayNetwork.PDFNetworkStream(be))({url:X,length:K,httpHeaders:E,withCredentials:q,rangeChunkSize:ue,disableRange:ge,disableStream:Ae})),Ne(Ue)});return Promise.all([Te,De]).then(function([Ne,Ue]){if(T.destroyed)throw new Error("Loading aborted");const $=new _message_handler.MessageHandler(R,Ne,re.port),be=new WorkerTransport($,T,Ue,Se,te);T._transport=be,$.send("Ready",null)})}).catch(T._capability.reject),T}async function _fetchDocument(u,T){if(u.destroyed)throw new Error("Worker was destroyed");const R=await u.messageHandler.sendWithPromise("GetDocRequest",T,T.data?[T.data.buffer]:null);if(u.destroyed)throw new Error("Worker was destroyed");return R}function getUrlProp(u){if(u instanceof URL)return u.href;try{return new URL(u,window.location).href}catch{if(_util.isNodeJS&&typeof u=="string")return u}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(u){if(_util.isNodeJS&&typeof Buffer<"u"&&u instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength)return u;if(typeof u=="string")return(0,_util.stringToBytes)(u);if(typeof u=="object"&&!isNaN(u==null?void 0:u.length)||(0,_util.isArrayBuffer)(u))return new Uint8Array(u);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ut(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var T,R,X;this.destroyed=!0;try{(T=this._worker)!=null&&T.port&&(this._worker._pendingDestroy=!0),await((R=this._transport)==null?void 0:R.destroy())}catch(D){throw(X=this._worker)!=null&&X.port&&delete this._worker._pendingDestroy,D}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,Ee(e,t,0);let PDFDocumentLoadingTask=e;exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(T,R,X=!1,D=null){this.length=T,this.initialData=R,this.progressiveDone=X,this.contentDispositionFilename=D,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(T){this._rangeListeners.push(T)}addProgressListener(T){this._progressListeners.push(T)}addProgressiveReadListener(T){this._progressiveReadListeners.push(T)}addProgressiveDoneListener(T){this._progressiveDoneListeners.push(T)}onDataRange(T,R){for(const X of this._rangeListeners)X(T,R)}onDataProgress(T,R){this._readyCapability.promise.then(()=>{for(const X of this._progressListeners)X(T,R)})}onDataProgressiveRead(T){this._readyCapability.promise.then(()=>{for(const R of this._progressiveReadListeners)R(T)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const T of this._progressiveDoneListeners)T()})}transportReady(){this._readyCapability.resolve()}requestDataRange(T,R){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(T,R){this._pdfInfo=T,this._transport=R,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(X=>{if(!X)return X;const D=[];for(const E in X)D.push(...X[E]);return D}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(T){return this._transport.getPage(T)}getPageIndex(T){return this._transport.getPageIndex(T)}getDestinations(){return this._transport.getDestinations()}getDestination(T){return this._transport.getDestination(T)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(T=!1){return this._transport.startCleanup(T||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(T,R,X,D=!1){Ee(this,c);Ee(this,n,null);Ee(this,r,!1);this._pageIndex=T,this._pageInfo=R,this._transport=X,this._stats=D?new _display_utils.StatTimer:null,this._pdfBug=D,this.commonObjs=X.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:T,rotation:R=this.rotate,offsetX:X=0,offsetY:D=0,dontFlip:E=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:T,rotation:R,offsetX:X,offsetY:D,dontFlip:E})}getAnnotations({intent:T="display"}={}){const R=this._transport.getRenderingIntent(T);return this._transport.getAnnotations(this._pageIndex,R.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var T;return((T=this._transport._htmlForXfa)==null?void 0:T.children[this._pageIndex])||null}render({canvasContext:T,viewport:R,intent:X="display",annotationMode:D=_util.AnnotationMode.ENABLE,transform:E=null,background:q=null,optionalContentConfigPromise:oe=null,annotationCanvasMap:ae=null,pageColors:ue=null,printAnnotationStorage:re=null}){var i,p;(i=this._stats)==null||i.time("Overall");const pe=this._transport.getRenderingIntent(X,D,re);Re(this,r,!1),ve(this,c,_t).call(this),oe||(oe=this._transport.getOptionalContentConfig());let H=this._intentStates.get(pe.cacheKey);H||(H=Object.create(null),this._intentStates.set(pe.cacheKey,H)),H.streamReaderCancelTimeout&&(clearTimeout(H.streamReaderCancelTimeout),H.streamReaderCancelTimeout=null);const W=!!(pe.renderingIntent&_util.RenderingIntentFlag.PRINT);H.displayReadyCapability||(H.displayReadyCapability=new _util.PromiseCapability,H.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(pe));const ne=f=>{var C,F;H.renderTasks.delete(j),(this._maybeCleanupAfterRender||W)&&Re(this,r,!0),ve(this,c,at).call(this,!W),f?(j.capability.reject(f),this._abortOperatorList({intentState:H,reason:f instanceof Error?f:new Error(f)})):j.capability.resolve(),(C=this._stats)==null||C.timeEnd("Rendering"),(F=this._stats)==null||F.timeEnd("Overall")},j=new InternalRenderTask({callback:ne,params:{canvasContext:T,viewport:R,transform:E,background:q},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ae,operatorList:H.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!W,pdfBug:this._pdfBug,pageColors:ue});(H.renderTasks||(H.renderTasks=new Set)).add(j);const s=j.task;return Promise.all([H.displayReadyCapability.promise,oe]).then(([f,C])=>{var F;if(this.destroyed){ne();return}(F=this._stats)==null||F.time("Rendering"),j.initializeGraphics({transparency:f,optionalContentConfig:C}),j.operatorListChanged()}).catch(ne),s}getOperatorList({intent:T="display",annotationMode:R=_util.AnnotationMode.ENABLE,printAnnotationStorage:X=null}={}){var ae;function D(){q.operatorList.lastChunk&&(q.opListReadCapability.resolve(q.operatorList),q.renderTasks.delete(oe))}const E=this._transport.getRenderingIntent(T,R,X,!0);let q=this._intentStates.get(E.cacheKey);q||(q=Object.create(null),this._intentStates.set(E.cacheKey,q));let oe;return q.opListReadCapability||(oe=Object.create(null),oe.operatorListChanged=D,q.opListReadCapability=new _util.PromiseCapability,(q.renderTasks||(q.renderTasks=new Set)).add(oe),q.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ae=this._stats)==null||ae.time("Page Request"),this._pumpOperatorList(E)),q.opListReadCapability.promise}streamTextContent({includeMarkedContent:T=!1,disableNormalization:R=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:T===!0,disableNormalization:R===!0},{highWaterMark:100,size(D){return D.items.length}})}getTextContent(T={}){if(this._transport._htmlForXfa)return this.getXfa().then(X=>_xfa_text.XfaText.textContent(X));const R=this.streamTextContent(T);return new Promise(function(X,D){function E(){q.read().then(function({value:ae,done:ue}){if(ue){X(oe);return}Object.assign(oe.styles,ae.styles),oe.items.push(...ae.items),E()},D)}const q=R.getReader(),oe={items:[],styles:Object.create(null)};E()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const T=[];for(const R of this._intentStates.values())if(this._abortOperatorList({intentState:R,reason:new Error("Page was destroyed."),force:!0}),!R.opListReadCapability)for(const X of R.renderTasks)T.push(X.completed),X.cancel();return this.objs.clear(),Re(this,r,!1),ve(this,c,_t).call(this),Promise.all(T)}cleanup(T=!1){Re(this,r,!0);const R=ve(this,c,at).call(this,!1);return T&&R&&this._stats&&(this._stats=new _display_utils.StatTimer),R}_startRenderPage(T,R){var D,E;const X=this._intentStates.get(R);X&&((D=this._stats)==null||D.timeEnd("Page Request"),(E=X.displayReadyCapability)==null||E.resolve(T))}_renderPageChunk(T,R){for(let X=0,D=T.length;X<D;X++)R.operatorList.fnArray.push(T.fnArray[X]),R.operatorList.argsArray.push(T.argsArray[X]);R.operatorList.lastChunk=T.lastChunk,R.operatorList.separateAnnots=T.separateAnnots;for(const X of R.renderTasks)X.operatorListChanged();T.lastChunk&&ve(this,c,at).call(this,!0)}_pumpOperatorList({renderingIntent:T,cacheKey:R,annotationStorageSerializable:X}){const{map:D,transfers:E}=X,oe=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:T,cacheKey:R,annotationStorage:D},E).getReader(),ae=this._intentStates.get(R);ae.streamReader=oe;const ue=()=>{oe.read().then(({value:re,done:pe})=>{if(pe){ae.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(re,ae),ue())},re=>{if(ae.streamReader=null,!this._transport.destroyed){if(ae.operatorList){ae.operatorList.lastChunk=!0;for(const pe of ae.renderTasks)pe.operatorListChanged();ve(this,c,at).call(this,!0)}if(ae.displayReadyCapability)ae.displayReadyCapability.reject(re);else if(ae.opListReadCapability)ae.opListReadCapability.reject(re);else throw re}})};ue()}_abortOperatorList({intentState:T,reason:R,force:X=!1}){if(T.streamReader){if(T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null),!X){if(T.renderTasks.size>0)return;if(R instanceof _display_utils.RenderingCancelledException){let D=RENDERING_CANCELLED_TIMEOUT;R.extraDelay>0&&R.extraDelay<1e3&&(D+=R.extraDelay),T.streamReaderCancelTimeout=setTimeout(()=>{T.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:T,reason:R,force:!0})},D);return}}if(T.streamReader.cancel(new _util.AbortException(R.message)).catch(()=>{}),T.streamReader=null,!this._transport.destroyed){for(const[D,E]of this._intentStates)if(E===T){this._intentStates.delete(D);break}this.cleanup()}}}get stats(){return this._stats}}n=new WeakMap,r=new WeakMap,c=new WeakSet,at=function(T=!1){if(ve(this,c,_t).call(this),!A(this,r)||this.destroyed)return!1;if(T)return Re(this,n,setTimeout(()=>{Re(this,n,null),ve(this,c,at).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:R,operatorList:X}of this._intentStates.values())if(R.size>0||!X.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Re(this,r,!1),!0},_t=function(){A(this,n)&&(clearTimeout(A(this,n)),Re(this,n,null))},exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Ee(this,k,new Set);Ee(this,g,Promise.resolve())}postMessage(T,R){const X={data:structuredClone(T,R?{transfer:R}:null)};A(this,g).then(()=>{for(const D of A(this,k))D.call(this,X)})}addEventListener(T,R){A(this,k).add(R)}removeEventListener(T,R){A(this,k).delete(R)}terminate(){A(this,k).clear()}}k=new WeakMap,g=new WeakMap,exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const u=(v=document==null?void 0:document.currentScript)==null?void 0:v.src;u&&(PDFWorkerUtil.fallbackWorkerSrc=u.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(u,T){let R;try{if(R=new URL(u),!R.origin||R.origin==="null")return!1}catch{return!1}const X=new URL(T,R);return R.origin===X.origin},PDFWorkerUtil.createCDNWrapper=function(u){const T=`importScripts("${u}");`;return URL.createObjectURL(new Blob([T]))}}const _PDFWorker=class _PDFWorker{constructor({name:u=null,port:T=null,verbosity:R=(0,_util.getVerbosityLevel)()}={}){var X;if(this.name=u,this.destroyed=!1,this.verbosity=R,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,T){if((X=A(_PDFWorker,a))!=null&&X.has(T))throw new Error("Cannot use more than one PDFWorker per port.");(A(_PDFWorker,a)||Re(_PDFWorker,a,new WeakMap)).set(T,this),this._initializeFromPort(T);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(u){this._port=u,this._messageHandler=new _message_handler.MessageHandler("main","worker",u),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:u}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,u)||(u=PDFWorkerUtil.createCDNWrapper(new URL(u,window.location).href));const T=new Worker(u),R=new _message_handler.MessageHandler("main","worker",T),X=()=>{T.removeEventListener("error",D),R.destroy(),T.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},D=()=>{this._webWorker||X()};T.addEventListener("error",D),R.on("test",q=>{if(T.removeEventListener("error",D),this.destroyed){X();return}q?(this._messageHandler=R,this._port=T,this._webWorker=T,this._readyCapability.resolve(),R.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),R.destroy(),T.terminate())}),R.on("ready",q=>{if(T.removeEventListener("error",D),this.destroyed){X();return}try{E()}catch{this._setupFakeWorker()}});const E=()=>{const q=new Uint8Array;R.send("test",q,[q.buffer])};E();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(u=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const T=new LoopbackPort;this._port=T;const R=`fake${PDFWorkerUtil.fakeWorkerId++}`,X=new _message_handler.MessageHandler(R+"_worker",R,T);u.setup(X,T);const D=new _message_handler.MessageHandler(R,R+"_worker",T);this._messageHandler=D,this._readyCapability.resolve(),D.send("configure",{verbosity:this.verbosity})}).catch(u=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${u.message}".`))})}destroy(){var u;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(u=A(_PDFWorker,a))==null||u.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(u){var R;if(!(u!=null&&u.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const T=(R=A(this,a))==null?void 0:R.get(u.port);if(T){if(T._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return T}return new _PDFWorker(u)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var u;try{return((u=globalThis.pdfjsWorker)==null?void 0:u.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};a=new WeakMap,Ee(_PDFWorker,a);let PDFWorker=_PDFWorker;exports$1.PDFWorker=PDFWorker;class WorkerTransport{constructor(T,R,X,D,E){Ee(this,B);Ee(this,S,new Map);Ee(this,w,new Map);Ee(this,I,new Map);Ee(this,M,null);this.messageHandler=T,this.loadingTask=R,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:D.ownerDocument,styleElement:D.styleElement}),this._params=D,this.canvasFactory=E.canvasFactory,this.filterFactory=E.filterFactory,this.cMapReaderFactory=E.cMapReaderFactory,this.standardFontDataFactory=E.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=X,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(T,R=_util.AnnotationMode.ENABLE,X=null,D=!1){let E=_util.RenderingIntentFlag.DISPLAY,q=_annotation_storage.SerializableEmpty;switch(T){case"any":E=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":E=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${T}`)}switch(R){case _util.AnnotationMode.DISABLE:E+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:E+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:E+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,q=(E&_util.RenderingIntentFlag.PRINT&&X instanceof _annotation_storage.PrintAnnotationStorage?X:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${R}`)}return D&&(E+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:E,cacheKey:`${E}_${q.hash}`,annotationStorageSerializable:q}}destroy(){var X;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(X=A(this,M))==null||X.reject(new Error("Worker was destroyed during onPassword callback"));const T=[];for(const D of A(this,w).values())T.push(D._destroy());A(this,w).clear(),A(this,I).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const R=this.messageHandler.sendWithPromise("Terminate",null);return T.push(R),Promise.all(T).then(()=>{var D;this.commonObjs.clear(),this.fontLoader.clear(),A(this,S).clear(),this.filterFactory.destroy(),(D=this._networkStream)==null||D.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:T,loadingTask:R}=this;T.on("GetReader",(X,D)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=E=>{this._lastProgress={loaded:E.loaded,total:E.total}},D.onPull=()=>{this._fullReader.read().then(function({value:E,done:q}){if(q){D.close();return}(0,_util.assert)(E instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),D.enqueue(new Uint8Array(E),1,[E])}).catch(E=>{D.error(E)})},D.onCancel=E=>{this._fullReader.cancel(E),D.ready.catch(q=>{if(!this.destroyed)throw q})}}),T.on("ReaderHeadersReady",X=>{const D=new _util.PromiseCapability,E=this._fullReader;return E.headersReady.then(()=>{var q;(!E.isStreamingSupported||!E.isRangeSupported)&&(this._lastProgress&&((q=R.onProgress)==null||q.call(R,this._lastProgress)),E.onProgress=oe=>{var ae;(ae=R.onProgress)==null||ae.call(R,{loaded:oe.loaded,total:oe.total})}),D.resolve({isStreamingSupported:E.isStreamingSupported,isRangeSupported:E.isRangeSupported,contentLength:E.contentLength})},D.reject),D.promise}),T.on("GetRangeReader",(X,D)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const E=this._networkStream.getRangeReader(X.begin,X.end);if(!E){D.close();return}D.onPull=()=>{E.read().then(function({value:q,done:oe}){if(oe){D.close();return}(0,_util.assert)(q instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),D.enqueue(new Uint8Array(q),1,[q])}).catch(q=>{D.error(q)})},D.onCancel=q=>{E.cancel(q),D.ready.catch(oe=>{if(!this.destroyed)throw oe})}}),T.on("GetDoc",({pdfInfo:X})=>{this._numPages=X.numPages,this._htmlForXfa=X.htmlForXfa,delete X.htmlForXfa,R._capability.resolve(new PDFDocumentProxy(X,this))}),T.on("DocException",function(X){let D;switch(X.name){case"PasswordException":D=new _util.PasswordException(X.message,X.code);break;case"InvalidPDFException":D=new _util.InvalidPDFException(X.message);break;case"MissingPDFException":D=new _util.MissingPDFException(X.message);break;case"UnexpectedResponseException":D=new _util.UnexpectedResponseException(X.message,X.status);break;case"UnknownErrorException":D=new _util.UnknownErrorException(X.message,X.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}R._capability.reject(D)}),T.on("PasswordRequest",X=>{if(Re(this,M,new _util.PromiseCapability),R.onPassword){const D=E=>{E instanceof Error?A(this,M).reject(E):A(this,M).resolve({password:E})};try{R.onPassword(D,X.code)}catch(E){A(this,M).reject(E)}}else A(this,M).reject(new _util.PasswordException(X.message,X.code));return A(this,M).promise}),T.on("DataLoaded",X=>{var D;(D=R.onProgress)==null||D.call(R,{loaded:X.length,total:X.length}),this.downloadInfoCapability.resolve(X)}),T.on("StartRenderPage",X=>{if(this.destroyed)return;A(this,w).get(X.pageIndex)._startRenderPage(X.transparency,X.cacheKey)}),T.on("commonobj",([X,D,E])=>{var q;if(!this.destroyed&&!this.commonObjs.has(X))switch(D){case"Font":const oe=this._params;if("error"in E){const re=E.error;(0,_util.warn)(`Error during font loading: ${re}`),this.commonObjs.resolve(X,re);break}const ae=oe.pdfBug&&((q=globalThis.FontInspector)!=null&&q.enabled)?(re,pe)=>globalThis.FontInspector.fontAdded(re,pe):null,ue=new _font_loader.FontFaceObject(E,{isEvalSupported:oe.isEvalSupported,disableFontFace:oe.disableFontFace,ignoreErrors:oe.ignoreErrors,inspectFont:ae});this.fontLoader.bind(ue).catch(re=>T.sendWithPromise("FontFallback",{id:X})).finally(()=>{!oe.fontExtraProperties&&ue.data&&(ue.data=null),this.commonObjs.resolve(X,ue)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(X,E);break;default:throw new Error(`Got unknown common object type ${D}`)}}),T.on("obj",([X,D,E,q])=>{var ae;if(this.destroyed)return;const oe=A(this,w).get(D);if(!oe.objs.has(X))switch(E){case"Image":if(oe.objs.resolve(X,q),q){let ue;if(q.bitmap){const{width:re,height:pe}=q;ue=re*pe*4}else ue=((ae=q.data)==null?void 0:ae.length)||0;ue>_util.MAX_IMAGE_SIZE_TO_CACHE&&(oe._maybeCleanupAfterRender=!0)}break;case"Pattern":oe.objs.resolve(X,q);break;default:throw new Error(`Got unknown object type ${E}`)}}),T.on("DocProgress",X=>{var D;this.destroyed||(D=R.onProgress)==null||D.call(R,{loaded:X.loaded,total:X.total})}),T.on("FetchBuiltInCMap",X=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(X):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),T.on("FetchStandardFontData",X=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(X):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var X;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:T,transfers:R}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:T,filename:((X=this._fullReader)==null?void 0:X.filename)??null},R).finally(()=>{this.annotationStorage.resetModified()})}getPage(T){if(!Number.isInteger(T)||T<=0||T>this._numPages)return Promise.reject(new Error("Invalid page request."));const R=T-1,X=A(this,I).get(R);if(X)return X;const D=this.messageHandler.sendWithPromise("GetPage",{pageIndex:R}).then(E=>{if(this.destroyed)throw new Error("Transport destroyed");const q=new PDFPageProxy(R,E,this,this._params.pdfBug);return A(this,w).set(R,q),q});return A(this,I).set(R,D),D}getPageIndex(T){return typeof T!="object"||T===null||!Number.isInteger(T.num)||T.num<0||!Number.isInteger(T.gen)||T.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:T.num,gen:T.gen})}getAnnotations(T,R){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:T,intent:R})}getFieldObjects(){return ve(this,B,vt).call(this,"GetFieldObjects")}hasJSActions(){return ve(this,B,vt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(T){return typeof T!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:T})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return ve(this,B,vt).call(this,"GetDocJSActions")}getPageJSActions(T){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:T})}getStructTree(T){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:T})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(T=>new _optional_content_config.OptionalContentConfig(T))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const T="GetMetadata",R=A(this,S).get(T);if(R)return R;const X=this.messageHandler.sendWithPromise(T,null).then(D=>{var E,q;return{info:D[0],metadata:D[1]?new _metadata.Metadata(D[1]):null,contentDispositionFilename:((E=this._fullReader)==null?void 0:E.filename)??null,contentLength:((q=this._fullReader)==null?void 0:q.contentLength)??null}});return A(this,S).set(T,X),X}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(T=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const R of A(this,w).values())if(!R.cleanup())throw new Error(`startCleanup: Page ${R.pageNumber} is currently rendering.`);this.commonObjs.clear(),T||this.fontLoader.clear(),A(this,S).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:T,enableXfa:R}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:T,enableXfa:R})}}S=new WeakMap,w=new WeakMap,I=new WeakMap,M=new WeakMap,B=new WeakSet,vt=function(T,R=null){const X=A(this,S).get(T);if(X)return X;const D=this.messageHandler.sendWithPromise(T,R);return A(this,S).set(T,D),D};class PDFObjects{constructor(){Ee(this,h);Ee(this,o,Object.create(null))}get(T,R=null){if(R){const D=ve(this,h,It).call(this,T);return D.capability.promise.then(()=>R(D.data)),null}const X=A(this,o)[T];if(!(X!=null&&X.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${T}.`);return X.data}has(T){const R=A(this,o)[T];return(R==null?void 0:R.capability.settled)||!1}resolve(T,R=null){const X=ve(this,h,It).call(this,T);X.data=R,X.capability.resolve()}clear(){var T;for(const R in A(this,o)){const{data:X}=A(this,o)[R];(T=X==null?void 0:X.bitmap)==null||T.close()}Re(this,o,Object.create(null))}}o=new WeakMap,h=new WeakSet,It=function(T){var R;return(R=A(this,o))[T]||(R[T]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(T){Ee(this,b,null);Re(this,b,T),this.onContinue=null}get promise(){return A(this,b).capability.promise}cancel(T=0){A(this,b).cancel(null,T)}get separateAnnots(){const{separateAnnots:T}=A(this,b).operatorList;if(!T)return!1;const{annotationCanvasMap:R}=A(this,b);return T.form||T.canvas&&(R==null?void 0:R.size)>0}}b=new WeakMap,exports$1.RenderTask=RenderTask;const y=class y{constructor({callback:T,params:R,objs:X,commonObjs:D,annotationCanvasMap:E,operatorList:q,pageIndex:oe,canvasFactory:ae,filterFactory:ue,useRequestAnimationFrame:re=!1,pdfBug:pe=!1,pageColors:H=null}){this.callback=T,this.params=R,this.objs=X,this.commonObjs=D,this.annotationCanvasMap=E,this.operatorListIdx=null,this.operatorList=q,this._pageIndex=oe,this.canvasFactory=ae,this.filterFactory=ue,this._pdfBug=pe,this.pageColors=H,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=re===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=R.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:T=!1,optionalContentConfig:R}){var oe,ae;if(this.cancelled)return;if(this._canvas){if(A(y,l).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");A(y,l).add(this._canvas)}this._pdfBug&&((oe=globalThis.StepperManager)!=null&&oe.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:X,viewport:D,transform:E,background:q}=this.params;this.gfx=new _canvas.CanvasGraphics(X,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:R},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:E,viewport:D,transparency:T,background:q}),this.operatorListIdx=0,this.graphicsReady=!0,(ae=this.graphicsReadyCallback)==null||ae.call(this)}cancel(T=null,R=0){var X;this.running=!1,this.cancelled=!0,(X=this.gfx)==null||X.endDrawing(),A(y,l).delete(this._canvas),this.callback(T||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,R))}operatorListChanged(){var T;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(T=this.stepper)==null||T.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),A(y,l).delete(this._canvas),this.callback())))}};l=new WeakMap,Ee(y,l,new WeakSet);let InternalRenderTask=y;const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build},(t,e,n)=>{var v,a,S,gr,I;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var r=n(1),c=n(4),m=n(8);const _=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=_;class k{constructor(){Ee(this,S);Ee(this,v,!1);Ee(this,a,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(B,P){const o=A(this,a).get(B);return o===void 0?P:Object.assign(P,o)}getRawValue(B){return A(this,a).get(B)}remove(B){if(A(this,a).delete(B),A(this,a).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const P of A(this,a).values())if(P instanceof c.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(B,P){const o=A(this,a).get(B);let h=!1;if(o!==void 0)for(const[x,b]of Object.entries(P))o[x]!==b&&(h=!0,o[x]=b);else h=!0,A(this,a).set(B,P);h&&ve(this,S,gr).call(this),P instanceof c.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(P.constructor._type)}has(B){return A(this,a).has(B)}getAll(){return A(this,a).size>0?(0,r.objectFromMap)(A(this,a)):null}setAll(B){for(const[P,o]of Object.entries(B))this.setValue(P,o)}get size(){return A(this,a).size}resetModified(){A(this,v)&&(Re(this,v,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new g(this)}get serializable(){if(A(this,a).size===0)return _;const B=new Map,P=new m.MurmurHash3_64,o=[],h=Object.create(null);let x=!1;for(const[b,l]of A(this,a)){const y=l instanceof c.AnnotationEditor?l.serialize(!1,h):l;y&&(B.set(b,y),P.update(`${b}:${JSON.stringify(y)}`),x||(x=!!y.bitmap))}if(x)for(const b of B.values())b.bitmap&&o.push(b.bitmap);return B.size>0?{map:B,hash:P.hexdigest(),transfers:o}:_}}v=new WeakMap,a=new WeakMap,S=new WeakSet,gr=function(){A(this,v)||(Re(this,v,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=k;class g extends k{constructor(P){super();Ee(this,I);const{map:o,hash:h,transfers:x}=P.serializable,b=structuredClone(o,x?{transfer:x}:null);Re(this,I,{map:b,hash:h,transfers:x})}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return A(this,I)}}I=new WeakMap,e.PrintAnnotationStorage=g},(t,e,n)=>{var g,v,a,S,w,I,M,B,P,o,h,x,b,l,y,Ft,Dt,R,Lt,Nt,mr,yr,_r,qt,vr;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var r=n(5),c=n(1),m=n(6);const re=class re{constructor(H){Ee(this,y);Ee(this,g,"");Ee(this,v,!1);Ee(this,a,null);Ee(this,S,null);Ee(this,w,null);Ee(this,I,!1);Ee(this,M,null);Ee(this,B,this.focusin.bind(this));Ee(this,P,this.focusout.bind(this));Ee(this,o,!1);Ee(this,h,!1);Ee(this,x,!1);Ye(this,"_initialOptions",Object.create(null));Ye(this,"_uiManager",null);Ye(this,"_focusEventsAllowed",!0);Ye(this,"_l10nPromise",null);Ee(this,b,!1);Ee(this,l,re._zIndex++);this.constructor===re&&(0,c.unreachable)("Cannot initialize AnnotationEditor."),this.parent=H.parent,this.id=H.id,this.width=this.height=null,this.pageIndex=H.parent.pageIndex,this.name=H.name,this.div=null,this._uiManager=H.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=H.isCentered,this._structTreeParentId=null;const{rotation:W,rawDims:{pageWidth:ne,pageHeight:j,pageX:s,pageY:i}}=this.parent.viewport;this.rotation=W,this.pageRotation=(360+W-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ne,j],this.pageTranslation=[s,i];const[p,f]=this.parentDimensions;this.x=H.x/p,this.y=H.y/f,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,c.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(H){const W=new k({id:H.parent.getNextId(),parent:H.parent,uiManager:H._uiManager});W.annotationElementId=H.annotationElementId,W.deleted=!0,W._uiManager.addToAnnotationStorage(W)}static initialize(H,W=null){if(re._l10nPromise||(re._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(j=>[j,H.get(j)]))),W!=null&&W.strings)for(const j of W.strings)re._l10nPromise.set(j,H.get(j));if(re._borderLineWidth!==-1)return;const ne=getComputedStyle(document.documentElement);re._borderLineWidth=parseFloat(ne.getPropertyValue("--outline-width"))||0}static updateDefaultParams(H,W){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(H){return!1}static paste(H,W){(0,c.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return A(this,b)}set _isDraggable(H){var W;Re(this,b,H),(W=this.div)==null||W.classList.toggle("draggable",H)}center(){const[H,W]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*W/(H*2),this.y+=this.width*H/(W*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*W/(H*2),this.y-=this.width*H/(W*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(H){this._uiManager.addCommands(H)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=A(this,l)}setParent(H){H!==null&&(this.pageIndex=H.pageIndex,this.pageDimensions=H.pageDimensions),this.parent=H}focusin(H){this._focusEventsAllowed&&(A(this,o)?Re(this,o,!1):this.parent.setSelected(this))}focusout(H){var ne;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const W=H.relatedTarget;W!=null&&W.closest(`#${this.id}`)||(H.preventDefault(),(ne=this.parent)!=null&&ne.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(H,W,ne,j){const[s,i]=this.parentDimensions;[ne,j]=this.screenToPageTranslation(ne,j),this.x=(H+ne)/s,this.y=(W+j)/i,this.fixAndSetPosition()}translate(H,W){ve(this,y,Ft).call(this,this.parentDimensions,H,W)}translateInPage(H,W){ve(this,y,Ft).call(this,this.pageDimensions,H,W),this.div.scrollIntoView({block:"nearest"})}drag(H,W){const[ne,j]=this.parentDimensions;if(this.x+=H/ne,this.y+=W/j,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:C,y:F}=this.div.getBoundingClientRect();this.parent.findNewParent(this,C,F)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:i}=this;const[p,f]=ve(this,y,Dt).call(this);s+=p,i+=f,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*i).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[H,W]=this.pageDimensions;let{x:ne,y:j,width:s,height:i}=this;switch(s*=H,i*=W,ne*=H,j*=W,this.rotation){case 0:ne=Math.max(0,Math.min(H-s,ne)),j=Math.max(0,Math.min(W-i,j));break;case 90:ne=Math.max(0,Math.min(H-i,ne)),j=Math.min(W,Math.max(s,j));break;case 180:ne=Math.min(H,Math.max(s,ne)),j=Math.min(W,Math.max(i,j));break;case 270:ne=Math.min(H,Math.max(i,ne)),j=Math.max(0,Math.min(W-s,j));break}this.x=ne/=H,this.y=j/=W;const[p,f]=ve(this,y,Dt).call(this);ne+=p,j+=f;const{style:C}=this.div;C.left=`${(100*ne).toFixed(2)}%`,C.top=`${(100*j).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(H,W){var ne;return ve(ne=re,R,Lt).call(ne,H,W,this.parentRotation)}pageTranslationToScreen(H,W){var ne;return ve(ne=re,R,Lt).call(ne,H,W,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:H,pageDimensions:[W,ne]}=this,j=W*H,s=ne*H;return c.FeatureTest.isCSSRoundSupported?[Math.round(j),Math.round(s)]:[j,s]}setDims(H,W){var s;const[ne,j]=this.parentDimensions;this.div.style.width=`${(100*H/ne).toFixed(2)}%`,A(this,I)||(this.div.style.height=`${(100*W/j).toFixed(2)}%`),(s=A(this,a))==null||s.classList.toggle("small",H<re.SMALL_EDITOR_SIZE||W<re.SMALL_EDITOR_SIZE)}fixDims(){const{style:H}=this.div,{height:W,width:ne}=H,j=ne.endsWith("%"),s=!A(this,I)&&W.endsWith("%");if(j&&s)return;const[i,p]=this.parentDimensions;j||(H.width=`${(100*parseFloat(ne)/i).toFixed(2)}%`),!A(this,I)&&!s&&(H.height=`${(100*parseFloat(W)/p).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(A(this,a))return;const H=Re(this,a,document.createElement("button"));H.className="altText";const W=await re._l10nPromise.get("editor_alt_text_button_label");H.textContent=W,H.setAttribute("aria-label",W),H.tabIndex="0",H.addEventListener("contextmenu",m.noContextMenu),H.addEventListener("pointerdown",ne=>ne.stopPropagation()),H.addEventListener("click",ne=>{ne.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),H.addEventListener("keydown",ne=>{ne.target===H&&ne.key==="Enter"&&(ne.preventDefault(),this._uiManager.editAltText(this))}),ve(this,y,qt).call(this),this.div.append(H),re.SMALL_EDITOR_SIZE||(re.SMALL_EDITOR_SIZE=Math.min(128,Math.round(H.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:A(this,g),decorative:A(this,v)}}set altTextData({altText:H,decorative:W}){A(this,g)===H&&A(this,v)===W||(Re(this,g,H),Re(this,v,W),ve(this,y,qt).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",A(this,B)),this.div.addEventListener("focusout",A(this,P));const[H,W]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*W/H).toFixed(2)}%`,this.div.style.maxHeight=`${(100*H/W).toFixed(2)}%`);const[ne,j]=this.getInitialTranslation();return this.translate(ne,j),(0,r.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(H){const{isMac:W}=c.FeatureTest.platform;if(H.button!==0||H.ctrlKey&&W){H.preventDefault();return}Re(this,o,!0),ve(this,y,vr).call(this,H)}moveInDOM(){var H;(H=this.parent)==null||H.moveEditorInDOM(this)}_setParentAndPosition(H,W,ne){H.changeParent(this),this.x=W,this.y=ne,this.fixAndSetPosition()}getRect(H,W){const ne=this.parentScale,[j,s]=this.pageDimensions,[i,p]=this.pageTranslation,f=H/ne,C=W/ne,F=this.x*j,z=this.y*s,Q=this.width*j,L=this.height*s;switch(this.rotation){case 0:return[F+f+i,s-z-C-L+p,F+f+Q+i,s-z-C+p];case 90:return[F+C+i,s-z+f+p,F+C+L+i,s-z+f+Q+p];case 180:return[F-f-Q+i,s-z+C+p,F-f+i,s-z+C+L+p];case 270:return[F-C-L+i,s-z-f-Q+p,F-C+i,s-z-f+p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(H,W){const[ne,j,s,i]=H,p=s-ne,f=i-j;switch(this.rotation){case 0:return[ne,W-i,p,f];case 90:return[ne,W-j,f,p];case 180:return[s,W-j,p,f];case 270:return[s,W-i,f,p];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Re(this,x,!0)}disableEditMode(){Re(this,x,!1)}isInEditMode(){return A(this,x)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var H,W;(H=this.div)==null||H.addEventListener("focusin",A(this,B)),(W=this.div)==null||W.addEventListener("focusout",A(this,P))}serialize(H=!1,W=null){(0,c.unreachable)("An editor must be serializable")}static deserialize(H,W,ne){const j=new this.prototype.constructor({parent:W,id:W.getNextId(),uiManager:ne});j.rotation=H.rotation;const[s,i]=j.pageDimensions,[p,f,C,F]=j.getRectInCurrentCoords(H.rect,i);return j.x=p/s,j.y=f/i,j.width=C/s,j.height=F/i,j}remove(){var H;this.div.removeEventListener("focusin",A(this,B)),this.div.removeEventListener("focusout",A(this,P)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(H=A(this,a))==null||H.remove(),Re(this,a,null),Re(this,S,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(ve(this,y,mr).call(this),A(this,M).classList.remove("hidden"))}select(){var H;this.makeResizable(),(H=this.div)==null||H.classList.add("selectedEditor")}unselect(){var H,W,ne;(H=A(this,M))==null||H.classList.add("hidden"),(W=this.div)==null||W.classList.remove("selectedEditor"),(ne=this.div)!=null&&ne.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(H,W){}disableEditing(){A(this,a)&&(A(this,a).hidden=!0)}enableEditing(){A(this,a)&&(A(this,a).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return A(this,h)}set isEditing(H){Re(this,h,H),this.parent&&(H?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(H,W){Re(this,I,!0);const ne=H/W,{style:j}=this.div;j.aspectRatio=ne,j.height="auto"}static get MIN_SIZE(){return 16}};g=new WeakMap,v=new WeakMap,a=new WeakMap,S=new WeakMap,w=new WeakMap,I=new WeakMap,M=new WeakMap,B=new WeakMap,P=new WeakMap,o=new WeakMap,h=new WeakMap,x=new WeakMap,b=new WeakMap,l=new WeakMap,y=new WeakSet,Ft=function([H,W],ne,j){[ne,j]=this.screenToPageTranslation(ne,j),this.x+=ne/H,this.y+=j/W,this.fixAndSetPosition()},Dt=function(){const[H,W]=this.parentDimensions,{_borderLineWidth:ne}=re,j=ne/H,s=ne/W;switch(this.rotation){case 90:return[-j,s];case 180:return[j,s];case 270:return[j,-s];default:return[-j,-s]}},R=new WeakSet,Lt=function(H,W,ne){switch(ne){case 90:return[W,-H];case 180:return[-H,-W];case 270:return[-W,H];default:return[H,W]}},Nt=function(H){switch(H){case 90:{const[W,ne]=this.pageDimensions;return[0,-W/ne,ne/W,0]}case 180:return[-1,0,0,-1];case 270:{const[W,ne]=this.pageDimensions;return[0,W/ne,-ne/W,0]}default:return[1,0,0,1]}},mr=function(){if(A(this,M))return;Re(this,M,document.createElement("div")),A(this,M).classList.add("resizers");const H=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||H.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const W of H){const ne=document.createElement("div");A(this,M).append(ne),ne.classList.add("resizer",W),ne.addEventListener("pointerdown",ve(this,y,yr).bind(this,W)),ne.addEventListener("contextmenu",m.noContextMenu)}this.div.prepend(A(this,M))},yr=function(H,W){W.preventDefault();const{isMac:ne}=c.FeatureTest.platform;if(W.button!==0||W.ctrlKey&&ne)return;const j=ve(this,y,_r).bind(this,H),s=this._isDraggable;this._isDraggable=!1;const i={passive:!0,capture:!0};window.addEventListener("pointermove",j,i);const p=this.x,f=this.y,C=this.width,F=this.height,z=this.parent.div.style.cursor,Q=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(W.target).cursor;const L=()=>{this._isDraggable=s,window.removeEventListener("pointerup",L),window.removeEventListener("blur",L),window.removeEventListener("pointermove",j,i),this.parent.div.style.cursor=z,this.div.style.cursor=Q;const N=this.x,se=this.y,ge=this.width,Ae=this.height;N===p&&se===f&&ge===C&&Ae===F||this.addCommands({cmd:()=>{this.width=ge,this.height=Ae,this.x=N,this.y=se;const[he,de]=this.parentDimensions;this.setDims(he*ge,de*Ae),this.fixAndSetPosition()},undo:()=>{this.width=C,this.height=F,this.x=p,this.y=f;const[he,de]=this.parentDimensions;this.setDims(he*C,de*F),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",L),window.addEventListener("blur",L)},_r=function(H,W){const[ne,j]=this.parentDimensions,s=this.x,i=this.y,p=this.width,f=this.height,C=re.MIN_SIZE/ne,F=re.MIN_SIZE/j,z=$=>Math.round($*1e4)/1e4,Q=ve(this,y,Nt).call(this,this.rotation),L=($,be)=>[Q[0]*$+Q[2]*be,Q[1]*$+Q[3]*be],N=ve(this,y,Nt).call(this,360-this.rotation),se=($,be)=>[N[0]*$+N[2]*be,N[1]*$+N[3]*be];let ge,Ae,he=!1,de=!1;switch(H){case"topLeft":he=!0,ge=($,be)=>[0,0],Ae=($,be)=>[$,be];break;case"topMiddle":ge=($,be)=>[$/2,0],Ae=($,be)=>[$/2,be];break;case"topRight":he=!0,ge=($,be)=>[$,0],Ae=($,be)=>[0,be];break;case"middleRight":de=!0,ge=($,be)=>[$,be/2],Ae=($,be)=>[0,be/2];break;case"bottomRight":he=!0,ge=($,be)=>[$,be],Ae=($,be)=>[0,0];break;case"bottomMiddle":ge=($,be)=>[$/2,be],Ae=($,be)=>[$/2,0];break;case"bottomLeft":he=!0,ge=($,be)=>[0,be],Ae=($,be)=>[$,0];break;case"middleLeft":de=!0,ge=($,be)=>[0,be/2],Ae=($,be)=>[$,be/2];break}const K=ge(p,f),V=Ae(p,f);let me=L(...V);const _e=z(s+me[0]),Ce=z(i+me[1]);let ke=1,te=1,[J,Se]=this.screenToPageTranslation(W.movementX,W.movementY);if([J,Se]=se(J/ne,Se/j),he){const $=Math.hypot(p,f);ke=te=Math.max(Math.min(Math.hypot(V[0]-K[0]-J,V[1]-K[1]-Se)/$,1/p,1/f),C/p,F/f)}else de?ke=Math.max(C,Math.min(1,Math.abs(V[0]-K[0]-J)))/p:te=Math.max(F,Math.min(1,Math.abs(V[1]-K[1]-Se)))/f;const Te=z(p*ke),De=z(f*te);me=L(...Ae(Te,De));const Ne=_e-me[0],Ue=Ce-me[1];this.width=Te,this.height=De,this.x=Ne,this.y=Ue,this.setDims(ne*Te,j*De),this.fixAndSetPosition()},qt=async function(){var ne;const H=A(this,a);if(!H)return;if(!A(this,g)&&!A(this,v)){H.classList.remove("done"),(ne=A(this,S))==null||ne.remove();return}re._l10nPromise.get("editor_alt_text_edit_button_label").then(j=>{H.setAttribute("aria-label",j)});let W=A(this,S);if(!W){Re(this,S,W=document.createElement("span")),W.className="tooltip",W.setAttribute("role","tooltip");const j=W.id=`alt-text-tooltip-${this.id}`;H.setAttribute("aria-describedby",j);const s=100;H.addEventListener("mouseenter",()=>{Re(this,w,setTimeout(()=>{Re(this,w,null),A(this,S).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},s))}),H.addEventListener("mouseleave",()=>{var i;clearTimeout(A(this,w)),Re(this,w,null),(i=A(this,S))==null||i.classList.remove("show")})}H.classList.add("done"),W.innerText=A(this,v)?await re._l10nPromise.get("editor_alt_text_decorative_tooltip"):A(this,g),W.parentNode||H.append(W)},vr=function(H){if(!this._isDraggable)return;const W=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let ne,j;W&&(ne={passive:!0,capture:!0},j=i=>{const[p,f]=this.screenToPageTranslation(i.movementX,i.movementY);this._uiManager.dragSelectedEditors(p,f)},window.addEventListener("pointermove",j,ne));const s=()=>{if(window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),W&&window.removeEventListener("pointermove",j,ne),Re(this,o,!1),!this._uiManager.endDragSession()){const{isMac:i}=c.FeatureTest.platform;H.ctrlKey&&!i||H.shiftKey||H.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",s),window.addEventListener("blur",s)},Ee(re,R),Ye(re,"_borderLineWidth",-1),Ye(re,"_colorManager",new r.ColorManager),Ye(re,"_zIndex",1),Ye(re,"SMALL_EDITOR_SIZE",0);let _=re;e.AnnotationEditor=_;class k extends _{constructor(H){super(H),this.annotationElementId=H.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,n)=>{var I,M,B,P,o,Bt,b,l,y,u,T,br,D,E,q,oe,ae,ue,re,pe,H,W,ne,j,s,i,p,f,C,F,z,Q,L,N,se,ge,Ae,he,de,K,V,me,_e,Ce,ke,te,J,Ar,jt,Ut,bt,Ht,Wt,Qe,ht,wr,Sr,zt,ft,Gt;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=m,e.opacityToHex=_;var r=n(1),c=n(6);function m(d,G,ce){for(const U of ce)G.addEventListener(U,d[U].bind(d))}function _(d){return Math.round(Math.min(255,Math.max(1,255*d))).toString(16).padStart(2,"0")}class k{constructor(){Ee(this,I,0)}getId(){return`${r.AnnotationEditorPrefix}${ut(this,I)._++}`}}I=new WeakMap;const x=class x{constructor(){Ee(this,o);Ee(this,M,(0,r.getUuid)());Ee(this,B,0);Ee(this,P,null)}static get _isSVGFittingCanvas(){const G='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',U=new OffscreenCanvas(1,3).getContext("2d"),le=new Image;le.src=G;const ye=le.decode().then(()=>(U.drawImage(le,0,0,1,1,0,0,1,3),new Uint32Array(U.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,r.shadow)(this,"_isSVGFittingCanvas",ye)}async getFromFile(G){const{lastModified:ce,name:U,size:le,type:ye}=G;return ve(this,o,Bt).call(this,`${ce}_${U}_${le}_${ye}`,G)}async getFromUrl(G){return ve(this,o,Bt).call(this,G,G)}async getFromId(G){A(this,P)||Re(this,P,new Map);const ce=A(this,P).get(G);return ce?ce.bitmap?(ce.refCounter+=1,ce):ce.file?this.getFromFile(ce.file):this.getFromUrl(ce.url):null}getSvgUrl(G){const ce=A(this,P).get(G);return ce!=null&&ce.isSvg?ce.svgUrl:null}deleteId(G){A(this,P)||Re(this,P,new Map);const ce=A(this,P).get(G);ce&&(ce.refCounter-=1,ce.refCounter===0&&(ce.bitmap=null))}isValidId(G){return G.startsWith(`image_${A(this,M)}_`)}};M=new WeakMap,B=new WeakMap,P=new WeakMap,o=new WeakSet,Bt=async function(G,ce){A(this,P)||Re(this,P,new Map);let U=A(this,P).get(G);if(U===null)return null;if(U!=null&&U.bitmap)return U.refCounter+=1,U;try{U||(U={bitmap:null,id:`image_${A(this,M)}_${ut(this,B)._++}`,refCounter:0,isSvg:!1});let le;if(typeof ce=="string"){U.url=ce;const ye=await fetch(ce);if(!ye.ok)throw new Error(ye.statusText);le=await ye.blob()}else le=U.file=ce;if(le.type==="image/svg+xml"){const ye=x._isSVGFittingCanvas,Ie=new FileReader,Z=new Image,Y=new Promise((fe,xe)=>{Z.onload=()=>{U.bitmap=Z,U.isSvg=!0,fe()},Ie.onload=async()=>{const Pe=U.svgUrl=Ie.result;Z.src=await ye?`${Pe}#svgView(preserveAspectRatio(none))`:Pe},Z.onerror=Ie.onerror=xe});Ie.readAsDataURL(le),await Y}else U.bitmap=await createImageBitmap(le);U.refCounter=1}catch(le){console.error(le),U=null}return A(this,P).set(G,U),U&&A(this,P).set(U.id,U),U};let g=x;class v{constructor(G=128){Ee(this,b,[]);Ee(this,l,!1);Ee(this,y);Ee(this,u,-1);Re(this,y,G)}add({cmd:G,undo:ce,mustExec:U,type:le=NaN,overwriteIfSameType:ye=!1,keepUndo:Ie=!1}){if(U&&G(),A(this,l))return;const Z={cmd:G,undo:ce,type:le};if(A(this,u)===-1){A(this,b).length>0&&(A(this,b).length=0),Re(this,u,0),A(this,b).push(Z);return}if(ye&&A(this,b)[A(this,u)].type===le){Ie&&(Z.undo=A(this,b)[A(this,u)].undo),A(this,b)[A(this,u)]=Z;return}const Y=A(this,u)+1;Y===A(this,y)?A(this,b).splice(0,1):(Re(this,u,Y),Y<A(this,b).length&&A(this,b).splice(Y)),A(this,b).push(Z)}undo(){A(this,u)!==-1&&(Re(this,l,!0),A(this,b)[A(this,u)].undo(),Re(this,l,!1),Re(this,u,A(this,u)-1))}redo(){A(this,u)<A(this,b).length-1&&(Re(this,u,A(this,u)+1),Re(this,l,!0),A(this,b)[A(this,u)].cmd(),Re(this,l,!1))}hasSomethingToUndo(){return A(this,u)!==-1}hasSomethingToRedo(){return A(this,u)<A(this,b).length-1}destroy(){Re(this,b,null)}}b=new WeakMap,l=new WeakMap,y=new WeakMap,u=new WeakMap,e.CommandManager=v;class a{constructor(G){Ee(this,T);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:ce}=r.FeatureTest.platform;for(const[U,le,ye={}]of G)for(const Ie of U){const Z=Ie.startsWith("mac+");ce&&Z?(this.callbacks.set(Ie.slice(4),{callback:le,options:ye}),this.allKeys.add(Ie.split("+").at(-1))):!ce&&!Z&&(this.callbacks.set(Ie,{callback:le,options:ye}),this.allKeys.add(Ie.split("+").at(-1)))}}exec(G,ce){if(!this.allKeys.has(ce.key))return;const U=this.callbacks.get(ve(this,T,br).call(this,ce));if(!U)return;const{callback:le,options:{bubbles:ye=!1,args:Ie=[],checker:Z=null}}=U;Z&&!Z(G,ce)||(le.bind(G,...Ie)(),ye||(ce.stopPropagation(),ce.preventDefault()))}}T=new WeakSet,br=function(G){G.altKey&&this.buffer.push("alt"),G.ctrlKey&&this.buffer.push("ctrl"),G.metaKey&&this.buffer.push("meta"),G.shiftKey&&this.buffer.push("shift"),this.buffer.push(G.key);const ce=this.buffer.join("+");return this.buffer.length=0,ce},e.KeyboardManager=a;const X=class X{get _colors(){const G=new Map([["CanvasText",null],["Canvas",null]]);return(0,c.getColorValues)(G),(0,r.shadow)(this,"_colors",G)}convert(G){const ce=(0,c.getRGB)(G);if(!window.matchMedia("(forced-colors: active)").matches)return ce;for(const[U,le]of this._colors)if(le.every((ye,Ie)=>ye===ce[Ie]))return X._colorsMapping.get(U);return ce}getHexCode(G){const ce=this._colors.get(G);return ce?r.Util.makeHexColor(...ce):G}};Ye(X,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let S=X;e.ColorManager=S;const qe=class qe{constructor(G,ce,U,le,ye,Ie){Ee(this,J);Ee(this,D,null);Ee(this,E,new Map);Ee(this,q,new Map);Ee(this,oe,null);Ee(this,ae,null);Ee(this,ue,new v);Ee(this,re,0);Ee(this,pe,new Set);Ee(this,H,null);Ee(this,W,null);Ee(this,ne,new Set);Ee(this,j,null);Ee(this,s,new k);Ee(this,i,!1);Ee(this,p,!1);Ee(this,f,null);Ee(this,C,r.AnnotationEditorType.NONE);Ee(this,F,new Set);Ee(this,z,null);Ee(this,Q,this.blur.bind(this));Ee(this,L,this.focus.bind(this));Ee(this,N,this.copy.bind(this));Ee(this,se,this.cut.bind(this));Ee(this,ge,this.paste.bind(this));Ee(this,Ae,this.keydown.bind(this));Ee(this,he,this.onEditingAction.bind(this));Ee(this,de,this.onPageChanging.bind(this));Ee(this,K,this.onScaleChanging.bind(this));Ee(this,V,this.onRotationChanging.bind(this));Ee(this,me,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Ee(this,_e,[0,0]);Ee(this,Ce,null);Ee(this,ke,null);Ee(this,te,null);Re(this,ke,G),Re(this,te,ce),Re(this,oe,U),this._eventBus=le,this._eventBus._on("editingaction",A(this,he)),this._eventBus._on("pagechanging",A(this,de)),this._eventBus._on("scalechanging",A(this,K)),this._eventBus._on("rotationchanging",A(this,V)),Re(this,ae,ye.annotationStorage),Re(this,j,ye.filterFactory),Re(this,z,Ie),this.viewParameters={realScale:c.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const G=qe.prototype,ce=ye=>{const{activeElement:Ie}=document;return Ie&&A(ye,ke).contains(Ie)&&ye.hasSomethingToControl()},U=this.TRANSLATE_SMALL,le=this.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new a([[["ctrl+a","mac+meta+a"],G.selectAll],[["ctrl+z","mac+meta+z"],G.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],G.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],G.delete],[["Escape","mac+Escape"],G.unselectAll],[["ArrowLeft","mac+ArrowLeft"],G.translateSelectedEditors,{args:[-U,0],checker:ce}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],G.translateSelectedEditors,{args:[-le,0],checker:ce}],[["ArrowRight","mac+ArrowRight"],G.translateSelectedEditors,{args:[U,0],checker:ce}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],G.translateSelectedEditors,{args:[le,0],checker:ce}],[["ArrowUp","mac+ArrowUp"],G.translateSelectedEditors,{args:[0,-U],checker:ce}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],G.translateSelectedEditors,{args:[0,-le],checker:ce}],[["ArrowDown","mac+ArrowDown"],G.translateSelectedEditors,{args:[0,U],checker:ce}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],G.translateSelectedEditors,{args:[0,le],checker:ce}]]))}destroy(){ve(this,J,bt).call(this),ve(this,J,jt).call(this),this._eventBus._off("editingaction",A(this,he)),this._eventBus._off("pagechanging",A(this,de)),this._eventBus._off("scalechanging",A(this,K)),this._eventBus._off("rotationchanging",A(this,V));for(const G of A(this,q).values())G.destroy();A(this,q).clear(),A(this,E).clear(),A(this,ne).clear(),Re(this,D,null),A(this,F).clear(),A(this,ue).destroy(),A(this,oe).destroy()}get hcmFilter(){return(0,r.shadow)(this,"hcmFilter",A(this,z)?A(this,j).addHCMFilter(A(this,z).foreground,A(this,z).background):"none")}get direction(){return(0,r.shadow)(this,"direction",getComputedStyle(A(this,ke)).direction)}editAltText(G){var ce;(ce=A(this,oe))==null||ce.editAltText(this,G)}onPageChanging({pageNumber:G}){Re(this,re,G-1)}focusMainContainer(){A(this,ke).focus()}findParent(G,ce){for(const U of A(this,q).values()){const{x:le,y:ye,width:Ie,height:Z}=U.div.getBoundingClientRect();if(G>=le&&G<=le+Ie&&ce>=ye&&ce<=ye+Z)return U}return null}disableUserSelect(G=!1){A(this,te).classList.toggle("noUserSelect",G)}addShouldRescale(G){A(this,ne).add(G)}removeShouldRescale(G){A(this,ne).delete(G)}onScaleChanging({scale:G}){this.commitOrRemove(),this.viewParameters.realScale=G*c.PixelsPerInch.PDF_TO_CSS_UNITS;for(const ce of A(this,ne))ce.onScaleChanging()}onRotationChanging({pagesRotation:G}){this.commitOrRemove(),this.viewParameters.rotation=G}addToAnnotationStorage(G){!G.isEmpty()&&A(this,ae)&&!A(this,ae).has(G.id)&&A(this,ae).setValue(G.id,G)}blur(){if(!this.hasSelection)return;const{activeElement:G}=document;for(const ce of A(this,F))if(ce.div.contains(G)){Re(this,f,[ce,G]),ce._focusEventsAllowed=!1;break}}focus(){if(!A(this,f))return;const[G,ce]=A(this,f);Re(this,f,null),ce.addEventListener("focusin",()=>{G._focusEventsAllowed=!0},{once:!0}),ce.focus()}addEditListeners(){ve(this,J,Ut).call(this),ve(this,J,Ht).call(this)}removeEditListeners(){ve(this,J,bt).call(this),ve(this,J,Wt).call(this)}copy(G){var U;if(G.preventDefault(),(U=A(this,D))==null||U.commitOrRemove(),!this.hasSelection)return;const ce=[];for(const le of A(this,F)){const ye=le.serialize(!0);ye&&ce.push(ye)}ce.length!==0&&G.clipboardData.setData("application/pdfjs",JSON.stringify(ce))}cut(G){this.copy(G),this.delete()}paste(G){G.preventDefault();const{clipboardData:ce}=G;for(const ye of ce.items)for(const Ie of A(this,W))if(Ie.isHandlingMimeForPasting(ye.type)){Ie.paste(ye,this.currentLayer);return}let U=ce.getData("application/pdfjs");if(!U)return;try{U=JSON.parse(U)}catch(ye){(0,r.warn)(`paste: "${ye.message}".`);return}if(!Array.isArray(U))return;this.unselectAll();const le=this.currentLayer;try{const ye=[];for(const Y of U){const fe=le.deserialize(Y);if(!fe)return;ye.push(fe)}const Ie=()=>{for(const Y of ye)ve(this,J,zt).call(this,Y);ve(this,J,Gt).call(this,ye)},Z=()=>{for(const Y of ye)Y.remove()};this.addCommands({cmd:Ie,undo:Z,mustExec:!0})}catch(ye){(0,r.warn)(`paste: "${ye.message}".`)}}keydown(G){var ce;(ce=this.getActive())!=null&&ce.shouldGetKeyboardEvents()||qe._keyboardManager.exec(this,G)}onEditingAction(G){["undo","redo","delete","selectAll"].includes(G.name)&&this[G.name]()}setEditingState(G){G?(ve(this,J,Ar).call(this),ve(this,J,Ut).call(this),ve(this,J,Ht).call(this),ve(this,J,Qe).call(this,{isEditing:A(this,C)!==r.AnnotationEditorType.NONE,isEmpty:ve(this,J,ft).call(this),hasSomethingToUndo:A(this,ue).hasSomethingToUndo(),hasSomethingToRedo:A(this,ue).hasSomethingToRedo(),hasSelectedEditor:!1})):(ve(this,J,jt).call(this),ve(this,J,bt).call(this),ve(this,J,Wt).call(this),ve(this,J,Qe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(G){if(!A(this,W)){Re(this,W,G);for(const ce of A(this,W))ve(this,J,ht).call(this,ce.defaultPropertiesToUpdate)}}getId(){return A(this,s).getId()}get currentLayer(){return A(this,q).get(A(this,re))}getLayer(G){return A(this,q).get(G)}get currentPageIndex(){return A(this,re)}addLayer(G){A(this,q).set(G.pageIndex,G),A(this,i)?G.enable():G.disable()}removeLayer(G){A(this,q).delete(G.pageIndex)}updateMode(G,ce=null){if(A(this,C)!==G){if(Re(this,C,G),G===r.AnnotationEditorType.NONE){this.setEditingState(!1),ve(this,J,Sr).call(this);return}this.setEditingState(!0),ve(this,J,wr).call(this),this.unselectAll();for(const U of A(this,q).values())U.updateMode(G);if(ce){for(const U of A(this,E).values())if(U.annotationElementId===ce){this.setSelected(U),U.enterInEditMode();break}}}}updateToolbar(G){G!==A(this,C)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:G})}updateParams(G,ce){if(A(this,W)){if(G===r.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(G);return}for(const U of A(this,F))U.updateParams(G,ce);for(const U of A(this,W))U.updateDefaultParams(G,ce)}}enableWaiting(G=!1){if(A(this,p)!==G){Re(this,p,G);for(const ce of A(this,q).values())G?ce.disableClick():ce.enableClick(),ce.div.classList.toggle("waiting",G)}}getEditors(G){const ce=[];for(const U of A(this,E).values())U.pageIndex===G&&ce.push(U);return ce}getEditor(G){return A(this,E).get(G)}addEditor(G){A(this,E).set(G.id,G)}removeEditor(G){var ce;A(this,E).delete(G.id),this.unselect(G),(!G.annotationElementId||!A(this,pe).has(G.annotationElementId))&&((ce=A(this,ae))==null||ce.remove(G.id))}addDeletedAnnotationElement(G){A(this,pe).add(G.annotationElementId),G.deleted=!0}isDeletedAnnotationElement(G){return A(this,pe).has(G)}removeDeletedAnnotationElement(G){A(this,pe).delete(G.annotationElementId),G.deleted=!1}setActiveEditor(G){A(this,D)!==G&&(Re(this,D,G),G&&ve(this,J,ht).call(this,G.propertiesToUpdate))}toggleSelected(G){if(A(this,F).has(G)){A(this,F).delete(G),G.unselect(),ve(this,J,Qe).call(this,{hasSelectedEditor:this.hasSelection});return}A(this,F).add(G),G.select(),ve(this,J,ht).call(this,G.propertiesToUpdate),ve(this,J,Qe).call(this,{hasSelectedEditor:!0})}setSelected(G){for(const ce of A(this,F))ce!==G&&ce.unselect();A(this,F).clear(),A(this,F).add(G),G.select(),ve(this,J,ht).call(this,G.propertiesToUpdate),ve(this,J,Qe).call(this,{hasSelectedEditor:!0})}isSelected(G){return A(this,F).has(G)}unselect(G){G.unselect(),A(this,F).delete(G),ve(this,J,Qe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return A(this,F).size!==0}undo(){A(this,ue).undo(),ve(this,J,Qe).call(this,{hasSomethingToUndo:A(this,ue).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ve(this,J,ft).call(this)})}redo(){A(this,ue).redo(),ve(this,J,Qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:A(this,ue).hasSomethingToRedo(),isEmpty:ve(this,J,ft).call(this)})}addCommands(G){A(this,ue).add(G),ve(this,J,Qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ve(this,J,ft).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const G=[...A(this,F)],ce=()=>{for(const le of G)le.remove()},U=()=>{for(const le of G)ve(this,J,zt).call(this,le)};this.addCommands({cmd:ce,undo:U,mustExec:!0})}commitOrRemove(){var G;(G=A(this,D))==null||G.commitOrRemove()}hasSomethingToControl(){return A(this,D)||this.hasSelection}selectAll(){for(const G of A(this,F))G.commit();ve(this,J,Gt).call(this,A(this,E).values())}unselectAll(){if(A(this,D)){A(this,D).commitOrRemove();return}if(this.hasSelection){for(const G of A(this,F))G.unselect();A(this,F).clear(),ve(this,J,Qe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(G,ce,U=!1){if(U||this.commitOrRemove(),!this.hasSelection)return;A(this,_e)[0]+=G,A(this,_e)[1]+=ce;const[le,ye]=A(this,_e),Ie=[...A(this,F)],Z=1e3;A(this,Ce)&&clearTimeout(A(this,Ce)),Re(this,Ce,setTimeout(()=>{Re(this,Ce,null),A(this,_e)[0]=A(this,_e)[1]=0,this.addCommands({cmd:()=>{for(const Y of Ie)A(this,E).has(Y.id)&&Y.translateInPage(le,ye)},undo:()=>{for(const Y of Ie)A(this,E).has(Y.id)&&Y.translateInPage(-le,-ye)},mustExec:!1})},Z));for(const Y of Ie)Y.translateInPage(G,ce)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Re(this,H,new Map);for(const G of A(this,F))A(this,H).set(G,{savedX:G.x,savedY:G.y,savedPageIndex:G.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!A(this,H))return!1;this.disableUserSelect(!1);const G=A(this,H);Re(this,H,null);let ce=!1;for(const[{x:le,y:ye,pageIndex:Ie},Z]of G)Z.newX=le,Z.newY=ye,Z.newPageIndex=Ie,ce||(ce=le!==Z.savedX||ye!==Z.savedY||Ie!==Z.savedPageIndex);if(!ce)return!1;const U=(le,ye,Ie,Z)=>{if(A(this,E).has(le.id)){const Y=A(this,q).get(Z);Y?le._setParentAndPosition(Y,ye,Ie):(le.pageIndex=Z,le.x=ye,le.y=Ie)}};return this.addCommands({cmd:()=>{for(const[le,{newX:ye,newY:Ie,newPageIndex:Z}]of G)U(le,ye,Ie,Z)},undo:()=>{for(const[le,{savedX:ye,savedY:Ie,savedPageIndex:Z}]of G)U(le,ye,Ie,Z)},mustExec:!0}),!0}dragSelectedEditors(G,ce){if(A(this,H))for(const U of A(this,H).keys())U.drag(G,ce)}rebuild(G){if(G.parent===null){const ce=this.getLayer(G.pageIndex);ce?(ce.changeParent(G),ce.addOrRebuild(G)):(this.addEditor(G),this.addToAnnotationStorage(G),G.rebuild())}else G.parent.addOrRebuild(G)}isActive(G){return A(this,D)===G}getActive(){return A(this,D)}getMode(){return A(this,C)}get imageManager(){return(0,r.shadow)(this,"imageManager",new g)}};D=new WeakMap,E=new WeakMap,q=new WeakMap,oe=new WeakMap,ae=new WeakMap,ue=new WeakMap,re=new WeakMap,pe=new WeakMap,H=new WeakMap,W=new WeakMap,ne=new WeakMap,j=new WeakMap,s=new WeakMap,i=new WeakMap,p=new WeakMap,f=new WeakMap,C=new WeakMap,F=new WeakMap,z=new WeakMap,Q=new WeakMap,L=new WeakMap,N=new WeakMap,se=new WeakMap,ge=new WeakMap,Ae=new WeakMap,he=new WeakMap,de=new WeakMap,K=new WeakMap,V=new WeakMap,me=new WeakMap,_e=new WeakMap,Ce=new WeakMap,ke=new WeakMap,te=new WeakMap,J=new WeakSet,Ar=function(){window.addEventListener("focus",A(this,L)),window.addEventListener("blur",A(this,Q))},jt=function(){window.removeEventListener("focus",A(this,L)),window.removeEventListener("blur",A(this,Q))},Ut=function(){window.addEventListener("keydown",A(this,Ae),{capture:!0})},bt=function(){window.removeEventListener("keydown",A(this,Ae),{capture:!0})},Ht=function(){document.addEventListener("copy",A(this,N)),document.addEventListener("cut",A(this,se)),document.addEventListener("paste",A(this,ge))},Wt=function(){document.removeEventListener("copy",A(this,N)),document.removeEventListener("cut",A(this,se)),document.removeEventListener("paste",A(this,ge))},Qe=function(G){Object.entries(G).some(([U,le])=>A(this,me)[U]!==le)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(A(this,me),G)})},ht=function(G){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:G})},wr=function(){if(!A(this,i)){Re(this,i,!0);for(const G of A(this,q).values())G.enable()}},Sr=function(){if(this.unselectAll(),A(this,i)){Re(this,i,!1);for(const G of A(this,q).values())G.disable()}},zt=function(G){const ce=A(this,q).get(G.pageIndex);ce?ce.addOrRebuild(G):this.addEditor(G)},ft=function(){if(A(this,E).size===0)return!0;if(A(this,E).size===1)for(const G of A(this,E).values())return G.isEmpty();return!1},Gt=function(G){A(this,F).clear();for(const ce of G)ce.isEmpty()||(A(this,F).add(ce),ce.select());ve(this,J,Qe).call(this,{hasSelectedEditor:!0})},Ye(qe,"TRANSLATE_SMALL",1),Ye(qe,"TRANSLATE_BIG",10);let w=qe;e.AnnotationEditorUIManager=w},(t,e,n)=>{var re,pe,H,W,ne,j,s,i,p,f,C,F,st,ot,$t,At,wt,dt,pt;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=u,e.getColorValues=E,e.getCurrentTransform=q,e.getCurrentTransformInverse=oe,e.getFilenameFromUrl=o,e.getPdfFilenameFromUrl=h,e.getRGB=D,e.getXfaPageViewport=X,e.isDataScheme=B,e.isPdfFile=P,e.isValidFetchUrl=b,e.loadScript=y,e.noContextMenu=l,e.setLayerDimensions=ae;var r=n(7),c=n(1);const m="http://www.w3.org/2000/svg",ue=class ue{};Ye(ue,"CSS",96),Ye(ue,"PDF",72),Ye(ue,"PDF_TO_CSS_UNITS",ue.CSS/ue.PDF);let _=ue;e.PixelsPerInch=_;class k extends r.BaseFilterFactory{constructor({docId:K,ownerDocument:V=globalThis.document}={}){super();Ee(this,F);Ee(this,re);Ee(this,pe);Ee(this,H);Ee(this,W);Ee(this,ne);Ee(this,j);Ee(this,s);Ee(this,i);Ee(this,p);Ee(this,f);Ee(this,C,0);Re(this,H,K),Re(this,W,V)}addFilter(K){if(!K)return"none";let V=A(this,F,st).get(K);if(V)return V;let me,_e,Ce,ke;if(K.length===1){const Te=K[0],De=new Array(256);for(let Ne=0;Ne<256;Ne++)De[Ne]=Te[Ne]/255;ke=me=_e=Ce=De.join(",")}else{const[Te,De,Ne]=K,Ue=new Array(256),$=new Array(256),be=new Array(256);for(let Me=0;Me<256;Me++)Ue[Me]=Te[Me]/255,$[Me]=De[Me]/255,be[Me]=Ne[Me]/255;me=Ue.join(","),_e=$.join(","),Ce=be.join(","),ke=`${me}${_e}${Ce}`}if(V=A(this,F,st).get(ke),V)return A(this,F,st).set(K,V),V;const te=`g_${A(this,H)}_transfer_map_${ut(this,C)._++}`,J=`url(#${te})`;A(this,F,st).set(K,J),A(this,F,st).set(ke,J);const Se=ve(this,F,At).call(this,te);return ve(this,F,dt).call(this,me,_e,Ce,Se),J}addHCMFilter(K,V){var De;const me=`${K}-${V}`;if(A(this,j)===me)return A(this,s);if(Re(this,j,me),Re(this,s,"none"),(De=A(this,ne))==null||De.remove(),!K||!V)return A(this,s);const _e=ve(this,F,pt).call(this,K);K=c.Util.makeHexColor(..._e);const Ce=ve(this,F,pt).call(this,V);if(V=c.Util.makeHexColor(...Ce),A(this,F,ot).style.color="",K==="#000000"&&V==="#ffffff"||K===V)return A(this,s);const ke=new Array(256);for(let Ne=0;Ne<=255;Ne++){const Ue=Ne/255;ke[Ne]=Ue<=.03928?Ue/12.92:((Ue+.055)/1.055)**2.4}const te=ke.join(","),J=`g_${A(this,H)}_hcm_filter`,Se=Re(this,i,ve(this,F,At).call(this,J));ve(this,F,dt).call(this,te,te,te,Se),ve(this,F,$t).call(this,Se);const Te=(Ne,Ue)=>{const $=_e[Ne]/255,be=Ce[Ne]/255,Me=new Array(Ue+1);for(let Le=0;Le<=Ue;Le++)Me[Le]=$+Le/Ue*(be-$);return Me.join(",")};return ve(this,F,dt).call(this,Te(0,5),Te(1,5),Te(2,5),Se),Re(this,s,`url(#${J})`),A(this,s)}addHighlightHCMFilter(K,V,me,_e){var be;const Ce=`${K}-${V}-${me}-${_e}`;if(A(this,p)===Ce)return A(this,f);if(Re(this,p,Ce),Re(this,f,"none"),(be=A(this,i))==null||be.remove(),!K||!V)return A(this,f);const[ke,te]=[K,V].map(ve(this,F,pt).bind(this));let J=Math.round(.2126*ke[0]+.7152*ke[1]+.0722*ke[2]),Se=Math.round(.2126*te[0]+.7152*te[1]+.0722*te[2]),[Te,De]=[me,_e].map(ve(this,F,pt).bind(this));Se<J&&([J,Se,Te,De]=[Se,J,De,Te]),A(this,F,ot).style.color="";const Ne=(Me,Le,ee)=>{const ie=new Array(256),O=(Se-J)/ee,we=Me/255,qe=(Le-Me)/(255*ee);let d=0;for(let G=0;G<=ee;G++){const ce=Math.round(J+G*O),U=we+G*qe;for(let le=d;le<=ce;le++)ie[le]=U;d=ce+1}for(let G=d;G<256;G++)ie[G]=ie[d-1];return ie.join(",")},Ue=`g_${A(this,H)}_hcm_highlight_filter`,$=Re(this,i,ve(this,F,At).call(this,Ue));return ve(this,F,$t).call(this,$),ve(this,F,dt).call(this,Ne(Te[0],De[0],5),Ne(Te[1],De[1],5),Ne(Te[2],De[2],5),$),Re(this,f,`url(#${Ue})`),A(this,f)}destroy(K=!1){K&&(A(this,s)||A(this,f))||(A(this,pe)&&(A(this,pe).parentNode.parentNode.remove(),Re(this,pe,null)),A(this,re)&&(A(this,re).clear(),Re(this,re,null)),Re(this,C,0))}}re=new WeakMap,pe=new WeakMap,H=new WeakMap,W=new WeakMap,ne=new WeakMap,j=new WeakMap,s=new WeakMap,i=new WeakMap,p=new WeakMap,f=new WeakMap,C=new WeakMap,F=new WeakSet,st=function(){return A(this,re)||Re(this,re,new Map)},ot=function(){if(!A(this,pe)){const K=A(this,W).createElement("div"),{style:V}=K;V.visibility="hidden",V.contain="strict",V.width=V.height=0,V.position="absolute",V.top=V.left=0,V.zIndex=-1;const me=A(this,W).createElementNS(m,"svg");me.setAttribute("width",0),me.setAttribute("height",0),Re(this,pe,A(this,W).createElementNS(m,"defs")),K.append(me),me.append(A(this,pe)),A(this,W).body.append(K)}return A(this,pe)},$t=function(K){const V=A(this,W).createElementNS(m,"feColorMatrix");V.setAttribute("type","matrix"),V.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),K.append(V)},At=function(K){const V=A(this,W).createElementNS(m,"filter");return V.setAttribute("color-interpolation-filters","sRGB"),V.setAttribute("id",K),A(this,F,ot).append(V),V},wt=function(K,V,me){const _e=A(this,W).createElementNS(m,V);_e.setAttribute("type","discrete"),_e.setAttribute("tableValues",me),K.append(_e)},dt=function(K,V,me,_e){const Ce=A(this,W).createElementNS(m,"feComponentTransfer");_e.append(Ce),ve(this,F,wt).call(this,Ce,"feFuncR",K),ve(this,F,wt).call(this,Ce,"feFuncG",V),ve(this,F,wt).call(this,Ce,"feFuncB",me)},pt=function(K){return A(this,F,ot).style.color=K,D(getComputedStyle(A(this,F,ot)).getPropertyValue("color"))},e.DOMFilterFactory=k;class g extends r.BaseCanvasFactory{constructor({ownerDocument:de=globalThis.document}={}){super(),this._document=de}_createCanvas(de,K){const V=this._document.createElement("canvas");return V.width=de,V.height=K,V}}e.DOMCanvasFactory=g;async function v(he,de=!1){if(b(he,document.baseURI)){const K=await fetch(he);if(!K.ok)throw new Error(K.statusText);return de?new Uint8Array(await K.arrayBuffer()):(0,c.stringToBytes)(await K.text())}return new Promise((K,V)=>{const me=new XMLHttpRequest;me.open("GET",he,!0),de&&(me.responseType="arraybuffer"),me.onreadystatechange=()=>{if(me.readyState===XMLHttpRequest.DONE){if(me.status===200||me.status===0){let _e;if(de&&me.response?_e=new Uint8Array(me.response):!de&&me.responseText&&(_e=(0,c.stringToBytes)(me.responseText)),_e){K(_e);return}}V(new Error(me.statusText))}},me.send(null)})}class a extends r.BaseCMapReaderFactory{_fetchData(de,K){return v(de,this.isCompressed).then(V=>({cMapData:V,compressionType:K}))}}e.DOMCMapReaderFactory=a;class S extends r.BaseStandardFontDataFactory{_fetchData(de){return v(de,!0)}}e.DOMStandardFontDataFactory=S;class w extends r.BaseSVGFactory{_createSVG(de){return document.createElementNS(m,de)}}e.DOMSVGFactory=w;class I{constructor({viewBox:de,scale:K,rotation:V,offsetX:me=0,offsetY:_e=0,dontFlip:Ce=!1}){this.viewBox=de,this.scale=K,this.rotation=V,this.offsetX=me,this.offsetY=_e;const ke=(de[2]+de[0])/2,te=(de[3]+de[1])/2;let J,Se,Te,De;switch(V%=360,V<0&&(V+=360),V){case 180:J=-1,Se=0,Te=0,De=1;break;case 90:J=0,Se=1,Te=1,De=0;break;case 270:J=0,Se=-1,Te=-1,De=0;break;case 0:J=1,Se=0,Te=0,De=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ce&&(Te=-Te,De=-De);let Ne,Ue,$,be;J===0?(Ne=Math.abs(te-de[1])*K+me,Ue=Math.abs(ke-de[0])*K+_e,$=(de[3]-de[1])*K,be=(de[2]-de[0])*K):(Ne=Math.abs(ke-de[0])*K+me,Ue=Math.abs(te-de[1])*K+_e,$=(de[2]-de[0])*K,be=(de[3]-de[1])*K),this.transform=[J*K,Se*K,Te*K,De*K,Ne-J*K*ke-Te*K*te,Ue-Se*K*ke-De*K*te],this.width=$,this.height=be}get rawDims(){const{viewBox:de}=this;return(0,c.shadow)(this,"rawDims",{pageWidth:de[2]-de[0],pageHeight:de[3]-de[1],pageX:de[0],pageY:de[1]})}clone({scale:de=this.scale,rotation:K=this.rotation,offsetX:V=this.offsetX,offsetY:me=this.offsetY,dontFlip:_e=!1}={}){return new I({viewBox:this.viewBox.slice(),scale:de,rotation:K,offsetX:V,offsetY:me,dontFlip:_e})}convertToViewportPoint(de,K){return c.Util.applyTransform([de,K],this.transform)}convertToViewportRectangle(de){const K=c.Util.applyTransform([de[0],de[1]],this.transform),V=c.Util.applyTransform([de[2],de[3]],this.transform);return[K[0],K[1],V[0],V[1]]}convertToPdfPoint(de,K){return c.Util.applyInverseTransform([de,K],this.transform)}}e.PageViewport=I;class M extends c.BaseException{constructor(de,K=0){super(de,"RenderingCancelledException"),this.extraDelay=K}}e.RenderingCancelledException=M;function B(he){const de=he.length;let K=0;for(;K<de&&he[K].trim()==="";)K++;return he.substring(K,K+5).toLowerCase()==="data:"}function P(he){return typeof he=="string"&&/\.pdf$/i.test(he)}function o(he,de=!1){return de||([he]=he.split(/[#?]/,1)),he.substring(he.lastIndexOf("/")+1)}function h(he,de="document.pdf"){if(typeof he!="string")return de;if(B(he))return(0,c.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),de;const K=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,V=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,me=K.exec(he);let _e=V.exec(me[1])||V.exec(me[2])||V.exec(me[3]);if(_e&&(_e=_e[0],_e.includes("%")))try{_e=V.exec(decodeURIComponent(_e))[0]}catch{}return _e||de}class x{constructor(){Ye(this,"started",Object.create(null));Ye(this,"times",[])}time(de){de in this.started&&(0,c.warn)(`Timer is already running for ${de}`),this.started[de]=Date.now()}timeEnd(de){de in this.started||(0,c.warn)(`Timer has not been started for ${de}`),this.times.push({name:de,start:this.started[de],end:Date.now()}),delete this.started[de]}toString(){const de=[];let K=0;for(const{name:V}of this.times)K=Math.max(V.length,K);for(const{name:V,start:me,end:_e}of this.times)de.push(`${V.padEnd(K)} ${_e-me}ms
`);return de.join("")}}e.StatTimer=x;function b(he,de){try{const{protocol:K}=de?new URL(he,de):new URL(he);return K==="http:"||K==="https:"}catch{return!1}}function l(he){he.preventDefault()}function y(he,de=!1){return new Promise((K,V)=>{const me=document.createElement("script");me.src=he,me.onload=function(_e){de&&me.remove(),K(_e)},me.onerror=function(){V(new Error(`Cannot load script at: ${me.src}`))},(document.head||document.documentElement).append(me)})}function u(he){console.log("Deprecated API usage: "+he)}let T;class R{static toDateObject(de){if(!de||typeof de!="string")return null;T||(T=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const K=T.exec(de);if(!K)return null;const V=parseInt(K[1],10);let me=parseInt(K[2],10);me=me>=1&&me<=12?me-1:0;let _e=parseInt(K[3],10);_e=_e>=1&&_e<=31?_e:1;let Ce=parseInt(K[4],10);Ce=Ce>=0&&Ce<=23?Ce:0;let ke=parseInt(K[5],10);ke=ke>=0&&ke<=59?ke:0;let te=parseInt(K[6],10);te=te>=0&&te<=59?te:0;const J=K[7]||"Z";let Se=parseInt(K[8],10);Se=Se>=0&&Se<=23?Se:0;let Te=parseInt(K[9],10)||0;return Te=Te>=0&&Te<=59?Te:0,J==="-"?(Ce+=Se,ke+=Te):J==="+"&&(Ce-=Se,ke-=Te),new Date(Date.UTC(V,me,_e,Ce,ke,te))}}e.PDFDateString=R;function X(he,{scale:de=1,rotation:K=0}){const{width:V,height:me}=he.attributes.style,_e=[0,0,parseInt(V),parseInt(me)];return new I({viewBox:_e,scale:de,rotation:K})}function D(he){if(he.startsWith("#")){const de=parseInt(he.slice(1),16);return[(de&16711680)>>16,(de&65280)>>8,de&255]}return he.startsWith("rgb(")?he.slice(4,-1).split(",").map(de=>parseInt(de)):he.startsWith("rgba(")?he.slice(5,-1).split(",").map(de=>parseInt(de)).slice(0,3):((0,c.warn)(`Not a valid color format: "${he}"`),[0,0,0])}function E(he){const de=document.createElement("span");de.style.visibility="hidden",document.body.append(de);for(const K of he.keys()){de.style.color=K;const V=window.getComputedStyle(de).color;he.set(K,D(V))}de.remove()}function q(he){const{a:de,b:K,c:V,d:me,e:_e,f:Ce}=he.getTransform();return[de,K,V,me,_e,Ce]}function oe(he){const{a:de,b:K,c:V,d:me,e:_e,f:Ce}=he.getTransform().invertSelf();return[de,K,V,me,_e,Ce]}function ae(he,de,K=!1,V=!0){if(de instanceof I){const{pageWidth:me,pageHeight:_e}=de.rawDims,{style:Ce}=he,ke=c.FeatureTest.isCSSRoundSupported,te=`var(--scale-factor) * ${me}px`,J=`var(--scale-factor) * ${_e}px`,Se=ke?`round(${te}, 1px)`:`calc(${te})`,Te=ke?`round(${J}, 1px)`:`calc(${J})`;!K||de.rotation%180===0?(Ce.width=Se,Ce.height=Te):(Ce.width=Te,Ce.height=Se)}V&&he.setAttribute("data-main-rotation",de.rotation)}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var r=n(1);class c{constructor(){this.constructor===c&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(a){return"none"}addHCMFilter(a,S){return"none"}addHighlightHCMFilter(a,S,w,I){return"none"}destroy(a=!1){}}e.BaseFilterFactory=c;class m{constructor(){this.constructor===m&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(a,S){if(a<=0||S<=0)throw new Error("Invalid canvas size");const w=this._createCanvas(a,S);return{canvas:w,context:w.getContext("2d")}}reset(a,S,w){if(!a.canvas)throw new Error("Canvas is not specified");if(S<=0||w<=0)throw new Error("Invalid canvas size");a.canvas.width=S,a.canvas.height=w}destroy(a){if(!a.canvas)throw new Error("Canvas is not specified");a.canvas.width=0,a.canvas.height=0,a.canvas=null,a.context=null}_createCanvas(a,S){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=m;class _{constructor({baseUrl:a=null,isCompressed:S=!0}){this.constructor===_&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=a,this.isCompressed=S}async fetch({name:a}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!a)throw new Error("CMap name must be specified.");const S=this.baseUrl+a+(this.isCompressed?".bcmap":""),w=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(S,w).catch(I=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${S}`)})}_fetchData(a,S){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=_;class k{constructor({baseUrl:a=null}){this.constructor===k&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=a}async fetch({filename:a}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!a)throw new Error("Font filename must be specified.");const S=`${this.baseUrl}${a}`;return this._fetchData(S).catch(w=>{throw new Error(`Unable to load font data at: ${S}`)})}_fetchData(a){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=k;class g{constructor(){this.constructor===g&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(a,S,w=!1){if(a<=0||S<=0)throw new Error("Invalid SVG dimensions");const I=this._createSVG("svg:svg");return I.setAttribute("version","1.1"),w||(I.setAttribute("width",`${a}px`),I.setAttribute("height",`${S}px`)),I.setAttribute("preserveAspectRatio","none"),I.setAttribute("viewBox",`0 0 ${a} ${S}`),I}createElement(a){if(typeof a!="string")throw new Error("Invalid SVG element type");return this._createSVG(a)}_createSVG(a){(0,r.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=g},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=n(1);const c=3285377520,m=4294901760,_=65535;class k{constructor(v){this.h1=v?v&4294967295:c,this.h2=v?v&4294967295:c}update(v){let a,S;if(typeof v=="string"){a=new Uint8Array(v.length*2),S=0;for(let u=0,T=v.length;u<T;u++){const R=v.charCodeAt(u);R<=255?a[S++]=R:(a[S++]=R>>>8,a[S++]=R&255)}}else if((0,r.isArrayBuffer)(v))a=v.slice(),S=a.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const w=S>>2,I=S-w*4,M=new Uint32Array(a.buffer,0,w);let B=0,P=0,o=this.h1,h=this.h2;const x=3432918353,b=461845907,l=x&_,y=b&_;for(let u=0;u<w;u++)u&1?(B=M[u],B=B*x&m|B*l&_,B=B<<15|B>>>17,B=B*b&m|B*y&_,o^=B,o=o<<13|o>>>19,o=o*5+3864292196):(P=M[u],P=P*x&m|P*l&_,P=P<<15|P>>>17,P=P*b&m|P*y&_,h^=P,h=h<<13|h>>>19,h=h*5+3864292196);switch(B=0,I){case 3:B^=a[w*4+2]<<16;case 2:B^=a[w*4+1]<<8;case 1:B^=a[w*4],B=B*x&m|B*l&_,B=B<<15|B>>>17,B=B*b&m|B*y&_,w&1?o^=B:h^=B}this.h1=o,this.h2=h}hexdigest(){let v=this.h1,a=this.h2;return v^=a>>>1,v=v*3981806797&m|v*36045&_,a=a*4283543511&m|((a<<16|v>>>16)*2950163797&m)>>>16,v^=a>>>1,v=v*444984403&m|v*60499&_,a=a*3301882366&m|((a<<16|v>>>16)*3120437893&m)>>>16,v^=a>>>1,(v>>>0).toString(16).padStart(8,"0")+(a>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=k},(t,e,n)=>{var _;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r=n(1);class c{constructor({ownerDocument:g=globalThis.document,styleElement:v=null}){Ee(this,_,new Set);this._document=g,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const v=this.styleElement.sheet;v.insertRule(g,v.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),A(this,_).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(g){if(!(!g||A(this,_).has(g.loadedName))){if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:v,src:a,style:S}=g,w=new FontFace(v,a,S);this.addNativeFontFace(w);try{await w.load(),A(this,_).add(v)}catch{(0,r.warn)(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(w)}return}(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g.systemFontInfo);return}if(this.isFontLoadingAPISupported){const a=g.createNativeFontFace();if(a){this.addNativeFontFace(a);try{await a.loaded}catch(S){throw(0,r.warn)(`Failed to load font '${a.family}': '${S}'.`),g.disableFontFace=!0,S}}return}const v=g.createFontFaceRule();if(v){if(this.insertRule(v),this.isSyncFontLoadingSupported)return;await new Promise(a=>{const S=this._queueLoadingCallback(a);this._prepareFontLoadEvent(g,S)})}}get isFontLoadingAPISupported(){var v;const g=!!((v=this._document)!=null&&v.fonts);return(0,r.shadow)(this,"isFontLoadingAPISupported",g)}get isSyncFontLoadingSupported(){let g=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(g=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",g)}_queueLoadingCallback(g){function v(){for((0,r.assert)(!S.done,"completeRequest() cannot be called twice."),S.done=!0;a.length>0&&a[0].done;){const w=a.shift();setTimeout(w.callback,0)}}const{loadingRequests:a}=this,S={done:!1,complete:v,callback:g};return a.push(S),S}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,v){function a(D,E){return D.charCodeAt(E)<<24|D.charCodeAt(E+1)<<16|D.charCodeAt(E+2)<<8|D.charCodeAt(E+3)&255}function S(D,E,q,oe){const ae=D.substring(0,E),ue=D.substring(E+q);return ae+oe+ue}let w,I;const M=this._document.createElement("canvas");M.width=1,M.height=1;const B=M.getContext("2d");let P=0;function o(D,E){if(++P>30){(0,r.warn)("Load test font never loaded."),E();return}if(B.font="30px "+D,B.fillText(".",0,20),B.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(o.bind(null,D,E))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=S(x,976,h.length,h);const l=16,y=1482184792;let u=a(x,l);for(w=0,I=h.length-3;w<I;w+=4)u=u-y+a(h,w)|0;w<h.length&&(u=u-y+a(h+"XXX",w)|0),x=S(x,l,4,(0,r.string32)(u));const T=`url(data:font/opentype;base64,${btoa(x)});`,R=`@font-face {font-family:"${h}";src:${T}}`;this.insertRule(R);const X=this._document.createElement("div");X.style.visibility="hidden",X.style.width=X.style.height="10px",X.style.position="absolute",X.style.top=X.style.left="0px";for(const D of[g.loadedName,h]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=D,X.append(E)}this._document.body.append(X),o(h,()=>{X.remove(),v.complete()})}}_=new WeakMap,e.FontLoader=c;class m{constructor(g,{isEvalSupported:v=!0,disableFontFace:a=!1,ignoreErrors:S=!1,inspectFont:w=null}){this.compiledGlyphs=Object.create(null);for(const I in g)this[I]=g[I];this.isEvalSupported=v!==!1,this.disableFontFace=a===!0,this.ignoreErrors=S===!0,this._inspectFont=w}createNativeFontFace(){var v;if(!this.data||this.disableFontFace)return null;let g;if(!this.cssFontInfo)g=new FontFace(this.loadedName,this.data,{});else{const a={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(a.style=`oblique ${this.cssFontInfo.italicAngle}deg`),g=new FontFace(this.cssFontInfo.fontFamily,this.data,a)}return(v=this._inspectFont)==null||v.call(this,this),g}createFontFaceRule(){var S;if(!this.data||this.disableFontFace)return null;const g=(0,r.bytesToString)(this.data),v=`url(data:${this.mimetype};base64,${btoa(g)});`;let a;if(!this.cssFontInfo)a=`@font-face {font-family:"${this.loadedName}";src:${v}}`;else{let w=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(w+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),a=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${w}src:${v}}`}return(S=this._inspectFont)==null||S.call(this,this,v),a}getPathGenerator(g,v){if(this.compiledGlyphs[v]!==void 0)return this.compiledGlyphs[v];let a;try{a=g.get(this.loadedName+"_path_"+v)}catch(S){if(!this.ignoreErrors)throw S;return(0,r.warn)(`getPathGenerator - ignoring character: "${S}".`),this.compiledGlyphs[v]=function(w,I){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const S=[];for(const w of a){const I=w.args!==void 0?w.args.join(","):"";S.push("c.",w.cmd,"(",I,`);
`)}return this.compiledGlyphs[v]=new Function("c","size",S.join(""))}return this.compiledGlyphs[v]=function(S,w){for(const I of a)I.cmd==="scale"&&(I.args=[w,-w]),S[I.cmd].apply(S,I.args)}}}e.FontFaceObject=m},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var r=n(7);n(1);const c=function(v){return new Promise((a,S)=>{require$$0$2.readFile(v,(I,M)=>{if(I||!M){S(new Error(I));return}a(new Uint8Array(M))})})};class m extends r.BaseFilterFactory{}e.NodeFilterFactory=m;class _ extends r.BaseCanvasFactory{_createCanvas(a,S){return require$$1$1.createCanvas(a,S)}}e.NodeCanvasFactory=_;class k extends r.BaseCMapReaderFactory{_fetchData(a,S){return c(a).then(w=>({cMapData:w,compressionType:S}))}}e.NodeCMapReaderFactory=k;class g extends r.BaseStandardFontDataFactory{_fetchData(a){return c(a)}}e.NodeStandardFontDataFactory=g},(t,e,n)=>{var pe,Vt,Xt;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=n(1),c=n(6),m=n(12),_=n(13);const k=16,g=100,v=4096,a=15,S=10,w=1e3,I=16;function M(j,s){if(j._removeMirroring)throw new Error("Context is already forwarding operations.");j.__originalSave=j.save,j.__originalRestore=j.restore,j.__originalRotate=j.rotate,j.__originalScale=j.scale,j.__originalTranslate=j.translate,j.__originalTransform=j.transform,j.__originalSetTransform=j.setTransform,j.__originalResetTransform=j.resetTransform,j.__originalClip=j.clip,j.__originalMoveTo=j.moveTo,j.__originalLineTo=j.lineTo,j.__originalBezierCurveTo=j.bezierCurveTo,j.__originalRect=j.rect,j.__originalClosePath=j.closePath,j.__originalBeginPath=j.beginPath,j._removeMirroring=()=>{j.save=j.__originalSave,j.restore=j.__originalRestore,j.rotate=j.__originalRotate,j.scale=j.__originalScale,j.translate=j.__originalTranslate,j.transform=j.__originalTransform,j.setTransform=j.__originalSetTransform,j.resetTransform=j.__originalResetTransform,j.clip=j.__originalClip,j.moveTo=j.__originalMoveTo,j.lineTo=j.__originalLineTo,j.bezierCurveTo=j.__originalBezierCurveTo,j.rect=j.__originalRect,j.closePath=j.__originalClosePath,j.beginPath=j.__originalBeginPath,delete j._removeMirroring},j.save=function(){s.save(),this.__originalSave()},j.restore=function(){s.restore(),this.__originalRestore()},j.translate=function(p,f){s.translate(p,f),this.__originalTranslate(p,f)},j.scale=function(p,f){s.scale(p,f),this.__originalScale(p,f)},j.transform=function(p,f,C,F,z,Q){s.transform(p,f,C,F,z,Q),this.__originalTransform(p,f,C,F,z,Q)},j.setTransform=function(p,f,C,F,z,Q){s.setTransform(p,f,C,F,z,Q),this.__originalSetTransform(p,f,C,F,z,Q)},j.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},j.rotate=function(p){s.rotate(p),this.__originalRotate(p)},j.clip=function(p){s.clip(p),this.__originalClip(p)},j.moveTo=function(i,p){s.moveTo(i,p),this.__originalMoveTo(i,p)},j.lineTo=function(i,p){s.lineTo(i,p),this.__originalLineTo(i,p)},j.bezierCurveTo=function(i,p,f,C,F,z){s.bezierCurveTo(i,p,f,C,F,z),this.__originalBezierCurveTo(i,p,f,C,F,z)},j.rect=function(i,p,f,C){s.rect(i,p,f,C),this.__originalRect(i,p,f,C)},j.closePath=function(){s.closePath(),this.__originalClosePath()},j.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}class B{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,i,p){let f;return this.cache[s]!==void 0?(f=this.cache[s],this.canvasFactory.reset(f,i,p)):(f=this.canvasFactory.create(i,p),this.cache[s]=f),f}delete(s){delete this.cache[s]}clear(){for(const s in this.cache){const i=this.cache[s];this.canvasFactory.destroy(i),delete this.cache[s]}}}function P(j,s,i,p,f,C,F,z,Q,L){const[N,se,ge,Ae,he,de]=(0,c.getCurrentTransform)(j);if(se===0&&ge===0){const me=F*N+he,_e=Math.round(me),Ce=z*Ae+de,ke=Math.round(Ce),te=(F+Q)*N+he,J=Math.abs(Math.round(te)-_e)||1,Se=(z+L)*Ae+de,Te=Math.abs(Math.round(Se)-ke)||1;return j.setTransform(Math.sign(N),0,0,Math.sign(Ae),_e,ke),j.drawImage(s,i,p,f,C,0,0,J,Te),j.setTransform(N,se,ge,Ae,he,de),[J,Te]}if(N===0&&Ae===0){const me=z*ge+he,_e=Math.round(me),Ce=F*se+de,ke=Math.round(Ce),te=(z+L)*ge+he,J=Math.abs(Math.round(te)-_e)||1,Se=(F+Q)*se+de,Te=Math.abs(Math.round(Se)-ke)||1;return j.setTransform(0,Math.sign(se),Math.sign(ge),0,_e,ke),j.drawImage(s,i,p,f,C,0,0,Te,J),j.setTransform(N,se,ge,Ae,he,de),[Te,J]}j.drawImage(s,i,p,f,C,F,z,Q,L);const K=Math.hypot(N,se),V=Math.hypot(ge,Ae);return[K*Q,V*L]}function o(j){const{width:s,height:i}=j;if(s>w||i>w)return null;const p=1e3,f=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),C=s+1;let F=new Uint8Array(C*(i+1)),z,Q,L;const N=s+7&-8;let se=new Uint8Array(N*i),ge=0;for(const V of j.data){let me=128;for(;me>0;)se[ge++]=V&me?0:255,me>>=1}let Ae=0;for(ge=0,se[ge]!==0&&(F[0]=1,++Ae),Q=1;Q<s;Q++)se[ge]!==se[ge+1]&&(F[Q]=se[ge]?2:1,++Ae),ge++;for(se[ge]!==0&&(F[Q]=2,++Ae),z=1;z<i;z++){ge=z*N,L=z*C,se[ge-N]!==se[ge]&&(F[L]=se[ge]?1:8,++Ae);let V=(se[ge]?4:0)+(se[ge-N]?8:0);for(Q=1;Q<s;Q++)V=(V>>2)+(se[ge+1]?4:0)+(se[ge-N+1]?8:0),f[V]&&(F[L+Q]=f[V],++Ae),ge++;if(se[ge-N]!==se[ge]&&(F[L+Q]=se[ge]?2:4,++Ae),Ae>p)return null}for(ge=N*(i-1),L=z*C,se[ge]!==0&&(F[L]=8,++Ae),Q=1;Q<s;Q++)se[ge]!==se[ge+1]&&(F[L+Q]=se[ge]?4:8,++Ae),ge++;if(se[ge]!==0&&(F[L+Q]=4,++Ae),Ae>p)return null;const he=new Int32Array([0,C,-1,0,-C,0,0,0,1]),de=new Path2D;for(z=0;Ae&&z<=i;z++){let V=z*C;const me=V+s;for(;V<me&&!F[V];)V++;if(V===me)continue;de.moveTo(V%C,z);const _e=V;let Ce=F[V];do{const ke=he[Ce];do V+=ke;while(!F[V]);const te=F[V];te!==5&&te!==10?(Ce=te,F[V]=0):(Ce=te&51*Ce>>4,F[V]&=Ce>>2|Ce<<2),de.lineTo(V%C,V/C|0),F[V]||--Ae}while(_e!==V);--z}return se=null,F=null,function(V){V.save(),V.scale(1/s,-1/i),V.translate(0,-i),V.fill(de),V.beginPath(),V.restore()}}class h{constructor(s,i){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,s,i])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,i){this.x=s,this.y=i}updatePathMinMax(s,i,p){[i,p]=r.Util.applyTransform([i,p],s),this.minX=Math.min(this.minX,i),this.minY=Math.min(this.minY,p),this.maxX=Math.max(this.maxX,i),this.maxY=Math.max(this.maxY,p)}updateRectMinMax(s,i){const p=r.Util.applyTransform(i,s),f=r.Util.applyTransform(i.slice(2),s);this.minX=Math.min(this.minX,p[0],f[0]),this.minY=Math.min(this.minY,p[1],f[1]),this.maxX=Math.max(this.maxX,p[0],f[0]),this.maxY=Math.max(this.maxY,p[1],f[1])}updateScalingPathMinMax(s,i){r.Util.scaleMinMax(s,i),this.minX=Math.min(this.minX,i[0]),this.maxX=Math.max(this.maxX,i[1]),this.minY=Math.min(this.minY,i[2]),this.maxY=Math.max(this.maxY,i[3])}updateCurvePathMinMax(s,i,p,f,C,F,z,Q,L,N){const se=r.Util.bezierBoundingBox(i,p,f,C,F,z,Q,L);if(N){N[0]=Math.min(N[0],se[0],se[2]),N[1]=Math.max(N[1],se[0],se[2]),N[2]=Math.min(N[2],se[1],se[3]),N[3]=Math.max(N[3],se[1],se[3]);return}this.updateRectMinMax(s,se)}getPathBoundingBox(s=m.PathType.FILL,i=null){const p=[this.minX,this.minY,this.maxX,this.maxY];if(s===m.PathType.STROKE){i||(0,r.unreachable)("Stroke bounding box must include transform.");const f=r.Util.singularValueDecompose2dScale(i),C=f[0]*this.lineWidth/2,F=f[1]*this.lineWidth/2;p[0]-=C,p[1]-=F,p[2]+=C,p[3]+=F}return p}updateClipFromPath(){const s=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=m.PathType.FILL,i=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(s,i))}}function x(j,s){if(typeof ImageData<"u"&&s instanceof ImageData){j.putImageData(s,0,0);return}const i=s.height,p=s.width,f=i%I,C=(i-f)/I,F=f===0?C:C+1,z=j.createImageData(p,I);let Q=0,L;const N=s.data,se=z.data;let ge,Ae,he,de;if(s.kind===r.ImageKind.GRAYSCALE_1BPP){const K=N.byteLength,V=new Uint32Array(se.buffer,0,se.byteLength>>2),me=V.length,_e=p+7>>3,Ce=4294967295,ke=r.FeatureTest.isLittleEndian?4278190080:255;for(ge=0;ge<F;ge++){for(he=ge<C?I:f,L=0,Ae=0;Ae<he;Ae++){const te=K-Q;let J=0;const Se=te>_e?p:te*8-7,Te=Se&-8;let De=0,Ne=0;for(;J<Te;J+=8)Ne=N[Q++],V[L++]=Ne&128?Ce:ke,V[L++]=Ne&64?Ce:ke,V[L++]=Ne&32?Ce:ke,V[L++]=Ne&16?Ce:ke,V[L++]=Ne&8?Ce:ke,V[L++]=Ne&4?Ce:ke,V[L++]=Ne&2?Ce:ke,V[L++]=Ne&1?Ce:ke;for(;J<Se;J++)De===0&&(Ne=N[Q++],De=128),V[L++]=Ne&De?Ce:ke,De>>=1}for(;L<me;)V[L++]=0;j.putImageData(z,0,ge*I)}}else if(s.kind===r.ImageKind.RGBA_32BPP){for(Ae=0,de=p*I*4,ge=0;ge<C;ge++)se.set(N.subarray(Q,Q+de)),Q+=de,j.putImageData(z,0,Ae),Ae+=I;ge<F&&(de=p*f*4,se.set(N.subarray(Q,Q+de)),j.putImageData(z,0,Ae))}else if(s.kind===r.ImageKind.RGB_24BPP)for(he=I,de=p*he,ge=0;ge<F;ge++){for(ge>=C&&(he=f,de=p*he),L=0,Ae=de;Ae--;)se[L++]=N[Q++],se[L++]=N[Q++],se[L++]=N[Q++],se[L++]=255;j.putImageData(z,0,ge*I)}else throw new Error(`bad image kind: ${s.kind}`)}function b(j,s){if(s.bitmap){j.drawImage(s.bitmap,0,0);return}const i=s.height,p=s.width,f=i%I,C=(i-f)/I,F=f===0?C:C+1,z=j.createImageData(p,I);let Q=0;const L=s.data,N=z.data;for(let se=0;se<F;se++){const ge=se<C?I:f;({srcPos:Q}=(0,_.convertBlackAndWhiteToRGBA)({src:L,srcPos:Q,dest:N,width:p,height:ge,nonBlackColor:0})),j.putImageData(z,0,se*I)}}function l(j,s){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const p of i)j[p]!==void 0&&(s[p]=j[p]);j.setLineDash!==void 0&&(s.setLineDash(j.getLineDash()),s.lineDashOffset=j.lineDashOffset)}function y(j){if(j.strokeStyle=j.fillStyle="#000000",j.fillRule="nonzero",j.globalAlpha=1,j.lineWidth=1,j.lineCap="butt",j.lineJoin="miter",j.miterLimit=10,j.globalCompositeOperation="source-over",j.font="10px sans-serif",j.setLineDash!==void 0&&(j.setLineDash([]),j.lineDashOffset=0),!r.isNodeJS){const{filter:s}=j;s!=="none"&&s!==""&&(j.filter="none")}}function u(j,s,i,p){const f=j.length;for(let C=3;C<f;C+=4){const F=j[C];if(F===0)j[C-3]=s,j[C-2]=i,j[C-1]=p;else if(F<255){const z=255-F;j[C-3]=j[C-3]*F+s*z>>8,j[C-2]=j[C-2]*F+i*z>>8,j[C-1]=j[C-1]*F+p*z>>8}}}function T(j,s,i){const p=j.length,f=1/255;for(let C=3;C<p;C+=4){const F=i?i[j[C]]:j[C];s[C]=s[C]*F*f|0}}function R(j,s,i){const p=j.length;for(let f=3;f<p;f+=4){const C=j[f-3]*77+j[f-2]*152+j[f-1]*28;s[f]=i?s[f]*i[C>>8]>>8:s[f]*C>>16}}function X(j,s,i,p,f,C,F,z,Q,L,N){const se=!!C,ge=se?C[0]:0,Ae=se?C[1]:0,he=se?C[2]:0,de=f==="Luminosity"?R:T,V=Math.min(p,Math.ceil(1048576/i));for(let me=0;me<p;me+=V){const _e=Math.min(V,p-me),Ce=j.getImageData(z-L,me+(Q-N),i,_e),ke=s.getImageData(z,me+Q,i,_e);se&&u(Ce.data,ge,Ae,he),de(Ce.data,ke.data,F),s.putImageData(ke,z,me+Q)}}function D(j,s,i,p){const f=p[0],C=p[1],F=p[2]-f,z=p[3]-C;F===0||z===0||(X(s.context,i,F,z,s.subtype,s.backdrop,s.transferMap,f,C,s.offsetX,s.offsetY),j.save(),j.globalAlpha=1,j.globalCompositeOperation="source-over",j.setTransform(1,0,0,1,0,0),j.drawImage(i.canvas,0,0),j.restore())}function E(j,s){const i=r.Util.singularValueDecompose2dScale(j);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const p=Math.fround((globalThis.devicePixelRatio||1)*c.PixelsPerInch.PDF_TO_CSS_UNITS);return s!==void 0?s:i[0]<=p||i[1]<=p}const q=["butt","round","square"],oe=["miter","round","bevel"],ae={},ue={},ne=class ne{constructor(s,i,p,f,C,{optionalContentConfig:F,markedContentStack:z=null},Q,L){Ee(this,pe);this.ctx=s,this.current=new h(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=p,this.canvasFactory=f,this.filterFactory=C,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=z||[],this.optionalContentConfig=F,this.cachedCanvases=new B(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Q,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=L,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,i=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):i}beginDrawing({transform:s,viewport:i,transparency:p=!1,background:f=null}){const C=this.ctx.canvas.width,F=this.ctx.canvas.height,z=this.ctx.fillStyle;if(this.ctx.fillStyle=f||"#ffffff",this.ctx.fillRect(0,0,C,F),this.ctx.fillStyle=z,p){const Q=this.cachedCanvases.getCanvas("transparent",C,F);this.compositeCtx=this.ctx,this.transparentCanvas=Q.canvas,this.ctx=Q.context,this.ctx.save(),this.ctx.transform(...(0,c.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),y(this.ctx),s&&(this.ctx.transform(...s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=(0,c.getCurrentTransform)(this.ctx)}executeOperatorList(s,i,p,f){const C=s.argsArray,F=s.fnArray;let z=i||0;const Q=C.length;if(Q===z)return z;const L=Q-z>S&&typeof p=="function",N=L?Date.now()+a:0;let se=0;const ge=this.commonObjs,Ae=this.objs;let he;for(;;){if(f!==void 0&&z===f.nextBreakPoint)return f.breakIt(z,p),z;if(he=F[z],he!==r.OPS.dependency)this[he].apply(this,C[z]);else for(const de of C[z]){const K=de.startsWith("g_")?ge:Ae;if(!K.has(de))return K.get(de,p),z}if(z++,z===Q)return z;if(L&&++se>S){if(Date.now()>N)return p(),z;se=0}}}endDrawing(){ve(this,pe,Vt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const i of s.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);s.clear()}this._cachedBitmapsMap.clear(),ve(this,pe,Xt).call(this)}_scaleImage(s,i){const p=s.width,f=s.height;let C=Math.max(Math.hypot(i[0],i[1]),1),F=Math.max(Math.hypot(i[2],i[3]),1),z=p,Q=f,L="prescale1",N,se;for(;C>2&&z>1||F>2&&Q>1;){let ge=z,Ae=Q;C>2&&z>1&&(ge=z>=16384?Math.floor(z/2)-1||1:Math.ceil(z/2),C/=z/ge),F>2&&Q>1&&(Ae=Q>=16384?Math.floor(Q/2)-1||1:Math.ceil(Q)/2,F/=Q/Ae),N=this.cachedCanvases.getCanvas(L,ge,Ae),se=N.context,se.clearRect(0,0,ge,Ae),se.drawImage(s,0,0,z,Q,0,0,ge,Ae),s=N.canvas,z=ge,Q=Ae,L=L==="prescale1"?"prescale2":"prescale1"}return{img:s,paintWidth:z,paintHeight:Q}}_createMaskCanvas(s){const i=this.ctx,{width:p,height:f}=s,C=this.current.fillColor,F=this.current.patternFill,z=(0,c.getCurrentTransform)(i);let Q,L,N,se;if((s.bitmap||s.data)&&s.count>1){const J=s.bitmap||s.data.buffer;L=JSON.stringify(F?z:[z.slice(0,4),C]),Q=this._cachedBitmapsMap.get(J),Q||(Q=new Map,this._cachedBitmapsMap.set(J,Q));const Se=Q.get(L);if(Se&&!F){const Te=Math.round(Math.min(z[0],z[2])+z[4]),De=Math.round(Math.min(z[1],z[3])+z[5]);return{canvas:Se,offsetX:Te,offsetY:De}}N=Se}N||(se=this.cachedCanvases.getCanvas("maskCanvas",p,f),b(se.context,s));let ge=r.Util.transform(z,[1/p,0,0,-1/f,0,0]);ge=r.Util.transform(ge,[1,0,0,1,0,-f]);const Ae=r.Util.applyTransform([0,0],ge),he=r.Util.applyTransform([p,f],ge),de=r.Util.normalizeRect([Ae[0],Ae[1],he[0],he[1]]),K=Math.round(de[2]-de[0])||1,V=Math.round(de[3]-de[1])||1,me=this.cachedCanvases.getCanvas("fillCanvas",K,V),_e=me.context,Ce=Math.min(Ae[0],he[0]),ke=Math.min(Ae[1],he[1]);_e.translate(-Ce,-ke),_e.transform(...ge),N||(N=this._scaleImage(se.canvas,(0,c.getCurrentTransformInverse)(_e)),N=N.img,Q&&F&&Q.set(L,N)),_e.imageSmoothingEnabled=E((0,c.getCurrentTransform)(_e),s.interpolate),P(_e,N,0,0,N.width,N.height,0,0,p,f),_e.globalCompositeOperation="source-in";const te=r.Util.transform((0,c.getCurrentTransformInverse)(_e),[1,0,0,1,-Ce,-ke]);return _e.fillStyle=F?C.getPattern(i,this,te,m.PathType.FILL):C,_e.fillRect(0,0,p,f),Q&&!F&&(this.cachedCanvases.delete("fillCanvas"),Q.set(L,me.canvas)),{canvas:me.canvas,offsetX:Math.round(Ce),offsetY:Math.round(ke)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=q[s]}setLineJoin(s){this.ctx.lineJoin=oe[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,i){const p=this.ctx;p.setLineDash!==void 0&&(p.setLineDash(s),p.lineDashOffset=i)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[i,p]of s)switch(i){case"LW":this.setLineWidth(p);break;case"LC":this.setLineCap(p);break;case"LJ":this.setLineJoin(p);break;case"ML":this.setMiterLimit(p);break;case"D":this.setDash(p[0],p[1]);break;case"RI":this.setRenderingIntent(p);break;case"FL":this.setFlatness(p);break;case"Font":this.setFont(p[0],p[1]);break;case"CA":this.current.strokeAlpha=p;break;case"ca":this.current.fillAlpha=p,this.ctx.globalAlpha=p;break;case"BM":this.ctx.globalCompositeOperation=p;break;case"SMask":this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(p);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,i=this.ctx.canvas.height,p="smaskGroupAt"+this.groupLevel,f=this.cachedCanvases.getCanvas(p,s,i);this.suspendedCtx=this.ctx,this.ctx=f.context;const C=this.ctx;C.setTransform(...(0,c.getCurrentTransform)(this.suspendedCtx)),l(this.suspendedCtx,C),M(C,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),l(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){if(!this.current.activeSMask)return;s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,p=this.suspendedCtx;D(p,i,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(l(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),l(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(s,i,p,f,C,F){this.ctx.transform(s,i,p,f,C,F),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(s,i,p){const f=this.ctx,C=this.current;let F=C.x,z=C.y,Q,L;const N=(0,c.getCurrentTransform)(f),se=N[0]===0&&N[3]===0||N[1]===0&&N[2]===0,ge=se?p.slice(0):null;for(let Ae=0,he=0,de=s.length;Ae<de;Ae++)switch(s[Ae]|0){case r.OPS.rectangle:F=i[he++],z=i[he++];const K=i[he++],V=i[he++],me=F+K,_e=z+V;f.moveTo(F,z),K===0||V===0?f.lineTo(me,_e):(f.lineTo(me,z),f.lineTo(me,_e),f.lineTo(F,_e)),se||C.updateRectMinMax(N,[F,z,me,_e]),f.closePath();break;case r.OPS.moveTo:F=i[he++],z=i[he++],f.moveTo(F,z),se||C.updatePathMinMax(N,F,z);break;case r.OPS.lineTo:F=i[he++],z=i[he++],f.lineTo(F,z),se||C.updatePathMinMax(N,F,z);break;case r.OPS.curveTo:Q=F,L=z,F=i[he+4],z=i[he+5],f.bezierCurveTo(i[he],i[he+1],i[he+2],i[he+3],F,z),C.updateCurvePathMinMax(N,Q,L,i[he],i[he+1],i[he+2],i[he+3],F,z,ge),he+=6;break;case r.OPS.curveTo2:Q=F,L=z,f.bezierCurveTo(F,z,i[he],i[he+1],i[he+2],i[he+3]),C.updateCurvePathMinMax(N,Q,L,F,z,i[he],i[he+1],i[he+2],i[he+3],ge),F=i[he+2],z=i[he+3],he+=4;break;case r.OPS.curveTo3:Q=F,L=z,F=i[he+2],z=i[he+3],f.bezierCurveTo(i[he],i[he+1],F,z,F,z),C.updateCurvePathMinMax(N,Q,L,i[he],i[he+1],F,z,F,z,ge),he+=4;break;case r.OPS.closePath:f.closePath();break}se&&C.updateScalingPathMinMax(N,ge),C.setCurrentPoint(F,z)}closePath(){this.ctx.closePath()}stroke(s=!0){const i=this.ctx,p=this.current.strokeColor;i.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof p=="object"&&(p!=null&&p.getPattern)?(i.save(),i.strokeStyle=p.getPattern(i,this,(0,c.getCurrentTransformInverse)(i),m.PathType.STROKE),this.rescaleAndStroke(!1),i.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),i.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s=!0){const i=this.ctx,p=this.current.fillColor,f=this.current.patternFill;let C=!1;f&&(i.save(),i.fillStyle=p.getPattern(i,this,(0,c.getCurrentTransformInverse)(i),m.PathType.FILL),C=!0);const F=this.current.getClippedPathBoundingBox();this.contentVisible&&F!==null&&(this.pendingEOFill?(i.fill("evenodd"),this.pendingEOFill=!1):i.fill()),C&&i.restore(),s&&this.consumePath(F)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ae}eoClip(){this.pendingClip=ue}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,i=this.ctx;if(s===void 0){i.beginPath();return}i.save(),i.beginPath();for(const p of s)i.setTransform(...p.transform),i.translate(p.x,p.y),p.addToPath(i,p.fontSize);i.restore(),i.clip(),i.beginPath(),delete this.pendingTextPaths}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,i){var N;const p=this.commonObjs.get(s),f=this.current;if(!p)throw new Error(`Can't find font for ${s}`);if(f.fontMatrix=p.fontMatrix||r.FONT_IDENTITY_MATRIX,(f.fontMatrix[0]===0||f.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+s),i<0?(i=-i,f.fontDirection=-1):f.fontDirection=1,this.current.font=p,this.current.fontSize=i,p.isType3Font)return;const C=p.loadedName||"sans-serif",F=((N=p.systemFontInfo)==null?void 0:N.css)||`"${C}", ${p.fallbackName}`;let z="normal";p.black?z="900":p.bold&&(z="bold");const Q=p.italic?"italic":"normal";let L=i;i<k?L=k:i>g&&(L=g),this.current.fontSizeScale=i/L,this.ctx.font=`${Q} ${z} ${L}px ${F}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,i){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=i}setLeadingMoveText(s,i){this.setLeading(-i),this.moveText(s,i)}setTextMatrix(s,i,p,f,C,F){this.current.textMatrix=[s,i,p,f,C,F],this.current.textMatrixScale=Math.hypot(s,i),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,i,p,f){const C=this.ctx,F=this.current,z=F.font,Q=F.textRenderingMode,L=F.fontSize/F.fontSizeScale,N=Q&r.TextRenderingMode.FILL_STROKE_MASK,se=!!(Q&r.TextRenderingMode.ADD_TO_PATH_FLAG),ge=F.patternFill&&!z.missingFile;let Ae;(z.disableFontFace||se||ge)&&(Ae=z.getPathGenerator(this.commonObjs,s)),z.disableFontFace||ge?(C.save(),C.translate(i,p),C.beginPath(),Ae(C,L),f&&C.setTransform(...f),(N===r.TextRenderingMode.FILL||N===r.TextRenderingMode.FILL_STROKE)&&C.fill(),(N===r.TextRenderingMode.STROKE||N===r.TextRenderingMode.FILL_STROKE)&&C.stroke(),C.restore()):((N===r.TextRenderingMode.FILL||N===r.TextRenderingMode.FILL_STROKE)&&C.fillText(s,i,p),(N===r.TextRenderingMode.STROKE||N===r.TextRenderingMode.FILL_STROKE)&&C.strokeText(s,i,p)),se&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,c.getCurrentTransform)(C),x:i,y:p,fontSize:L,addToPath:Ae})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const i=s.getImageData(0,0,10,10).data;let p=!1;for(let f=3;f<i.length;f+=4)if(i[f]>0&&i[f]<255){p=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",p)}showText(s){const i=this.current,p=i.font;if(p.isType3Font)return this.showType3Text(s);const f=i.fontSize;if(f===0)return;const C=this.ctx,F=i.fontSizeScale,z=i.charSpacing,Q=i.wordSpacing,L=i.fontDirection,N=i.textHScale*L,se=s.length,ge=p.vertical,Ae=ge?1:-1,he=p.defaultVMetrics,de=f*i.fontMatrix[0],K=i.textRenderingMode===r.TextRenderingMode.FILL&&!p.disableFontFace&&!i.patternFill;C.save(),C.transform(...i.textMatrix),C.translate(i.x,i.y+i.textRise),L>0?C.scale(N,-1):C.scale(N,1);let V;if(i.patternFill){C.save();const te=i.fillColor.getPattern(C,this,(0,c.getCurrentTransformInverse)(C),m.PathType.FILL);V=(0,c.getCurrentTransform)(C),C.restore(),C.fillStyle=te}let me=i.lineWidth;const _e=i.textMatrixScale;if(_e===0||me===0){const te=i.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(te===r.TextRenderingMode.STROKE||te===r.TextRenderingMode.FILL_STROKE)&&(me=this.getSinglePixelWidth())}else me/=_e;if(F!==1&&(C.scale(F,F),me/=F),C.lineWidth=me,p.isInvalidPDFjsFont){const te=[];let J=0;for(const Se of s)te.push(Se.unicode),J+=Se.width;C.fillText(te.join(""),0,0),i.x+=J*de*N,C.restore(),this.compose();return}let Ce=0,ke;for(ke=0;ke<se;++ke){const te=s[ke];if(typeof te=="number"){Ce+=Ae*te*f/1e3;continue}let J=!1;const Se=(te.isSpace?Q:0)+z,Te=te.fontChar,De=te.accent;let Ne,Ue,$=te.width;if(ge){const Me=te.vmetric||he,Le=-(te.vmetric?Me[1]:$*.5)*de,ee=Me[2]*de;$=Me?-Me[0]:$,Ne=Le/F,Ue=(Ce+ee)/F}else Ne=Ce/F,Ue=0;if(p.remeasure&&$>0){const Me=C.measureText(Te).width*1e3/f*F;if($<Me&&this.isFontSubpixelAAEnabled){const Le=$/Me;J=!0,C.save(),C.scale(Le,1),Ne/=Le}else $!==Me&&(Ne+=($-Me)/2e3*f/F)}if(this.contentVisible&&(te.isInFont||p.missingFile)){if(K&&!De)C.fillText(Te,Ne,Ue);else if(this.paintChar(Te,Ne,Ue,V),De){const Me=Ne+f*De.offset.x/F,Le=Ue-f*De.offset.y/F;this.paintChar(De.fontChar,Me,Le,V)}}const be=ge?$*de-Se*L:$*de+Se*L;Ce+=be,J&&C.restore()}ge?i.y-=Ce:i.x+=Ce*N,C.restore(),this.compose()}showType3Text(s){const i=this.ctx,p=this.current,f=p.font,C=p.fontSize,F=p.fontDirection,z=f.vertical?1:-1,Q=p.charSpacing,L=p.wordSpacing,N=p.textHScale*F,se=p.fontMatrix||r.FONT_IDENTITY_MATRIX,ge=s.length,Ae=p.textRenderingMode===r.TextRenderingMode.INVISIBLE;let he,de,K,V;if(!(Ae||C===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),i.transform(...p.textMatrix),i.translate(p.x,p.y),i.scale(N,F),he=0;he<ge;++he){if(de=s[he],typeof de=="number"){V=z*de*C/1e3,this.ctx.translate(V,0),p.x+=V*N;continue}const me=(de.isSpace?L:0)+Q,_e=f.charProcOperatorList[de.operatorListId];if(!_e){(0,r.warn)(`Type3 character "${de.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=de,this.save(),i.scale(C,C),i.transform(...se),this.executeOperatorList(_e),this.restore()),K=r.Util.applyTransform([de.width,0],se)[0]*C+me,i.translate(K,0),p.x+=K*N}i.restore(),this.processingType3=null}}setCharWidth(s,i){}setCharWidthAndBounds(s,i,p,f,C,F){this.ctx.rect(p,f,C-p,F-f),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let i;if(s[0]==="TilingPattern"){const p=s[1],f=this.baseTransform||(0,c.getCurrentTransform)(this.ctx),C={createCanvasGraphics:F=>new ne(F,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new m.TilingPattern(s,p,this.ctx,C,f)}else i=this._getPattern(s[1],s[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,i,p){const f=r.Util.makeHexColor(s,i,p);this.ctx.strokeStyle=f,this.current.strokeColor=f}setFillRGBColor(s,i,p){const f=r.Util.makeHexColor(s,i,p);this.ctx.fillStyle=f,this.current.fillColor=f,this.current.patternFill=!1}_getPattern(s,i=null){let p;return this.cachedPatterns.has(s)?p=this.cachedPatterns.get(s):(p=(0,m.getShadingPattern)(this.getObject(s)),this.cachedPatterns.set(s,p)),i&&(p.matrix=i),p}shadingFill(s){if(!this.contentVisible)return;const i=this.ctx;this.save();const p=this._getPattern(s);i.fillStyle=p.getPattern(i,this,(0,c.getCurrentTransformInverse)(i),m.PathType.SHADING);const f=(0,c.getCurrentTransformInverse)(i);if(f){const{width:C,height:F}=i.canvas,[z,Q,L,N]=r.Util.getAxialAlignedBoundingBox([0,0,C,F],f);this.ctx.fillRect(z,Q,L-z,N-Q)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,i){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&s.length===6&&this.transform(...s),this.baseTransform=(0,c.getCurrentTransform)(this.ctx),i)){const p=i[2]-i[0],f=i[3]-i[1];this.ctx.rect(i[0],i[1],p,f),this.current.updateRectMinMax((0,c.getCurrentTransform)(this.ctx),i),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;s.isolated||(0,r.info)("TODO: Support non-isolated groups."),s.knockout&&(0,r.warn)("Knockout groups not supported.");const p=(0,c.getCurrentTransform)(i);if(s.matrix&&i.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let f=r.Util.getAxialAlignedBoundingBox(s.bbox,(0,c.getCurrentTransform)(i));const C=[0,0,i.canvas.width,i.canvas.height];f=r.Util.intersect(f,C)||[0,0,0,0];const F=Math.floor(f[0]),z=Math.floor(f[1]);let Q=Math.max(Math.ceil(f[2])-F,1),L=Math.max(Math.ceil(f[3])-z,1),N=1,se=1;Q>v&&(N=Q/v,Q=v),L>v&&(se=L/v,L=v),this.current.startNewPathAndClipBox([0,0,Q,L]);let ge="groupAt"+this.groupLevel;s.smask&&(ge+="_smask_"+this.smaskCounter++%2);const Ae=this.cachedCanvases.getCanvas(ge,Q,L),he=Ae.context;he.scale(1/N,1/se),he.translate(-F,-z),he.transform(...p),s.smask?this.smaskStack.push({canvas:Ae.canvas,context:he,offsetX:F,offsetY:z,scaleX:N,scaleY:se,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(F,z),i.scale(N,se),i.save()),l(i,he),this.ctx=he,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,p=this.groupStack.pop();if(this.ctx=p,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const f=(0,c.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...f);const C=r.Util.getAxialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],f);this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(C)}}beginAnnotation(s,i,p,f,C){if(ve(this,pe,Vt).call(this),y(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(i)&&i.length===4){const F=i[2]-i[0],z=i[3]-i[1];if(C&&this.annotationCanvasMap){p=p.slice(),p[4]-=i[0],p[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=F,i[3]=z;const[Q,L]=r.Util.singularValueDecompose2dScale((0,c.getCurrentTransform)(this.ctx)),{viewportScale:N}=this,se=Math.ceil(F*this.outputScaleX*N),ge=Math.ceil(z*this.outputScaleY*N);this.annotationCanvas=this.canvasFactory.create(se,ge);const{canvas:Ae,context:he}=this.annotationCanvas;this.annotationCanvasMap.set(s,Ae),this.annotationCanvas.savedCtx=this.ctx,this.ctx=he,this.ctx.save(),this.ctx.setTransform(Q,0,0,-L,0,z*L),y(this.ctx)}else y(this.ctx),this.ctx.rect(i[0],i[1],F,z),this.ctx.clip(),this.endPath()}this.current=new h(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...p),this.transform(...f)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),ve(this,pe,Xt).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(s){if(!this.contentVisible)return;const i=s.count;s=this.getObject(s.data,s),s.count=i;const p=this.ctx,f=this.processingType3;if(f&&(f.compiled===void 0&&(f.compiled=o(s)),f.compiled)){f.compiled(p);return}const C=this._createMaskCanvas(s),F=C.canvas;p.save(),p.setTransform(1,0,0,1,0,0),p.drawImage(F,C.offsetX,C.offsetY),p.restore(),this.compose()}paintImageMaskXObjectRepeat(s,i,p=0,f=0,C,F){if(!this.contentVisible)return;s=this.getObject(s.data,s);const z=this.ctx;z.save();const Q=(0,c.getCurrentTransform)(z);z.transform(i,p,f,C,0,0);const L=this._createMaskCanvas(s);z.setTransform(1,0,0,1,L.offsetX-Q[4],L.offsetY-Q[5]);for(let N=0,se=F.length;N<se;N+=2){const ge=r.Util.transform(Q,[i,p,f,C,F[N],F[N+1]]),[Ae,he]=r.Util.applyTransform([0,0],ge);z.drawImage(L.canvas,Ae,he)}z.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const i=this.ctx,p=this.current.fillColor,f=this.current.patternFill;for(const C of s){const{data:F,width:z,height:Q,transform:L}=C,N=this.cachedCanvases.getCanvas("maskCanvas",z,Q),se=N.context;se.save();const ge=this.getObject(F,C);b(se,ge),se.globalCompositeOperation="source-in",se.fillStyle=f?p.getPattern(se,this,(0,c.getCurrentTransformInverse)(i),m.PathType.FILL):p,se.fillRect(0,0,z,Q),se.restore(),i.save(),i.transform(...L),i.scale(1,-1),P(i,N.canvas,0,0,z,Q,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const i=this.getObject(s);if(!i){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(s,i,p,f){if(!this.contentVisible)return;const C=this.getObject(s);if(!C){(0,r.warn)("Dependent image isn't ready yet");return}const F=C.width,z=C.height,Q=[];for(let L=0,N=f.length;L<N;L+=2)Q.push({transform:[i,0,0,p,f[L],f[L+1]],x:0,y:0,w:F,h:z});this.paintInlineImageXObjectGroup(C,Q)}applyTransferMapsToCanvas(s){return this.current.transferMaps!=="none"&&(s.filter=this.current.transferMaps,s.drawImage(s.canvas,0,0),s.filter="none"),s.canvas}applyTransferMapsToBitmap(s){if(this.current.transferMaps==="none")return s.bitmap;const{bitmap:i,width:p,height:f}=s,C=this.cachedCanvases.getCanvas("inlineImage",p,f),F=C.context;return F.filter=this.current.transferMaps,F.drawImage(i,0,0),F.filter="none",C.canvas}paintInlineImageXObject(s){if(!this.contentVisible)return;const i=s.width,p=s.height,f=this.ctx;if(this.save(),!r.isNodeJS){const{filter:z}=f;z!=="none"&&z!==""&&(f.filter="none")}f.scale(1/i,-1/p);let C;if(s.bitmap)C=this.applyTransferMapsToBitmap(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)C=s;else{const Q=this.cachedCanvases.getCanvas("inlineImage",i,p).context;x(Q,s),C=this.applyTransferMapsToCanvas(Q)}const F=this._scaleImage(C,(0,c.getCurrentTransformInverse)(f));f.imageSmoothingEnabled=E((0,c.getCurrentTransform)(f),s.interpolate),P(f,F.img,0,0,F.paintWidth,F.paintHeight,0,-p,i,p),this.compose(),this.restore()}paintInlineImageXObjectGroup(s,i){if(!this.contentVisible)return;const p=this.ctx;let f;if(s.bitmap)f=s.bitmap;else{const C=s.width,F=s.height,Q=this.cachedCanvases.getCanvas("inlineImage",C,F).context;x(Q,s),f=this.applyTransferMapsToCanvas(Q)}for(const C of i)p.save(),p.transform(...C.transform),p.scale(1,-1),P(p,f,C.x,C.y,C.w,C.h,0,-1,1,1),p.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,i){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,i){s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const p=this.ctx;this.pendingClip&&(i||(this.pendingClip===ue?p.clip("evenodd"):p.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),p.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=(0,c.getCurrentTransform)(this.ctx);if(s[1]===0&&s[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const i=Math.abs(s[0]*s[3]-s[2]*s[1]),p=Math.hypot(s[0],s[2]),f=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(p,f)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:s}=this.current,{a:i,b:p,c:f,d:C}=this.ctx.getTransform();let F,z;if(p===0&&f===0){const Q=Math.abs(i),L=Math.abs(C);if(Q===L)if(s===0)F=z=1/Q;else{const N=Q*s;F=z=N<1?1/N:1}else if(s===0)F=1/Q,z=1/L;else{const N=Q*s,se=L*s;F=N<1?1/N:1,z=se<1?1/se:1}}else{const Q=Math.abs(i*C-p*f),L=Math.hypot(i,p),N=Math.hypot(f,C);if(s===0)F=N/Q,z=L/Q;else{const se=s*Q;F=N>se?N/se:1,z=L>se?L/se:1}}this._cachedScaleForStroking[0]=F,this._cachedScaleForStroking[1]=z}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:i}=this,{lineWidth:p}=this.current,[f,C]=this.getScaleForStroking();if(i.lineWidth=p||1,f===1&&C===1){i.stroke();return}const F=i.getLineDash();if(s&&i.save(),i.scale(f,C),F.length>0){const z=Math.max(f,C);i.setLineDash(F.map(Q=>Q/z)),i.lineDashOffset/=z}i.stroke(),s&&i.restore()}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}};pe=new WeakSet,Vt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Xt=function(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(s!=="none"){const i=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}};let re=ne;e.CanvasGraphics=re;for(const j in r.OPS)re.prototype[j]!==void 0&&(re.prototype[r.OPS[j]]=re.prototype[j])},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=I;var r=n(1),c=n(6);const m={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=m;function _(o,h){if(!h)return;const x=h[2]-h[0],b=h[3]-h[1],l=new Path2D;l.rect(h[0],h[1],x,b),o.clip(l)}class k{constructor(){this.constructor===k&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class g extends k{constructor(h){super(),this._type=h[1],this._bbox=h[2],this._colorStops=h[3],this._p0=h[4],this._p1=h[5],this._r0=h[6],this._r1=h[7],this.matrix=null}_createGradient(h){let x;this._type==="axial"?x=h.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(x=h.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const b of this._colorStops)x.addColorStop(b[0],b[1]);return x}getPattern(h,x,b,l){let y;if(l===m.STROKE||l===m.FILL){const u=x.current.getClippedPathBoundingBox(l,(0,c.getCurrentTransform)(h))||[0,0,0,0],T=Math.ceil(u[2]-u[0])||1,R=Math.ceil(u[3]-u[1])||1,X=x.cachedCanvases.getCanvas("pattern",T,R,!0),D=X.context;D.clearRect(0,0,D.canvas.width,D.canvas.height),D.beginPath(),D.rect(0,0,D.canvas.width,D.canvas.height),D.translate(-u[0],-u[1]),b=r.Util.transform(b,[1,0,0,1,u[0],u[1]]),D.transform(...x.baseTransform),this.matrix&&D.transform(...this.matrix),_(D,this._bbox),D.fillStyle=this._createGradient(D),D.fill(),y=h.createPattern(X.canvas,"no-repeat");const E=new DOMMatrix(b);y.setTransform(E)}else _(h,this._bbox),y=this._createGradient(h);return y}}function v(o,h,x,b,l,y,u,T){const R=h.coords,X=h.colors,D=o.data,E=o.width*4;let q;R[x+1]>R[b+1]&&(q=x,x=b,b=q,q=y,y=u,u=q),R[b+1]>R[l+1]&&(q=b,b=l,l=q,q=u,u=T,T=q),R[x+1]>R[b+1]&&(q=x,x=b,b=q,q=y,y=u,u=q);const oe=(R[x]+h.offsetX)*h.scaleX,ae=(R[x+1]+h.offsetY)*h.scaleY,ue=(R[b]+h.offsetX)*h.scaleX,re=(R[b+1]+h.offsetY)*h.scaleY,pe=(R[l]+h.offsetX)*h.scaleX,H=(R[l+1]+h.offsetY)*h.scaleY;if(ae>=H)return;const W=X[y],ne=X[y+1],j=X[y+2],s=X[u],i=X[u+1],p=X[u+2],f=X[T],C=X[T+1],F=X[T+2],z=Math.round(ae),Q=Math.round(H);let L,N,se,ge,Ae,he,de,K;for(let V=z;V<=Q;V++){if(V<re){const te=V<ae?0:(ae-V)/(ae-re);L=oe-(oe-ue)*te,N=W-(W-s)*te,se=ne-(ne-i)*te,ge=j-(j-p)*te}else{let te;V>H?te=1:re===H?te=0:te=(re-V)/(re-H),L=ue-(ue-pe)*te,N=s-(s-f)*te,se=i-(i-C)*te,ge=p-(p-F)*te}let me;V<ae?me=0:V>H?me=1:me=(ae-V)/(ae-H),Ae=oe-(oe-pe)*me,he=W-(W-f)*me,de=ne-(ne-C)*me,K=j-(j-F)*me;const _e=Math.round(Math.min(L,Ae)),Ce=Math.round(Math.max(L,Ae));let ke=E*V+_e*4;for(let te=_e;te<=Ce;te++)me=(L-te)/(L-Ae),me<0?me=0:me>1&&(me=1),D[ke++]=N-(N-he)*me|0,D[ke++]=se-(se-de)*me|0,D[ke++]=ge-(ge-K)*me|0,D[ke++]=255}}function a(o,h,x){const b=h.coords,l=h.colors;let y,u;switch(h.type){case"lattice":const T=h.verticesPerRow,R=Math.floor(b.length/T)-1,X=T-1;for(y=0;y<R;y++){let D=y*T;for(let E=0;E<X;E++,D++)v(o,x,b[D],b[D+1],b[D+T],l[D],l[D+1],l[D+T]),v(o,x,b[D+T+1],b[D+1],b[D+T],l[D+T+1],l[D+1],l[D+T])}break;case"triangles":for(y=0,u=b.length;y<u;y+=3)v(o,x,b[y],b[y+1],b[y+2],l[y],l[y+1],l[y+2]);break;default:throw new Error("illegal figure")}}class S extends k{constructor(h){super(),this._coords=h[2],this._colors=h[3],this._figures=h[4],this._bounds=h[5],this._bbox=h[7],this._background=h[8],this.matrix=null}_createMeshCanvas(h,x,b){const T=Math.floor(this._bounds[0]),R=Math.floor(this._bounds[1]),X=Math.ceil(this._bounds[2])-T,D=Math.ceil(this._bounds[3])-R,E=Math.min(Math.ceil(Math.abs(X*h[0]*1.1)),3e3),q=Math.min(Math.ceil(Math.abs(D*h[1]*1.1)),3e3),oe=X/E,ae=D/q,ue={coords:this._coords,colors:this._colors,offsetX:-T,offsetY:-R,scaleX:1/oe,scaleY:1/ae},re=E+2*2,pe=q+2*2,H=b.getCanvas("mesh",re,pe,!1),W=H.context,ne=W.createImageData(E,q);if(x){const s=ne.data;for(let i=0,p=s.length;i<p;i+=4)s[i]=x[0],s[i+1]=x[1],s[i+2]=x[2],s[i+3]=255}for(const s of this._figures)a(ne,s,ue);return W.putImageData(ne,2,2),{canvas:H.canvas,offsetX:T-2*oe,offsetY:R-2*ae,scaleX:oe,scaleY:ae}}getPattern(h,x,b,l){_(h,this._bbox);let y;if(l===m.SHADING)y=r.Util.singularValueDecompose2dScale((0,c.getCurrentTransform)(h));else if(y=r.Util.singularValueDecompose2dScale(x.baseTransform),this.matrix){const T=r.Util.singularValueDecompose2dScale(this.matrix);y=[y[0]*T[0],y[1]*T[1]]}const u=this._createMeshCanvas(y,l===m.SHADING?null:this._background,x.cachedCanvases);return l!==m.SHADING&&(h.setTransform(...x.baseTransform),this.matrix&&h.transform(...this.matrix)),h.translate(u.offsetX,u.offsetY),h.scale(u.scaleX,u.scaleY),h.createPattern(u.canvas,"no-repeat")}}class w extends k{getPattern(){return"hotpink"}}function I(o){switch(o[0]){case"RadialAxial":return new g(o);case"Mesh":return new S(o);case"Dummy":return new w}throw new Error(`Unknown IR type: ${o[0]}`)}const M={COLORED:1,UNCOLORED:2},P=class P{constructor(h,x,b,l,y){this.operatorList=h[2],this.matrix=h[3]||[1,0,0,1,0,0],this.bbox=h[4],this.xstep=h[5],this.ystep=h[6],this.paintType=h[7],this.tilingType=h[8],this.color=x,this.ctx=b,this.canvasGraphicsFactory=l,this.baseTransform=y}createPatternCanvas(h){const x=this.operatorList,b=this.bbox,l=this.xstep,y=this.ystep,u=this.paintType,T=this.tilingType,R=this.color,X=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+T);const D=b[0],E=b[1],q=b[2],oe=b[3],ae=r.Util.singularValueDecompose2dScale(this.matrix),ue=r.Util.singularValueDecompose2dScale(this.baseTransform),re=[ae[0]*ue[0],ae[1]*ue[1]],pe=this.getSizeAndScale(l,this.ctx.canvas.width,re[0]),H=this.getSizeAndScale(y,this.ctx.canvas.height,re[1]),W=h.cachedCanvases.getCanvas("pattern",pe.size,H.size,!0),ne=W.context,j=X.createCanvasGraphics(ne);j.groupLevel=h.groupLevel,this.setFillAndStrokeStyleToContext(j,u,R);let s=D,i=E,p=q,f=oe;return D<0&&(s=0,p+=Math.abs(D)),E<0&&(i=0,f+=Math.abs(E)),ne.translate(-(pe.scale*s),-(H.scale*i)),j.transform(pe.scale,0,0,H.scale,0,0),ne.save(),this.clipBbox(j,s,i,p,f),j.baseTransform=(0,c.getCurrentTransform)(j.ctx),j.executeOperatorList(x),j.endDrawing(),{canvas:W.canvas,scaleX:pe.scale,scaleY:H.scale,offsetX:s,offsetY:i}}getSizeAndScale(h,x,b){h=Math.abs(h);const l=Math.max(P.MAX_PATTERN_SIZE,x);let y=Math.ceil(h*b);return y>=l?y=l:b=y/h,{scale:b,size:y}}clipBbox(h,x,b,l,y){const u=l-x,T=y-b;h.ctx.rect(x,b,u,T),h.current.updateRectMinMax((0,c.getCurrentTransform)(h.ctx),[x,b,l,y]),h.clip(),h.endPath()}setFillAndStrokeStyleToContext(h,x,b){const l=h.ctx,y=h.current;switch(x){case M.COLORED:const u=this.ctx;l.fillStyle=u.fillStyle,l.strokeStyle=u.strokeStyle,y.fillColor=u.fillStyle,y.strokeColor=u.strokeStyle;break;case M.UNCOLORED:const T=r.Util.makeHexColor(b[0],b[1],b[2]);l.fillStyle=T,l.strokeStyle=T,y.fillColor=T,y.strokeColor=T;break;default:throw new r.FormatError(`Unsupported paint type: ${x}`)}}getPattern(h,x,b,l){let y=b;l!==m.SHADING&&(y=r.Util.transform(y,x.baseTransform),this.matrix&&(y=r.Util.transform(y,this.matrix)));const u=this.createPatternCanvas(x);let T=new DOMMatrix(y);T=T.translate(u.offsetX,u.offsetY),T=T.scale(1/u.scaleX,1/u.scaleY);const R=h.createPattern(u.canvas,"repeat");return R.setTransform(T),R}};Ye(P,"MAX_PATTERN_SIZE",3e3);let B=P;e.TilingPattern=B},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=m,e.convertToRGBA=c,e.grayToRGBA=k;var r=n(1);function c(g){switch(g.kind){case r.ImageKind.GRAYSCALE_1BPP:return m(g);case r.ImageKind.RGB_24BPP:return _(g)}return null}function m({src:g,srcPos:v=0,dest:a,width:S,height:w,nonBlackColor:I=4294967295,inverseDecode:M=!1}){const B=r.FeatureTest.isLittleEndian?4278190080:255,[P,o]=M?[I,B]:[B,I],h=S>>3,x=S&7,b=g.length;a=new Uint32Array(a.buffer);let l=0;for(let y=0;y<w;y++){for(const T=v+h;v<T;v++){const R=v<b?g[v]:255;a[l++]=R&128?o:P,a[l++]=R&64?o:P,a[l++]=R&32?o:P,a[l++]=R&16?o:P,a[l++]=R&8?o:P,a[l++]=R&4?o:P,a[l++]=R&2?o:P,a[l++]=R&1?o:P}if(x===0)continue;const u=v<b?g[v++]:255;for(let T=0;T<x;T++)a[l++]=u&1<<7-T?o:P}return{srcPos:v,destPos:l}}function _({src:g,srcPos:v=0,dest:a,destPos:S=0,width:w,height:I}){let M=0;const B=g.length>>2,P=new Uint32Array(g.buffer,v,B);if(r.FeatureTest.isLittleEndian){for(;M<B-2;M+=3,S+=4){const o=P[M],h=P[M+1],x=P[M+2];a[S]=o|4278190080,a[S+1]=o>>>24|h<<8|4278190080,a[S+2]=h>>>16|x<<16|4278190080,a[S+3]=x>>>8|4278190080}for(let o=M*4,h=g.length;o<h;o+=3)a[S++]=g[o]|g[o+1]<<8|g[o+2]<<16|4278190080}else{for(;M<B-2;M+=3,S+=4){const o=P[M],h=P[M+1],x=P[M+2];a[S]=o|255,a[S+1]=o<<24|h>>>8|255,a[S+2]=h<<16|x>>>16|255,a[S+3]=x<<8|255}for(let o=M*4,h=g.length;o<h;o+=3)a[S++]=g[o]<<24|g[o+1]<<16|g[o+2]<<8|255}return{srcPos:v,destPos:S}}function k(g,v){if(r.FeatureTest.isLittleEndian)for(let a=0,S=g.length;a<S;a++)v[a]=g[a]*65793|4278190080;else for(let a=0,S=g.length;a<S;a++)v[a]=g[a]*16843008|255}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(t,e,n)=>{var g,Er,Rr,St;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=n(1);const c={DATA:1,ERROR:2},m={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function _(w){switch(w instanceof Error||typeof w=="object"&&w!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),w.name){case"AbortException":return new r.AbortException(w.message);case"MissingPDFException":return new r.MissingPDFException(w.message);case"PasswordException":return new r.PasswordException(w.message,w.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(w.message,w.status);case"UnknownErrorException":return new r.UnknownErrorException(w.message,w.details);default:return new r.UnknownErrorException(w.message,w.toString())}}class k{constructor(I,M,B){Ee(this,g);this.sourceName=I,this.targetName=M,this.comObj=B,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=P=>{const o=P.data;if(o.targetName!==this.sourceName)return;if(o.stream){ve(this,g,Rr).call(this,o);return}if(o.callback){const x=o.callbackId,b=this.callbackCapabilities[x];if(!b)throw new Error(`Cannot resolve callback ${x}`);if(delete this.callbackCapabilities[x],o.callback===c.DATA)b.resolve(o.data);else if(o.callback===c.ERROR)b.reject(_(o.reason));else throw new Error("Unexpected callback case");return}const h=this.actionHandler[o.action];if(!h)throw new Error(`Unknown action from worker: ${o.action}`);if(o.callbackId){const x=this.sourceName,b=o.sourceName;new Promise(function(l){l(h(o.data))}).then(function(l){B.postMessage({sourceName:x,targetName:b,callback:c.DATA,callbackId:o.callbackId,data:l})},function(l){B.postMessage({sourceName:x,targetName:b,callback:c.ERROR,callbackId:o.callbackId,reason:_(l)})});return}if(o.streamId){ve(this,g,Er).call(this,o);return}h(o.data)},B.addEventListener("message",this._onComObjOnMessage)}on(I,M){const B=this.actionHandler;if(B[I])throw new Error(`There is already an actionName called "${I}"`);B[I]=M}send(I,M,B){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:I,data:M},B)}sendWithPromise(I,M,B){const P=this.callbackId++,o=new r.PromiseCapability;this.callbackCapabilities[P]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:I,callbackId:P,data:M},B)}catch(h){o.reject(h)}return o.promise}sendWithStream(I,M,B,P){const o=this.streamId++,h=this.sourceName,x=this.targetName,b=this.comObj;return new ReadableStream({start:l=>{const y=new r.PromiseCapability;return this.streamControllers[o]={controller:l,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},b.postMessage({sourceName:h,targetName:x,action:I,streamId:o,data:M,desiredSize:l.desiredSize},P),y.promise},pull:l=>{const y=new r.PromiseCapability;return this.streamControllers[o].pullCall=y,b.postMessage({sourceName:h,targetName:x,stream:m.PULL,streamId:o,desiredSize:l.desiredSize}),y.promise},cancel:l=>{(0,r.assert)(l instanceof Error,"cancel must have a valid reason");const y=new r.PromiseCapability;return this.streamControllers[o].cancelCall=y,this.streamControllers[o].isClosed=!0,b.postMessage({sourceName:h,targetName:x,stream:m.CANCEL,streamId:o,reason:_(l)}),y.promise}},B)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}g=new WeakSet,Er=function(I){const M=I.streamId,B=this.sourceName,P=I.sourceName,o=this.comObj,h=this,x=this.actionHandler[I.action],b={enqueue(l,y=1,u){if(this.isCancelled)return;const T=this.desiredSize;this.desiredSize-=y,T>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),o.postMessage({sourceName:B,targetName:P,stream:m.ENQUEUE,streamId:M,chunk:l},u)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:B,targetName:P,stream:m.CLOSE,streamId:M}),delete h.streamSinks[M])},error(l){(0,r.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:B,targetName:P,stream:m.ERROR,streamId:M,reason:_(l)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:I.desiredSize,ready:null};b.sinkCapability.resolve(),b.ready=b.sinkCapability.promise,this.streamSinks[M]=b,new Promise(function(l){l(x(I.data,b))}).then(function(){o.postMessage({sourceName:B,targetName:P,stream:m.START_COMPLETE,streamId:M,success:!0})},function(l){o.postMessage({sourceName:B,targetName:P,stream:m.START_COMPLETE,streamId:M,reason:_(l)})})},Rr=function(I){const M=I.streamId,B=this.sourceName,P=I.sourceName,o=this.comObj,h=this.streamControllers[M],x=this.streamSinks[M];switch(I.stream){case m.START_COMPLETE:I.success?h.startCall.resolve():h.startCall.reject(_(I.reason));break;case m.PULL_COMPLETE:I.success?h.pullCall.resolve():h.pullCall.reject(_(I.reason));break;case m.PULL:if(!x){o.postMessage({sourceName:B,targetName:P,stream:m.PULL_COMPLETE,streamId:M,success:!0});break}x.desiredSize<=0&&I.desiredSize>0&&x.sinkCapability.resolve(),x.desiredSize=I.desiredSize,new Promise(function(b){var l;b((l=x.onPull)==null?void 0:l.call(x))}).then(function(){o.postMessage({sourceName:B,targetName:P,stream:m.PULL_COMPLETE,streamId:M,success:!0})},function(b){o.postMessage({sourceName:B,targetName:P,stream:m.PULL_COMPLETE,streamId:M,reason:_(b)})});break;case m.ENQUEUE:if((0,r.assert)(h,"enqueue should have stream controller"),h.isClosed)break;h.controller.enqueue(I.chunk);break;case m.CLOSE:if((0,r.assert)(h,"close should have stream controller"),h.isClosed)break;h.isClosed=!0,h.controller.close(),ve(this,g,St).call(this,h,M);break;case m.ERROR:(0,r.assert)(h,"error should have stream controller"),h.controller.error(_(I.reason)),ve(this,g,St).call(this,h,M);break;case m.CANCEL_COMPLETE:I.success?h.cancelCall.resolve():h.cancelCall.reject(_(I.reason)),ve(this,g,St).call(this,h,M);break;case m.CANCEL:if(!x)break;new Promise(function(b){var l;b((l=x.onCancel)==null?void 0:l.call(x,_(I.reason)))}).then(function(){o.postMessage({sourceName:B,targetName:P,stream:m.CANCEL_COMPLETE,streamId:M,success:!0})},function(b){o.postMessage({sourceName:B,targetName:P,stream:m.CANCEL_COMPLETE,streamId:M,reason:_(b)})}),x.sinkCapability.reject(_(I.reason)),x.isCancelled=!0,delete this.streamSinks[M];break;default:throw new Error("Unexpected stream case")}},St=async function(I,M){var B,P,o;await Promise.allSettled([(B=I.startCall)==null?void 0:B.promise,(P=I.pullCall)==null?void 0:P.promise,(o=I.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[M]},e.MessageHandler=k},(t,e,n)=>{var m,_;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(1);class c{constructor({parsedData:g,rawData:v}){Ee(this,m);Ee(this,_);Re(this,m,g),Re(this,_,v)}getRaw(){return A(this,_)}get(g){return A(this,m).get(g)??null}getAll(){return(0,r.objectFromMap)(A(this,m))}has(g){return A(this,m).has(g)}}m=new WeakMap,_=new WeakMap,e.Metadata=c},(t,e,n)=>{var g,v,a,S,w,I,Kt;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=n(1),c=n(8);const m=Symbol("INTERNAL");class _{constructor(P,o){Ee(this,g,!0);this.name=P,this.intent=o}get visible(){return A(this,g)}_setVisible(P,o){P!==m&&(0,r.unreachable)("Internal method `_setVisible` called."),Re(this,g,o)}}g=new WeakMap;class k{constructor(P){Ee(this,I);Ee(this,v,null);Ee(this,a,new Map);Ee(this,S,null);Ee(this,w,null);if(this.name=null,this.creator=null,P!==null){this.name=P.name,this.creator=P.creator,Re(this,w,P.order);for(const o of P.groups)A(this,a).set(o.id,new _(o.name,o.intent));if(P.baseState==="OFF")for(const o of A(this,a).values())o._setVisible(m,!1);for(const o of P.on)A(this,a).get(o)._setVisible(m,!0);for(const o of P.off)A(this,a).get(o)._setVisible(m,!1);Re(this,S,this.getHash())}}isVisible(P){if(A(this,a).size===0)return!0;if(!P)return(0,r.warn)("Optional content group not defined."),!0;if(P.type==="OCG")return A(this,a).has(P.id)?A(this,a).get(P.id).visible:((0,r.warn)(`Optional content group not found: ${P.id}`),!0);if(P.type==="OCMD"){if(P.expression)return ve(this,I,Kt).call(this,P.expression);if(!P.policy||P.policy==="AnyOn"){for(const o of P.ids){if(!A(this,a).has(o))return(0,r.warn)(`Optional content group not found: ${o}`),!0;if(A(this,a).get(o).visible)return!0}return!1}else if(P.policy==="AllOn"){for(const o of P.ids){if(!A(this,a).has(o))return(0,r.warn)(`Optional content group not found: ${o}`),!0;if(!A(this,a).get(o).visible)return!1}return!0}else if(P.policy==="AnyOff"){for(const o of P.ids){if(!A(this,a).has(o))return(0,r.warn)(`Optional content group not found: ${o}`),!0;if(!A(this,a).get(o).visible)return!0}return!1}else if(P.policy==="AllOff"){for(const o of P.ids){if(!A(this,a).has(o))return(0,r.warn)(`Optional content group not found: ${o}`),!0;if(A(this,a).get(o).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${P.policy}.`),!0}return(0,r.warn)(`Unknown group type ${P.type}.`),!0}setVisibility(P,o=!0){if(!A(this,a).has(P)){(0,r.warn)(`Optional content group not found: ${P}`);return}A(this,a).get(P)._setVisible(m,!!o),Re(this,v,null)}get hasInitialVisibility(){return A(this,S)===null||this.getHash()===A(this,S)}getOrder(){return A(this,a).size?A(this,w)?A(this,w).slice():[...A(this,a).keys()]:null}getGroups(){return A(this,a).size>0?(0,r.objectFromMap)(A(this,a)):null}getGroup(P){return A(this,a).get(P)||null}getHash(){if(A(this,v)!==null)return A(this,v);const P=new c.MurmurHash3_64;for(const[o,h]of A(this,a))P.update(`${o}:${h.visible}`);return Re(this,v,P.hexdigest())}}v=new WeakMap,a=new WeakMap,S=new WeakMap,w=new WeakMap,I=new WeakSet,Kt=function(P){const o=P.length;if(o<2)return!0;const h=P[0];for(let x=1;x<o;x++){const b=P[x];let l;if(Array.isArray(b))l=ve(this,I,Kt).call(this,b);else if(A(this,a).has(b))l=A(this,a).get(b).visible;else return(0,r.warn)(`Optional content group not found: ${b}`),!0;switch(h){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return h==="And"},e.OptionalContentConfig=k},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=n(1),c=n(6);class m{constructor({length:v,initialData:a,progressiveDone:S=!1,contentDispositionFilename:w=null,disableRange:I=!1,disableStream:M=!1},B){if((0,r.assert)(B,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=S,this._contentDispositionFilename=w,(a==null?void 0:a.length)>0){const P=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(P)}this._pdfDataRangeTransport=B,this._isStreamingSupported=!M,this._isRangeSupported=!I,this._contentLength=v,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((P,o)=>{this._onReceiveData({begin:P,chunk:o})}),this._pdfDataRangeTransport.addProgressListener((P,o)=>{this._onProgress({loaded:P,total:o})}),this._pdfDataRangeTransport.addProgressiveReadListener(P=>{this._onReceiveData({chunk:P})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:v,chunk:a}){const S=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;if(v===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(S):this._queuedChunks.push(S);else{const w=this._rangeReaders.some(function(I){return I._begin!==v?!1:(I._enqueue(S),!0)});(0,r.assert)(w,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var v;return((v=this._fullRequestReader)==null?void 0:v._loaded)??0}_onProgress(v){var a,S,w,I;v.total===void 0?(S=(a=this._rangeReaders[0])==null?void 0:a.onProgress)==null||S.call(a,{loaded:v.loaded}):(I=(w=this._fullRequestReader)==null?void 0:w.onProgress)==null||I.call(w,{loaded:v.loaded,total:v.total})}_onProgressiveDone(){var v;(v=this._fullRequestReader)==null||v.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(v){const a=this._rangeReaders.indexOf(v);a>=0&&this._rangeReaders.splice(a,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const v=this._queuedChunks;return this._queuedChunks=null,new _(this,v,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(v,a){if(a<=this._progressiveDataLength)return null;const S=new k(this,v,a);return this._pdfDataRangeTransport.requestDataRange(v,a),this._rangeReaders.push(S),S}cancelAllRequests(v){var a;(a=this._fullRequestReader)==null||a.cancel(v);for(const S of this._rangeReaders.slice(0))S.cancel(v);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=m;class _{constructor(v,a,S=!1,w=null){this._stream=v,this._done=S||!1,this._filename=(0,c.isPdfFile)(w)?w:null,this._queuedChunks=a||[],this._loaded=0;for(const I of this._queuedChunks)this._loaded+=I.byteLength;this._requests=[],this._headersReady=Promise.resolve(),v._fullRequestReader=this,this.onProgress=null}_enqueue(v){this._done||(this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunks.push(v),this._loaded+=v.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const v=new r.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class k{constructor(v,a,S){this._stream=v,this._begin=a,this._end=S,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(v){if(!this._done){if(this._requests.length===0)this._queuedChunk=v;else{this._requests.shift().resolve({value:v,done:!1});for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};const v=new r.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=n(1),c=n(20);function m(S,w,I){return{method:"GET",headers:S,signal:I.signal,mode:"cors",credentials:w?"include":"same-origin",redirect:"follow"}}function _(S){const w=new Headers;for(const I in S){const M=S[I];M!==void 0&&w.append(I,M)}return w}function k(S){return S instanceof Uint8Array?S.buffer:S instanceof ArrayBuffer?S:((0,r.warn)(`getArrayBuffer - unexpected data format: ${S}`),new Uint8Array(S).buffer)}class g{constructor(w){this.source=w,this.isHttp=/^https?:/i.test(w.url),this.httpHeaders=this.isHttp&&w.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var w;return((w=this._fullRequestReader)==null?void 0:w._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new v(this),this._fullRequestReader}getRangeReader(w,I){if(I<=this._progressiveDataLength)return null;const M=new a(this,w,I);return this._rangeRequestReaders.push(M),M}cancelAllRequests(w){var I;(I=this._fullRequestReader)==null||I.cancel(w);for(const M of this._rangeRequestReaders.slice(0))M.cancel(w)}}e.PDFFetchStream=g;class v{constructor(w){this._stream=w,this._reader=null,this._loaded=0,this._filename=null;const I=w.source;this._withCredentials=I.withCredentials||!1,this._contentLength=I.length,this._headersCapability=new r.PromiseCapability,this._disableRange=I.disableRange||!1,this._rangeChunkSize=I.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!I.disableStream,this._isRangeSupported=!I.disableRange,this._headers=_(this._stream.httpHeaders);const M=I.url;fetch(M,m(this._headers,this._withCredentials,this._abortController)).then(B=>{if(!(0,c.validateResponseStatus)(B.status))throw(0,c.createResponseStatusError)(B.status,M);this._reader=B.body.getReader(),this._headersCapability.resolve();const P=x=>B.headers.get(x),{allowRangeRequests:o,suggestedLength:h}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=h||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(P),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var M;await this._headersCapability.promise;const{value:w,done:I}=await this._reader.read();return I?{value:w,done:I}:(this._loaded+=w.byteLength,(M=this.onProgress)==null||M.call(this,{loaded:this._loaded,total:this._contentLength}),{value:k(w),done:!1})}cancel(w){var I;(I=this._reader)==null||I.cancel(w),this._abortController.abort()}}class a{constructor(w,I,M){this._stream=w,this._reader=null,this._loaded=0;const B=w.source;this._withCredentials=B.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!B.disableStream,this._abortController=new AbortController,this._headers=_(this._stream.httpHeaders),this._headers.append("Range",`bytes=${I}-${M-1}`);const P=B.url;fetch(P,m(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!(0,c.validateResponseStatus)(o.status))throw(0,c.createResponseStatusError)(o.status,P);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var M;await this._readCapability.promise;const{value:w,done:I}=await this._reader.read();return I?{value:w,done:I}:(this._loaded+=w.byteLength,(M=this.onProgress)==null||M.call(this,{loaded:this._loaded}),{value:k(w),done:!1})}cancel(w){var I;(I=this._reader)==null||I.cancel(w),this._abortController.abort()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=g,e.extractFilenameFromHeader=k,e.validateRangeRequestCapabilities=_,e.validateResponseStatus=v;var r=n(1),c=n(21),m=n(6);function _({getResponseHeader:a,isHttp:S,rangeChunkSize:w,disableRange:I}){const M={allowRangeRequests:!1,suggestedLength:void 0},B=parseInt(a("Content-Length"),10);return!Number.isInteger(B)||(M.suggestedLength=B,B<=2*w)||I||!S||a("Accept-Ranges")!=="bytes"||(a("Content-Encoding")||"identity")!=="identity"||(M.allowRangeRequests=!0),M}function k(a){const S=a("Content-Disposition");if(S){let w=(0,c.getFilenameFromContentDispositionHeader)(S);if(w.includes("%"))try{w=decodeURIComponent(w)}catch{}if((0,m.isPdfFile)(w))return w}return null}function g(a,S){return a===404||a===0&&S.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+S+'".'):new r.UnexpectedResponseException(`Unexpected server response (${a}) while retrieving PDF "${S}".`,a)}function v(a){return a===200||a===206}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=c;var r=n(1);function c(m){let _=!0,k=g("filename\\*","i").exec(m);if(k){k=k[1];let B=w(k);return B=unescape(B),B=I(B),B=M(B),a(B)}if(k=S(m),k){const B=M(k);return a(B)}if(k=g("filename","i").exec(m),k){k=k[1];let B=w(k);return B=M(B),a(B)}function g(B,P){return new RegExp("(?:^|;)\\s*"+B+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',P)}function v(B,P){if(B){if(!/^[\x00-\xFF]+$/.test(P))return P;try{const o=new TextDecoder(B,{fatal:!0}),h=(0,r.stringToBytes)(P);P=o.decode(h),_=!1}catch{}}return P}function a(B){return _&&/[\x80-\xff]/.test(B)&&(B=v("utf-8",B),_&&(B=v("iso-8859-1",B))),B}function S(B){const P=[];let o;const h=g("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(o=h.exec(B))!==null;){let[,b,l,y]=o;if(b=parseInt(b,10),b in P){if(b===0)break;continue}P[b]=[l,y]}const x=[];for(let b=0;b<P.length&&b in P;++b){let[l,y]=P[b];y=w(y),l&&(y=unescape(y),b===0&&(y=I(y))),x.push(y)}return x.join("")}function w(B){if(B.startsWith('"')){const P=B.slice(1).split('\\"');for(let o=0;o<P.length;++o){const h=P[o].indexOf('"');h!==-1&&(P[o]=P[o].slice(0,h),P.length=o+1),P[o]=P[o].replaceAll(/\\(.)/g,"$1")}B=P.join('"')}return B}function I(B){const P=B.indexOf("'");if(P===-1)return B;const o=B.slice(0,P),x=B.slice(P+1).replace(/^[^']*'/,"");return v(o,x)}function M(B){return!B.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(B)?B:B.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(P,o,h,x){if(h==="q"||h==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,l){return String.fromCharCode(parseInt(l,16))}),v(o,x);try{x=atob(x)}catch{}return v(o,x)})}return""}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=n(1),c=n(20);const m=200,_=206;function k(w){const I=w.response;return typeof I!="string"?I:(0,r.stringToBytes)(I).buffer}class g{constructor(I,M={}){this.url=I,this.isHttp=/^https?:/i.test(I),this.httpHeaders=this.isHttp&&M.httpHeaders||Object.create(null),this.withCredentials=M.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(I,M,B){const P={begin:I,end:M};for(const o in B)P[o]=B[o];return this.request(P)}requestFull(I){return this.request(I)}request(I){const M=new XMLHttpRequest,B=this.currXhrId++,P=this.pendingRequests[B]={xhr:M};M.open("GET",this.url),M.withCredentials=this.withCredentials;for(const o in this.httpHeaders){const h=this.httpHeaders[o];h!==void 0&&M.setRequestHeader(o,h)}return this.isHttp&&"begin"in I&&"end"in I?(M.setRequestHeader("Range",`bytes=${I.begin}-${I.end-1}`),P.expectedStatus=_):P.expectedStatus=m,M.responseType="arraybuffer",I.onError&&(M.onerror=function(o){I.onError(M.status)}),M.onreadystatechange=this.onStateChange.bind(this,B),M.onprogress=this.onProgress.bind(this,B),P.onHeadersReceived=I.onHeadersReceived,P.onDone=I.onDone,P.onError=I.onError,P.onProgress=I.onProgress,M.send(null),B}onProgress(I,M){var P;const B=this.pendingRequests[I];B&&((P=B.onProgress)==null||P.call(B,M))}onStateChange(I,M){var b,l,y;const B=this.pendingRequests[I];if(!B)return;const P=B.xhr;if(P.readyState>=2&&B.onHeadersReceived&&(B.onHeadersReceived(),delete B.onHeadersReceived),P.readyState!==4||!(I in this.pendingRequests))return;if(delete this.pendingRequests[I],P.status===0&&this.isHttp){(b=B.onError)==null||b.call(B,P.status);return}const o=P.status||m;if(!(o===m&&B.expectedStatus===_)&&o!==B.expectedStatus){(l=B.onError)==null||l.call(B,P.status);return}const x=k(P);if(o===_){const u=P.getResponseHeader("Content-Range"),T=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);B.onDone({begin:parseInt(T[1],10),chunk:x})}else x?B.onDone({begin:0,chunk:x}):(y=B.onError)==null||y.call(B,P.status)}getRequestXhr(I){return this.pendingRequests[I].xhr}isPendingRequest(I){return I in this.pendingRequests}abortRequest(I){const M=this.pendingRequests[I].xhr;delete this.pendingRequests[I],M.abort()}}class v{constructor(I){this._source=I,this._manager=new g(I.url,{httpHeaders:I.httpHeaders,withCredentials:I.withCredentials}),this._rangeChunkSize=I.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(I){const M=this._rangeRequestReaders.indexOf(I);M>=0&&this._rangeRequestReaders.splice(M,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._manager,this._source),this._fullRequestReader}getRangeReader(I,M){const B=new S(this._manager,I,M);return B.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(B),B}cancelAllRequests(I){var M;(M=this._fullRequestReader)==null||M.cancel(I);for(const B of this._rangeRequestReaders.slice(0))B.cancel(I)}}e.PDFNetworkStream=v;class a{constructor(I,M){this._manager=I;const B={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=M.url,this._fullRequestId=I.requestFull(B),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=M.disableRange||!1,this._contentLength=M.length,this._rangeChunkSize=M.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const I=this._fullRequestId,M=this._manager.getRequestXhr(I),B=h=>M.getResponseHeader(h),{allowRangeRequests:P,suggestedLength:o}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:B,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});P&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(B),this._isRangeSupported&&this._manager.abortRequest(I),this._headersReceivedCapability.resolve()}_onDone(I){if(I&&(this._requests.length>0?this._requests.shift().resolve({value:I.chunk,done:!1}):this._cachedChunks.push(I.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(I){this._storedError=(0,c.createResponseStatusError)(I,this._url),this._headersReceivedCapability.reject(this._storedError);for(const M of this._requests)M.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(I){var M;(M=this.onProgress)==null||M.call(this,{loaded:I.loaded,total:I.lengthComputable?I.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const I=new r.PromiseCapability;return this._requests.push(I),I.promise}cancel(I){this._done=!0,this._headersReceivedCapability.reject(I);for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class S{constructor(I,M,B){this._manager=I;const P={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=I.url,this._requestId=I.requestRange(M,B,P),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var I;(I=this.onClosed)==null||I.call(this,this)}_onDone(I){const M=I.chunk;this._requests.length>0?this._requests.shift().resolve({value:M,done:!1}):this._queuedChunk=M,this._done=!0;for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(I){this._storedError=(0,c.createResponseStatusError)(I,this._url);for(const M of this._requests)M.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(I){var M;this.isStreamingSupported||(M=this.onProgress)==null||M.call(this,{loaded:I.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const M=this._queuedChunk;return this._queuedChunk=null,{value:M,done:!1}}if(this._done)return{value:void 0,done:!0};const I=new r.PromiseCapability;return this._requests.push(I),I.promise}cancel(I){this._done=!0;for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=n(1),c=n(20);const m=/^file:\/\/\/[a-zA-Z]:\//;function _(B){const P=require$$2,o=P.parse(B);return o.protocol==="file:"||o.host?o:/^[a-z]:[/\\]/i.test(B)?P.parse(`file:///${B}`):(o.host||(o.protocol="file:"),o)}class k{constructor(P){this.source=P,this.url=_(P.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)==null?void 0:P._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new I(this):new S(this),this._fullRequestReader}getRangeReader(P,o){if(o<=this._progressiveDataLength)return null;const h=this.isFsUrl?new M(this,P,o):new w(this,P,o);return this._rangeRequestReaders.push(h),h}cancelAllRequests(P){var o;(o=this._fullRequestReader)==null||o.cancel(P);for(const h of this._rangeRequestReaders.slice(0))h.cancel(P)}}e.PDFNodeStream=k;class g{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null;const o=P.source;this._contentLength=o.length,this._loaded=0,this._filename=null,this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var h;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const P=this._readableStream.read();return P===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=P.length,(h=this.onProgress)==null||h.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(P).buffer,done:!1})}cancel(P){if(!this._readableStream){this._error(P);return}this._readableStream.destroy(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",o=>{this._error(o)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class v{constructor(P){this._url=P.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;const o=P.source;this._isStreamingSupported=!o.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var h;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const P=this._readableStream.read();return P===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=P.length,(h=this.onProgress)==null||h.call(this,{loaded:this._loaded}),{value:new Uint8Array(P).buffer,done:!1})}cancel(P){if(!this._readableStream){this._error(P);return}this._readableStream.destroy(P)}_error(P){this._storedError=P,this._readCapability.resolve()}_setReadableStream(P){this._readableStream=P,P.on("readable",()=>{this._readCapability.resolve()}),P.on("end",()=>{P.destroy(),this._done=!0,this._readCapability.resolve()}),P.on("error",o=>{this._error(o)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function a(B,P){return{protocol:B.protocol,auth:B.auth,host:B.hostname,port:B.port,path:B.path,method:"GET",headers:P}}class S extends g{constructor(P){super(P);const o=h=>{if(h.statusCode===404){const y=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=y,this._headersCapability.reject(y);return}this._headersCapability.resolve(),this._setReadableStream(h);const x=y=>this._readableStream.headers[y.toLowerCase()],{allowRangeRequests:b,suggestedLength:l}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:P.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=b,this._contentLength=l||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(x)};if(this._request=null,this._url.protocol==="http:"){const h=requireStreamHttp();this._request=h.request(a(this._url,P.httpHeaders),o)}else{const h=requireHttpsBrowserify();this._request=h.request(a(this._url,P.httpHeaders),o)}this._request.on("error",h=>{this._storedError=h,this._headersCapability.reject(h)}),this._request.end()}}class w extends v{constructor(P,o,h){super(P),this._httpHeaders={};for(const b in P.httpHeaders){const l=P.httpHeaders[b];l!==void 0&&(this._httpHeaders[b]=l)}this._httpHeaders.Range=`bytes=${o}-${h-1}`;const x=b=>{if(b.statusCode===404){const l=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(b)};if(this._request=null,this._url.protocol==="http:"){const b=requireStreamHttp();this._request=b.request(a(this._url,this._httpHeaders),x)}else{const b=requireHttpsBrowserify();this._request=b.request(a(this._url,this._httpHeaders),x)}this._request.on("error",b=>{this._storedError=b}),this._request.end()}}class I extends g{constructor(P){super(P);let o=decodeURIComponent(this._url.path);m.test(this._url.href)&&(o=o.replace(/^\//,""));const h=require$$0$2;h.lstat(o,(x,b)=>{if(x){x.code==="ENOENT"&&(x=new r.MissingPDFException(`Missing PDF "${o}".`)),this._storedError=x,this._headersCapability.reject(x);return}this._contentLength=b.size,this._setReadableStream(h.createReadStream(o)),this._headersCapability.resolve()})}}class M extends v{constructor(P,o,h){super(P);let x=decodeURIComponent(this._url.path);m.test(this._url.href)&&(x=x.replace(/^\//,""));const b=require$$0$2;this._setReadableStream(b.createReadStream(x,{start:o,end:h-1}))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=n(6),c=n(1);const m={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},_="http://www.w3.org/XML/1998/namespace",k="http://www.w3.org/1999/xlink",g=["butt","round","square"],v=["miter","round","bevel"],a=function(b,l="",y=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!y)return URL.createObjectURL(new Blob([b],{type:l}));const u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let T=`data:${l};base64,`;for(let R=0,X=b.length;R<X;R+=3){const D=b[R]&255,E=b[R+1]&255,q=b[R+2]&255,oe=D>>2,ae=(D&3)<<4|E>>4,ue=R+1<X?(E&15)<<2|q>>6:64,re=R+2<X?q&63:64;T+=u[oe]+u[ae]+u[ue]+u[re]}return T},S=function(){const b=new Uint8Array([137,80,78,71,13,10,26,10]),l=12,y=new Int32Array(256);for(let q=0;q<256;q++){let oe=q;for(let ae=0;ae<8;ae++)oe=oe&1?3988292384^oe>>1&2147483647:oe>>1&2147483647;y[q]=oe}function u(q,oe,ae){let ue=-1;for(let re=oe;re<ae;re++){const pe=(ue^q[re])&255,H=y[pe];ue=ue>>>8^H}return ue^-1}function T(q,oe,ae,ue){let re=ue;const pe=oe.length;ae[re]=pe>>24&255,ae[re+1]=pe>>16&255,ae[re+2]=pe>>8&255,ae[re+3]=pe&255,re+=4,ae[re]=q.charCodeAt(0)&255,ae[re+1]=q.charCodeAt(1)&255,ae[re+2]=q.charCodeAt(2)&255,ae[re+3]=q.charCodeAt(3)&255,re+=4,ae.set(oe,re),re+=oe.length;const H=u(ae,ue+4,re);ae[re]=H>>24&255,ae[re+1]=H>>16&255,ae[re+2]=H>>8&255,ae[re+3]=H&255}function R(q,oe,ae){let ue=1,re=0;for(let pe=oe;pe<ae;++pe)ue=(ue+(q[pe]&255))%65521,re=(re+ue)%65521;return re<<16|ue}function X(q){if(!c.isNodeJS)return D(q);try{const oe=parseInt(process$1.versions.node)>=8?q:Buffer.from(q),ae=requireLib().deflateSync(oe,{level:9});return ae instanceof Uint8Array?ae:new Uint8Array(ae)}catch(oe){(0,c.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+oe)}return D(q)}function D(q){let oe=q.length;const ae=65535,ue=Math.ceil(oe/ae),re=new Uint8Array(2+oe+ue*5+4);let pe=0;re[pe++]=120,re[pe++]=156;let H=0;for(;oe>ae;)re[pe++]=0,re[pe++]=255,re[pe++]=255,re[pe++]=0,re[pe++]=0,re.set(q.subarray(H,H+ae),pe),pe+=ae,H+=ae,oe-=ae;re[pe++]=1,re[pe++]=oe&255,re[pe++]=oe>>8&255,re[pe++]=~oe&65535&255,re[pe++]=(~oe&65535)>>8&255,re.set(q.subarray(H),pe),pe+=q.length-H;const W=R(q,0,q.length);return re[pe++]=W>>24&255,re[pe++]=W>>16&255,re[pe++]=W>>8&255,re[pe++]=W&255,re}function E(q,oe,ae,ue){const re=q.width,pe=q.height;let H,W,ne;const j=q.data;switch(oe){case c.ImageKind.GRAYSCALE_1BPP:W=0,H=1,ne=re+7>>3;break;case c.ImageKind.RGB_24BPP:W=2,H=8,ne=re*3;break;case c.ImageKind.RGBA_32BPP:W=6,H=8,ne=re*4;break;default:throw new Error("invalid format")}const s=new Uint8Array((1+ne)*pe);let i=0,p=0;for(let L=0;L<pe;++L)s[i++]=0,s.set(j.subarray(p,p+ne),i),p+=ne,i+=ne;if(oe===c.ImageKind.GRAYSCALE_1BPP&&ue){i=0;for(let L=0;L<pe;L++){i++;for(let N=0;N<ne;N++)s[i++]^=255}}const f=new Uint8Array([re>>24&255,re>>16&255,re>>8&255,re&255,pe>>24&255,pe>>16&255,pe>>8&255,pe&255,H,W,0,0,0]),C=X(s),F=b.length+l*3+f.length+C.length,z=new Uint8Array(F);let Q=0;return z.set(b,Q),Q+=b.length,T("IHDR",f,z,Q),Q+=l+f.length,T("IDATA",C,z,Q),Q+=l+C.length,T("IEND",new Uint8Array(0),z,Q),a(z,"image/png",ae)}return function(oe,ae,ue){const re=oe.kind===void 0?c.ImageKind.GRAYSCALE_1BPP:oe.kind;return E(oe,re,ae,ue)}}();class w{constructor(){this.fontSizeScale=1,this.fontWeight=m.fontWeight,this.fontSize=0,this.textMatrix=c.IDENTITY_MATRIX,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=c.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=m.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(l,y){this.x=l,this.y=y}}function I(b){let l=[];const y=[];for(const u of b){if(u.fn==="save"){l.push({fnId:92,fn:"group",items:[]}),y.push(l),l=l.at(-1).items;continue}u.fn==="restore"?l=y.pop():l.push(u)}return l}function M(b){if(Number.isInteger(b))return b.toString();const l=b.toFixed(10);let y=l.length-1;if(l[y]!=="0")return l;do y--;while(l[y]==="0");return l.substring(0,l[y]==="."?y:y+1)}function B(b){if(b[4]===0&&b[5]===0){if(b[1]===0&&b[2]===0)return b[0]===1&&b[3]===1?"":`scale(${M(b[0])} ${M(b[3])})`;if(b[0]===b[3]&&b[1]===-b[2]){const l=Math.acos(b[0])*180/Math.PI;return`rotate(${M(l)})`}}else if(b[0]===1&&b[1]===0&&b[2]===0&&b[3]===1)return`translate(${M(b[4])} ${M(b[5])})`;return`matrix(${M(b[0])} ${M(b[1])} ${M(b[2])} ${M(b[3])} ${M(b[4])} ${M(b[5])})`}let P=0,o=0,h=0;class x{constructor(l,y,u=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new w,this.transformMatrix=c.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=l,this.objs=y,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!u,this._operatorIdMapping=[];for(const T in c.OPS)this._operatorIdMapping[c.OPS[T]]=T}getObject(l,y=null){return typeof l=="string"?l.startsWith("g_")?this.commonObjs.get(l):this.objs.get(l):y}save(){this.transformStack.push(this.transformMatrix);const l=this.current;this.extraStack.push(l),this.current=l.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(l){this.save(),this.executeOpTree(l),this.restore()}loadDependencies(l){const y=l.fnArray,u=l.argsArray;for(let T=0,R=y.length;T<R;T++)if(y[T]===c.OPS.dependency)for(const X of u[T]){const D=X.startsWith("g_")?this.commonObjs:this.objs,E=new Promise(q=>{D.get(X,q)});this.current.dependencies.push(E)}return Promise.all(this.current.dependencies)}transform(l,y,u,T,R,X){const D=[l,y,u,T,R,X];this.transformMatrix=c.Util.transform(this.transformMatrix,D),this.tgrp=null}getSVG(l,y){this.viewport=y;const u=this._initialize(y);return this.loadDependencies(l).then(()=>(this.transformMatrix=c.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(l)),u))}convertOpList(l){const y=this._operatorIdMapping,u=l.argsArray,T=l.fnArray,R=[];for(let X=0,D=T.length;X<D;X++){const E=T[X];R.push({fnId:E,fn:y[E],args:u[X]})}return I(R)}executeOpTree(l){for(const y of l){const u=y.fn,T=y.fnId,R=y.args;switch(T|0){case c.OPS.beginText:this.beginText();break;case c.OPS.dependency:break;case c.OPS.setLeading:this.setLeading(R);break;case c.OPS.setLeadingMoveText:this.setLeadingMoveText(R[0],R[1]);break;case c.OPS.setFont:this.setFont(R);break;case c.OPS.showText:this.showText(R[0]);break;case c.OPS.showSpacedText:this.showText(R[0]);break;case c.OPS.endText:this.endText();break;case c.OPS.moveText:this.moveText(R[0],R[1]);break;case c.OPS.setCharSpacing:this.setCharSpacing(R[0]);break;case c.OPS.setWordSpacing:this.setWordSpacing(R[0]);break;case c.OPS.setHScale:this.setHScale(R[0]);break;case c.OPS.setTextMatrix:this.setTextMatrix(R[0],R[1],R[2],R[3],R[4],R[5]);break;case c.OPS.setTextRise:this.setTextRise(R[0]);break;case c.OPS.setTextRenderingMode:this.setTextRenderingMode(R[0]);break;case c.OPS.setLineWidth:this.setLineWidth(R[0]);break;case c.OPS.setLineJoin:this.setLineJoin(R[0]);break;case c.OPS.setLineCap:this.setLineCap(R[0]);break;case c.OPS.setMiterLimit:this.setMiterLimit(R[0]);break;case c.OPS.setFillRGBColor:this.setFillRGBColor(R[0],R[1],R[2]);break;case c.OPS.setStrokeRGBColor:this.setStrokeRGBColor(R[0],R[1],R[2]);break;case c.OPS.setStrokeColorN:this.setStrokeColorN(R);break;case c.OPS.setFillColorN:this.setFillColorN(R);break;case c.OPS.shadingFill:this.shadingFill(R[0]);break;case c.OPS.setDash:this.setDash(R[0],R[1]);break;case c.OPS.setRenderingIntent:this.setRenderingIntent(R[0]);break;case c.OPS.setFlatness:this.setFlatness(R[0]);break;case c.OPS.setGState:this.setGState(R[0]);break;case c.OPS.fill:this.fill();break;case c.OPS.eoFill:this.eoFill();break;case c.OPS.stroke:this.stroke();break;case c.OPS.fillStroke:this.fillStroke();break;case c.OPS.eoFillStroke:this.eoFillStroke();break;case c.OPS.clip:this.clip("nonzero");break;case c.OPS.eoClip:this.clip("evenodd");break;case c.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case c.OPS.paintImageXObject:this.paintImageXObject(R[0]);break;case c.OPS.paintInlineImageXObject:this.paintInlineImageXObject(R[0]);break;case c.OPS.paintImageMaskXObject:this.paintImageMaskXObject(R[0]);break;case c.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(R[0],R[1]);break;case c.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case c.OPS.closePath:this.closePath();break;case c.OPS.closeStroke:this.closeStroke();break;case c.OPS.closeFillStroke:this.closeFillStroke();break;case c.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case c.OPS.nextLine:this.nextLine();break;case c.OPS.transform:this.transform(R[0],R[1],R[2],R[3],R[4],R[5]);break;case c.OPS.constructPath:this.constructPath(R[0],R[1]);break;case c.OPS.endPath:this.endPath();break;case 92:this.group(y.items);break;default:(0,c.warn)(`Unimplemented operator ${u}`);break}}}setWordSpacing(l){this.current.wordSpacing=l}setCharSpacing(l){this.current.charSpacing=l}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(l,y,u,T,R,X){const D=this.current;D.textMatrix=D.lineMatrix=[l,y,u,T,R,X],D.textMatrixScale=Math.hypot(l,y),D.x=D.lineX=0,D.y=D.lineY=0,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${M(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",M(-D.y)),D.txtElement=this.svgFactory.createElement("svg:text"),D.txtElement.append(D.tspan)}beginText(){const l=this.current;l.x=l.lineX=0,l.y=l.lineY=0,l.textMatrix=c.IDENTITY_MATRIX,l.lineMatrix=c.IDENTITY_MATRIX,l.textMatrixScale=1,l.tspan=this.svgFactory.createElement("svg:tspan"),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtgrp=this.svgFactory.createElement("svg:g"),l.xcoords=[],l.ycoords=[]}moveText(l,y){const u=this.current;u.x=u.lineX+=l,u.y=u.lineY+=y,u.xcoords=[],u.ycoords=[],u.tspan=this.svgFactory.createElement("svg:tspan"),u.tspan.setAttributeNS(null,"font-family",u.fontFamily),u.tspan.setAttributeNS(null,"font-size",`${M(u.fontSize)}px`),u.tspan.setAttributeNS(null,"y",M(-u.y))}showText(l){const y=this.current,u=y.font,T=y.fontSize;if(T===0)return;const R=y.fontSizeScale,X=y.charSpacing,D=y.wordSpacing,E=y.fontDirection,q=y.textHScale*E,oe=u.vertical,ae=oe?1:-1,ue=u.defaultVMetrics,re=T*y.fontMatrix[0];let pe=0;for(const ne of l){if(ne===null){pe+=E*D;continue}else if(typeof ne=="number"){pe+=ae*ne*T/1e3;continue}const j=(ne.isSpace?D:0)+X,s=ne.fontChar;let i,p,f=ne.width;if(oe){let F;const z=ne.vmetric||ue;F=ne.vmetric?z[1]:f*.5,F=-F*re;const Q=z[2]*re;f=z?-z[0]:f,i=F/R,p=(pe+Q)/R}else i=pe/R,p=0;(ne.isInFont||u.missingFile)&&(y.xcoords.push(y.x+i),oe&&y.ycoords.push(-y.y+p),y.tspan.textContent+=s);const C=oe?f*re-j*E:f*re+j*E;pe+=C}y.tspan.setAttributeNS(null,"x",y.xcoords.map(M).join(" ")),oe?y.tspan.setAttributeNS(null,"y",y.ycoords.map(M).join(" ")):y.tspan.setAttributeNS(null,"y",M(-y.y)),oe?y.y-=pe:y.x+=pe*q,y.tspan.setAttributeNS(null,"font-family",y.fontFamily),y.tspan.setAttributeNS(null,"font-size",`${M(y.fontSize)}px`),y.fontStyle!==m.fontStyle&&y.tspan.setAttributeNS(null,"font-style",y.fontStyle),y.fontWeight!==m.fontWeight&&y.tspan.setAttributeNS(null,"font-weight",y.fontWeight);const H=y.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;if(H===c.TextRenderingMode.FILL||H===c.TextRenderingMode.FILL_STROKE?(y.fillColor!==m.fillColor&&y.tspan.setAttributeNS(null,"fill",y.fillColor),y.fillAlpha<1&&y.tspan.setAttributeNS(null,"fill-opacity",y.fillAlpha)):y.textRenderingMode===c.TextRenderingMode.ADD_TO_PATH?y.tspan.setAttributeNS(null,"fill","transparent"):y.tspan.setAttributeNS(null,"fill","none"),H===c.TextRenderingMode.STROKE||H===c.TextRenderingMode.FILL_STROKE){const ne=1/(y.textMatrixScale||1);this._setStrokeAttributes(y.tspan,ne)}let W=y.textMatrix;y.textRise!==0&&(W=W.slice(),W[5]+=y.textRise),y.txtElement.setAttributeNS(null,"transform",`${B(W)} scale(${M(q)}, -1)`),y.txtElement.setAttributeNS(_,"xml:space","preserve"),y.txtElement.append(y.tspan),y.txtgrp.append(y.txtElement),this._ensureTransformGroup().append(y.txtElement)}setLeadingMoveText(l,y){this.setLeading(-y),this.moveText(l,y)}addFontStyle(l){if(!l.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const y=a(l.data,l.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${l.loadedName}"; src: url(${y}); }
`}setFont(l){const y=this.current,u=this.commonObjs.get(l[0]);let T=l[1];y.font=u,this.embedFonts&&!u.missingFile&&!this.embeddedFonts[u.loadedName]&&(this.addFontStyle(u),this.embeddedFonts[u.loadedName]=u),y.fontMatrix=u.fontMatrix||c.FONT_IDENTITY_MATRIX;let R="normal";u.black?R="900":u.bold&&(R="bold");const X=u.italic?"italic":"normal";T<0?(T=-T,y.fontDirection=-1):y.fontDirection=1,y.fontSize=T,y.fontFamily=u.loadedName,y.fontWeight=R,y.fontStyle=X,y.tspan=this.svgFactory.createElement("svg:tspan"),y.tspan.setAttributeNS(null,"y",M(-y.y)),y.xcoords=[],y.ycoords=[]}endText(){var y;const l=this.current;l.textRenderingMode&c.TextRenderingMode.ADD_TO_PATH_FLAG&&((y=l.txtElement)!=null&&y.hasChildNodes())&&(l.element=l.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(l){l>0&&(this.current.lineWidth=l)}setLineCap(l){this.current.lineCap=g[l]}setLineJoin(l){this.current.lineJoin=v[l]}setMiterLimit(l){this.current.miterLimit=l}setStrokeAlpha(l){this.current.strokeAlpha=l}setStrokeRGBColor(l,y,u){this.current.strokeColor=c.Util.makeHexColor(l,y,u)}setFillAlpha(l){this.current.fillAlpha=l}setFillRGBColor(l,y,u){this.current.fillColor=c.Util.makeHexColor(l,y,u),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(l){this.current.strokeColor=this._makeColorN_Pattern(l)}setFillColorN(l){this.current.fillColor=this._makeColorN_Pattern(l)}shadingFill(l){const{width:y,height:u}=this.viewport,T=c.Util.inverseTransform(this.transformMatrix),[R,X,D,E]=c.Util.getAxialAlignedBoundingBox([0,0,y,u],T),q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x",R),q.setAttributeNS(null,"y",X),q.setAttributeNS(null,"width",D-R),q.setAttributeNS(null,"height",E-X),q.setAttributeNS(null,"fill",this._makeShadingPattern(l)),this.current.fillAlpha<1&&q.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(q)}_makeColorN_Pattern(l){return l[0]==="TilingPattern"?this._makeTilingPattern(l):this._makeShadingPattern(l)}_makeTilingPattern(l){const y=l[1],u=l[2],T=l[3]||c.IDENTITY_MATRIX,[R,X,D,E]=l[4],q=l[5],oe=l[6],ae=l[7],ue=`shading${h++}`,[re,pe,H,W]=c.Util.normalizeRect([...c.Util.applyTransform([R,X],T),...c.Util.applyTransform([D,E],T)]),[ne,j]=c.Util.singularValueDecompose2dScale(T),s=q*ne,i=oe*j,p=this.svgFactory.createElement("svg:pattern");p.setAttributeNS(null,"id",ue),p.setAttributeNS(null,"patternUnits","userSpaceOnUse"),p.setAttributeNS(null,"width",s),p.setAttributeNS(null,"height",i),p.setAttributeNS(null,"x",`${re}`),p.setAttributeNS(null,"y",`${pe}`);const f=this.svg,C=this.transformMatrix,F=this.current.fillColor,z=this.current.strokeColor,Q=this.svgFactory.create(H-re,W-pe);if(this.svg=Q,this.transformMatrix=T,ae===2){const L=c.Util.makeHexColor(...y);this.current.fillColor=L,this.current.strokeColor=L}return this.executeOpTree(this.convertOpList(u)),this.svg=f,this.transformMatrix=C,this.current.fillColor=F,this.current.strokeColor=z,p.append(Q.childNodes[0]),this.defs.append(p),`url(#${ue})`}_makeShadingPattern(l){switch(typeof l=="string"&&(l=this.objs.get(l)),l[0]){case"RadialAxial":const y=`shading${h++}`,u=l[3];let T;switch(l[1]){case"axial":const R=l[4],X=l[5];T=this.svgFactory.createElement("svg:linearGradient"),T.setAttributeNS(null,"id",y),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"x1",R[0]),T.setAttributeNS(null,"y1",R[1]),T.setAttributeNS(null,"x2",X[0]),T.setAttributeNS(null,"y2",X[1]);break;case"radial":const D=l[4],E=l[5],q=l[6],oe=l[7];T=this.svgFactory.createElement("svg:radialGradient"),T.setAttributeNS(null,"id",y),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"cx",E[0]),T.setAttributeNS(null,"cy",E[1]),T.setAttributeNS(null,"r",oe),T.setAttributeNS(null,"fx",D[0]),T.setAttributeNS(null,"fy",D[1]),T.setAttributeNS(null,"fr",q);break;default:throw new Error(`Unknown RadialAxial type: ${l[1]}`)}for(const R of u){const X=this.svgFactory.createElement("svg:stop");X.setAttributeNS(null,"offset",R[0]),X.setAttributeNS(null,"stop-color",R[1]),T.append(X)}return this.defs.append(T),`url(#${y})`;case"Mesh":return(0,c.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${l[0]}`)}}setDash(l,y){this.current.dashArray=l,this.current.dashPhase=y}constructPath(l,y){const u=this.current;let T=u.x,R=u.y,X=[],D=0;for(const E of l)switch(E|0){case c.OPS.rectangle:T=y[D++],R=y[D++];const q=y[D++],oe=y[D++],ae=T+q,ue=R+oe;X.push("M",M(T),M(R),"L",M(ae),M(R),"L",M(ae),M(ue),"L",M(T),M(ue),"Z");break;case c.OPS.moveTo:T=y[D++],R=y[D++],X.push("M",M(T),M(R));break;case c.OPS.lineTo:T=y[D++],R=y[D++],X.push("L",M(T),M(R));break;case c.OPS.curveTo:T=y[D+4],R=y[D+5],X.push("C",M(y[D]),M(y[D+1]),M(y[D+2]),M(y[D+3]),M(T),M(R)),D+=6;break;case c.OPS.curveTo2:X.push("C",M(T),M(R),M(y[D]),M(y[D+1]),M(y[D+2]),M(y[D+3])),T=y[D+2],R=y[D+3],D+=4;break;case c.OPS.curveTo3:T=y[D+2],R=y[D+3],X.push("C",M(y[D]),M(y[D+1]),M(T),M(R),M(T),M(R)),D+=4;break;case c.OPS.closePath:X.push("Z");break}X=X.join(" "),u.path&&l.length>0&&l[0]!==c.OPS.rectangle&&l[0]!==c.OPS.moveTo?X=u.path.getAttributeNS(null,"d")+X:(u.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(u.path)),u.path.setAttributeNS(null,"d",X),u.path.setAttributeNS(null,"fill","none"),u.element=u.path,u.setCurrentPoint(T,R)}endPath(){const l=this.current;if(l.path=null,!this.pendingClip)return;if(!l.element){this.pendingClip=null;return}const y=`clippath${P++}`,u=this.svgFactory.createElement("svg:clipPath");u.setAttributeNS(null,"id",y),u.setAttributeNS(null,"transform",B(this.transformMatrix));const T=l.element.cloneNode(!0);if(this.pendingClip==="evenodd"?T.setAttributeNS(null,"clip-rule","evenodd"):T.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,u.append(T),this.defs.append(u),l.activeClipUrl){l.clipGroup=null;for(const R of this.extraStack)R.clipGroup=null;u.setAttributeNS(null,"clip-path",l.activeClipUrl)}l.activeClipUrl=`url(#${y})`,this.tgrp=null}clip(l){this.pendingClip=l}closePath(){const l=this.current;if(l.path){const y=`${l.path.getAttributeNS(null,"d")}Z`;l.path.setAttributeNS(null,"d",y)}}setLeading(l){this.current.leading=-l}setTextRise(l){this.current.textRise=l}setTextRenderingMode(l){this.current.textRenderingMode=l}setHScale(l){this.current.textHScale=l/100}setRenderingIntent(l){}setFlatness(l){}setGState(l){for(const[y,u]of l)switch(y){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u);break;case"CA":this.setStrokeAlpha(u);break;case"ca":this.setFillAlpha(u);break;default:(0,c.warn)(`Unimplemented graphic state operator ${y}`);break}}fill(){const l=this.current;l.element&&(l.element.setAttributeNS(null,"fill",l.fillColor),l.element.setAttributeNS(null,"fill-opacity",l.fillAlpha),this.endPath())}stroke(){const l=this.current;l.element&&(this._setStrokeAttributes(l.element),l.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(l,y=1){const u=this.current;let T=u.dashArray;y!==1&&T.length>0&&(T=T.map(function(R){return y*R})),l.setAttributeNS(null,"stroke",u.strokeColor),l.setAttributeNS(null,"stroke-opacity",u.strokeAlpha),l.setAttributeNS(null,"stroke-miterlimit",M(u.miterLimit)),l.setAttributeNS(null,"stroke-linecap",u.lineCap),l.setAttributeNS(null,"stroke-linejoin",u.lineJoin),l.setAttributeNS(null,"stroke-width",M(y*u.lineWidth)+"px"),l.setAttributeNS(null,"stroke-dasharray",T.map(M).join(" ")),l.setAttributeNS(null,"stroke-dashoffset",M(y*u.dashPhase)+"px")}eoFill(){var l;(l=this.current.element)==null||l.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var l;(l=this.current.element)==null||l.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width","1px"),l.setAttributeNS(null,"height","1px"),l.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(l)}paintImageXObject(l){const y=this.getObject(l);if(!y){(0,c.warn)(`Dependent image with object ID ${l} is not ready yet`);return}this.paintInlineImageXObject(y)}paintInlineImageXObject(l,y){const u=l.width,T=l.height,R=S(l,this.forceDataSchema,!!y),X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x","0"),X.setAttributeNS(null,"y","0"),X.setAttributeNS(null,"width",M(u)),X.setAttributeNS(null,"height",M(T)),this.current.element=X,this.clip("nonzero");const D=this.svgFactory.createElement("svg:image");D.setAttributeNS(k,"xlink:href",R),D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y",M(-T)),D.setAttributeNS(null,"width",M(u)+"px"),D.setAttributeNS(null,"height",M(T)+"px"),D.setAttributeNS(null,"transform",`scale(${M(1/u)} ${M(-1/T)})`),y?y.append(D):this._ensureTransformGroup().append(D)}paintImageMaskXObject(l){const y=this.getObject(l.data,l);if(y.bitmap){(0,c.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const u=this.current,T=y.width,R=y.height,X=u.fillColor;u.maskId=`mask${o++}`;const D=this.svgFactory.createElement("svg:mask");D.setAttributeNS(null,"id",u.maskId);const E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y","0"),E.setAttributeNS(null,"width",M(T)),E.setAttributeNS(null,"height",M(R)),E.setAttributeNS(null,"fill",X),E.setAttributeNS(null,"mask",`url(#${u.maskId})`),this.defs.append(D),this._ensureTransformGroup().append(E),this.paintInlineImageXObject(y,D)}paintFormXObjectBegin(l,y){if(Array.isArray(l)&&l.length===6&&this.transform(l[0],l[1],l[2],l[3],l[4],l[5]),y){const u=y[2]-y[0],T=y[3]-y[1],R=this.svgFactory.createElement("svg:rect");R.setAttributeNS(null,"x",y[0]),R.setAttributeNS(null,"y",y[1]),R.setAttributeNS(null,"width",M(u)),R.setAttributeNS(null,"height",M(T)),this.current.element=R,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(l){const y=this.svgFactory.create(l.width,l.height),u=this.svgFactory.createElement("svg:defs");y.append(u),this.defs=u;const T=this.svgFactory.createElement("svg:g");return T.setAttributeNS(null,"transform",B(l.transform)),y.append(T),this.svg=T,y}_ensureClipGroup(){if(!this.current.clipGroup){const l=this.svgFactory.createElement("svg:g");l.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(l),this.current.clipGroup=l}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",B(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=x},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(c){const m=[],_={items:m,styles:Object.create(null)};function k(g){var S;if(!g)return;let v=null;const a=g.name;if(a==="#text")v=g.value;else if(n.shouldBuildText(a))(S=g==null?void 0:g.attributes)!=null&&S.textContent?v=g.attributes.textContent:g.value&&(v=g.value);else return;if(v!==null&&m.push({str:v}),!!g.children)for(const w of g.children)k(w)}return k(c),_}static shouldBuildText(c){return!(c==="textarea"||c==="input"||c==="option"||c==="select")}}e.XfaText=n},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=B,e.updateTextLayer=P;var r=n(1),c=n(6);const m=1e5,_=30,k=.8,g=new Map;function v(o,h){let x;if(h&&r.FeatureTest.isOffscreenCanvasSupported)x=new OffscreenCanvas(o,o).getContext("2d",{alpha:!1});else{const b=document.createElement("canvas");b.width=b.height=o,x=b.getContext("2d",{alpha:!1})}return x}function a(o,h){const x=g.get(o);if(x)return x;const b=v(_,h);b.font=`${_}px ${o}`;const l=b.measureText("");let y=l.fontBoundingBoxAscent,u=Math.abs(l.fontBoundingBoxDescent);if(y){const R=y/(y+u);return g.set(o,R),b.canvas.width=b.canvas.height=0,R}b.strokeStyle="red",b.clearRect(0,0,_,_),b.strokeText("g",0,0);let T=b.getImageData(0,0,_,_).data;u=0;for(let R=T.length-1-3;R>=0;R-=4)if(T[R]>0){u=Math.ceil(R/4/_);break}b.clearRect(0,0,_,_),b.strokeText("A",0,_),T=b.getImageData(0,0,_,_).data,y=0;for(let R=0,X=T.length;R<X;R+=4)if(T[R]>0){y=_-Math.floor(R/4/_);break}if(b.canvas.width=b.canvas.height=0,y){const R=y/(y+u);return g.set(o,R),R}return g.set(o,k),k}function S(o,h,x){const b=document.createElement("span"),l={angle:0,canvasWidth:0,hasText:h.str!=="",hasEOL:h.hasEOL,fontSize:0};o._textDivs.push(b);const y=r.Util.transform(o._transform,h.transform);let u=Math.atan2(y[1],y[0]);const T=x[h.fontName];T.vertical&&(u+=Math.PI/2);const R=Math.hypot(y[2],y[3]),X=R*a(T.fontFamily,o._isOffscreenCanvasSupported);let D,E;u===0?(D=y[4],E=y[5]-X):(D=y[4]+X*Math.sin(u),E=y[5]-X*Math.cos(u));const q="calc(var(--scale-factor)*",oe=b.style;o._container===o._rootContainer?(oe.left=`${(100*D/o._pageWidth).toFixed(2)}%`,oe.top=`${(100*E/o._pageHeight).toFixed(2)}%`):(oe.left=`${q}${D.toFixed(2)}px)`,oe.top=`${q}${E.toFixed(2)}px)`),oe.fontSize=`${q}${R.toFixed(2)}px)`,oe.fontFamily=T.fontFamily,l.fontSize=R,b.setAttribute("role","presentation"),b.textContent=h.str,b.dir=h.dir,o._fontInspectorEnabled&&(b.dataset.fontName=h.fontName),u!==0&&(l.angle=u*(180/Math.PI));let ae=!1;if(h.str.length>1)ae=!0;else if(h.str!==" "&&h.transform[0]!==h.transform[3]){const ue=Math.abs(h.transform[0]),re=Math.abs(h.transform[3]);ue!==re&&Math.max(ue,re)/Math.min(ue,re)>1.5&&(ae=!0)}ae&&(l.canvasWidth=T.vertical?h.height:h.width),o._textDivProperties.set(b,l),o._isReadableStream&&o._layoutText(b)}function w(o){const{div:h,scale:x,properties:b,ctx:l,prevFontSize:y,prevFontFamily:u}=o,{style:T}=h;let R="";if(b.canvasWidth!==0&&b.hasText){const{fontFamily:X}=T,{canvasWidth:D,fontSize:E}=b;(y!==E||u!==X)&&(l.font=`${E*x}px ${X}`,o.prevFontSize=E,o.prevFontFamily=X);const{width:q}=l.measureText(h.textContent);q>0&&(R=`scaleX(${D*x/q})`)}b.angle!==0&&(R=`rotate(${b.angle}deg) ${R}`),R.length>0&&(T.transform=R)}function I(o){if(o._canceled)return;const h=o._textDivs,x=o._capability;if(h.length>m){x.resolve();return}if(!o._isReadableStream)for(const l of h)o._layoutText(l);x.resolve()}class M{constructor({textContentSource:h,container:x,viewport:b,textDivs:l,textDivProperties:y,textContentItemsStr:u,isOffscreenCanvasSupported:T}){var q;this._textContentSource=h,this._isReadableStream=h instanceof ReadableStream,this._container=this._rootContainer=x,this._textDivs=l||[],this._textContentItemsStr=u||[],this._isOffscreenCanvasSupported=T,this._fontInspectorEnabled=!!((q=globalThis.FontInspector)!=null&&q.enabled),this._reader=null,this._textDivProperties=y||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:b.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:v(0,T)};const{pageWidth:R,pageHeight:X,pageX:D,pageY:E}=b.rawDims;this._transform=[1,0,0,-1,-D,E+X],this._pageWidth=R,this._pageHeight=X,(0,c.setLayerDimensions)(x,b),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(h,x){for(const b of h){if(b.str===void 0){if(b.type==="beginMarkedContentProps"||b.type==="beginMarkedContent"){const l=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),b.id!==null&&this._container.setAttribute("id",`${b.id}`),l.append(this._container)}else b.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(b.str),S(this,b,x)}}_layoutText(h){const x=this._layoutTextParams.properties=this._textDivProperties.get(h);if(this._layoutTextParams.div=h,w(this._layoutTextParams),x.hasText&&this._container.append(h),x.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),this._container.append(b)}}_render(){const h=new r.PromiseCapability;let x=Object.create(null);if(this._isReadableStream){const b=()=>{this._reader.read().then(({value:l,done:y})=>{if(y){h.resolve();return}Object.assign(x,l.styles),this._processItems(l.items,x),b()},h.reject)};this._reader=this._textContentSource.getReader(),b()}else if(this._textContentSource){const{items:b,styles:l}=this._textContentSource;this._processItems(b,l),h.resolve()}else throw new Error('No "textContentSource" parameter specified.');h.promise.then(()=>{x=null,I(this)},this._capability.reject)}}e.TextLayerRenderTask=M;function B(o){!o.textContentSource&&(o.textContent||o.textContentStream)&&((0,c.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),o.textContentSource=o.textContent||o.textContentStream);const{container:h,viewport:x}=o,b=getComputedStyle(h),l=b.getPropertyValue("visibility"),y=parseFloat(b.getPropertyValue("--scale-factor"));l==="visible"&&(!y||Math.abs(y-x.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const u=new M(o);return u._render(),u}function P({container:o,viewport:h,textDivs:x,textDivProperties:b,isOffscreenCanvasSupported:l,mustRotate:y=!0,mustRescale:u=!0}){if(y&&(0,c.setLayerDimensions)(o,{rotation:h.rotation}),u){const T=v(0,l),X={prevFontSize:null,prevFontFamily:null,div:null,scale:h.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:T};for(const D of x)X.properties=b.get(D),X.div=D,w(X)}}},(t,e,n)=>{var a,S,w,I,M,B,P,o,h,x,b,Yt,Et,Zt,Jt;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var r=n(1),c=n(4),m=n(28),_=n(33),k=n(6),g=n(34);const R=class R{constructor({uiManager:D,pageIndex:E,div:q,accessibilityManager:oe,annotationLayer:ae,viewport:ue,l10n:re}){Ee(this,b);Ee(this,a);Ee(this,S,!1);Ee(this,w,null);Ee(this,I,this.pointerup.bind(this));Ee(this,M,this.pointerdown.bind(this));Ee(this,B,new Map);Ee(this,P,!1);Ee(this,o,!1);Ee(this,h,!1);Ee(this,x);const pe=[m.FreeTextEditor,_.InkEditor,g.StampEditor];if(!R._initialized){R._initialized=!0;for(const H of pe)H.initialize(re)}D.registerEditorTypes(pe),Re(this,x,D),this.pageIndex=E,this.div=q,Re(this,a,oe),Re(this,w,ae),this.viewport=ue,A(this,x).addLayer(this)}get isEmpty(){return A(this,B).size===0}updateToolbar(D){A(this,x).updateToolbar(D)}updateMode(D=A(this,x).getMode()){ve(this,b,Jt).call(this),D===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),D!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",D===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",D===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",D===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(D){if(!D&&A(this,x).getMode()!==r.AnnotationEditorType.INK)return;if(!D){for(const q of A(this,B).values())if(q.isEmpty()){q.setInBackground();return}}ve(this,b,Et).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(D){A(this,x).setEditingState(D)}addCommands(D){A(this,x).addCommands(D)}enable(){this.div.style.pointerEvents="auto";const D=new Set;for(const q of A(this,B).values())q.enableEditing(),q.annotationElementId&&D.add(q.annotationElementId);if(!A(this,w))return;const E=A(this,w).getEditableAnnotations();for(const q of E){if(q.hide(),A(this,x).isDeletedAnnotationElement(q.data.id)||D.has(q.data.id))continue;const oe=this.deserialize(q);oe&&(this.addOrRebuild(oe),oe.enableEditing())}}disable(){var E;Re(this,h,!0),this.div.style.pointerEvents="none";const D=new Set;for(const q of A(this,B).values()){if(q.disableEditing(),!q.annotationElementId||q.serialize()!==null){D.add(q.annotationElementId);continue}(E=this.getEditableAnnotation(q.annotationElementId))==null||E.show(),q.remove()}if(A(this,w)){const q=A(this,w).getEditableAnnotations();for(const oe of q){const{id:ae}=oe.data;D.has(ae)||A(this,x).isDeletedAnnotationElement(ae)||oe.show()}}ve(this,b,Jt).call(this),this.isEmpty&&(this.div.hidden=!0),Re(this,h,!1)}getEditableAnnotation(D){var E;return((E=A(this,w))==null?void 0:E.getEditableAnnotation(D))||null}setActiveEditor(D){A(this,x).getActive()!==D&&A(this,x).setActiveEditor(D)}enableClick(){this.div.addEventListener("pointerdown",A(this,M)),this.div.addEventListener("pointerup",A(this,I))}disableClick(){this.div.removeEventListener("pointerdown",A(this,M)),this.div.removeEventListener("pointerup",A(this,I))}attach(D){A(this,B).set(D.id,D);const{annotationElementId:E}=D;E&&A(this,x).isDeletedAnnotationElement(E)&&A(this,x).removeDeletedAnnotationElement(D)}detach(D){var E;A(this,B).delete(D.id),(E=A(this,a))==null||E.removePointerInTextLayer(D.contentDiv),!A(this,h)&&D.annotationElementId&&A(this,x).addDeletedAnnotationElement(D)}remove(D){this.detach(D),A(this,x).removeEditor(D),D.div.contains(document.activeElement)&&setTimeout(()=>{A(this,x).focusMainContainer()},0),D.div.remove(),D.isAttachedToDOM=!1,A(this,o)||this.addInkEditorIfNeeded(!1)}changeParent(D){var E;D.parent!==this&&(D.annotationElementId&&(A(this,x).addDeletedAnnotationElement(D.annotationElementId),c.AnnotationEditor.deleteAnnotationElement(D),D.annotationElementId=null),this.attach(D),(E=D.parent)==null||E.detach(D),D.setParent(this),D.div&&D.isAttachedToDOM&&(D.div.remove(),this.div.append(D.div)))}add(D){if(this.changeParent(D),A(this,x).addEditor(D),this.attach(D),!D.isAttachedToDOM){const E=D.render();this.div.append(E),D.isAttachedToDOM=!0}D.fixAndSetPosition(),D.onceAdded(),A(this,x).addToAnnotationStorage(D)}moveEditorInDOM(D){var q;if(!D.isAttachedToDOM)return;const{activeElement:E}=document;D.div.contains(E)&&(D._focusEventsAllowed=!1,setTimeout(()=>{D.div.contains(document.activeElement)?D._focusEventsAllowed=!0:(D.div.addEventListener("focusin",()=>{D._focusEventsAllowed=!0},{once:!0}),E.focus())},0)),D._structTreeParentId=(q=A(this,a))==null?void 0:q.moveElementInDOM(this.div,D.div,D.contentDiv,!0)}addOrRebuild(D){D.needsToBeRebuilt()?D.rebuild():this.add(D)}addUndoableEditor(D){const E=()=>D._uiManager.rebuild(D),q=()=>{D.remove()};this.addCommands({cmd:E,undo:q,mustExec:!1})}getNextId(){return A(this,x).getId()}pasteEditor(D,E){A(this,x).updateToolbar(D),A(this,x).updateMode(D);const{offsetX:q,offsetY:oe}=ve(this,b,Zt).call(this),ae=this.getNextId(),ue=ve(this,b,Yt).call(this,{parent:this,id:ae,x:q,y:oe,uiManager:A(this,x),isCentered:!0,...E});ue&&this.add(ue)}deserialize(D){switch(D.annotationType??D.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return m.FreeTextEditor.deserialize(D,this,A(this,x));case r.AnnotationEditorType.INK:return _.InkEditor.deserialize(D,this,A(this,x));case r.AnnotationEditorType.STAMP:return g.StampEditor.deserialize(D,this,A(this,x))}return null}addNewEditor(){ve(this,b,Et).call(this,ve(this,b,Zt).call(this),!0)}setSelected(D){A(this,x).setSelected(D)}toggleSelected(D){A(this,x).toggleSelected(D)}isSelected(D){return A(this,x).isSelected(D)}unselect(D){A(this,x).unselect(D)}pointerup(D){const{isMac:E}=r.FeatureTest.platform;if(!(D.button!==0||D.ctrlKey&&E)&&D.target===this.div&&A(this,P)){if(Re(this,P,!1),!A(this,S)){Re(this,S,!0);return}if(A(this,x).getMode()===r.AnnotationEditorType.STAMP){A(this,x).unselectAll();return}ve(this,b,Et).call(this,D,!1)}}pointerdown(D){if(A(this,P)){Re(this,P,!1);return}const{isMac:E}=r.FeatureTest.platform;if(D.button!==0||D.ctrlKey&&E||D.target!==this.div)return;Re(this,P,!0);const q=A(this,x).getActive();Re(this,S,!q||q.isEmpty())}findNewParent(D,E,q){const oe=A(this,x).findParent(E,q);return oe===null||oe===this?!1:(oe.changeParent(D),!0)}destroy(){var D,E;((D=A(this,x).getActive())==null?void 0:D.parent)===this&&(A(this,x).commitOrRemove(),A(this,x).setActiveEditor(null));for(const q of A(this,B).values())(E=A(this,a))==null||E.removePointerInTextLayer(q.contentDiv),q.setParent(null),q.isAttachedToDOM=!1,q.div.remove();this.div=null,A(this,B).clear(),A(this,x).removeLayer(this)}render({viewport:D}){this.viewport=D,(0,k.setLayerDimensions)(this.div,D);for(const E of A(this,x).getEditors(this.pageIndex))this.add(E);this.updateMode()}update({viewport:D}){A(this,x).commitOrRemove(),this.viewport=D,(0,k.setLayerDimensions)(this.div,{rotation:D.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:D,pageHeight:E}=this.viewport.rawDims;return[D,E]}};a=new WeakMap,S=new WeakMap,w=new WeakMap,I=new WeakMap,M=new WeakMap,B=new WeakMap,P=new WeakMap,o=new WeakMap,h=new WeakMap,x=new WeakMap,b=new WeakSet,Yt=function(D){switch(A(this,x).getMode()){case r.AnnotationEditorType.FREETEXT:return new m.FreeTextEditor(D);case r.AnnotationEditorType.INK:return new _.InkEditor(D);case r.AnnotationEditorType.STAMP:return new g.StampEditor(D)}return null},Et=function(D,E){const q=this.getNextId(),oe=ve(this,b,Yt).call(this,{parent:this,id:q,x:D.offsetX,y:D.offsetY,uiManager:A(this,x),isCentered:E});return oe&&this.add(oe),oe},Zt=function(){const{x:D,y:E,width:q,height:oe}=this.div.getBoundingClientRect(),ae=Math.max(0,D),ue=Math.max(0,E),re=Math.min(window.innerWidth,D+q),pe=Math.min(window.innerHeight,E+oe),H=(ae+re)/2-D,W=(ue+pe)/2-E,[ne,j]=this.viewport.rotation%180===0?[H,W]:[W,H];return{offsetX:ne,offsetY:j}},Jt=function(){Re(this,o,!0);for(const D of A(this,B).values())D.isEmpty()&&D.remove();Re(this,o,!1)},Ye(R,"_initialized",!1);let v=R;e.AnnotationEditorLayer=v},(t,e,n)=>{var g,v,a,S,w,I,M,B,P,o,Tr,Pr,Cr,gt,Qt,xr,er;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var r=n(1),c=n(5),m=n(4),_=n(29);const R=class R extends m.AnnotationEditor{constructor(E){super({...E,name:"freeTextEditor"});Ee(this,o);Ee(this,g,this.editorDivBlur.bind(this));Ee(this,v,this.editorDivFocus.bind(this));Ee(this,a,this.editorDivInput.bind(this));Ee(this,S,this.editorDivKeydown.bind(this));Ee(this,w);Ee(this,I,"");Ee(this,M,`${this.id}-editor`);Ee(this,B);Ee(this,P,null);Re(this,w,E.color||R._defaultColor||m.AnnotationEditor._defaultLineColor),Re(this,B,E.fontSize||R._defaultFontSize)}static get _keyboardManager(){const E=R.prototype,q=ue=>ue.isEmpty(),oe=c.AnnotationEditorUIManager.TRANSLATE_SMALL,ae=c.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new c.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],E.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],E.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],E._translateEmpty,{args:[-oe,0],checker:q}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],E._translateEmpty,{args:[-ae,0],checker:q}],[["ArrowRight","mac+ArrowRight"],E._translateEmpty,{args:[oe,0],checker:q}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],E._translateEmpty,{args:[ae,0],checker:q}],[["ArrowUp","mac+ArrowUp"],E._translateEmpty,{args:[0,-oe],checker:q}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],E._translateEmpty,{args:[0,-ae],checker:q}],[["ArrowDown","mac+ArrowDown"],E._translateEmpty,{args:[0,oe],checker:q}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],E._translateEmpty,{args:[0,ae],checker:q}]]))}static initialize(E){m.AnnotationEditor.initialize(E,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const q=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(q.getPropertyValue("--freetext-padding"))}static updateDefaultParams(E,q){switch(E){case r.AnnotationEditorParamsType.FREETEXT_SIZE:R._defaultFontSize=q;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:R._defaultColor=q;break}}updateParams(E,q){switch(E){case r.AnnotationEditorParamsType.FREETEXT_SIZE:ve(this,o,Tr).call(this,q);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:ve(this,o,Pr).call(this,q);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,R._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,R._defaultColor||m.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,A(this,B)],[r.AnnotationEditorParamsType.FREETEXT_COLOR,A(this,w)]]}_translateEmpty(E,q){this._uiManager.translateSelectedEditors(E,q,!0)}getInitialTranslation(){const E=this.parentScale;return[-R._internalPadding*E,-(R._internalPadding+A(this,B))*E]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",A(this,S)),this.editorDiv.addEventListener("focus",A(this,v)),this.editorDiv.addEventListener("blur",A(this,g)),this.editorDiv.addEventListener("input",A(this,a)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",A(this,M)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",A(this,S)),this.editorDiv.removeEventListener("focus",A(this,v)),this.editorDiv.removeEventListener("blur",A(this,g)),this.editorDiv.removeEventListener("input",A(this,a)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(E){this._focusEventsAllowed&&(super.focusin(E),E.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var E;if(this.width){ve(this,o,er).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(E=this._initialOptions)!=null&&E.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const E=A(this,I),q=Re(this,I,ve(this,o,Cr).call(this).trimEnd());if(E===q)return;const oe=ae=>{if(Re(this,I,ae),!ae){this.remove();return}ve(this,o,Qt).call(this),this._uiManager.rebuild(this),ve(this,o,gt).call(this)};this.addCommands({cmd:()=>{oe(q)},undo:()=>{oe(E)},mustExec:!1}),ve(this,o,gt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(E){this.enterInEditMode()}keydown(E){E.target===this.div&&E.key==="Enter"&&(this.enterInEditMode(),E.preventDefault())}editorDivKeydown(E){R._keyboardManager.exec(this,E)}editorDivFocus(E){this.isEditing=!0}editorDivBlur(E){this.isEditing=!1}editorDivInput(E){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let E,q;this.width&&(E=this.x,q=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",A(this,M)),this.enableEditing(),m.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(ae=>{var ue;return(ue=this.editorDiv)==null?void 0:ue.setAttribute("aria-label",ae)}),m.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(ae=>{var ue;return(ue=this.editorDiv)==null?void 0:ue.setAttribute("default-content",ae)}),this.editorDiv.contentEditable=!0;const{style:oe}=this.editorDiv;if(oe.fontSize=`calc(${A(this,B)}px * var(--scale-factor))`,oe.color=A(this,w),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,c.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ae,ue]=this.parentDimensions;if(this.annotationElementId){const{position:re}=A(this,P);let[pe,H]=this.getInitialTranslation();[pe,H]=this.pageTranslationToScreen(pe,H);const[W,ne]=this.pageDimensions,[j,s]=this.pageTranslation;let i,p;switch(this.rotation){case 0:i=E+(re[0]-j)/W,p=q+this.height-(re[1]-s)/ne;break;case 90:i=E+(re[0]-j)/W,p=q-(re[1]-s)/ne,[pe,H]=[H,-pe];break;case 180:i=E-this.width+(re[0]-j)/W,p=q-(re[1]-s)/ne,[pe,H]=[-pe,-H];break;case 270:i=E+(re[0]-j-this.height*ne)/W,p=q+(re[1]-s-this.width*W)/ne,[pe,H]=[-H,pe];break}this.setAt(i*ae,p*ue,pe,H)}else this.setAt(E*ae,q*ue,this.width*ae,this.height*ue);ve(this,o,Qt).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(E,q,oe){let ae=null;if(E instanceof _.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:re,fontColor:pe},rect:H,rotation:W,id:ne},textContent:j,textPosition:s,parent:{page:{pageNumber:i}}}=E;if(!j||j.length===0)return null;ae=E={annotationType:r.AnnotationEditorType.FREETEXT,color:Array.from(pe),fontSize:re,value:j.join(`
`),position:s,pageIndex:i-1,rect:H,rotation:W,id:ne,deleted:!1}}const ue=super.deserialize(E,q,oe);return Re(ue,B,E.fontSize),Re(ue,w,r.Util.makeHexColor(...E.color)),Re(ue,I,E.value),ue.annotationElementId=E.id||null,Re(ue,P,ae),ue}serialize(E=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const q=R._internalPadding*this.parentScale,oe=this.getRect(q,q),ae=m.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:A(this,w)),ue={annotationType:r.AnnotationEditorType.FREETEXT,color:ae,fontSize:A(this,B),value:A(this,I),pageIndex:this.pageIndex,rect:oe,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return E?ue:this.annotationElementId&&!ve(this,o,xr).call(this,ue)?null:(ue.id=this.annotationElementId,ue)}};g=new WeakMap,v=new WeakMap,a=new WeakMap,S=new WeakMap,w=new WeakMap,I=new WeakMap,M=new WeakMap,B=new WeakMap,P=new WeakMap,o=new WeakSet,Tr=function(E){const q=ae=>{this.editorDiv.style.fontSize=`calc(${ae}px * var(--scale-factor))`,this.translate(0,-(ae-A(this,B))*this.parentScale),Re(this,B,ae),ve(this,o,gt).call(this)},oe=A(this,B);this.addCommands({cmd:()=>{q(E)},undo:()=>{q(oe)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Pr=function(E){const q=A(this,w);this.addCommands({cmd:()=>{Re(this,w,this.editorDiv.style.color=E)},undo:()=>{Re(this,w,this.editorDiv.style.color=q)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Cr=function(){const E=this.editorDiv.getElementsByTagName("div");if(E.length===0)return this.editorDiv.innerText;const q=[];for(const oe of E)q.push(oe.innerText.replace(/\r\n?|\n/,""));return q.join(`
`)},gt=function(){const[E,q]=this.parentDimensions;let oe;if(this.isAttachedToDOM)oe=this.div.getBoundingClientRect();else{const{currentLayer:ae,div:ue}=this,re=ue.style.display;ue.style.display="hidden",ae.div.append(this.div),oe=ue.getBoundingClientRect(),ue.remove(),ue.style.display=re}this.rotation%180===this.parentRotation%180?(this.width=oe.width/E,this.height=oe.height/q):(this.width=oe.height/E,this.height=oe.width/q),this.fixAndSetPosition()},Qt=function(){if(this.editorDiv.replaceChildren(),!!A(this,I))for(const E of A(this,I).split(`
`)){const q=document.createElement("div");q.append(E?document.createTextNode(E):document.createElement("br")),this.editorDiv.append(q)}},xr=function(E){const{value:q,fontSize:oe,color:ae,rect:ue,pageIndex:re}=A(this,P);return E.value!==q||E.fontSize!==oe||E.rect.some((pe,H)=>Math.abs(pe-ue[H])>=1)||E.color.some((pe,H)=>pe!==ae[H])||E.pageIndex!==re},er=function(E=!1){if(!this.annotationElementId)return;if(ve(this,o,gt).call(this),!E&&(this.width===0||this.height===0)){setTimeout(()=>ve(this,o,er).call(this,!0),0);return}const q=R._internalPadding*this.parentScale;A(this,P).rect=this.getRect(q,q)},Ye(R,"_freeTextDefaultContent",""),Ye(R,"_internalPadding",0),Ye(R,"_defaultColor",null),Ye(R,"_defaultFontSize",10),Ye(R,"_type","freetext");let k=R;e.FreeTextEditor=k},(t,e,n)=>{var p,C,it,Or,Q,L,N,se,ge,Ae,he,de,K,V,me,_e,Ce,ke,te,J,Se,Te,kr,Rt,tr,rr,be,Me,Le,ee,ie,O,we,nr,d,G,ce,U,Mr,ir;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var r=n(1),c=n(6),m=n(3),_=n(30),k=n(31),g=n(32);const v=1e3,a=9,S=new WeakSet;function w(Ie){return{width:Ie[2]-Ie[0],height:Ie[3]-Ie[1]}}class I{static create(Z){switch(Z.data.annotationType){case r.AnnotationType.LINK:return new B(Z);case r.AnnotationType.TEXT:return new P(Z);case r.AnnotationType.WIDGET:switch(Z.data.fieldType){case"Tx":return new h(Z);case"Btn":return Z.data.radioButton?new l(Z):Z.data.checkBox?new b(Z):new y(Z);case"Ch":return new u(Z);case"Sig":return new x(Z)}return new o(Z);case r.AnnotationType.POPUP:return new T(Z);case r.AnnotationType.FREETEXT:return new X(Z);case r.AnnotationType.LINE:return new D(Z);case r.AnnotationType.SQUARE:return new E(Z);case r.AnnotationType.CIRCLE:return new q(Z);case r.AnnotationType.POLYLINE:return new oe(Z);case r.AnnotationType.CARET:return new ue(Z);case r.AnnotationType.INK:return new re(Z);case r.AnnotationType.POLYGON:return new ae(Z);case r.AnnotationType.HIGHLIGHT:return new pe(Z);case r.AnnotationType.UNDERLINE:return new H(Z);case r.AnnotationType.SQUIGGLY:return new W(Z);case r.AnnotationType.STRIKEOUT:return new ne(Z);case r.AnnotationType.STAMP:return new j(Z);case r.AnnotationType.FILEATTACHMENT:return new s(Z);default:return new M(Z)}}}const f=class f{constructor(Z,{isRenderable:Y=!1,ignoreBorder:fe=!1,createQuadrilaterals:xe=!1}={}){Ee(this,p,!1);this.isRenderable=Y,this.data=Z.data,this.layer=Z.layer,this.linkService=Z.linkService,this.downloadManager=Z.downloadManager,this.imageResourcesPath=Z.imageResourcesPath,this.renderForms=Z.renderForms,this.svgFactory=Z.svgFactory,this.annotationStorage=Z.annotationStorage,this.enableScripting=Z.enableScripting,this.hasJSActions=Z.hasJSActions,this._fieldObjects=Z.fieldObjects,this.parent=Z.parent,Y&&(this.container=this._createContainer(fe)),xe&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Z,contentsObj:Y,richText:fe}){return!!(Z!=null&&Z.str||Y!=null&&Y.str||fe!=null&&fe.str)}get hasPopupData(){return f._hasPopupData(this.data)}_createContainer(Z){const{data:Y,parent:{page:fe,viewport:xe}}=this,Pe=document.createElement("section");Pe.setAttribute("data-annotation-id",Y.id),this instanceof o||(Pe.tabIndex=v),Pe.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Pe.setAttribute("aria-haspopup","dialog"),Y.noRotate&&Pe.classList.add("norotate");const{pageWidth:Oe,pageHeight:Fe,pageX:He,pageY:We}=xe.rawDims;if(!Y.rect||this instanceof T){const{rotation:Ge}=Y;return!Y.hasOwnCanvas&&Ge!==0&&this.setRotation(Ge,Pe),Pe}const{width:Be,height:$e}=w(Y.rect),je=r.Util.normalizeRect([Y.rect[0],fe.view[3]-Y.rect[1]+fe.view[1],Y.rect[2],fe.view[3]-Y.rect[3]+fe.view[1]]);if(!Z&&Y.borderStyle.width>0){Pe.style.borderWidth=`${Y.borderStyle.width}px`;const Ge=Y.borderStyle.horizontalCornerRadius,Ve=Y.borderStyle.verticalCornerRadius;if(Ge>0||Ve>0){const Ke=`calc(${Ge}px * var(--scale-factor)) / calc(${Ve}px * var(--scale-factor))`;Pe.style.borderRadius=Ke}else if(this instanceof l){const Ke=`calc(${Be}px * var(--scale-factor)) / calc(${$e}px * var(--scale-factor))`;Pe.style.borderRadius=Ke}switch(Y.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:Pe.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:Pe.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:Pe.style.borderBottomStyle="solid";break}const Xe=Y.borderColor||null;Xe?(Re(this,p,!0),Pe.style.borderColor=r.Util.makeHexColor(Xe[0]|0,Xe[1]|0,Xe[2]|0)):Pe.style.borderWidth=0}Pe.style.left=`${100*(je[0]-He)/Oe}%`,Pe.style.top=`${100*(je[1]-We)/Fe}%`;const{rotation:ze}=Y;return Y.hasOwnCanvas||ze===0?(Pe.style.width=`${100*Be/Oe}%`,Pe.style.height=`${100*$e/Fe}%`):this.setRotation(ze,Pe),Pe}setRotation(Z,Y=this.container){if(!this.data.rect)return;const{pageWidth:fe,pageHeight:xe}=this.parent.viewport.rawDims,{width:Pe,height:Oe}=w(this.data.rect);let Fe,He;Z%180===0?(Fe=100*Pe/fe,He=100*Oe/xe):(Fe=100*Oe/fe,He=100*Pe/xe),Y.style.width=`${Fe}%`,Y.style.height=`${He}%`,Y.setAttribute("data-main-rotation",(360-Z)%360)}get _commonActions(){const Z=(Y,fe,xe)=>{const Pe=xe.detail[Y],Oe=Pe[0],Fe=Pe.slice(1);xe.target.style[fe]=_.ColorConverters[`${Oe}_HTML`](Fe),this.annotationStorage.setValue(this.data.id,{[fe]:_.ColorConverters[`${Oe}_rgb`](Fe)})};return(0,r.shadow)(this,"_commonActions",{display:Y=>{const{display:fe}=Y.detail,xe=fe%2===1;this.container.style.visibility=xe?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:xe,noPrint:fe===1||fe===2})},print:Y=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Y.detail.print})},hidden:Y=>{const{hidden:fe}=Y.detail;this.container.style.visibility=fe?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:fe,noView:fe})},focus:Y=>{setTimeout(()=>Y.target.focus({preventScroll:!1}),0)},userName:Y=>{Y.target.title=Y.detail.userName},readonly:Y=>{Y.target.disabled=Y.detail.readonly},required:Y=>{this._setRequired(Y.target,Y.detail.required)},bgColor:Y=>{Z("bgColor","backgroundColor",Y)},fillColor:Y=>{Z("fillColor","backgroundColor",Y)},fgColor:Y=>{Z("fgColor","color",Y)},textColor:Y=>{Z("textColor","color",Y)},borderColor:Y=>{Z("borderColor","borderColor",Y)},strokeColor:Y=>{Z("strokeColor","borderColor",Y)},rotation:Y=>{const fe=Y.detail.rotation;this.setRotation(fe),this.annotationStorage.setValue(this.data.id,{rotation:fe})}})}_dispatchEventFromSandbox(Z,Y){const fe=this._commonActions;for(const xe of Object.keys(Y.detail)){const Pe=Z[xe]||fe[xe];Pe==null||Pe(Y)}}_setDefaultPropertiesFromJS(Z){if(!this.enableScripting)return;const Y=this.annotationStorage.getRawValue(this.data.id);if(!Y)return;const fe=this._commonActions;for(const[xe,Pe]of Object.entries(Y)){const Oe=fe[xe];if(Oe){const Fe={detail:{[xe]:Pe},target:Z};Oe(Fe),delete Y[xe]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Z}=this.data;if(!Z)return;const[Y,fe,xe,Pe]=this.data.rect;if(Z.length===1){const[,{x:Ve,y:Xe},{x:Ke,y:Je}]=Z[0];if(xe===Ve&&Pe===Xe&&Y===Ke&&fe===Je)return}const{style:Oe}=this.container;let Fe;if(A(this,p)){const{borderColor:Ve,borderWidth:Xe}=Oe;Oe.borderWidth=0,Fe=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ve}" stroke-width="${Xe}">`],this.container.classList.add("hasBorder")}const He=xe-Y,We=Pe-fe,{svgFactory:Be}=this,$e=Be.createElement("svg");$e.classList.add("quadrilateralsContainer"),$e.setAttribute("width",0),$e.setAttribute("height",0);const je=Be.createElement("defs");$e.append(je);const ze=Be.createElement("clipPath"),Ge=`clippath_${this.data.id}`;ze.setAttribute("id",Ge),ze.setAttribute("clipPathUnits","objectBoundingBox"),je.append(ze);for(const[,{x:Ve,y:Xe},{x:Ke,y:Je}]of Z){const Ze=Be.createElement("rect"),et=(Ke-Y)/He,rt=(Pe-Xe)/We,nt=(Ve-Ke)/He,dr=(Xe-Je)/We;Ze.setAttribute("x",et),Ze.setAttribute("y",rt),Ze.setAttribute("width",nt),Ze.setAttribute("height",dr),ze.append(Ze),Fe==null||Fe.push(`<rect vector-effect="non-scaling-stroke" x="${et}" y="${rt}" width="${nt}" height="${dr}"/>`)}A(this,p)&&(Fe.push("</g></svg>')"),Oe.backgroundImage=Fe.join("")),this.container.append($e),this.container.style.clipPath=`url(#${Ge})`}_createPopup(){const{container:Z,data:Y}=this;Z.setAttribute("aria-haspopup","dialog");const fe=new T({data:{color:Y.color,titleObj:Y.titleObj,modificationDate:Y.modificationDate,contentsObj:Y.contentsObj,richText:Y.richText,parentRect:Y.rect,borderStyle:0,id:`popup_${Y.id}`,rotation:Y.rotation},parent:this.parent,elements:[this]});this.parent.div.append(fe.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Z,Y=null){const fe=[];if(this._fieldObjects){const xe=this._fieldObjects[Z];if(xe)for(const{page:Pe,id:Oe,exportValues:Fe}of xe){if(Pe===-1||Oe===Y)continue;const He=typeof Fe=="string"?Fe:null,We=document.querySelector(`[data-element-id="${Oe}"]`);if(We&&!S.has(We)){(0,r.warn)(`_getElementsByName - element not allowed: ${Oe}`);continue}fe.push({id:Oe,exportValue:He,domElement:We})}return fe}for(const xe of document.getElementsByName(Z)){const{exportValue:Pe}=xe,Oe=xe.getAttribute("data-element-id");Oe!==Y&&S.has(xe)&&fe.push({id:Oe,exportValue:Pe,domElement:xe})}return fe}show(){var Z;this.container&&(this.container.hidden=!1),(Z=this.popup)==null||Z.maybeShow()}hide(){var Z;this.container&&(this.container.hidden=!0),(Z=this.popup)==null||Z.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Z=this.getElementsToTriggerPopup();if(Array.isArray(Z))for(const Y of Z)Y.classList.add("highlightArea");else Z.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Z,data:{id:Y}}=this;this.container.addEventListener("dblclick",()=>{var fe;(fe=this.linkService.eventBus)==null||fe.dispatch("switchannotationeditormode",{source:this,mode:Z,editId:Y})})}};p=new WeakMap;let M=f;class B extends M{constructor(Y,fe=null){super(Y,{isRenderable:!0,ignoreBorder:!!(fe!=null&&fe.ignoreBorder),createQuadrilaterals:!0});Ee(this,C);this.isTooltipOnly=Y.data.isTooltipOnly}render(){const{data:Y,linkService:fe}=this,xe=document.createElement("a");xe.setAttribute("data-element-id",Y.id);let Pe=!1;return Y.url?(fe.addLinkAttributes(xe,Y.url,Y.newWindow),Pe=!0):Y.action?(this._bindNamedAction(xe,Y.action),Pe=!0):Y.attachment?(this._bindAttachment(xe,Y.attachment),Pe=!0):Y.setOCGState?(ve(this,C,Or).call(this,xe,Y.setOCGState),Pe=!0):Y.dest?(this._bindLink(xe,Y.dest),Pe=!0):(Y.actions&&(Y.actions.Action||Y.actions["Mouse Up"]||Y.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(xe,Y),Pe=!0),Y.resetForm?(this._bindResetFormAction(xe,Y.resetForm),Pe=!0):this.isTooltipOnly&&!Pe&&(this._bindLink(xe,""),Pe=!0)),this.container.classList.add("linkAnnotation"),Pe&&this.container.append(xe),this.container}_bindLink(Y,fe){Y.href=this.linkService.getDestinationHash(fe),Y.onclick=()=>(fe&&this.linkService.goToDestination(fe),!1),(fe||fe==="")&&ve(this,C,it).call(this)}_bindNamedAction(Y,fe){Y.href=this.linkService.getAnchorUrl(""),Y.onclick=()=>(this.linkService.executeNamedAction(fe),!1),ve(this,C,it).call(this)}_bindAttachment(Y,fe){Y.href=this.linkService.getAnchorUrl(""),Y.onclick=()=>{var xe;return(xe=this.downloadManager)==null||xe.openOrDownloadData(this.container,fe.content,fe.filename),!1},ve(this,C,it).call(this)}_bindJSAction(Y,fe){Y.href=this.linkService.getAnchorUrl("");const xe=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Pe of Object.keys(fe.actions)){const Oe=xe.get(Pe);Oe&&(Y[Oe]=()=>{var Fe;return(Fe=this.linkService.eventBus)==null||Fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:fe.id,name:Pe}}),!1})}Y.onclick||(Y.onclick=()=>!1),ve(this,C,it).call(this)}_bindResetFormAction(Y,fe){const xe=Y.onclick;if(xe||(Y.href=this.linkService.getAnchorUrl("")),ve(this,C,it).call(this),!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),xe||(Y.onclick=()=>!1);return}Y.onclick=()=>{var $e;xe==null||xe();const{fields:Pe,refs:Oe,include:Fe}=fe,He=[];if(Pe.length!==0||Oe.length!==0){const je=new Set(Oe);for(const ze of Pe){const Ge=this._fieldObjects[ze]||[];for(const{id:Ve}of Ge)je.add(Ve)}for(const ze of Object.values(this._fieldObjects))for(const Ge of ze)je.has(Ge.id)===Fe&&He.push(Ge)}else for(const je of Object.values(this._fieldObjects))He.push(...je);const We=this.annotationStorage,Be=[];for(const je of He){const{id:ze}=je;switch(Be.push(ze),je.type){case"text":{const Ve=je.defaultValue||"";We.setValue(ze,{value:Ve});break}case"checkbox":case"radiobutton":{const Ve=je.defaultValue===je.exportValues;We.setValue(ze,{value:Ve});break}case"combobox":case"listbox":{const Ve=je.defaultValue||"";We.setValue(ze,{value:Ve});break}default:continue}const Ge=document.querySelector(`[data-element-id="${ze}"]`);if(Ge){if(!S.has(Ge)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${ze}`);continue}}else continue;Ge.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(($e=this.linkService.eventBus)==null||$e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Be,name:"ResetForm"}})),!1}}}C=new WeakSet,it=function(){this.container.setAttribute("data-internal-link","")},Or=function(Y,fe){Y.href=this.linkService.getAnchorUrl(""),Y.onclick=()=>(this.linkService.executeSetOCGState(fe),!1),ve(this,C,it).call(this)};class P extends M{constructor(Z){super(Z,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Z=document.createElement("img");return Z.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Z.alt="[{{type}} Annotation]",Z.dataset.l10nId="text_annotation_type",Z.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Z),this.container}}class o extends M{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Z){var Y;this.data.hasOwnCanvas&&(((Y=Z.previousSibling)==null?void 0:Y.nodeName)==="CANVAS"&&(Z.previousSibling.hidden=!0),Z.hidden=!1)}_getKeyModifier(Z){const{isWin:Y,isMac:fe}=r.FeatureTest.platform;return Y&&Z.ctrlKey||fe&&Z.metaKey}_setEventListener(Z,Y,fe,xe,Pe){fe.includes("mouse")?Z.addEventListener(fe,Oe=>{var Fe;(Fe=this.linkService.eventBus)==null||Fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:xe,value:Pe(Oe),shift:Oe.shiftKey,modifier:this._getKeyModifier(Oe)}})}):Z.addEventListener(fe,Oe=>{var Fe;if(fe==="blur"){if(!Y.focused||!Oe.relatedTarget)return;Y.focused=!1}else if(fe==="focus"){if(Y.focused)return;Y.focused=!0}Pe&&((Fe=this.linkService.eventBus)==null||Fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:xe,value:Pe(Oe)}}))})}_setEventListeners(Z,Y,fe,xe){var Pe,Oe,Fe;for(const[He,We]of fe)(We==="Action"||(Pe=this.data.actions)!=null&&Pe[We])&&((We==="Focus"||We==="Blur")&&(Y||(Y={focused:!1})),this._setEventListener(Z,Y,He,We,xe),We==="Focus"&&!((Oe=this.data.actions)!=null&&Oe.Blur)?this._setEventListener(Z,Y,"blur","Blur",null):We==="Blur"&&!((Fe=this.data.actions)!=null&&Fe.Focus)&&this._setEventListener(Z,Y,"focus","Focus",null))}_setBackgroundColor(Z){const Y=this.data.backgroundColor||null;Z.style.backgroundColor=Y===null?"transparent":r.Util.makeHexColor(Y[0],Y[1],Y[2])}_setTextStyle(Z){const Y=["left","center","right"],{fontColor:fe}=this.data.defaultAppearanceData,xe=this.data.defaultAppearanceData.fontSize||a,Pe=Z.style;let Oe;const Fe=2,He=We=>Math.round(10*We)/10;if(this.data.multiLine){const We=Math.abs(this.data.rect[3]-this.data.rect[1]-Fe),Be=Math.round(We/(r.LINE_FACTOR*xe))||1,$e=We/Be;Oe=Math.min(xe,He($e/r.LINE_FACTOR))}else{const We=Math.abs(this.data.rect[3]-this.data.rect[1]-Fe);Oe=Math.min(xe,He(We/r.LINE_FACTOR))}Pe.fontSize=`calc(${Oe}px * var(--scale-factor))`,Pe.color=r.Util.makeHexColor(fe[0],fe[1],fe[2]),this.data.textAlignment!==null&&(Pe.textAlign=Y[this.data.textAlignment])}_setRequired(Z,Y){Y?Z.setAttribute("required",!0):Z.removeAttribute("required"),Z.setAttribute("aria-required",Y)}}class h extends o{constructor(Z){const Y=Z.renderForms||!Z.data.hasAppearance&&!!Z.data.fieldValue;super(Z,{isRenderable:Y})}setPropertyOnSiblings(Z,Y,fe,xe){const Pe=this.annotationStorage;for(const Oe of this._getElementsByName(Z.name,Z.id))Oe.domElement&&(Oe.domElement[Y]=fe),Pe.setValue(Oe.id,{[xe]:fe})}render(){var xe,Pe;const Z=this.annotationStorage,Y=this.data.id;this.container.classList.add("textWidgetAnnotation");let fe=null;if(this.renderForms){const Oe=Z.getValue(Y,{value:this.data.fieldValue});let Fe=Oe.value||"";const He=Z.getValue(Y,{charLimit:this.data.maxLen}).charLimit;He&&Fe.length>He&&(Fe=Fe.slice(0,He));let We=Oe.formattedValue||((xe=this.data.textContent)==null?void 0:xe.join(`
`))||null;We&&this.data.comb&&(We=We.replaceAll(/\s+/g,""));const Be={userValue:Fe,formattedValue:We,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(fe=document.createElement("textarea"),fe.textContent=We??Fe,this.data.doNotScroll&&(fe.style.overflowY="hidden")):(fe=document.createElement("input"),fe.type="text",fe.setAttribute("value",We??Fe),this.data.doNotScroll&&(fe.style.overflowX="hidden")),this.data.hasOwnCanvas&&(fe.hidden=!0),S.add(fe),fe.setAttribute("data-element-id",Y),fe.disabled=this.data.readOnly,fe.name=this.data.fieldName,fe.tabIndex=v,this._setRequired(fe,this.data.required),He&&(fe.maxLength=He),fe.addEventListener("input",je=>{Z.setValue(Y,{value:je.target.value}),this.setPropertyOnSiblings(fe,"value",je.target.value,"value"),Be.formattedValue=null}),fe.addEventListener("resetform",je=>{const ze=this.data.defaultFieldValue??"";fe.value=Be.userValue=ze,Be.formattedValue=null});let $e=je=>{const{formattedValue:ze}=Be;ze!=null&&(je.target.value=ze),je.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){fe.addEventListener("focus",ze=>{if(Be.focused)return;const{target:Ge}=ze;Be.userValue&&(Ge.value=Be.userValue),Be.lastCommittedValue=Ge.value,Be.commitKey=1,Be.focused=!0}),fe.addEventListener("updatefromsandbox",ze=>{this.showElementAndHideCanvas(ze.target);const Ge={value(Ve){Be.userValue=Ve.detail.value??"",Z.setValue(Y,{value:Be.userValue.toString()}),Ve.target.value=Be.userValue},formattedValue(Ve){const{formattedValue:Xe}=Ve.detail;Be.formattedValue=Xe,Xe!=null&&Ve.target!==document.activeElement&&(Ve.target.value=Xe),Z.setValue(Y,{formattedValue:Xe})},selRange(Ve){Ve.target.setSelectionRange(...Ve.detail.selRange)},charLimit:Ve=>{var Ze;const{charLimit:Xe}=Ve.detail,{target:Ke}=Ve;if(Xe===0){Ke.removeAttribute("maxLength");return}Ke.setAttribute("maxLength",Xe);let Je=Be.userValue;!Je||Je.length<=Xe||(Je=Je.slice(0,Xe),Ke.value=Be.userValue=Je,Z.setValue(Y,{value:Je}),(Ze=this.linkService.eventBus)==null||Ze.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Y,name:"Keystroke",value:Je,willCommit:!0,commitKey:1,selStart:Ke.selectionStart,selEnd:Ke.selectionEnd}}))}};this._dispatchEventFromSandbox(Ge,ze)}),fe.addEventListener("keydown",ze=>{var Xe;Be.commitKey=1;let Ge=-1;if(ze.key==="Escape"?Ge=0:ze.key==="Enter"&&!this.data.multiLine?Ge=2:ze.key==="Tab"&&(Be.commitKey=3),Ge===-1)return;const{value:Ve}=ze.target;Be.lastCommittedValue!==Ve&&(Be.lastCommittedValue=Ve,Be.userValue=Ve,(Xe=this.linkService.eventBus)==null||Xe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Y,name:"Keystroke",value:Ve,willCommit:!0,commitKey:Ge,selStart:ze.target.selectionStart,selEnd:ze.target.selectionEnd}}))});const je=$e;$e=null,fe.addEventListener("blur",ze=>{var Ve;if(!Be.focused||!ze.relatedTarget)return;Be.focused=!1;const{value:Ge}=ze.target;Be.userValue=Ge,Be.lastCommittedValue!==Ge&&((Ve=this.linkService.eventBus)==null||Ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Y,name:"Keystroke",value:Ge,willCommit:!0,commitKey:Be.commitKey,selStart:ze.target.selectionStart,selEnd:ze.target.selectionEnd}})),je(ze)}),(Pe=this.data.actions)!=null&&Pe.Keystroke&&fe.addEventListener("beforeinput",ze=>{var rt;Be.lastCommittedValue=null;const{data:Ge,target:Ve}=ze,{value:Xe,selectionStart:Ke,selectionEnd:Je}=Ve;let Ze=Ke,et=Je;switch(ze.inputType){case"deleteWordBackward":{const nt=Xe.substring(0,Ke).match(/\w*[^\w]*$/);nt&&(Ze-=nt[0].length);break}case"deleteWordForward":{const nt=Xe.substring(Ke).match(/^[^\w]*\w*/);nt&&(et+=nt[0].length);break}case"deleteContentBackward":Ke===Je&&(Ze-=1);break;case"deleteContentForward":Ke===Je&&(et+=1);break}ze.preventDefault(),(rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Y,name:"Keystroke",value:Xe,change:Ge||"",willCommit:!1,selStart:Ze,selEnd:et}})}),this._setEventListeners(fe,Be,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ze=>ze.target.value)}if($e&&fe.addEventListener("blur",$e),this.data.comb){const ze=(this.data.rect[2]-this.data.rect[0])/He;fe.classList.add("comb"),fe.style.letterSpacing=`calc(${ze}px * var(--scale-factor) - 1ch)`}}else fe=document.createElement("div"),fe.textContent=this.data.fieldValue,fe.style.verticalAlign="middle",fe.style.display="table-cell";return this._setTextStyle(fe),this._setBackgroundColor(fe),this._setDefaultPropertiesFromJS(fe),this.container.append(fe),this.container}}class x extends o{constructor(Z){super(Z,{isRenderable:!!Z.data.hasOwnCanvas})}}class b extends o{constructor(Z){super(Z,{isRenderable:Z.renderForms})}render(){const Z=this.annotationStorage,Y=this.data,fe=Y.id;let xe=Z.getValue(fe,{value:Y.exportValue===Y.fieldValue}).value;typeof xe=="string"&&(xe=xe!=="Off",Z.setValue(fe,{value:xe})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Pe=document.createElement("input");return S.add(Pe),Pe.setAttribute("data-element-id",fe),Pe.disabled=Y.readOnly,this._setRequired(Pe,this.data.required),Pe.type="checkbox",Pe.name=Y.fieldName,xe&&Pe.setAttribute("checked",!0),Pe.setAttribute("exportValue",Y.exportValue),Pe.tabIndex=v,Pe.addEventListener("change",Oe=>{const{name:Fe,checked:He}=Oe.target;for(const We of this._getElementsByName(Fe,fe)){const Be=He&&We.exportValue===Y.exportValue;We.domElement&&(We.domElement.checked=Be),Z.setValue(We.id,{value:Be})}Z.setValue(fe,{value:He})}),Pe.addEventListener("resetform",Oe=>{const Fe=Y.defaultFieldValue||"Off";Oe.target.checked=Fe===Y.exportValue}),this.enableScripting&&this.hasJSActions&&(Pe.addEventListener("updatefromsandbox",Oe=>{const Fe={value(He){He.target.checked=He.detail.value!=="Off",Z.setValue(fe,{value:He.target.checked})}};this._dispatchEventFromSandbox(Fe,Oe)}),this._setEventListeners(Pe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Oe=>Oe.target.checked)),this._setBackgroundColor(Pe),this._setDefaultPropertiesFromJS(Pe),this.container.append(Pe),this.container}}class l extends o{constructor(Z){super(Z,{isRenderable:Z.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Z=this.annotationStorage,Y=this.data,fe=Y.id;let xe=Z.getValue(fe,{value:Y.fieldValue===Y.buttonValue}).value;typeof xe=="string"&&(xe=xe!==Y.buttonValue,Z.setValue(fe,{value:xe}));const Pe=document.createElement("input");if(S.add(Pe),Pe.setAttribute("data-element-id",fe),Pe.disabled=Y.readOnly,this._setRequired(Pe,this.data.required),Pe.type="radio",Pe.name=Y.fieldName,xe&&Pe.setAttribute("checked",!0),Pe.tabIndex=v,Pe.addEventListener("change",Oe=>{const{name:Fe,checked:He}=Oe.target;for(const We of this._getElementsByName(Fe,fe))Z.setValue(We.id,{value:!1});Z.setValue(fe,{value:He})}),Pe.addEventListener("resetform",Oe=>{const Fe=Y.defaultFieldValue;Oe.target.checked=Fe!=null&&Fe===Y.buttonValue}),this.enableScripting&&this.hasJSActions){const Oe=Y.buttonValue;Pe.addEventListener("updatefromsandbox",Fe=>{const He={value:We=>{const Be=Oe===We.detail.value;for(const $e of this._getElementsByName(We.target.name)){const je=Be&&$e.id===fe;$e.domElement&&($e.domElement.checked=je),Z.setValue($e.id,{value:je})}}};this._dispatchEventFromSandbox(He,Fe)}),this._setEventListeners(Pe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Fe=>Fe.target.checked)}return this._setBackgroundColor(Pe),this._setDefaultPropertiesFromJS(Pe),this.container.append(Pe),this.container}}class y extends B{constructor(Z){super(Z,{ignoreBorder:Z.data.hasAppearance})}render(){const Z=super.render();Z.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Z.title=this.data.alternativeText);const Y=Z.lastChild;return this.enableScripting&&this.hasJSActions&&Y&&(this._setDefaultPropertiesFromJS(Y),Y.addEventListener("updatefromsandbox",fe=>{this._dispatchEventFromSandbox({},fe)})),Z}}class u extends o{constructor(Z){super(Z,{isRenderable:Z.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Z=this.annotationStorage,Y=this.data.id,fe=Z.getValue(Y,{value:this.data.fieldValue}),xe=document.createElement("select");S.add(xe),xe.setAttribute("data-element-id",Y),xe.disabled=this.data.readOnly,this._setRequired(xe,this.data.required),xe.name=this.data.fieldName,xe.tabIndex=v;let Pe=this.data.combo&&this.data.options.length>0;this.data.combo||(xe.size=this.data.options.length,this.data.multiSelect&&(xe.multiple=!0)),xe.addEventListener("resetform",Be=>{const $e=this.data.defaultFieldValue;for(const je of xe.options)je.selected=je.value===$e});for(const Be of this.data.options){const $e=document.createElement("option");$e.textContent=Be.displayValue,$e.value=Be.exportValue,fe.value.includes(Be.exportValue)&&($e.setAttribute("selected",!0),Pe=!1),xe.append($e)}let Oe=null;if(Pe){const Be=document.createElement("option");Be.value=" ",Be.setAttribute("hidden",!0),Be.setAttribute("selected",!0),xe.prepend(Be),Oe=()=>{Be.remove(),xe.removeEventListener("input",Oe),Oe=null},xe.addEventListener("input",Oe)}const Fe=Be=>{const $e=Be?"value":"textContent",{options:je,multiple:ze}=xe;return ze?Array.prototype.filter.call(je,Ge=>Ge.selected).map(Ge=>Ge[$e]):je.selectedIndex===-1?null:je[je.selectedIndex][$e]};let He=Fe(!1);const We=Be=>{const $e=Be.target.options;return Array.prototype.map.call($e,je=>({displayValue:je.textContent,exportValue:je.value}))};return this.enableScripting&&this.hasJSActions?(xe.addEventListener("updatefromsandbox",Be=>{const $e={value(je){Oe==null||Oe();const ze=je.detail.value,Ge=new Set(Array.isArray(ze)?ze:[ze]);for(const Ve of xe.options)Ve.selected=Ge.has(Ve.value);Z.setValue(Y,{value:Fe(!0)}),He=Fe(!1)},multipleSelection(je){xe.multiple=!0},remove(je){const ze=xe.options,Ge=je.detail.remove;ze[Ge].selected=!1,xe.remove(Ge),ze.length>0&&Array.prototype.findIndex.call(ze,Xe=>Xe.selected)===-1&&(ze[0].selected=!0),Z.setValue(Y,{value:Fe(!0),items:We(je)}),He=Fe(!1)},clear(je){for(;xe.length!==0;)xe.remove(0);Z.setValue(Y,{value:null,items:[]}),He=Fe(!1)},insert(je){const{index:ze,displayValue:Ge,exportValue:Ve}=je.detail.insert,Xe=xe.children[ze],Ke=document.createElement("option");Ke.textContent=Ge,Ke.value=Ve,Xe?Xe.before(Ke):xe.append(Ke),Z.setValue(Y,{value:Fe(!0),items:We(je)}),He=Fe(!1)},items(je){const{items:ze}=je.detail;for(;xe.length!==0;)xe.remove(0);for(const Ge of ze){const{displayValue:Ve,exportValue:Xe}=Ge,Ke=document.createElement("option");Ke.textContent=Ve,Ke.value=Xe,xe.append(Ke)}xe.options.length>0&&(xe.options[0].selected=!0),Z.setValue(Y,{value:Fe(!0),items:We(je)}),He=Fe(!1)},indices(je){const ze=new Set(je.detail.indices);for(const Ge of je.target.options)Ge.selected=ze.has(Ge.index);Z.setValue(Y,{value:Fe(!0)}),He=Fe(!1)},editable(je){je.target.disabled=!je.detail.editable}};this._dispatchEventFromSandbox($e,Be)}),xe.addEventListener("input",Be=>{var je;const $e=Fe(!0);Z.setValue(Y,{value:$e}),Be.preventDefault(),(je=this.linkService.eventBus)==null||je.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Y,name:"Keystroke",value:He,changeEx:$e,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(xe,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Be=>Be.target.value)):xe.addEventListener("input",function(Be){Z.setValue(Y,{value:Fe(!0)})}),this.data.combo&&this._setTextStyle(xe),this._setBackgroundColor(xe),this._setDefaultPropertiesFromJS(xe),this.container.append(xe),this.container}}class T extends M{constructor(Z){const{data:Y,elements:fe}=Z;super(Z,{isRenderable:M._hasPopupData(Y)}),this.elements=fe}render(){this.container.classList.add("popupAnnotation");const Z=new R({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Y=[];for(const fe of this.elements)fe.popup=Z,Y.push(fe.data.id),fe.addHighlightArea();return this.container.setAttribute("aria-controls",Y.map(fe=>`${r.AnnotationPrefix}${fe}`).join(",")),this.container}}class R{constructor({container:Z,color:Y,elements:fe,titleObj:xe,modificationDate:Pe,contentsObj:Oe,richText:Fe,parent:He,rect:We,parentRect:Be,open:$e}){Ee(this,Te);Ee(this,Q,null);Ee(this,L,ve(this,Te,kr).bind(this));Ee(this,N,ve(this,Te,rr).bind(this));Ee(this,se,ve(this,Te,tr).bind(this));Ee(this,ge,ve(this,Te,Rt).bind(this));Ee(this,Ae,null);Ee(this,he,null);Ee(this,de,null);Ee(this,K,null);Ee(this,V,null);Ee(this,me,null);Ee(this,_e,!1);Ee(this,Ce,null);Ee(this,ke,null);Ee(this,te,null);Ee(this,J,null);Ee(this,Se,!1);var ze;Re(this,he,Z),Re(this,J,xe),Re(this,de,Oe),Re(this,te,Fe),Re(this,V,He),Re(this,Ae,Y),Re(this,ke,We),Re(this,me,Be),Re(this,K,fe);const je=c.PDFDateString.toDateObject(Pe);je&&Re(this,Q,He.l10n.get("annotation_date_string",{date:je.toLocaleDateString(),time:je.toLocaleTimeString()})),this.trigger=fe.flatMap(Ge=>Ge.getElementsToTriggerPopup());for(const Ge of this.trigger)Ge.addEventListener("click",A(this,ge)),Ge.addEventListener("mouseenter",A(this,se)),Ge.addEventListener("mouseleave",A(this,N)),Ge.classList.add("popupTriggerArea");for(const Ge of fe)(ze=Ge.container)==null||ze.addEventListener("keydown",A(this,L));A(this,he).hidden=!0,$e&&ve(this,Te,Rt).call(this)}render(){if(A(this,Ce))return;const{page:{view:Z},viewport:{rawDims:{pageWidth:Y,pageHeight:fe,pageX:xe,pageY:Pe}}}=A(this,V),Oe=Re(this,Ce,document.createElement("div"));if(Oe.className="popup",A(this,Ae)){const Ze=Oe.style.outlineColor=r.Util.makeHexColor(...A(this,Ae));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Oe.style.backgroundColor=`color-mix(in srgb, ${Ze} 30%, white)`:Oe.style.backgroundColor=r.Util.makeHexColor(...A(this,Ae).map(rt=>Math.floor(.7*(255-rt)+rt)))}const Fe=document.createElement("span");Fe.className="header";const He=document.createElement("h1");if(Fe.append(He),{dir:He.dir,str:He.textContent}=A(this,J),Oe.append(Fe),A(this,Q)){const Ze=document.createElement("span");Ze.classList.add("popupDate"),A(this,Q).then(et=>{Ze.textContent=et}),Fe.append(Ze)}const We=A(this,de),Be=A(this,te);if(Be!=null&&Be.str&&(!(We!=null&&We.str)||We.str===Be.str))g.XfaLayer.render({xfaHtml:Be.html,intent:"richText",div:Oe}),Oe.lastChild.classList.add("richText","popupContent");else{const Ze=this._formatContents(We);Oe.append(Ze)}let $e=!!A(this,me),je=$e?A(this,me):A(this,ke);for(const Ze of A(this,K))if(!je||r.Util.intersect(Ze.data.rect,je)!==null){je=Ze.data.rect,$e=!0;break}const ze=r.Util.normalizeRect([je[0],Z[3]-je[1]+Z[1],je[2],Z[3]-je[3]+Z[1]]),Ve=$e?je[2]-je[0]+5:0,Xe=ze[0]+Ve,Ke=ze[1],{style:Je}=A(this,he);Je.left=`${100*(Xe-xe)/Y}%`,Je.top=`${100*(Ke-Pe)/fe}%`,A(this,he).append(Oe)}_formatContents({str:Z,dir:Y}){const fe=document.createElement("p");fe.classList.add("popupContent"),fe.dir=Y;const xe=Z.split(/(?:\r\n?|\n)/);for(let Pe=0,Oe=xe.length;Pe<Oe;++Pe){const Fe=xe[Pe];fe.append(document.createTextNode(Fe)),Pe<Oe-1&&fe.append(document.createElement("br"))}return fe}forceHide(){Re(this,Se,this.isVisible),A(this,Se)&&(A(this,he).hidden=!0)}maybeShow(){A(this,Se)&&(Re(this,Se,!1),A(this,he).hidden=!1)}get isVisible(){return A(this,he).hidden===!1}}Q=new WeakMap,L=new WeakMap,N=new WeakMap,se=new WeakMap,ge=new WeakMap,Ae=new WeakMap,he=new WeakMap,de=new WeakMap,K=new WeakMap,V=new WeakMap,me=new WeakMap,_e=new WeakMap,Ce=new WeakMap,ke=new WeakMap,te=new WeakMap,J=new WeakMap,Se=new WeakMap,Te=new WeakSet,kr=function(Z){Z.altKey||Z.shiftKey||Z.ctrlKey||Z.metaKey||(Z.key==="Enter"||Z.key==="Escape"&&A(this,_e))&&ve(this,Te,Rt).call(this)},Rt=function(){Re(this,_e,!A(this,_e)),A(this,_e)?(ve(this,Te,tr).call(this),A(this,he).addEventListener("click",A(this,ge)),A(this,he).addEventListener("keydown",A(this,L))):(ve(this,Te,rr).call(this),A(this,he).removeEventListener("click",A(this,ge)),A(this,he).removeEventListener("keydown",A(this,L)))},tr=function(){A(this,Ce)||this.render(),this.isVisible?A(this,_e)&&A(this,he).classList.add("focused"):(A(this,he).hidden=!1,A(this,he).style.zIndex=parseInt(A(this,he).style.zIndex)+1e3)},rr=function(){A(this,he).classList.remove("focused"),!(A(this,_e)||!this.isVisible)&&(A(this,he).hidden=!0,A(this,he).style.zIndex=parseInt(A(this,he).style.zIndex)-1e3)};class X extends M{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Z.data.textContent,this.textPosition=Z.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Z=document.createElement("div");Z.classList.add("annotationTextContent"),Z.setAttribute("role","comment");for(const Y of this.textContent){const fe=document.createElement("span");fe.textContent=Y,Z.append(fe)}this.container.append(Z)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=X;class D extends M{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0});Ee(this,be,null)}render(){this.container.classList.add("lineAnnotation");const Y=this.data,{width:fe,height:xe}=w(Y.rect),Pe=this.svgFactory.create(fe,xe,!0),Oe=Re(this,be,this.svgFactory.createElement("svg:line"));return Oe.setAttribute("x1",Y.rect[2]-Y.lineCoordinates[0]),Oe.setAttribute("y1",Y.rect[3]-Y.lineCoordinates[1]),Oe.setAttribute("x2",Y.rect[2]-Y.lineCoordinates[2]),Oe.setAttribute("y2",Y.rect[3]-Y.lineCoordinates[3]),Oe.setAttribute("stroke-width",Y.borderStyle.width||1),Oe.setAttribute("stroke","transparent"),Oe.setAttribute("fill","transparent"),Pe.append(Oe),this.container.append(Pe),!Y.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return A(this,be)}addHighlightArea(){this.container.classList.add("highlightArea")}}be=new WeakMap;class E extends M{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0});Ee(this,Me,null)}render(){this.container.classList.add("squareAnnotation");const Y=this.data,{width:fe,height:xe}=w(Y.rect),Pe=this.svgFactory.create(fe,xe,!0),Oe=Y.borderStyle.width,Fe=Re(this,Me,this.svgFactory.createElement("svg:rect"));return Fe.setAttribute("x",Oe/2),Fe.setAttribute("y",Oe/2),Fe.setAttribute("width",fe-Oe),Fe.setAttribute("height",xe-Oe),Fe.setAttribute("stroke-width",Oe||1),Fe.setAttribute("stroke","transparent"),Fe.setAttribute("fill","transparent"),Pe.append(Fe),this.container.append(Pe),!Y.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return A(this,Me)}addHighlightArea(){this.container.classList.add("highlightArea")}}Me=new WeakMap;class q extends M{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0});Ee(this,Le,null)}render(){this.container.classList.add("circleAnnotation");const Y=this.data,{width:fe,height:xe}=w(Y.rect),Pe=this.svgFactory.create(fe,xe,!0),Oe=Y.borderStyle.width,Fe=Re(this,Le,this.svgFactory.createElement("svg:ellipse"));return Fe.setAttribute("cx",fe/2),Fe.setAttribute("cy",xe/2),Fe.setAttribute("rx",fe/2-Oe/2),Fe.setAttribute("ry",xe/2-Oe/2),Fe.setAttribute("stroke-width",Oe||1),Fe.setAttribute("stroke","transparent"),Fe.setAttribute("fill","transparent"),Pe.append(Fe),this.container.append(Pe),!Y.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return A(this,Le)}addHighlightArea(){this.container.classList.add("highlightArea")}}Le=new WeakMap;class oe extends M{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0});Ee(this,ee,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Y=this.data,{width:fe,height:xe}=w(Y.rect),Pe=this.svgFactory.create(fe,xe,!0);let Oe=[];for(const He of Y.vertices){const We=He.x-Y.rect[0],Be=Y.rect[3]-He.y;Oe.push(We+","+Be)}Oe=Oe.join(" ");const Fe=Re(this,ee,this.svgFactory.createElement(this.svgElementName));return Fe.setAttribute("points",Oe),Fe.setAttribute("stroke-width",Y.borderStyle.width||1),Fe.setAttribute("stroke","transparent"),Fe.setAttribute("fill","transparent"),Pe.append(Fe),this.container.append(Pe),!Y.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return A(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap;class ae extends oe{constructor(Z){super(Z),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ue extends M{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class re extends M{constructor(Y){super(Y,{isRenderable:!0,ignoreBorder:!0});Ee(this,ie,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Y=this.data,{width:fe,height:xe}=w(Y.rect),Pe=this.svgFactory.create(fe,xe,!0);for(const Oe of Y.inkLists){let Fe=[];for(const We of Oe){const Be=We.x-Y.rect[0],$e=Y.rect[3]-We.y;Fe.push(`${Be},${$e}`)}Fe=Fe.join(" ");const He=this.svgFactory.createElement(this.svgElementName);A(this,ie).push(He),He.setAttribute("points",Fe),He.setAttribute("stroke-width",Y.borderStyle.width||1),He.setAttribute("stroke","transparent"),He.setAttribute("fill","transparent"),!Y.popupRef&&this.hasPopupData&&this._createPopup(),Pe.append(He)}return this.container.append(Pe),this.container}getElementsToTriggerPopup(){return A(this,ie)}addHighlightArea(){this.container.classList.add("highlightArea")}}ie=new WeakMap,e.InkAnnotationElement=re;class pe extends M{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class H extends M{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class W extends M{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ne extends M{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class j extends M{constructor(Z){super(Z,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=j;class s extends M{constructor(Y){var Pe;super(Y,{isRenderable:!0});Ee(this,we);Ee(this,O,null);const{filename:fe,content:xe}=this.data.file;this.filename=(0,c.getFilenameFromUrl)(fe,!0),this.content=xe,(Pe=this.linkService.eventBus)==null||Pe.dispatch("fileattachmentannotation",{source:this,filename:fe,content:xe})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Y,data:fe}=this;let xe;fe.hasAppearance||fe.fillAlpha===0?xe=document.createElement("div"):(xe=document.createElement("img"),xe.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(fe.name)?"paperclip":"pushpin"}.svg`,fe.fillAlpha&&fe.fillAlpha<1&&(xe.style=`filter: opacity(${Math.round(fe.fillAlpha*100)}%);`)),xe.addEventListener("dblclick",ve(this,we,nr).bind(this)),Re(this,O,xe);const{isMac:Pe}=r.FeatureTest.platform;return Y.addEventListener("keydown",Oe=>{Oe.key==="Enter"&&(Pe?Oe.metaKey:Oe.ctrlKey)&&ve(this,we,nr).call(this)}),!fe.popupRef&&this.hasPopupData?this._createPopup():xe.classList.add("popupTriggerArea"),Y.append(xe),Y}getElementsToTriggerPopup(){return A(this,O)}addHighlightArea(){this.container.classList.add("highlightArea")}}O=new WeakMap,we=new WeakSet,nr=function(){var Y;(Y=this.downloadManager)==null||Y.openOrDownloadData(this.container,this.content,this.filename)};class i{constructor({div:Z,accessibilityManager:Y,annotationCanvasMap:fe,l10n:xe,page:Pe,viewport:Oe}){Ee(this,U);Ee(this,d,null);Ee(this,G,null);Ee(this,ce,new Map);this.div=Z,Re(this,d,Y),Re(this,G,fe),this.l10n=xe,this.page=Pe,this.viewport=Oe,this.zIndex=0,this.l10n||(this.l10n=k.NullL10n)}async render(Z){const{annotations:Y}=Z,fe=this.div;(0,c.setLayerDimensions)(fe,this.viewport);const xe=new Map,Pe={data:null,layer:fe,linkService:Z.linkService,downloadManager:Z.downloadManager,imageResourcesPath:Z.imageResourcesPath||"",renderForms:Z.renderForms!==!1,svgFactory:new c.DOMSVGFactory,annotationStorage:Z.annotationStorage||new m.AnnotationStorage,enableScripting:Z.enableScripting===!0,hasJSActions:Z.hasJSActions,fieldObjects:Z.fieldObjects,parent:this,elements:null};for(const Oe of Y){if(Oe.noHTML)continue;const Fe=Oe.annotationType===r.AnnotationType.POPUP;if(Fe){const Be=xe.get(Oe.id);if(!Be)continue;Pe.elements=Be}else{const{width:Be,height:$e}=w(Oe.rect);if(Be<=0||$e<=0)continue}Pe.data=Oe;const He=I.create(Pe);if(!He.isRenderable)continue;if(!Fe&&Oe.popupRef){const Be=xe.get(Oe.popupRef);Be?Be.push(He):xe.set(Oe.popupRef,[He])}He.annotationEditorType>0&&A(this,ce).set(He.data.id,He);const We=He.render();Oe.hidden&&(We.style.visibility="hidden"),ve(this,U,Mr).call(this,We,Oe.id)}ve(this,U,ir).call(this),await this.l10n.translate(fe)}update({viewport:Z}){const Y=this.div;this.viewport=Z,(0,c.setLayerDimensions)(Y,{rotation:Z.rotation}),ve(this,U,ir).call(this),Y.hidden=!1}getEditableAnnotations(){return Array.from(A(this,ce).values())}getEditableAnnotation(Z){return A(this,ce).get(Z)}}d=new WeakMap,G=new WeakMap,ce=new WeakMap,U=new WeakSet,Mr=function(Z,Y){var xe;const fe=Z.firstChild||Z;fe.id=`${r.AnnotationPrefix}${Y}`,this.div.append(Z),(xe=A(this,d))==null||xe.moveElementInDOM(this.div,Z,fe,!1)},ir=function(){if(!A(this,G))return;const Z=this.div;for(const[Y,fe]of A(this,G)){const xe=Z.querySelector(`[data-annotation-id="${Y}"]`);if(!xe)continue;const{firstChild:Pe}=xe;Pe?Pe.nodeName==="CANVAS"?Pe.replaceWith(fe):Pe.before(fe):xe.append(fe)}A(this,G).clear()},e.AnnotationLayer=i},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function n(m){return Math.floor(Math.max(0,Math.min(1,m))*255).toString(16).padStart(2,"0")}function r(m){return Math.max(0,Math.min(255,255*m))}class c{static CMYK_G([_,k,g,v]){return["G",1-Math.min(1,.3*_+.59*g+.11*k+v)]}static G_CMYK([_]){return["CMYK",0,0,0,1-_]}static G_RGB([_]){return["RGB",_,_,_]}static G_rgb([_]){return _=r(_),[_,_,_]}static G_HTML([_]){const k=n(_);return`#${k}${k}${k}`}static RGB_G([_,k,g]){return["G",.3*_+.59*k+.11*g]}static RGB_rgb(_){return _.map(r)}static RGB_HTML(_){return`#${_.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([_,k,g,v]){return["RGB",1-Math.min(1,_+v),1-Math.min(1,g+v),1-Math.min(1,k+v)]}static CMYK_rgb([_,k,g,v]){return[r(1-Math.min(1,_+v)),r(1-Math.min(1,g+v)),r(1-Math.min(1,k+v))]}static CMYK_HTML(_){const k=this.CMYK_RGB(_).slice(1);return this.RGB_HTML(k)}static RGB_CMYK([_,k,g]){const v=1-_,a=1-k,S=1-g,w=Math.min(v,a,S);return["CMYK",v,a,S,w]}}e.ColorConverters=c},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=r;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function r(_,k){switch(_){case"find_match_count":_=`find_match_count[${k.total===1?"one":"other"}]`;break;case"find_match_count_limit":_=`find_match_count_limit[${k.limit===1?"one":"other"}]`;break}return n[_]||""}function c(_,k){return k?_.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(g,v)=>v in k?k[v]:"{{"+v+"}}"):_}const m={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(_,k=null,g=r(_,k)){return c(g,k)},async translate(_){}};e.NullL10n=m},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=n(25);class c{static setupStorage(_,k,g,v,a){const S=v.getValue(k,{value:null});switch(g.name){case"textarea":if(S.value!==null&&(_.textContent=S.value),a==="print")break;_.addEventListener("input",w=>{v.setValue(k,{value:w.target.value})});break;case"input":if(g.attributes.type==="radio"||g.attributes.type==="checkbox"){if(S.value===g.attributes.xfaOn?_.setAttribute("checked",!0):S.value===g.attributes.xfaOff&&_.removeAttribute("checked"),a==="print")break;_.addEventListener("change",w=>{v.setValue(k,{value:w.target.checked?w.target.getAttribute("xfaOn"):w.target.getAttribute("xfaOff")})})}else{if(S.value!==null&&_.setAttribute("value",S.value),a==="print")break;_.addEventListener("input",w=>{v.setValue(k,{value:w.target.value})})}break;case"select":if(S.value!==null){_.setAttribute("value",S.value);for(const w of g.children)w.attributes.value===S.value?w.attributes.selected=!0:w.attributes.hasOwnProperty("selected")&&delete w.attributes.selected}_.addEventListener("input",w=>{const I=w.target.options,M=I.selectedIndex===-1?"":I[I.selectedIndex].value;v.setValue(k,{value:M})});break}}static setAttributes({html:_,element:k,storage:g=null,intent:v,linkService:a}){const{attributes:S}=k,w=_ instanceof HTMLAnchorElement;S.type==="radio"&&(S.name=`${S.name}-${v}`);for(const[I,M]of Object.entries(S))if(M!=null)switch(I){case"class":M.length&&_.setAttribute(I,M.join(" "));break;case"dataId":break;case"id":_.setAttribute("data-element-id",M);break;case"style":Object.assign(_.style,M);break;case"textContent":_.textContent=M;break;default:(!w||I!=="href"&&I!=="newWindow")&&_.setAttribute(I,M)}w&&a.addLinkAttributes(_,S.href,S.newWindow),g&&S.dataId&&this.setupStorage(_,S.dataId,k,g)}static render(_){var B;const k=_.annotationStorage,g=_.linkService,v=_.xfaHtml,a=_.intent||"display",S=document.createElement(v.name);v.attributes&&this.setAttributes({html:S,element:v,intent:a,linkService:g});const w=[[v,-1,S]],I=_.div;if(I.append(S),_.viewport){const P=`matrix(${_.viewport.transform.join(",")})`;I.style.transform=P}a!=="richText"&&I.setAttribute("class","xfaLayer xfaFont");const M=[];for(;w.length>0;){const[P,o,h]=w.at(-1);if(o+1===P.children.length){w.pop();continue}const x=P.children[++w.at(-1)[1]];if(x===null)continue;const{name:b}=x;if(b==="#text"){const y=document.createTextNode(x.value);M.push(y),h.append(y);continue}const l=(B=x==null?void 0:x.attributes)!=null&&B.xmlns?document.createElementNS(x.attributes.xmlns,b):document.createElement(b);if(h.append(l),x.attributes&&this.setAttributes({html:l,element:x,storage:k,intent:a,linkService:g}),x.children&&x.children.length>0)w.push([x,-1,l]);else if(x.value){const y=document.createTextNode(x.value);r.XfaText.shouldBuildText(b)&&M.push(y),l.append(y)}}for(const P of I.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))P.setAttribute("readOnly",!0);return{textDivs:M}}static update(_){const k=`matrix(${_.viewport.transform.join(",")})`;_.div.style.transform=k,_.div.hidden=!1}}e.XfaLayer=c},(t,e,n)=>{var v,a,S,w,I,M,B,P,o,h,x,b,l,y,u,Ir,Fr,Dr,Lr,ar,Nr,sr,qr,Br,jr,Ur,Hr,tt,or,Tt,Pt,lt,lr,Ct,C,Wr,cr,zr,Gr,ur,xt,ct;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var r=n(1),c=n(4),m=n(29),_=n(6),k=n(5);const Ae=class Ae extends c.AnnotationEditor{constructor(K){super({...K,name:"inkEditor"});Ee(this,u);Ee(this,v,0);Ee(this,a,0);Ee(this,S,this.canvasPointermove.bind(this));Ee(this,w,this.canvasPointerleave.bind(this));Ee(this,I,this.canvasPointerup.bind(this));Ee(this,M,this.canvasPointerdown.bind(this));Ee(this,B,new Path2D);Ee(this,P,!1);Ee(this,o,!1);Ee(this,h,!1);Ee(this,x,null);Ee(this,b,0);Ee(this,l,0);Ee(this,y,null);this.color=K.color||null,this.thickness=K.thickness||null,this.opacity=K.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(K){c.AnnotationEditor.initialize(K,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(K,V){switch(K){case r.AnnotationEditorParamsType.INK_THICKNESS:Ae._defaultThickness=V;break;case r.AnnotationEditorParamsType.INK_COLOR:Ae._defaultColor=V;break;case r.AnnotationEditorParamsType.INK_OPACITY:Ae._defaultOpacity=V/100;break}}updateParams(K,V){switch(K){case r.AnnotationEditorParamsType.INK_THICKNESS:ve(this,u,Ir).call(this,V);break;case r.AnnotationEditorParamsType.INK_COLOR:ve(this,u,Fr).call(this,V);break;case r.AnnotationEditorParamsType.INK_OPACITY:ve(this,u,Dr).call(this,V);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,Ae._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,Ae._defaultColor||c.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ae._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ae._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||Ae._defaultColor||c.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ae._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(ve(this,u,Tt).call(this),ve(this,u,Pt).call(this)),this.isAttachedToDOM||(this.parent.add(this),ve(this,u,lt).call(this)),ve(this,u,ct).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,A(this,x).disconnect(),Re(this,x,null),super.remove())}setParent(K){!this.parent&&K?this._uiManager.removeShouldRescale(this):this.parent&&K===null&&this._uiManager.addShouldRescale(this),super.setParent(K)}onScaleChanging(){const[K,V]=this.parentDimensions,me=this.width*K,_e=this.height*V;this.setDimensions(me,_e)}enableEditMode(){A(this,P)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",A(this,M)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",A(this,M)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){A(this,P)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Re(this,P,!0),this.div.classList.add("disabled"),ve(this,u,ct).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(K){this._focusEventsAllowed&&(super.focusin(K),this.enableEditMode())}canvasPointerdown(K){K.button!==0||!this.isInEditMode()||A(this,P)||(this.setInForeground(),K.preventDefault(),K.type!=="mouse"&&this.div.focus(),ve(this,u,Nr).call(this,K.offsetX,K.offsetY))}canvasPointermove(K){K.preventDefault(),ve(this,u,sr).call(this,K.offsetX,K.offsetY)}canvasPointerup(K){K.preventDefault(),ve(this,u,or).call(this,K)}canvasPointerleave(K){ve(this,u,or).call(this,K)}get isResizable(){return!this.isEmpty()&&A(this,P)}render(){if(this.div)return this.div;let K,V;this.width&&(K=this.x,V=this.y),super.render(),c.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(te=>{var J;return(J=this.div)==null?void 0:J.setAttribute("aria-label",te)});const[me,_e,Ce,ke]=ve(this,u,Lr).call(this);if(this.setAt(me,_e,0,0),this.setDims(Ce,ke),ve(this,u,Tt).call(this),this.width){const[te,J]=this.parentDimensions;this.setAspectRatio(this.width*te,this.height*J),this.setAt(K*te,V*J,this.width*te,this.height*J),Re(this,h,!0),ve(this,u,lt).call(this),this.setDims(this.width*te,this.height*J),ve(this,u,tt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ve(this,u,Pt).call(this),this.div}setDimensions(K,V){const me=Math.round(K),_e=Math.round(V);if(A(this,b)===me&&A(this,l)===_e)return;Re(this,b,me),Re(this,l,_e),this.canvas.style.visibility="hidden";const[Ce,ke]=this.parentDimensions;this.width=K/Ce,this.height=V/ke,this.fixAndSetPosition(),A(this,P)&&ve(this,u,lr).call(this,K,V),ve(this,u,lt).call(this),ve(this,u,tt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(K,V,me){var be,Me,Le;if(K instanceof m.InkAnnotationElement)return null;const _e=super.deserialize(K,V,me);_e.thickness=K.thickness,_e.color=r.Util.makeHexColor(...K.color),_e.opacity=K.opacity;const[Ce,ke]=_e.pageDimensions,te=_e.width*Ce,J=_e.height*ke,Se=_e.parentScale,Te=K.thickness/2;Re(_e,P,!0),Re(_e,b,Math.round(te)),Re(_e,l,Math.round(J));const{paths:De,rect:Ne,rotation:Ue}=K;for(let{bezier:ee}of De){ee=ve(be=Ae,C,zr).call(be,ee,Ne,Ue);const ie=[];_e.paths.push(ie);let O=Se*(ee[0]-Te),we=Se*(ee[1]-Te);for(let d=2,G=ee.length;d<G;d+=6){const ce=Se*(ee[d]-Te),U=Se*(ee[d+1]-Te),le=Se*(ee[d+2]-Te),ye=Se*(ee[d+3]-Te),Ie=Se*(ee[d+4]-Te),Z=Se*(ee[d+5]-Te);ie.push([[O,we],[ce,U],[le,ye],[Ie,Z]]),O=Ie,we=Z}const qe=ve(this,C,Wr).call(this,ie);_e.bezierPath2D.push(qe)}const $=ve(Me=_e,u,ur).call(Me);return Re(_e,a,Math.max(c.AnnotationEditor.MIN_SIZE,$[2]-$[0])),Re(_e,v,Math.max(c.AnnotationEditor.MIN_SIZE,$[3]-$[1])),ve(Le=_e,u,lr).call(Le,te,J),_e}serialize(){if(this.isEmpty())return null;const K=this.getRect(0,0),V=c.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:V,thickness:this.thickness,opacity:this.opacity,paths:ve(this,u,Gr).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,K),pageIndex:this.pageIndex,rect:K,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};v=new WeakMap,a=new WeakMap,S=new WeakMap,w=new WeakMap,I=new WeakMap,M=new WeakMap,B=new WeakMap,P=new WeakMap,o=new WeakMap,h=new WeakMap,x=new WeakMap,b=new WeakMap,l=new WeakMap,y=new WeakMap,u=new WeakSet,Ir=function(K){const V=this.thickness;this.addCommands({cmd:()=>{this.thickness=K,ve(this,u,ct).call(this)},undo:()=>{this.thickness=V,ve(this,u,ct).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Fr=function(K){const V=this.color;this.addCommands({cmd:()=>{this.color=K,ve(this,u,tt).call(this)},undo:()=>{this.color=V,ve(this,u,tt).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Dr=function(K){K/=100;const V=this.opacity;this.addCommands({cmd:()=>{this.opacity=K,ve(this,u,tt).call(this)},undo:()=>{this.opacity=V,ve(this,u,tt).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Lr=function(){const{parentRotation:K,parentDimensions:[V,me]}=this;switch(K){case 90:return[0,me,me,V];case 180:return[V,me,V,me];case 270:return[V,0,me,V];default:return[0,0,V,me]}},ar=function(){const{ctx:K,color:V,opacity:me,thickness:_e,parentScale:Ce,scaleFactor:ke}=this;K.lineWidth=_e*Ce/ke,K.lineCap="round",K.lineJoin="round",K.miterLimit=10,K.strokeStyle=`${V}${(0,k.opacityToHex)(me)}`},Nr=function(K,V){this.canvas.addEventListener("contextmenu",_.noContextMenu),this.canvas.addEventListener("pointerleave",A(this,w)),this.canvas.addEventListener("pointermove",A(this,S)),this.canvas.addEventListener("pointerup",A(this,I)),this.canvas.removeEventListener("pointerdown",A(this,M)),this.isEditing=!0,A(this,h)||(Re(this,h,!0),ve(this,u,lt).call(this),this.thickness||(this.thickness=Ae._defaultThickness),this.color||(this.color=Ae._defaultColor||c.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ae._defaultOpacity)),this.currentPath.push([K,V]),Re(this,o,!1),ve(this,u,ar).call(this),Re(this,y,()=>{ve(this,u,jr).call(this),A(this,y)&&window.requestAnimationFrame(A(this,y))}),window.requestAnimationFrame(A(this,y))},sr=function(K,V){const[me,_e]=this.currentPath.at(-1);if(this.currentPath.length>1&&K===me&&V===_e)return;const Ce=this.currentPath;let ke=A(this,B);if(Ce.push([K,V]),Re(this,o,!0),Ce.length<=2){ke.moveTo(...Ce[0]),ke.lineTo(K,V);return}Ce.length===3&&(Re(this,B,ke=new Path2D),ke.moveTo(...Ce[0])),ve(this,u,Ur).call(this,ke,...Ce.at(-3),...Ce.at(-2),K,V)},qr=function(){if(this.currentPath.length===0)return;const K=this.currentPath.at(-1);A(this,B).lineTo(...K)},Br=function(K,V){Re(this,y,null),K=Math.min(Math.max(K,0),this.canvas.width),V=Math.min(Math.max(V,0),this.canvas.height),ve(this,u,sr).call(this,K,V),ve(this,u,qr).call(this);let me;if(this.currentPath.length!==1)me=ve(this,u,Hr).call(this);else{const J=[K,V];me=[[J,J.slice(),J.slice(),J]]}const _e=A(this,B),Ce=this.currentPath;this.currentPath=[],Re(this,B,new Path2D);const ke=()=>{this.allRawPaths.push(Ce),this.paths.push(me),this.bezierPath2D.push(_e),this.rebuild()},te=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ve(this,u,Tt).call(this),ve(this,u,Pt).call(this)),ve(this,u,ct).call(this))};this.addCommands({cmd:ke,undo:te,mustExec:!0})},jr=function(){if(!A(this,o))return;Re(this,o,!1);const K=Math.ceil(this.thickness*this.parentScale),V=this.currentPath.slice(-3),me=V.map(ke=>ke[0]),_e=V.map(ke=>ke[1]);Math.min(...me)-K,Math.max(...me)+K,Math.min(..._e)-K,Math.max(..._e)+K;const{ctx:Ce}=this;Ce.save(),Ce.clearRect(0,0,this.canvas.width,this.canvas.height);for(const ke of this.bezierPath2D)Ce.stroke(ke);Ce.stroke(A(this,B)),Ce.restore()},Ur=function(K,V,me,_e,Ce,ke,te){const J=(V+_e)/2,Se=(me+Ce)/2,Te=(_e+ke)/2,De=(Ce+te)/2;K.bezierCurveTo(J+2*(_e-J)/3,Se+2*(Ce-Se)/3,Te+2*(_e-Te)/3,De+2*(Ce-De)/3,Te,De)},Hr=function(){const K=this.currentPath;if(K.length<=2)return[[K[0],K[0],K.at(-1),K.at(-1)]];const V=[];let me,[_e,Ce]=K[0];for(me=1;me<K.length-2;me++){const[Ne,Ue]=K[me],[$,be]=K[me+1],Me=(Ne+$)/2,Le=(Ue+be)/2,ee=[_e+2*(Ne-_e)/3,Ce+2*(Ue-Ce)/3],ie=[Me+2*(Ne-Me)/3,Le+2*(Ue-Le)/3];V.push([[_e,Ce],ee,ie,[Me,Le]]),[_e,Ce]=[Me,Le]}const[ke,te]=K[me],[J,Se]=K[me+1],Te=[_e+2*(ke-_e)/3,Ce+2*(te-Ce)/3],De=[J+2*(ke-J)/3,Se+2*(te-Se)/3];return V.push([[_e,Ce],Te,De,[J,Se]]),V},tt=function(){if(this.isEmpty()){ve(this,u,Ct).call(this);return}ve(this,u,ar).call(this);const{canvas:K,ctx:V}=this;V.setTransform(1,0,0,1,0,0),V.clearRect(0,0,K.width,K.height),ve(this,u,Ct).call(this);for(const me of this.bezierPath2D)V.stroke(me)},or=function(K){this.canvas.removeEventListener("pointerleave",A(this,w)),this.canvas.removeEventListener("pointermove",A(this,S)),this.canvas.removeEventListener("pointerup",A(this,I)),this.canvas.addEventListener("pointerdown",A(this,M)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",_.noContextMenu)},10),ve(this,u,Br).call(this,K.offsetX,K.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Tt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",c.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(K=>{var V;return(V=this.canvas)==null?void 0:V.setAttribute("aria-label",K)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Pt=function(){Re(this,x,new ResizeObserver(K=>{const V=K[0].contentRect;V.width&&V.height&&this.setDimensions(V.width,V.height)})),A(this,x).observe(this.div)},lt=function(){if(!A(this,h))return;const[K,V]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*K),this.canvas.height=Math.ceil(this.height*V),ve(this,u,Ct).call(this)},lr=function(K,V){const me=ve(this,u,xt).call(this),_e=(K-me)/A(this,a),Ce=(V-me)/A(this,v);this.scaleFactor=Math.min(_e,Ce)},Ct=function(){const K=ve(this,u,xt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+K,this.translationY*this.scaleFactor+K)},C=new WeakSet,Wr=function(K){const V=new Path2D;for(let me=0,_e=K.length;me<_e;me++){const[Ce,ke,te,J]=K[me];me===0&&V.moveTo(...Ce),V.bezierCurveTo(ke[0],ke[1],te[0],te[1],J[0],J[1])}return V},cr=function(K,V,me){const[_e,Ce,ke,te]=V;switch(me){case 0:for(let J=0,Se=K.length;J<Se;J+=2)K[J]+=_e,K[J+1]=te-K[J+1];break;case 90:for(let J=0,Se=K.length;J<Se;J+=2){const Te=K[J];K[J]=K[J+1]+_e,K[J+1]=Te+Ce}break;case 180:for(let J=0,Se=K.length;J<Se;J+=2)K[J]=ke-K[J],K[J+1]+=Ce;break;case 270:for(let J=0,Se=K.length;J<Se;J+=2){const Te=K[J];K[J]=ke-K[J+1],K[J+1]=te-Te}break;default:throw new Error("Invalid rotation")}return K},zr=function(K,V,me){const[_e,Ce,ke,te]=V;switch(me){case 0:for(let J=0,Se=K.length;J<Se;J+=2)K[J]-=_e,K[J+1]=te-K[J+1];break;case 90:for(let J=0,Se=K.length;J<Se;J+=2){const Te=K[J];K[J]=K[J+1]-Ce,K[J+1]=Te-_e}break;case 180:for(let J=0,Se=K.length;J<Se;J+=2)K[J]=ke-K[J],K[J+1]-=Ce;break;case 270:for(let J=0,Se=K.length;J<Se;J+=2){const Te=K[J];K[J]=te-K[J+1],K[J+1]=ke-Te}break;default:throw new Error("Invalid rotation")}return K},Gr=function(K,V,me,_e){var Se,Te;const Ce=[],ke=this.thickness/2,te=K*V+ke,J=K*me+ke;for(const De of this.paths){const Ne=[],Ue=[];for(let $=0,be=De.length;$<be;$++){const[Me,Le,ee,ie]=De[$],O=K*Me[0]+te,we=K*Me[1]+J,qe=K*Le[0]+te,d=K*Le[1]+J,G=K*ee[0]+te,ce=K*ee[1]+J,U=K*ie[0]+te,le=K*ie[1]+J;$===0&&(Ne.push(O,we),Ue.push(O,we)),Ne.push(qe,d,G,ce,U,le),Ue.push(qe,d),$===be-1&&Ue.push(U,le)}Ce.push({bezier:ve(Se=Ae,C,cr).call(Se,Ne,_e,this.rotation),points:ve(Te=Ae,C,cr).call(Te,Ue,_e,this.rotation)})}return Ce},ur=function(){let K=1/0,V=-1/0,me=1/0,_e=-1/0;for(const Ce of this.paths)for(const[ke,te,J,Se]of Ce){const Te=r.Util.bezierBoundingBox(...ke,...te,...J,...Se);K=Math.min(K,Te[0]),me=Math.min(me,Te[1]),V=Math.max(V,Te[2]),_e=Math.max(_e,Te[3])}return[K,me,V,_e]},xt=function(){return A(this,P)?Math.ceil(this.thickness*this.parentScale):0},ct=function(K=!1){if(this.isEmpty())return;if(!A(this,P)){ve(this,u,tt).call(this);return}const V=ve(this,u,ur).call(this),me=ve(this,u,xt).call(this);Re(this,a,Math.max(c.AnnotationEditor.MIN_SIZE,V[2]-V[0])),Re(this,v,Math.max(c.AnnotationEditor.MIN_SIZE,V[3]-V[1]));const _e=Math.ceil(me+A(this,a)*this.scaleFactor),Ce=Math.ceil(me+A(this,v)*this.scaleFactor),[ke,te]=this.parentDimensions;this.width=_e/ke,this.height=Ce/te,this.setAspectRatio(_e,Ce);const J=this.translationX,Se=this.translationY;this.translationX=-V[0],this.translationY=-V[1],ve(this,u,lt).call(this),ve(this,u,tt).call(this),Re(this,b,_e),Re(this,l,Ce),this.setDims(_e,Ce);const Te=K?me/this.scaleFactor/2:0;this.translate(J-this.translationX-Te,Se-this.translationY-Te)},Ee(Ae,C),Ye(Ae,"_defaultColor",null),Ye(Ae,"_defaultOpacity",1),Ye(Ae,"_defaultThickness",1),Ye(Ae,"_type","ink");let g=Ae;e.InkEditor=g},(t,e,n)=>{var g,v,a,S,w,I,M,B,P,o,h,mt,yt,Ot,hr,$r,Vr,fr,kt,Xr;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var r=n(1),c=n(4),m=n(6),_=n(29);const E=class E extends c.AnnotationEditor{constructor(ae){super({...ae,name:"stampEditor"});Ee(this,h);Ee(this,g,null);Ee(this,v,null);Ee(this,a,null);Ee(this,S,null);Ee(this,w,null);Ee(this,I,null);Ee(this,M,null);Ee(this,B,null);Ee(this,P,!1);Ee(this,o,!1);Re(this,S,ae.bitmapUrl),Re(this,w,ae.bitmapFile)}static initialize(ae){c.AnnotationEditor.initialize(ae)}static get supportedTypes(){const ae=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,r.shadow)(this,"supportedTypes",ae.map(ue=>`image/${ue}`))}static get supportedTypesStr(){return(0,r.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(ae){return this.supportedTypes.includes(ae)}static paste(ae,ue){ue.pasteEditor(r.AnnotationEditorType.STAMP,{bitmapFile:ae.getAsFile()})}remove(){var ae,ue;A(this,v)&&(Re(this,g,null),this._uiManager.imageManager.deleteId(A(this,v)),(ae=A(this,I))==null||ae.remove(),Re(this,I,null),(ue=A(this,M))==null||ue.disconnect(),Re(this,M,null)),super.remove()}rebuild(){if(!this.parent){A(this,v)&&ve(this,h,Ot).call(this);return}super.rebuild(),this.div!==null&&(A(this,v)&&ve(this,h,Ot).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(A(this,a)||A(this,g)||A(this,S)||A(this,w))}get isResizable(){return!0}render(){if(this.div)return this.div;let ae,ue;if(this.width&&(ae=this.x,ue=this.y),super.render(),this.div.hidden=!0,A(this,g)?ve(this,h,hr).call(this):ve(this,h,Ot).call(this),this.width){const[re,pe]=this.parentDimensions;this.setAt(ae*re,ue*pe,this.width*re,this.height*pe)}return this.div}static deserialize(ae,ue,re){if(ae instanceof _.StampAnnotationElement)return null;const pe=super.deserialize(ae,ue,re),{rect:H,bitmapUrl:W,bitmapId:ne,isSvg:j,accessibilityData:s}=ae;ne&&re.imageManager.isValidId(ne)?Re(pe,v,ne):Re(pe,S,W),Re(pe,P,j);const[i,p]=pe.pageDimensions;return pe.width=(H[2]-H[0])/i,pe.height=(H[3]-H[1])/p,s&&(pe.altTextData=s),pe}serialize(ae=!1,ue=null){if(this.isEmpty())return null;const re={annotationType:r.AnnotationEditorType.STAMP,bitmapId:A(this,v),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:A(this,P),structTreeParentId:this._structTreeParentId};if(ae)return re.bitmapUrl=ve(this,h,kt).call(this,!0),re.accessibilityData=this.altTextData,re;const{decorative:pe,altText:H}=this.altTextData;if(!pe&&H&&(re.accessibilityData={type:"Figure",alt:H}),ue===null)return re;ue.stamps||(ue.stamps=new Map);const W=A(this,P)?(re.rect[2]-re.rect[0])*(re.rect[3]-re.rect[1]):null;if(!ue.stamps.has(A(this,v)))ue.stamps.set(A(this,v),{area:W,serialized:re}),re.bitmap=ve(this,h,kt).call(this,!1);else if(A(this,P)){const ne=ue.stamps.get(A(this,v));W>ne.area&&(ne.area=W,ne.serialized.bitmap.close(),ne.serialized.bitmap=ve(this,h,kt).call(this,!1))}return re}};g=new WeakMap,v=new WeakMap,a=new WeakMap,S=new WeakMap,w=new WeakMap,I=new WeakMap,M=new WeakMap,B=new WeakMap,P=new WeakMap,o=new WeakMap,h=new WeakSet,mt=function(ae,ue=!1){if(!ae){this.remove();return}Re(this,g,ae.bitmap),ue||(Re(this,v,ae.id),Re(this,P,ae.isSvg)),ve(this,h,hr).call(this)},yt=function(){Re(this,a,null),this._uiManager.enableWaiting(!1),A(this,I)&&this.div.focus()},Ot=function(){if(A(this,v)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(A(this,v)).then(ue=>ve(this,h,mt).call(this,ue,!0)).finally(()=>ve(this,h,yt).call(this));return}if(A(this,S)){const ue=A(this,S);Re(this,S,null),this._uiManager.enableWaiting(!0),Re(this,a,this._uiManager.imageManager.getFromUrl(ue).then(re=>ve(this,h,mt).call(this,re)).finally(()=>ve(this,h,yt).call(this)));return}if(A(this,w)){const ue=A(this,w);Re(this,w,null),this._uiManager.enableWaiting(!0),Re(this,a,this._uiManager.imageManager.getFromFile(ue).then(re=>ve(this,h,mt).call(this,re)).finally(()=>ve(this,h,yt).call(this)));return}const ae=document.createElement("input");ae.type="file",ae.accept=E.supportedTypesStr,Re(this,a,new Promise(ue=>{ae.addEventListener("change",async()=>{if(!ae.files||ae.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const re=await this._uiManager.imageManager.getFromFile(ae.files[0]);ve(this,h,mt).call(this,re)}ue()}),ae.addEventListener("cancel",()=>{this.remove(),ue()})}).finally(()=>ve(this,h,yt).call(this))),ae.click()},hr=function(){const{div:ae}=this;let{width:ue,height:re}=A(this,g);const[pe,H]=this.pageDimensions,W=.75;if(this.width)ue=this.width*pe,re=this.height*H;else if(ue>W*pe||re>W*H){const i=Math.min(W*pe/ue,W*H/re);ue*=i,re*=i}const[ne,j]=this.parentDimensions;this.setDims(ue*ne/pe,re*j/H),this._uiManager.enableWaiting(!1);const s=Re(this,I,document.createElement("canvas"));ae.append(s),ae.hidden=!1,ve(this,h,fr).call(this,ue,re),ve(this,h,Xr).call(this),A(this,o)||(this.parent.addUndoableEditor(this),Re(this,o,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},$r=function(ae,ue){var W;const[re,pe]=this.parentDimensions;this.width=ae/re,this.height=ue/pe,this.setDims(ae,ue),(W=this._initialOptions)!=null&&W.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,A(this,B)!==null&&clearTimeout(A(this,B)),Re(this,B,setTimeout(()=>{Re(this,B,null),ve(this,h,fr).call(this,ae,ue)},200))},Vr=function(ae,ue){const{width:re,height:pe}=A(this,g);let H=re,W=pe,ne=A(this,g);for(;H>2*ae||W>2*ue;){const j=H,s=W;H>2*ae&&(H=H>=16384?Math.floor(H/2)-1:Math.ceil(H/2)),W>2*ue&&(W=W>=16384?Math.floor(W/2)-1:Math.ceil(W/2));const i=new OffscreenCanvas(H,W);i.getContext("2d").drawImage(ne,0,0,j,s,0,0,H,W),ne=i.transferToImageBitmap()}return ne},fr=function(ae,ue){ae=Math.ceil(ae),ue=Math.ceil(ue);const re=A(this,I);if(!re||re.width===ae&&re.height===ue)return;re.width=ae,re.height=ue;const pe=A(this,P)?A(this,g):ve(this,h,Vr).call(this,ae,ue),H=re.getContext("2d");H.filter=this._uiManager.hcmFilter,H.drawImage(pe,0,0,pe.width,pe.height,0,0,ae,ue)},kt=function(ae){if(ae){if(A(this,P)){const pe=this._uiManager.imageManager.getSvgUrl(A(this,v));if(pe)return pe}const ue=document.createElement("canvas");return{width:ue.width,height:ue.height}=A(this,g),ue.getContext("2d").drawImage(A(this,g),0,0),ue.toDataURL()}if(A(this,P)){const[ue,re]=this.pageDimensions,pe=Math.round(this.width*ue*m.PixelsPerInch.PDF_TO_CSS_UNITS),H=Math.round(this.height*re*m.PixelsPerInch.PDF_TO_CSS_UNITS),W=new OffscreenCanvas(pe,H);return W.getContext("2d").drawImage(A(this,g),0,0,A(this,g).width,A(this,g).height,0,0,pe,H),W.transferToImageBitmap()}return structuredClone(A(this,g))},Xr=function(){Re(this,M,new ResizeObserver(ae=>{const ue=ae[0].contentRect;ue.width&&ue.height&&ve(this,h,$r).call(this,ue.width,ue.height)})),A(this,M).observe(this.div)},Ye(E,"_type","stamp");let k=E;e.StampEditor=k}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return m.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return _.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return k.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return g.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return v.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return c.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return c.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),c=__w_pdfjs_require__(26),m=__w_pdfjs_require__(27),_=__w_pdfjs_require__(5),k=__w_pdfjs_require__(29),g=__w_pdfjs_require__(14),v=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf_default=getDefaultExportFromCjs(pdfExports),pdf=_mergeNamespaces({__proto__:null,default:pdf_default},[pdfExports]);export{pdf as p};
